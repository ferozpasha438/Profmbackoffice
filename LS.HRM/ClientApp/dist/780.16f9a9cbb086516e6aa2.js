"use strict";(self.webpackChunkclient_app=self.webpackChunkclient_app||[]).push([[780],{8780:(e9,Be,X)=>{X.r(Be),X.d(Be,{OperationalmgtModule:()=>X8});var f=X(8583),vo=X(5174),L=X(4655),l=X(3679),tt=X(9761),et=X(4395),ot=X(7519),it=X(3190),lt=X(8002),t=X(7716),x=X(4021);let q=(()=>{class i{constructor(e){var o;e.SetApiEndPoint(null===(o=e.getUser())||void 0===o?void 0:o.opmUrl)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x._))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-ParentOptMgtComponent"]],decls:0,vars:0,template:function(e,o){},encapsulation:2}),i})();var Ae=X(6738),E=X(1841),b=X(5830),y=X(7278),Z=X(9790),w=X(2013),N=X(7928),ht=X(4727),at=X(1554),G=X(3250),M=X(1627),gt=X(8295),St=X(2458),rt=X(8590);function xo(i,a){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.AsE(" ",e.value,"-",e.text," ")}}function qo(i,a){if(1&i&&(t.TgZ(0,"option",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(t.lcZ(2,2,e.value))}}function bo(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",32),t._uU(4),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=a.day,s=t.oxw(2);t.xp6(2),t.hij(" ",e.employeeNumber," "),t.xp6(1),t.s9C("matTooltip",s.getCellInfo(o,n)),t.xp6(1),t.hij(" ",s.getDay(e)," ")}}function yo(i,a){if(1&i&&(t.TgZ(0,"div",29),t.TgZ(1,"table",30),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"tbody"),t.YNc(10,bo,5,3,"tr",31),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,5,"Employee")," "),t.xp6(3),t.hij(" ",e.form.controls.monthYear.value.toDateString()," "),t.xp6(2),t.Q6J("ngForOf",e.listOfRoasters),t.xp6(3),t.Oqu(t.lcZ(14,7,"Total_Shifts")),t.xp6(3),t.hij(" ",e.totalShiftsCol[e.day]," ")}}let So=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfRoasters=[],this.listOfDays=[],this.sequence=1,this.editsequence=0,this.remarks="",this.shiftsFormControls=new l.Oe([new l.NI("")]),this.noOfDays=0,this.saveEnable=!1,this.editEnable=!1,this.monthYear="",this.employeeNumber="",this.employeeName="",this.s=[],this.custCodeControl=new l.NI("",l.kI.required),this.empCodeControl=new l.NI(""),this.siteCodeList=[],this.customerCode="",this.listOfShiftCodes=[],this.employeeList=[],this.siteCode="",this.projectCode="",this.day=0,this.month=0,this.year=0,this.shiftCode="",this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0,this.newTotalShifts=0,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,tt.O)(this.customerCode),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(m=>(""!==m.trim()&&(this.isDataLoading=!0),this.filterCustCodes(m||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadShiftCodes(){this.apiService.getall("ShiftMaster/getSelectShiftsToSiteBySiteCode/"+this.siteCode).subscribe(e=>{this.listOfShiftCodes=e,this.findNoOfShifts()})}ngOnInit(){let e=new Date(Date.now());this.year=e.getFullYear(),this.setForm(),this.readonly="readonly"}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],monthYear:[""],siteCode:["",l.kI.required],month:[0],year:[this.year],employeeNumber:[""],shiftCode:[""]})}removeEntry(e){this.listOfRoasters.splice(e,1),this.saveEnable=!0,this.findNoOfShifts()}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.employeeNumber.setValue(""),this.form.controls.employeeName.setValue("")}goBack(){window.history.back()}onSelectionCustomerCode(e,o){let n="";n="change"==o?e.target.value:e.option.value,this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){this.form.patchValue({customerCode:s.custCode});let r=this.custCodeControl.value;this.form.value.customerCode=r,this.customerCode=r,this.loadSiteCodes(r)}else this.form.controls.customerCode.setValue(""),this.custCodeControl.setValue(""),this.customerCode="",this.siteCodeList=[]}),this.form.controls.siteCode.setValue(""),this.siteCode="",this.loadData()}onSelectSiteCode(e){const o=e.target.value;this.form.value.siteCode=o,this.form.controls.siteCode.setValue(o),this.siteCode=o,this.loadData()}loadData(){if(""!=this.customerCode&&""!=this.siteCode&&0!=this.month&&0!=this.year){let o=new Date(this.year,this.month-1,1),n=new Date(this.year,this.month,0);this.listOfDays=[],this.noOfDays=n.getDate()-o.getDate()+1,this.apiService.getall(`MonthlyRoaster/getMonthlyRoaster/${this.customerCode}/${this.siteCode}/${this.month}/${this.year}`).subscribe(s=>{this.listOfRoasters=s,this.sequence=this.listOfRoasters.length+1}),this.loadWeekDays(),this.shiftsFormControls.clear();for(var e=1;e<=this.noOfDays;e++)this.shiftsFormControls.push(new l.NI(""));this.loadShiftCodes(),this.listOfShiftCodes=[]}else this.listOfRoasters=[]}loadWeekDays(){this.form.controls.monthYear.setValue(new Date(this.year,this.month-1,this.day));for(var e=1;e<=this.noOfDays;e++){let o=new Date(this.year,this.month-1,e),s={dayText:o.toDateString().substring(0,1),dayNumber:e,dayFullName:o.toDateString()};this.listOfDays.push(s)}}loadSiteCodes(e){this.apiService.getall(`CustomerSite/getSelectSiteListByCustCode/${e}`).subscribe(o=>{this.siteCodeList=o})}openDatePicker(e){e.open()}closeDatePicker(e,o){let s=Ae(e).format("YYYY-MM");this.day=parseInt(s.toString().substring(8,10)),this.month=parseInt(s.toString().substring(5,7)),this.year=Number(s.toString().substring(0,4)),""!=this.customerCode&&""!=this.siteCode&&this.loadData()}findNoOfShifts(){var e;this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0;let o=null===(e=this.listOfShiftCodes.find(c=>"True"==c.textTwo))||void 0===e?void 0:e.value;for(var n=0;n<this.noOfDays;n++){let c=0;for(var s=0;s<this.listOfRoasters.length;s++){let p=0,u=this.listOfRoasters[s];for(var r=0;r<u.s.length;r++)u.s[r]==o||""==u.s[r]||null==u.s[r]||(p++,r==n&&c++);this.totalShiftsRow.push(p)}this.totalShiftsCol.push(c),this.grandTotalShifts=this.grandTotalShifts+this.totalShiftsCol[n]}}RoastersCount(){return this.listOfRoasters.length}getCellInfo(e,o){return`Date:${new Date(this.year,this.month,this.day).toDateString()}\nShift: ${this.getShiftInfo(e,this.day)}`}getShiftInfo(e,o){return`${this.listOfRoasters[e].s[o]}`}getDay(e){return e.s[this.day]}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-attendance-from-monthly-roaster"]],features:[t.qOj],decls:56,vars:41,consts:[["novalidate","",1,"mt-4",3,"formGroup"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete","change"],[3,"optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],["formControlName","monthYear",1,"form-control","datapickerinput",3,"matDatepicker","placeholder","dateChange","click"],["matSuffix","",3,"for"],["dp2",""],["class","table-responsive",4,"ngIf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],[3,"value"],[1,"table-responsive"],["id","zero_config1",1,"table","table-bordered","no-wrap"],[4,"ngFor","ngForOf"],[3,"matTooltip"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._UZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",4),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"label",10),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t._UZ(16,"auto-loader",13),t.TgZ(17,"input",14),t.NdJ("change",function(r){return o.onSelectionCustomerCode(r,"change")}),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,"select")}),t.YNc(22,xo,2,3,"mat-option",17),t.ALo(23,"async"),t.qZA(),t.qZA(),t._UZ(24,"validation-message",18),t.qZA(),t.qZA(),t.TgZ(25,"div",9),t.TgZ(26,"div",11),t.TgZ(27,"label",10),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"select",19),t.NdJ("change",function(r){return o.onSelectSiteCode(r)}),t.TgZ(31,"option",20),t._uU(32),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.YNc(35,qo,3,4,"option",17),t.qZA(),t._UZ(36,"validation-message",18),t.qZA(),t.qZA(),t.TgZ(37,"div",9),t.TgZ(38,"div",11),t.TgZ(39,"label",10),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div",11),t.TgZ(43,"div",12),t.TgZ(44,"input",21),t.NdJ("dateChange",function(r){t.CHM(n);const c=t.MAs(48);return o.closeDatePicker(r,c)})("click",function(){t.CHM(n);const r=t.MAs(48);return o.openDatePicker(r)}),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"mat-datepicker-toggle",22),t._UZ(47,"mat-datepicker",null,23),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(49,yo,17,9,"div",24),t.TgZ(50,"div",25),t.TgZ(51,"div",6),t.TgZ(52,"div",26),t.TgZ(53,"input",27),t.NdJ("click",function(){return o.goBack()}),t.ALo(54,"translate"),t.qZA(),t._uU(55," \xa0 "),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(21),s=t.MAs(48);t.Q6J("formGroup",o.form),t.xp6(12),t.Oqu(t.lcZ(13,21,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(18,23,"Please_Enter")," ",t.lcZ(19,25,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",n),t.xp6(5),t.Q6J("ngForOf",t.lcZ(23,27,o.filteredCustCodes)),t.xp6(2),t.Q6J("control",o.custCodeControl),t.xp6(4),t.Oqu(t.lcZ(29,29,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(33,31,"Select")," ",t.lcZ(34,33,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Oqu(t.lcZ(41,35,"Date")),t.xp6(4),t.hYB("placeholder","",t.lcZ(45,37,"Select")," ","Year_Month",""),t.Q6J("matDatepicker",s),t.xp6(2),t.Q6J("for",s),t.xp6(3),t.Q6J("ngIf",0!=o.RoastersCount()),t.xp6(4),t.s9C("value",t.lcZ(54,39,"Cancel"))}},directives:[l._Y,l.JL,l.sg,ht.z,l.Fj,at.ZL,l.JJ,l.oH,at.XC,f.sg,G.s,l.EJ,l.u,l.YN,l.Kr,M.hl,M.nW,gt.R9,M.Mq,f.O5,St.ey,rt.gM],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();var j=X(9692),v=X(1494),_=X(2789),g=X(5289),ct=X(4803),T=X(2238);function wo(i,a){if(1&i&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.lnq("",e.value,"-",e.text,"-",e.textTwo,"")}}function Uo(i,a){if(1&i&&(t.TgZ(0,"option",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",e.text,"")}}let Lo=(()=>{class i extends q{constructor(e,o,n,s,r){super(o),this.dialogRef=e,this.authService=o,this.fb=n,this.apiService=s,this.utilService=r,this.branchCodeList=[],this.readonly="",this.id=0}ngOnInit(){this.setForm(),this.loadBranchCodes(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}setForm(){this.form=this.fb.group({id:[this.id],branchCode:["",l.kI.required],appAuth:["",l.kI.required],appLevel:[""],canApproveSurvey:[!1],canApproveEnquiry:[!1],canApproveProposal:[!1],canModifyEstimation:[!1],canConvertEnqToProject:[!1],canCreateRoaster:[!1],canEditRoaster:[!1],isFinalAuthority:[!1],canApproveEstimation:[!1],canApproveContract:[!1],canConvertEstimationToProposal:[!1],canConvertProposalToContract:[!1],canEditEnquiry:[!1],canAddSurveyorToEnquiry:[!1],canApprovePvReq:[!1]}),this.loadUsers()}removeItem(e){}loadUsers(){this.apiService.getall("Users/GetUserSelectionList").subscribe(e=>{this.userList=e})}submit(){this.form.value.appAuth=this.appAuth,this.form.value.branchCode=this.branchCode,this.form.value.appLevel=0,this.form.valid?this.apiService.post("OpAuthorities",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}loadBranchCodes(){this.apiService.getall("Branch/getSelectBranchCodeList").subscribe(e=>{this.branchCodeList=e})}setEditForm(){this.apiService.get("OpAuthorities/getAuthorityById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.branchCode=e.branchCode,this.appAuth=e.appAuth,this.form.controls.branchCode.disable({onlySelf:!0}),this.form.controls.appAuth.disable({onlySelf:!0}),this.form.controls.appLevel.disable({onlySelf:!0}))})}getAuthority(){""!=this.form.controls.branchCode.value&&""!=this.form.controls.appAuth.value&&(this.branchCode=this.form.controls.branchCode.value,this.appAuth=this.form.controls.appAuth.value,this.apiService.getall(`OpAuthorities/getAuthorityByBranchUserId/${this.branchCode}/${this.appAuth}`).subscribe(e=>{null!=e&&(this.id=e.id,this.setEditForm())}))}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.so),t.Y36(x._),t.Y36(l.qu),t.Y36(b.s),t.Y36(y.t))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-authorities"]],features:[t.qOj],decls:135,vars:77,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"cardtitle-divider"],[1,"table","table-bordered","no-wrap"],["formControlName","branchCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","appAuth",1,"custom-select","mr-sm-2",3,"change"],["type","checkbox","formControlName","canApproveEnquiry"],["type","checkbox","formControlName","canApproveSurvey"],["type","checkbox","formControlName","canApproveEstimation"],["type","checkbox","formControlName","canApproveProposal"],["type","checkbox","formControlName","canApproveContract"],["type","checkbox","formControlName","canModifyEstimation"],["type","checkbox","formControlName","canConvertEnqToProject"],["type","checkbox","formControlName","canConvertEstimationToProposal"],["type","checkbox","formControlName","canConvertProposalToContract"],["type","checkbox","formControlName","canCreateRoaster"],["type","checkbox","formControlName","canEditRoaster"],["type","checkbox","formControlName","isFinalAuthority"],["type","checkbox","formControlName","canEditEnquiry"],["type","checkbox","formControlName","canAddSurveyorToEnquiry"],["type","checkbox","formControlName","canApprovePvReq"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"nav",7),t.TgZ(11,"ol",8),t.TgZ(12,"li",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",9),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"li",10),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"div",4),t.TgZ(23,"div",12),t.TgZ(24,"div",13),t._UZ(25,"div",4),t._UZ(26,"div",14),t.TgZ(27,"table",15),t.TgZ(28,"tr"),t.TgZ(29,"td"),t.TgZ(30,"select",16),t.NdJ("change",function(){return o.getAuthority()}),t.TgZ(31,"option",17),t._uU(32),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.YNc(35,wo,2,4,"option",18),t.qZA(),t._UZ(36,"validation-message",19),t.qZA(),t.TgZ(37,"td"),t.TgZ(38,"select",20),t.NdJ("change",function(){return o.getAuthority()}),t.TgZ(39,"option",17),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.YNc(42,Uo,2,3,"option",18),t.qZA(),t._UZ(43,"validation-message",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"table"),t.TgZ(45,"tr"),t.TgZ(46,"td"),t._UZ(47,"input",21),t.qZA(),t.TgZ(48,"td"),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"td"),t._UZ(52,"input",22),t.qZA(),t.TgZ(53,"td"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.qZA(),t.TgZ(56,"tr"),t.TgZ(57,"td"),t._UZ(58,"input",23),t.qZA(),t.TgZ(59,"td"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"td"),t._UZ(63,"input",24),t.qZA(),t.TgZ(64,"td"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.qZA(),t.TgZ(67,"tr"),t.TgZ(68,"td"),t._UZ(69,"input",25),t.qZA(),t.TgZ(70,"td"),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"td"),t._UZ(74,"input",26),t.qZA(),t.TgZ(75,"td"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.qZA(),t.TgZ(78,"tr"),t.TgZ(79,"td"),t._UZ(80,"input",27),t.qZA(),t.TgZ(81,"td"),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"td"),t._UZ(85,"input",28),t.qZA(),t.TgZ(86,"td"),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.qZA(),t.TgZ(89,"tr"),t.TgZ(90,"td"),t._UZ(91,"input",29),t.qZA(),t.TgZ(92,"td"),t._uU(93),t.ALo(94,"translate"),t.qZA(),t.TgZ(95,"td"),t._UZ(96,"input",30),t.qZA(),t.TgZ(97,"td"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.qZA(),t.TgZ(100,"tr"),t.TgZ(101,"td"),t._UZ(102,"input",31),t.qZA(),t.TgZ(103,"td"),t._uU(104),t.ALo(105,"translate"),t.qZA(),t.TgZ(106,"td"),t._UZ(107,"input",32),t.qZA(),t.TgZ(108,"td"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.qZA(),t.TgZ(111,"tr"),t.TgZ(112,"td"),t._UZ(113,"input",33),t.qZA(),t.TgZ(114,"td"),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"td"),t._UZ(118,"input",34),t.qZA(),t.TgZ(119,"td"),t._uU(120),t.ALo(121,"translate"),t.qZA(),t.qZA(),t.TgZ(122,"tr"),t.TgZ(123,"td"),t._UZ(124,"input",35),t.qZA(),t.TgZ(125,"td"),t._uU(126),t.ALo(127,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(128,"div",36),t.TgZ(129,"div",37),t.TgZ(130,"input",38),t.NdJ("click",function(){return o.closeModel()}),t.ALo(131,"translate"),t.qZA(),t._uU(132," \xa0 "),t._UZ(133,"input",39),t.ALo(134,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,29,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(8),t.hij(" ",t.lcZ(14,31,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(17,33,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(20,35,"Operations_Authorities")),t.xp6(13),t.AsE("",t.lcZ(33,37,"Select")," ",t.lcZ(34,39,"Branch")," "),t.xp6(3),t.Q6J("ngForOf",o.branchCodeList),t.xp6(1),t.Q6J("control",o.form.controls.branchCode),t.xp6(4),t.Oqu(t.lcZ(41,41,"Select_User")),t.xp6(2),t.Q6J("ngForOf",o.userList),t.xp6(1),t.Q6J("control",o.form.controls.appAuth),t.xp6(6),t.Oqu(t.lcZ(50,43,"Approve_Enquiry")),t.xp6(5),t.Oqu(t.lcZ(55,45,"Approve_Survey")),t.xp6(6),t.Oqu(t.lcZ(61,47,"Approve_Estimation")),t.xp6(5),t.Oqu(t.lcZ(66,49,"Approve_Proposal")),t.xp6(6),t.Oqu(t.lcZ(72,51,"Approve_Contract")),t.xp6(5),t.Oqu(t.lcZ(77,53,"Modify_Estimation")),t.xp6(6),t.Oqu(t.lcZ(83,55,"Convert_Enquiry_To_Project")),t.xp6(5),t.Oqu(t.lcZ(88,57,"Convert_Estimation_To_Proposal")),t.xp6(6),t.Oqu(t.lcZ(94,59,"Convert_Proposal_To_Contract")),t.xp6(5),t.Oqu(t.lcZ(99,61,"Creat_Roaster")),t.xp6(6),t.Oqu(t.lcZ(105,63,"Edit_Roaster")),t.xp6(5),t.Oqu(t.lcZ(110,65,"Is_FinalAuthority")),t.xp6(6),t.Oqu(t.lcZ(116,67,"Create_Edit_Enquiry")),t.xp6(5),t.Oqu(t.lcZ(121,69,"Add_Surveyor_To_Enquiry")),t.xp6(6),t.Oqu(t.lcZ(127,71,"Approve_Project_Variation")),t.xp6(4),t.s9C("value",t.lcZ(131,73,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(134,75,"Save")))},directives:[l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,l.YN,l.Kr,f.sg,G.s,l.Wl],pipes:[Z.X$],encapsulation:2}),i})();var V=X(6397),_t=X(4041);function Do(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function No(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function Eo(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"User_Id")," "))}function Oo(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.appAuth," ")}}function jo(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"User_Name")," "))}function ko(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.userName," ")}}function Mo(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CAE")," "))}function Ro(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Po(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Fo(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Ro,3,3,"span",50),t.YNc(2,Po,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canApproveEnquiry)("ngIfElse",o)}}function Io(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CAS")," "))}function Yo(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Jo(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Qo(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Yo,3,3,"span",50),t.YNc(2,Jo,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canApproveSurvey)("ngIfElse",o)}}function Bo(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CAE")," "))}function Ho(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Vo(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function $o(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Ho,3,3,"span",50),t.YNc(2,Vo,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canApproveEstimation)("ngIfElse",o)}}function Go(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CAP")," "))}function Wo(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function zo(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Xo(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Wo,3,3,"span",50),t.YNc(2,zo,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canApproveProposal)("ngIfElse",o)}}function Ko(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CAC")," "))}function ti(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function ei(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function oi(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,ti,3,3,"span",50),t.YNc(2,ei,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canApproveContract)("ngIfElse",o)}}function ii(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CME")," "))}function ni(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function ai(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function si(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,ni,3,3,"span",50),t.YNc(2,ai,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canModifyEstimation)("ngIfElse",o)}}function ri(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CCEP")," "))}function li(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function ci(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function pi(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,li,3,3,"span",50),t.YNc(2,ci,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canConvertEnqToProject)("ngIfElse",o)}}function ui(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CCEsP")," "))}function di(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function mi(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function _i(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,di,3,3,"span",50),t.YNc(2,mi,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canConvertEstimationToProposal)("ngIfElse",o)}}function gi(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CCPC")," "))}function hi(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function fi(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Zi(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,hi,3,3,"span",50),t.YNc(2,fi,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canConvertProposalToContract)("ngIfElse",o)}}function Ci(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CCR")," "))}function Ai(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Ti(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function vi(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Ai,3,3,"span",50),t.YNc(2,Ti,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canCreateRoaster)("ngIfElse",o)}}function xi(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CER")," "))}function qi(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function bi(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function yi(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,qi,3,3,"span",50),t.YNc(2,bi,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canEditRoaster)("ngIfElse",o)}}function Si(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CEE")," "))}function wi(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Ui(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Li(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,wi,3,3,"span",50),t.YNc(2,Ui,3,3,"ng-template",54,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canEditEnquiry)("ngIfElse",o)}}function Di(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CASE")," "))}function Ni(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Ei(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Oi(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,Ni,3,3,"span",50),t.YNc(2,Ei,3,3,"ng-template",54,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canAddSurveyorToEnquiry)("ngIfElse",o)}}function ji(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"CAPV")," "))}function ki(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Mi(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Ri(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,ki,3,3,"span",50),t.YNc(2,Mi,3,3,"ng-template",54,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.canApprovePvReq)("ngIfElse",o)}}function Pi(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Fi(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",49),t.TgZ(1,"a",56),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",57),t.qZA(),t.qZA()}}function Ii(i,a){1&i&&t._UZ(0,"tr",58)}function Yi(i,a){1&i&&t._UZ(0,"tr",59)}const Ji=function(){return{standalone:!0}};let Qi=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.displayedColumns=["branchCode","appAuth","userName","canApproveEnquiry","canApproveSurvey","canApproveEstimation","canApproveProposal","canApproveContract","canModifyEstimation","canConvertEnqToProject","canConvertEstimationToProposal","canConvertProposalToContract","canCreateRoaster","canEditRoaster","canEditEnquiry","canAddSurveyorToEnquiry","canApprovePvReq","Actions"],this.sortingOrder="id desc",this.isLoading=!1,this.searchValue=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadServices(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadServices(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("OpAuthorities/getAuthoritiesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,Lo);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Authority","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Authority","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("OpAuthorities",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-authorities"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:102,vars:38,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-4","col-lg-4"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-4","col-lg-4","text-center"],[3,"isLoading"],[1,"col-md-4","col-lg-4","text-right"],["data-toggle","modal","data-target","#addServiceUnitMap","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","branchCode","sticky",""],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appAuth","sticky",""],["matColumnDef","userName","sticky",""],["matColumnDef","canApproveEnquiry"],["matColumnDef","canApproveSurvey"],["matColumnDef","canApproveEstimation"],["matColumnDef","canApproveProposal"],["matColumnDef","canApproveContract"],["matColumnDef","canModifyEstimation"],["matColumnDef","canConvertEnqToProject"],["matColumnDef","canConvertEstimationToProposal"],["matColumnDef","canConvertProposalToContract"],["matColumnDef","canCreateRoaster"],["matColumnDef","canEditRoaster"],["matColumnDef","canEditEnquiry"],["matColumnDef","canAddSurveyorToEnquiry"],["matColumnDef","canApprovePvReq"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["stickyEnd",""],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"nav",5),t.TgZ(9,"ol",6),t.TgZ(10,"li",7),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"li",7),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"li",8),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",9),t.TgZ(20,"div",1),t.TgZ(21,"div",10),t.TgZ(22,"div",11),t.TgZ(23,"div",12),t.TgZ(24,"div",1),t.TgZ(25,"div",10),t.TgZ(26,"h4",13),t._uU(27),t.ALo(28,"translate"),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.TgZ(30,"div",14),t.TgZ(31,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.TgZ(33,"div",16),t._UZ(34,"spinner-loader",17),t.qZA(),t.TgZ(35,"div",18),t.TgZ(36,"a",19),t.NdJ("click",function(){return o.create()}),t._UZ(37,"i",20),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(40,"div",21),t.TgZ(41,"div",22),t.ynx(42),t.TgZ(43,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(44,24),t.YNc(45,Do,3,3,"th",25),t.YNc(46,No,2,1,"td",26),t.BQk(),t.ynx(47,27),t.YNc(48,Eo,3,3,"th",25),t.YNc(49,Oo,2,1,"td",26),t.BQk(),t.ynx(50,28),t.YNc(51,jo,3,3,"th",25),t.YNc(52,ko,2,1,"td",26),t.BQk(),t.ynx(53,29),t.YNc(54,Mo,3,3,"th",25),t.YNc(55,Fo,4,2,"td",26),t.BQk(),t.ynx(56,30),t.YNc(57,Io,3,3,"th",25),t.YNc(58,Qo,4,2,"td",26),t.BQk(),t.ynx(59,31),t.YNc(60,Bo,3,3,"th",25),t.YNc(61,$o,4,2,"td",26),t.BQk(),t.ynx(62,32),t.YNc(63,Go,3,3,"th",25),t.YNc(64,Xo,4,2,"td",26),t.BQk(),t.ynx(65,33),t.YNc(66,Ko,3,3,"th",25),t.YNc(67,oi,4,2,"td",26),t.BQk(),t.ynx(68,34),t.YNc(69,ii,3,3,"th",25),t.YNc(70,si,4,2,"td",26),t.BQk(),t.ynx(71,35),t.YNc(72,ri,3,3,"th",25),t.YNc(73,pi,4,2,"td",26),t.BQk(),t.ynx(74,36),t.YNc(75,ui,3,3,"th",25),t.YNc(76,_i,4,2,"td",26),t.BQk(),t.ynx(77,37),t.YNc(78,gi,3,3,"th",25),t.YNc(79,Zi,4,2,"td",26),t.BQk(),t.ynx(80,38),t.YNc(81,Ci,3,3,"th",25),t.YNc(82,vi,4,2,"td",26),t.BQk(),t.ynx(83,39),t.YNc(84,xi,3,3,"th",25),t.YNc(85,yi,4,2,"td",26),t.BQk(),t.ynx(86,40),t.YNc(87,Si,3,3,"th",25),t.YNc(88,Li,4,2,"td",26),t.BQk(),t.ynx(89,41),t.YNc(90,Di,3,3,"th",25),t.YNc(91,Oi,4,2,"td",26),t.BQk(),t.ynx(92,42),t.YNc(93,ji,3,3,"th",25),t.YNc(94,Ri,4,2,"td",26),t.BQk(),t.ynx(95,43),t.YNc(96,Pi,3,3,"th",44),t.YNc(97,Fi,3,0,"td",26),t.BQk(),t.YNc(98,Ii,1,0,"tr",45),t.YNc(99,Yi,1,0,"tr",46),t.qZA(),t.BQk(),t.qZA(),t.ynx(100),t.TgZ(101,"mat-paginator",47),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.AsE(" ",t.lcZ(5,19,"Operations")," ",t.lcZ(6,21,"Authorities")," "),t.xp6(7),t.hij(" ",t.lcZ(12,23,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(15,25,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(18,27,"Authorities")),t.xp6(10),t.AsE("",t.lcZ(28,29,"Authorities")," ",t.lcZ(29,31,"List")," "),t.xp6(4),t.MGl("placeholder","",t.lcZ(32,33,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(37,Ji)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(39,35,"Add_New_Authority")," "),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(55),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function Bi(i,a){1&i&&(t._UZ(0,"input",16),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}const zt=function(){return{standalone:!0}};let He=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0?this.setEditForm():this.elementData={clauseTitleEng:"",clauseTitleArb:"",clauseSubTitleEng:"",clauseSubTitleArb:"",DescriptionEng:"",DescriptionArb:""}}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({})}submit(){var e,o,n,s,r,c,p,u,d,m,h,C;null!=(null===(e=this.elementData)||void 0===e?void 0:e.clauseTitleEng)&&null!=(null===(o=this.elementData)||void 0===o?void 0:o.clauseTitleArb)&&""!=(null===(n=this.elementData)||void 0===n?void 0:n.clauseTitleEng)&&""!=(null===(s=this.elementData)||void 0===s?void 0:s.clauseTitleArb)||null!=(null===(r=this.elementData)||void 0===r?void 0:r.clauseSubTitleEng)&&null!=(null===(c=this.elementData)||void 0===c?void 0:c.clauseSubTitleArb)&&""!=(null===(p=this.elementData)||void 0===p?void 0:p.clauseSubTitleEng)&&""!=(null===(u=this.elementData)||void 0===u?void 0:u.clauseSubTitleArb)||null!=(null===(d=this.elementData)||void 0===d?void 0:d.clauseDescriptionEng)&&null!=(null===(m=this.elementData)||void 0===m?void 0:m.clauseDescriptionArb)&&""!=(null===(h=this.elementData)||void 0===h?void 0:h.clauseDescriptionEng)&&""!=(null===(C=this.elementData)||void 0===C?void 0:C.clauseDescriptionArb)?this.apiService.post("ContractFormTemplateElements",this.elementData).subscribe(A=>{A&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},A=>{console.error(A),this.utilService.ShowApiErrorMessage(A)}):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("ContractFormTemplateElements/getContractFormTemplateElementById",this.id).subscribe(e=>{this.elementData=e})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-contract-form-elements"]],features:[t.qOj],decls:61,vars:71,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"scroll-sidebar"],[1,"outer"],[1,"col-md-12","col-lg-12"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%","padding","10px"],[2,"width","10%","padding","10px"],[2,"width","45%","padding","10px","vertical-align","top"],["type","text",1,"form-control",2,"height","max-content",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",2,"height","max-content",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2,3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"table",7),t.TgZ(11,"tr"),t.TgZ(12,"th",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"td",9),t.TgZ(16,"span"),t.TgZ(17,"input",10),t.NdJ("ngModelChange",function(s){return o.elementData.clauseTitleEng=s}),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"td",9),t.TgZ(21,"span"),t.TgZ(22,"input",10),t.NdJ("ngModelChange",function(s){return o.elementData.clauseTitleArb=s}),t.ALo(23,"translate"),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"th",8),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"td",9),t.TgZ(30,"span"),t.TgZ(31,"input",10),t.NdJ("ngModelChange",function(s){return o.elementData.clauseSubTitleEng=s}),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"td",9),t.TgZ(35,"span"),t.TgZ(36,"input",10),t.NdJ("ngModelChange",function(s){return o.elementData.clauseSubTitleArb=s}),t.ALo(37,"translate"),t.ALo(38,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"tr"),t.TgZ(40,"th",8),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"td",9),t.TgZ(44,"span"),t.TgZ(45,"textarea",11),t.NdJ("ngModelChange",function(s){return o.elementData.clauseDescriptionEng=s}),t.ALo(46,"translate"),t.ALo(47,"translate"),t._uU(48,"             "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"td",9),t.TgZ(50,"span"),t.TgZ(51,"textarea",11),t.NdJ("ngModelChange",function(s){return o.elementData.clauseDescriptionArb=s}),t.ALo(52,"translate"),t.ALo(53,"translate"),t._uU(54,"             "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",12),t.TgZ(56,"div",13),t.TgZ(57,"input",14),t.NdJ("click",function(){return o.closeModel()}),t.ALo(58,"translate"),t.qZA(),t._uU(59," \xa0 "),t.YNc(60,Bi,2,3,"input",15),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,31,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(8),t.hij(" ",t.lcZ(14,33,"Title")," "),t.xp6(4),t.hYB("placeholder","",t.lcZ(18,35,"Please_Enter")," ",t.lcZ(19,37,"Title"),""),t.Q6J("ngModel",o.elementData.clauseTitleEng)("ngModelOptions",t.DdM(65,zt)),t.xp6(5),t.hYB("placeholder","",t.lcZ(23,39,"Please_Enter")," ",t.lcZ(24,41,"Title"),""),t.Q6J("ngModel",o.elementData.clauseTitleArb)("ngModelOptions",t.DdM(66,zt)),t.xp6(5),t.hij(" ",t.lcZ(28,43,"Sub_Title")," "),t.xp6(4),t.hYB("placeholder","",t.lcZ(32,45,"Please_Enter")," ",t.lcZ(33,47,"Sub Title"),""),t.Q6J("ngModel",o.elementData.clauseSubTitleEng)("ngModelOptions",t.DdM(67,zt)),t.xp6(5),t.hYB("placeholder","",t.lcZ(37,49,"Please_Enter")," ",t.lcZ(38,51,"Sub_Title"),""),t.Q6J("ngModel",o.elementData.clauseSubTitleArb)("ngModelOptions",t.DdM(68,zt)),t.xp6(5),t.hij(" ",t.lcZ(42,53,"Description")," "),t.xp6(4),t.hYB("placeholder","",t.lcZ(46,55,"Please_Enter")," ",t.lcZ(47,57,"Title"),""),t.Q6J("ngModel",o.elementData.clauseDescriptionEng)("ngModelOptions",t.DdM(69,zt)),t.xp6(6),t.hYB("placeholder","",t.lcZ(52,59,"Please_Enter")," ",t.lcZ(53,61,"Title"),""),t.Q6J("ngModel",o.elementData.clauseDescriptionArb)("ngModelOptions",t.DdM(70,zt)),t.xp6(6),t.s9C("value",t.lcZ(58,63,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.On,f.O5],pipes:[Z.X$],encapsulation:2}),i})();var W=X(3122);function Hi(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Title")," "))}function Vi(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.clauseTitleEng)}}function $i(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Title")," "))}function Gi(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.clauseTitleArb)}}function Wi(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Sub_Title")," "))}function zi(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.clauseSubTitleEng)}}function Xi(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Sub_Title")," "))}function Ki(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.clauseSubTitleArb)}}function tn(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function en(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",37),t.TgZ(1,"span",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().view(s.id)}),t._UZ(2,"i",39),t._uU(3,"\xa0"),t.qZA(),t.TgZ(4,"span",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(5,"i",40),t._uU(6,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("View")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function on(i,a){1&i&&t._UZ(0,"tr",41)}function nn(i,a){1&i&&t._UZ(0,"tr",42)}const an=function(){return{standalone:!0}};let sn=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.oprService=h,this.translate=C,this.displayedColumns=["clauseTitleEng","clauseSubTitleEng","clauseTitleArb","clauseSubTitleArb","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ContractFormTemplateElements/getContractFormTemplateElementsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,He);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Contract_Form_Template_Element","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Contract_form_Template_Element","Update")}view(e){this.openDialogManage(e,g.O.update,"Contract_form_Template_Element","View")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ContractFormTemplateElements",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-contract-form-elements"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:56,vars:28,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","clauseTitleEng"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","clauseTitleArb"],["matColumnDef","clauseSubTitleEng"],["matColumnDef","clauseSubTitleArb"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click"],[1,"fa","fa-eye"],[1,"fa","fa-edit"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t.TgZ(28,"a",16),t.NdJ("click",function(){return o.create()}),t._UZ(29,"i",17),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(32,"div",18),t.TgZ(33,"div",19),t.TgZ(34,"div",20),t.ynx(35),t.TgZ(36,"table",21),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(37,22),t.YNc(38,Hi,3,3,"th",23),t.YNc(39,Vi,2,1,"td",24),t.BQk(),t.ynx(40,25),t.YNc(41,$i,3,3,"th",23),t.YNc(42,Gi,2,1,"td",24),t.BQk(),t.ynx(43,26),t.YNc(44,Wi,3,3,"th",23),t.YNc(45,zi,2,1,"td",24),t.BQk(),t.ynx(46,27),t.YNc(47,Xi,3,3,"th",23),t.YNc(48,Ki,2,1,"td",24),t.BQk(),t.ynx(49,28),t.YNc(50,tn,3,3,"th",29),t.YNc(51,en,7,2,"td",30),t.BQk(),t.YNc(52,on,1,0,"tr",31),t.YNc(53,nn,1,0,"tr",32),t.qZA(),t.ynx(54),t.TgZ(55,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,15,"Contract_Form_Template_Elements")," "),t.xp6(6),t.hij(" ",t.lcZ(11,17,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,19,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,21,"Contract_Form_Template_Elements")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,23,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(27,an)),t.xp6(5),t.hij("",t.lcZ(31,25,"Add_New")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();var Dt=X(8796);function rn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.titleOfServiceEng," ")}}const Lt=function(){return{standalone:!0}};function ln(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",25),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.titleOfServiceEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Title_Of_Service"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.titleOfServiceEng)("ngModelOptions",t.DdM(8,Lt))}}function cn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.titleOfServiceArb," ")}}function pn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",25),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.titleOfServiceArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Title_Of_Service"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.titleOfServiceArb)("ngModelOptions",t.DdM(8,Lt))}}function un(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.companyDetailsEng," ")}}function dn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",26),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.companyDetailsEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Compnay_Details"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.companyDetailsEng)("ngModelOptions",t.DdM(8,Lt))}}function mn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.companyDetailsArb," ")}}function _n(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.companyDetailsArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Compnay_Details"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.companyDetailsArb)("ngModelOptions",t.DdM(8,Lt))}}function gn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.customerDetailsEng," ")}}function hn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.customerDetailsEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Customer_Details"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.customerDetailsEng)("ngModelOptions",t.DdM(8,Lt))}}function fn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.customerDetailsArb," ")}}function Zn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.customerDetailsArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Customer_Details"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.customerDetailsArb)("ngModelOptions",t.DdM(8,Lt))}}function Cn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.preambleEng," ")}}function An(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.preambleEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Preamble"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.preambleEng)("ngModelOptions",t.DdM(8,Lt))}}function Tn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.preambleArb," ")}}function vn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.preambleArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Preamble"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.preambleArb)("ngModelOptions",t.DdM(8,Lt))}}function xn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.firstPartyEng," ")}}function qn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.firstPartyEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"First_Party"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.firstPartyEng)("ngModelOptions",t.DdM(8,Lt))}}function bn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.firstPartyArb," ")}}function yn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.firstPartyArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"First_Party"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.firstPartyArb)("ngModelOptions",t.DdM(8,Lt))}}function Sn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.secondPartyEng," ")}}function wn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.secondPartyEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Second_Party"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.secondPartyEng)("ngModelOptions",t.DdM(8,Lt))}}function Un(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.contractTemplateData||null==e.contractTemplateData.templateHead?null:e.contractTemplateData.templateHead.secondPartyArb," ")}}function Ln(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractTemplateData.templateHead.secondPartyArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Second_Party"),""),t.Q6J("ngModel",e.contractTemplateData.templateHead.secondPartyArb)("ngModelOptions",t.DdM(8,Lt))}}function Dn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",42),t.TgZ(1,"ng-select",43),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(3).editingClauseId=n})("change",function(){return t.CHM(e),t.oxw(3).afterSelectClause()}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("items",e.clausesTitleSelectionList)("ngModel",e.editingClauseId)("ngModelOptions",t.DdM(3,Lt))}}function Nn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.clauseTitleEng," ")}}function En(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"ng-select",44),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(3).editingClauseId=n})("change",function(){return t.CHM(e),t.oxw(3).afterSelectClause()}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("items",e.clausesSubTitleSelectionList)("ngModel",e.editingClauseId)("ngModelOptions",t.DdM(3,Lt))}}function On(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.clauseSubTitleEng," ")}}function jn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"ng-select",45),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(3).editingClauseId=n})("change",function(){return t.CHM(e),t.oxw(3).afterSelectClause()}),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("items",e.clausesDescriptionSelectionList)("ngModel",e.editingClauseId)("ngModelOptions",t.DdM(3,Lt))}}function kn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.clauseDescriptionEng," ")}}function Mn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).editClause(n)}),t._UZ(1,"i",15),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function Rn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).moveUpClause(n)}),t._UZ(1,"i",46),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Move_Up"))}}function Pn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).moveDownClause(n)}),t._UZ(1,"i",47),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Move_Down"))}}function Fn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).insertNewClause(n)}),t._UZ(1,"i",48),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Insert_New"))}}function In(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).removeClause(n)}),t._UZ(1,"i",49),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Remove"))}}function Yn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",14),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).cancel()}),t._UZ(1,"i",50),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Cancel"))}}function Jn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.clauseTitleArb," ")}}function Qn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.clauseSubTitleArb," ")}}function Bn(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.clauseDescriptionArb," ")}}function Hn(i,a){if(1&i&&(t.ynx(0,34),t.TgZ(1,"tr",35),t.TgZ(2,"td",36),t.YNc(3,Dn,2,4,"span",37),t.YNc(4,Nn,2,1,"span",12),t.qZA(),t.TgZ(5,"td",38),t.YNc(6,En,2,4,"span",12),t.YNc(7,On,2,1,"span",12),t.qZA(),t.TgZ(8,"td",39),t.YNc(9,jn,2,4,"span",12),t.YNc(10,kn,2,1,"span",12),t.qZA(),t.TgZ(11,"td",40),t.YNc(12,Mn,3,1,"span",41),t.YNc(13,Rn,3,1,"span",41),t.YNc(14,Pn,3,1,"span",41),t.YNc(15,Fn,3,1,"span",41),t.YNc(16,In,3,1,"span",41),t.YNc(17,Yn,3,1,"span",41),t.qZA(),t.qZA(),t.TgZ(18,"tr",35),t.TgZ(19,"td",36),t.YNc(20,Jn,2,1,"span",12),t.qZA(),t.TgZ(21,"td",38),t.YNc(22,Qn,2,1,"span",12),t.qZA(),t.TgZ(23,"td",39),t.YNc(24,Bn,2,1,"span",12),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.s9C("id",o.getRowBackGroud(e)),t.xp6(2),t.Q6J("ngIf",(null==o.clausesTitleSelectionList?null:o.clausesTitleSelectionList.length)>0&&o.editClauseIndex==e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(2),t.Q6J("ngIf",(null==o.clausesSubTitleSelectionList?null:o.clausesSubTitleSelectionList.length)>0&&o.editClauseIndex==e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(2),t.Q6J("ngIf",(null==o.clausesDescriptionSelectionList?null:o.clausesDescriptionSelectionList.length)>0&&o.editClauseIndex==e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(2),t.Q6J("ngIf",-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",e>0&&-1==o.editClauseIndex&&-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",e<(null==o.contractTemplateData||null==o.contractTemplateData.clauses?null:o.contractTemplateData.clauses.length)-1&&-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",-1==o.editClauseIndex||o.editClauseIndex==e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(1),t.s9C("id",o.getRowBackGroud(e)),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e)}}function Vn(i,a){if(1&i&&(t.TgZ(0,"div",5),t.TgZ(1,"div",8),t.TgZ(2,"table",28),t.TgZ(3,"tr"),t.TgZ(4,"th",29),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",30),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",31),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",32),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.YNc(16,Hn,25,17,"ng-container",33),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,5,"Title")," "),t.xp6(3),t.hij(" ",t.lcZ(9,7,"Sub_Title")," "),t.xp6(3),t.hij(" ",t.lcZ(12,9,"Description")," "),t.xp6(3),t.hij(" ",t.lcZ(15,11,"Action")," "),t.xp6(2),t.Q6J("ngForOf",null==e.contractTemplateData?null:e.contractTemplateData.clauses)}}let ee=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(p),this.dialog=e,this.oprService=o,this.fb=n,this.http=s,this.router=r,this.apiService=c,this.authService=p,this.utilService=u,this.translate=d,this.notifyService=m,this.validationService=h,this.dialogRef=C,this.clausesSelectionList=[],this.clausesTitleSelectionList=[],this.clausesSubTitleSelectionList=[],this.clausesDescriptionSelectionList=[],this.isArabic=!1,this.clauses=[],this.editHeadItemNumber=-1,this.editClauseIndex=-1,this.editingClauseId=-1,this.type=""}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadClausesSelectionList(),this.id>0?this.apiService.get("ContractFormTemplates/getContractFormTemplateById",this.id).subscribe(e=>{console.log(e),null!=e&&(this.contractTemplateData.clauses=e.clauses.splice(0),this.contractTemplateData.templateHead=e.templateHead)}):(this.contractTemplateData.clauses=this.contractTemplateData.contractClauses.splice(0),this.contractTemplateData.templateHead=this.contractTemplateData.contractFormHead,console.log(this.contractTemplateData)),this.form=this.fb.group({}),console.log(this.contractTemplateData)}loadClausesSelectionList(){this.apiService.getall("contractFormTemplateElements/getAllContractFormTemplateElements").subscribe(e=>{console.log(e),this.clausesTitleSelectionList=[],this.clausesSubTitleSelectionList=[],this.clausesDescriptionSelectionList=[],null!=e&&(this.clausesSelectionList=e,this.clausesSelectionList.forEach(o=>{null!=o.clauseTitleEng&&null!=o.clauseTitleArb&&this.clausesTitleSelectionList.push(o),null!=o.clauseSubTitleEng&&null!=o.clauseSubTitleArb&&this.clausesSubTitleSelectionList.push(o),null!=o.clauseDescriptionEng&&null!=o.clauseDescriptionArb&&this.clausesDescriptionSelectionList.push(o)}))})}submit(){}closeModel(){this.dialogRef.close(!0)}translateToolTip(e){return`${this.translate.instant(e)}`}editClause(e){-1==this.editClauseIndex&&(this.editClauseIndex=e,this.editingClauseId=-1,document.getElementById("clauseSelection").scrollIntoView({block:"start",behavior:"smooth",inline:"nearest"}))}moveUpClause(e){let o=this.contractTemplateData.clauses[e];this.contractTemplateData.clauses[e]=this.contractTemplateData.clauses[e-1],this.contractTemplateData.clauses[e-1]=o}moveDownClause(e){let o=this.contractTemplateData.clauses[e];this.contractTemplateData.clauses[e]=this.contractTemplateData.clauses[e+1],this.contractTemplateData.clauses[e+1]=o}saveContractFormTemplate(){if(this.contractTemplateData.templateHead.isForProject||this.contractTemplateData.templateHead.isForAddingSite||this.contractTemplateData.templateHead.isForAddingResources||this.contractTemplateData.templateHead.isForRemovingResources){for(let e=0;e<this.contractTemplateData.clauses.length;e++)this.contractTemplateData.clauses[e].serialNumber=e+1;this.apiService.post("contractFormTemplates",this.contractTemplateData).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}else this.notifyService.showInfo(this.translate.instant("Select_Contract_Type"))}editHeadItem(e){this.editHeadItemNumber=this.editHeadItemNumber==e?-1:e}insertNewClause(e){this.contractTemplateData.clauses.splice(e+1,0,{clauseTitleEng:"",clauseTitleArb:"",clauseSubTitleEng:"",clauseSubTitleArb:"",clauseDescriptionEng:"",clauseDescriptionArb:"",id:0,serialNumber:0,mappingId:0,contractFormId:this.contractTemplateData.templateHead.id}),this.editClauseIndex=e+1}removeClause(e){this.contractTemplateData.clauses.length>2&&this.contractTemplateData.clauses.splice(e,1),this.editClauseIndex=-1}cancel(){0==this.contractTemplateData.clauses[this.editClauseIndex].id&&this.contractTemplateData.clauses.splice(this.editClauseIndex,1),this.editClauseIndex=-1,this.editingClauseId=-1,this.editHeadItemNumber=-1}afterSelectClause(){var e,o,n,s,r,c;if(-1!=this.editClauseIndex&&null!=this.editingClauseId&&-1!=this.editingClauseId){if(-1==this.editingClauseId&&0==this.contractTemplateData.clauses.mappingId)this.contractTemplateData.clauses.splice(this.editClauseIndex,1);else{let p=this.clausesSelectionList.findIndex(u=>u.id==this.editingClauseId);this.contractTemplateData.clauses[this.editClauseIndex].clauseTitleEng=null===(e=this.clausesSelectionList[p])||void 0===e?void 0:e.clauseTitleEng,this.contractTemplateData.clauses[this.editClauseIndex].clauseTitleArb=null===(o=this.clausesSelectionList[p])||void 0===o?void 0:o.clauseTitleArb,this.contractTemplateData.clauses[this.editClauseIndex].clauseSubTitleEng=null===(n=this.clausesSelectionList[p])||void 0===n?void 0:n.clauseSubTitleEng,this.contractTemplateData.clauses[this.editClauseIndex].clauseSubTitleArb=null===(s=this.clausesSelectionList[p])||void 0===s?void 0:s.clauseSubTitleArb,this.contractTemplateData.clauses[this.editClauseIndex].clauseDescriptionEng=null===(r=this.clausesSelectionList[p])||void 0===r?void 0:r.clauseDescriptionEng,this.contractTemplateData.clauses[this.editClauseIndex].clauseDescriptionArb=null===(c=this.clausesSelectionList[p])||void 0===c?void 0:c.clauseDescriptionArb,this.contractTemplateData.clauses[this.editClauseIndex].mappingId=this.contractTemplateData.clauses[this.editClauseIndex].mappingId>0?this.contractTemplateData.clauses[this.editClauseIndex].mappingId:0}this.editClauseIndex=-1,this.editingClauseId=-1}}getRowBackGroud(e){return this.editClauseIndex==e?"editRow":0==this.contractTemplateData.clauses[e].mappingId||null==this.contractTemplateData.clauses[e].mappingId?"newRow":"whiteBg"}createNewClause(){let e=this.oprService.fullWindow(this.dialog,He);e.componentInstance.modalTitle="Create_New_Contract_Clause",e.componentInstance.modalBtnTitle="New",e.componentInstance.id=0,e.afterClosed().subscribe(o=>{o&&!0===o&&this.loadClausesSelectionList()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.uw),t.Y36(W.f),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-contract-form-template"]],features:[t.qOj],decls:130,vars:89,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"scroll-sidebar"],[1,"outer"],[1,"col-md-12","col-lg-12",2,"text-align","right","padding-block","10px"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary",3,"value","click"],[1,"col-md-12","col-lg-12"],["border","1","cellpadding","0","cellspacing","0",2,"width","initial","padding","10px"],[2,"width","6%","padding","10px"],[2,"width","45%","padding","10px","vertical-align","top"],[4,"ngIf"],[2,"width","4%","padding","10px"],[3,"matTooltip","click"],[1,"fas","fa-edit"],[2,"text-align","center","padding","10px"],["class","outer",4,"ngIf"],[1,"row","mt-1",2,"text-align","center"],[1,"col-md-3","col-lg-3"],["type","checkbox",3,"ngModel","ngModelOptions","ngModelChange"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],["type","text",1,"form-control",2,"height","max-content",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",2,"height","max-content","max-height","stretch",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",2,"height","max-content",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],["border","1","cellpadding","0","cellspacing","0",2,"padding","10px"],[2,"width","10%","padding","10px"],[2,"width","20%","padding","10px"],[2,"padding","10px"],[2,"padding","10px","width","auto"],["style","background-color:#ffd800",4,"ngFor","ngForOf"],[2,"background-color","#ffd800"],[3,"id"],[2,"width","10%","text-align","left","padding","10px","vertical-align","top"],["style","height:auto;width:initial",4,"ngIf"],[2,"width","20%","text-align","left","padding","10px","vertical-align","top"],[2,"text-align","justify","padding","10px","white-space","pre-wrap","vertical-align","top"],["rowspan","2",2,"padding","10px","vertical-align","central","width","7%"],[3,"matTooltip","click",4,"ngIf"],[2,"height","auto","width","initial"],["id","clauseSelection","bindLabel","clauseTitleEng","bindValue","id",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["bindLabel","clauseSubTitleEng","bindValue","id",2,"height","auto",3,"items","ngModel","ngModelOptions","ngModelChange","change"],["bindLabel","clauseDescriptionEng","bindValue","id",2,"height","auto",3,"items","ngModel","ngModelOptions","ngModelChange","change"],[1,"fas","fa-arrow-up"],[1,"fas","fa-arrow-down"],[1,"fas","fa-plus-circle"],[1,"fas","fa-minus-circle"],[1,"fas","fa","fa-stop-circle"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2,3),t.NdJ("ngSubmit",function(){return o.saveContractFormTemplate()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div"),t.TgZ(11,"input",7),t.NdJ("click",function(){return o.createNewClause()}),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",8),t.TgZ(14,"table",9),t.TgZ(15,"tr"),t.TgZ(16,"th",10),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"td",11),t.YNc(20,rn,2,1,"span",12),t.YNc(21,ln,4,9,"span",12),t.qZA(),t.TgZ(22,"td",11),t.YNc(23,cn,2,1,"span",12),t.YNc(24,pn,4,9,"span",12),t.qZA(),t.TgZ(25,"td",13),t.TgZ(26,"span",14),t.NdJ("click",function(){return o.editHeadItem(1)}),t._UZ(27,"i",15),t._uU(28,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"tr"),t.TgZ(30,"th",10),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"td",11),t.YNc(34,un,2,1,"span",12),t.YNc(35,dn,4,9,"span",12),t.qZA(),t.TgZ(36,"td",11),t.YNc(37,mn,2,1,"span",12),t.YNc(38,_n,4,9,"span",12),t.qZA(),t.TgZ(39,"td",13),t.TgZ(40,"span",14),t.NdJ("click",function(){return o.editHeadItem(2)}),t._UZ(41,"i",15),t._uU(42,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"tr"),t.TgZ(44,"th",10),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"td",11),t.YNc(48,gn,2,1,"span",12),t.YNc(49,hn,4,9,"span",12),t.qZA(),t.TgZ(50,"td",11),t.YNc(51,fn,2,1,"span",12),t.YNc(52,Zn,4,9,"span",12),t.qZA(),t.TgZ(53,"td",13),t.TgZ(54,"span",14),t.NdJ("click",function(){return o.editHeadItem(3)}),t._UZ(55,"i",15),t._uU(56,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(57,"tr"),t.TgZ(58,"th",10),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"td",11),t.YNc(62,Cn,2,1,"span",12),t.YNc(63,An,4,9,"span",12),t.qZA(),t.TgZ(64,"td",11),t.YNc(65,Tn,2,1,"span",12),t.YNc(66,vn,4,9,"span",12),t.qZA(),t.TgZ(67,"td",13),t.TgZ(68,"span",14),t.NdJ("click",function(){return o.editHeadItem(4)}),t._UZ(69,"i",15),t._uU(70,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(71,"tr"),t.TgZ(72,"th",10),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"td",11),t.YNc(76,xn,2,1,"span",12),t.YNc(77,qn,4,9,"span",12),t.qZA(),t.TgZ(78,"td",11),t.YNc(79,bn,2,1,"span",12),t.YNc(80,yn,4,9,"span",12),t.qZA(),t.TgZ(81,"td",13),t.TgZ(82,"span",14),t.NdJ("click",function(){return o.editHeadItem(5)}),t._UZ(83,"i",15),t._uU(84,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(85,"tr"),t.TgZ(86,"th",10),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.TgZ(89,"td",11),t.YNc(90,Sn,2,1,"span",12),t.YNc(91,wn,4,9,"span",12),t.qZA(),t.TgZ(92,"td",11),t.YNc(93,Un,2,1,"span",12),t.YNc(94,Ln,4,9,"span",12),t.qZA(),t.TgZ(95,"td",13),t.TgZ(96,"span",14),t.NdJ("click",function(){return o.editHeadItem(6)}),t._UZ(97,"i",15),t._uU(98,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(99,"div",16),t._UZ(100,"br"),t.TgZ(101,"b"),t._uU(102),t.ALo(103,"translate"),t.qZA(),t._UZ(104,"br"),t.qZA(),t.YNc(105,Vn,17,13,"div",17),t.TgZ(106,"div",18),t.TgZ(107,"div",19),t.TgZ(108,"input",20),t.NdJ("ngModelChange",function(s){return o.contractTemplateData.templateHead.isForProject=s}),t.qZA(),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"div",19),t.TgZ(112,"input",20),t.NdJ("ngModelChange",function(s){return o.contractTemplateData.templateHead.isForAddingSite=s}),t.qZA(),t._uU(113),t.ALo(114,"translate"),t.qZA(),t.TgZ(115,"div",19),t.TgZ(116,"input",20),t.NdJ("ngModelChange",function(s){return o.contractTemplateData.templateHead.isForAddingResources=s}),t.qZA(),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.TgZ(119,"div",19),t.TgZ(120,"input",20),t.NdJ("ngModelChange",function(s){return o.contractTemplateData.templateHead.isForRemovingResources=s}),t.qZA(),t._uU(121),t.ALo(122,"translate"),t.qZA(),t.qZA(),t.TgZ(123,"div",21),t.TgZ(124,"div",22),t.TgZ(125,"input",23),t.NdJ("click",function(){return o.closeModel()}),t.ALo(126,"translate"),t.qZA(),t._uU(127," \xa0 "),t._UZ(128,"input",24),t.ALo(129,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,55,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(6),t.s9C("value",t.lcZ(12,57,"Create_New_Clause")),t.xp6(6),t.hij(" ",t.lcZ(18,59,"Title_Of_Service")," "),t.xp6(3),t.Q6J("ngIf",1!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",1==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",1!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",1==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(32,61,"Company_Details")," "),t.xp6(3),t.Q6J("ngIf",2!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",2==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",2!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",2==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(46,63,"Customer_Details")," "),t.xp6(3),t.Q6J("ngIf",3!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",3==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",3!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",3==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(60,65,"Preamble")," "),t.xp6(3),t.Q6J("ngIf",4!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",4==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",4!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",4==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(74,67,"First_Party")," "),t.xp6(3),t.Q6J("ngIf",5!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",5==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",5!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",5==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(88,69,"Second_Party")," "),t.xp6(3),t.Q6J("ngIf",6!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",6==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",6!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",6==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(6),t.Oqu(t.lcZ(103,71,"Contract_Clauses")),t.xp6(3),t.Q6J("ngIf",(null==o.contractTemplateData||null==o.contractTemplateData.clauses?null:o.contractTemplateData.clauses.length)>0),t.xp6(3),t.Q6J("ngModel",o.contractTemplateData.templateHead.isForProject)("ngModelOptions",t.DdM(85,Lt)),t.xp6(1),t.hij("",t.lcZ(110,73,"Is_For_Project_Contract")," "),t.xp6(3),t.Q6J("ngModel",o.contractTemplateData.templateHead.isForAddingSite)("ngModelOptions",t.DdM(86,Lt)),t.xp6(1),t.hij("",t.lcZ(114,75,"Is_For_Adding_Site_As_Addendum")," "),t.xp6(3),t.Q6J("ngModel",o.contractTemplateData.templateHead.isForAddingResources)("ngModelOptions",t.DdM(87,Lt)),t.xp6(1),t.Oqu(t.lcZ(118,77,"Is_For_Adding_Resources")),t.xp6(3),t.Q6J("ngModel",o.contractTemplateData.templateHead.isForRemovingResources)("ngModelOptions",t.DdM(88,Lt)),t.xp6(1),t.Oqu(t.lcZ(122,79,"Is_For_Removing_Resources")),t.xp6(4),t.s9C("value",t.lcZ(126,81,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(129,83,"Save")))},directives:[l._Y,l.JL,l.sg,f.O5,rt.gM,l.Wl,l.JJ,l.On,l.Fj,f.sg,Dt.w9],pipes:[Z.X$],styles:["#newRow[_ngcontent-%COMP%] {\n    background-color: palegreen;\n   \n  }\n  #whiteBg[_ngcontent-%COMP%] {\n    background-color: white;\n    \n  }\n  #editRow[_ngcontent-%COMP%] {\n    background-color: #fbc591;\n   \n  }"]}),i})();function $n(i,a){1&i&&(t.TgZ(0,"th",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Title Of Service")," "))}function Gn(i,a){if(1&i&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.titleOfServiceEng)}}function Wn(i,a){1&i&&(t.TgZ(0,"th",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Title_Of_Service")," "))}function zn(i,a){if(1&i&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.titleOfServiceArb)}}function Xn(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Kn(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",39),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function ta(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",35),t.TgZ(1,"span",36),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().view(s.id)}),t._UZ(2,"i",37),t._uU(3,"\xa0"),t.qZA(),t.YNc(4,Kn,3,1,"span",38),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View")),t.xp6(3),t.Q6J("ngIf",e.canEdit)}}function ea(i,a){1&i&&t._UZ(0,"tr",40)}function oa(i,a){1&i&&t._UZ(0,"tr",41)}const ia=function(){return{standalone:!0}};let na=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.oprService=h,this.translate=C,this.displayedColumns=["titleOfServiceEng","titleOfServiceArb","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ContractFormTemplates/getContractFormTemplatesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.oprService.fullWindow(this.dialog,ee);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Contract_Form_Template","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Contract_form_Template","Update")}view(e){this.openDialogManage(e,g.O.update,"Contract_form_Template","View")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ContractFormTemplates",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}viewEnquiries(e){this.oprService.SurveyorCode=e}translateToolTip(e){return`${this.translate.instant(e)}`}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-contract-form-templates"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:50,vars:28,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","titleOfServiceEng"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","titleOfServiceArb"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click"],[1,"fa","fa-eye"],[3,"matTooltip","click",4,"ngIf"],[1,"fa","fa-edit"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t.TgZ(28,"a",16),t.NdJ("click",function(){return o.create()}),t._UZ(29,"i",17),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(32,"div",18),t.TgZ(33,"div",19),t.TgZ(34,"div",20),t.ynx(35),t.TgZ(36,"table",21),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(37,22),t.YNc(38,$n,3,3,"th",23),t.YNc(39,Gn,2,1,"td",24),t.BQk(),t.ynx(40,25),t.YNc(41,Wn,3,3,"th",23),t.YNc(42,zn,2,1,"td",24),t.BQk(),t.ynx(43,26),t.YNc(44,Xn,3,3,"th",27),t.YNc(45,ta,5,2,"td",28),t.BQk(),t.YNc(46,ea,1,0,"tr",29),t.YNc(47,oa,1,0,"tr",30),t.qZA(),t.ynx(48),t.TgZ(49,"mat-paginator",31),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,15,"Contract_Form_Templates")," "),t.xp6(6),t.hij(" ",t.lcZ(11,17,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,19,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,21,"Contract_Form_Templates")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,23,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(27,ia)),t.xp6(5),t.hij("",t.lcZ(31,25,"Add_New_Surveyor")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,rt.gM,f.O5,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();var Ot=X(5396);function aa(i,a){if(1&i&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.value," ")}}function sa(i,a){if(1&i&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",e.text,"")}}function ra(i,a){1&i&&(t.TgZ(0,"div",4),t.TgZ(1,"div",5),t.TgZ(2,"label",31),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",32),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.hij("",t.lcZ(4,3,"GST_VAT_Number")," "),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,5,"Please_Enter")," ",t.lcZ(7,7,"GST_VAT_Number"),""))}let Te=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.readonly="",this.id=0,this.cityList=[],this.custCodeControl=new l.NI("",l.kI.required),this.isDataLoading=!1,this.isChildCustomer=!1,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,tt.O)(""),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterCustCodes(h||""))))}ngOnInit(){this.loadCities(),this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({siteCode:["SITEXXXXXX"],siteName:["",l.kI.required],siteArbName:["",l.kI.required],customerCode:[""],siteAddress:["",l.kI.required],siteCityCode:["",l.kI.required],siteGeoLatitude:["",l.kI.required],siteGeoLongitude:["",l.kI.required],siteGeoGain:["",l.kI.required],isChildCustomer:[!1],vatNumber:[""],isActive:[!0]})}submit(){this.id>0&&(this.form.value.id=this.id);let e=this.custCodeControl.value;if(this.utilService.hasValue(e)?(this.form.value.customerCode=e,this.custCodeControl.setValue(e)):this.utilService.FillUpFields(),this.form.valid){if(this.isChildCustomer&&!this.utilService.hasValue(this.form.controls.vatNumber.value))return void this.notifyService.showError("Enter vatNumber");this.apiService.post("CustomerSite",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}else this.utilService.FillUpFields()}setEditForm(){this.apiService.get("CustomerSite/getSiteById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.custCodeControl.setValue(e.customerCode),this.isChildCustomer=e.isChildCustomer||!1,this.form.patchValue({id:0}))})}reset(){this.form.controls.siteCode.setValue(""),this.form.controls.siteName.setValue(""),this.form.controls.SiteArbName.setValue(""),this.form.controls.customerCode.setValue(""),this.form.controls.siteAddress.setValue(""),this.form.controls.siteCityCode.setValue(""),this.form.controls.siteGeoLatitude.setValue(""),this.form.controls.siteGeoLongitude.setValue(""),this.form.controls.siteGeoGain.setValue(""),this.form.controls.isChildCustomer.setValue(""),this.form.controls.vatNumber.setValue(""),this.form.controls.isActive.setValue(!0)}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadCities(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.cityList=e})}isChildCustomerChecked(e){this.isChildCustomer=e.checked}validate(e,o,n){let s="";switch("change"==n&&(s=e.target.value),o){case"custCodeControl":this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+s).subscribe(r=>{null!=r?(this.form.patchValue({customerCode:r.custCode}),this.form.value.customerCode=this.custCodeControl.value):(this.form.controls.customerCode.setValue(""),this.custCodeControl.setValue(""))})}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdatesites"]],features:[t.qOj],decls:110,vars:112,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","siteCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","siteName",1,"form-control",3,"placeholder"],[1,"form-group","mb-4"],["for","city",1,"mr-sm-2"],["type","text","formControlName","siteArbName",1,"form-control",3,"placeholder"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"readonly","placeholder","formControl","matAutocomplete"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12","col-lg-12"],["type","text","formControlName","siteAddress",1,"form-control",3,"placeholder"],["formControlName","siteCityCode",1,"custom-select","mr-sm-2"],["value",""],["type","number","step","0.0001","formControlName","siteGeoLatitude",1,"form-control",3,"placeholder"],["type","number","step","0.0001","formControlName","siteGeoLongitude",1,"form-control",3,"placeholder"],[1,"mr-sm-2"],["type","number","step","0.0001","formControlName","siteGeoGain",1,"form-control",3,"placeholder"],["color","primary","formControlName","isChildCustomer",3,"change"],["class","col-md-6 col-lg-6",4,"ngIf"],[1,"row","customrow"],[1,"col-lg-12","col-md-12","text-center"],["type","button",1,"btn","btn-secondary",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[3,"value"],["for","GST/VAT Number",1,"mr-sm-2"],["id","GST","type","text","formControlName","vatNumber",1,"form-control",3,"placeholder"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",9),t.TgZ(27,"label",10),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",11),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"auto-loader",12),t._UZ(40,"input",13),t.ALo(41,"translate"),t.ALo(42,"translate"),t.TgZ(43,"mat-autocomplete",null,14),t.YNc(45,aa,2,2,"mat-option",15),t.ALo(46,"async"),t.qZA(),t._UZ(47,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(48,"div",16),t.TgZ(49,"div",5),t.TgZ(50,"label"),t._uU(51),t.ALo(52,"translate"),t.qZA(),t._UZ(53,"input",17),t.ALo(54,"translate"),t.ALo(55,"translate"),t._UZ(56,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(57,"div",4),t.TgZ(58,"div",5),t.TgZ(59,"label"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"select",18),t.TgZ(63,"option",19),t._uU(64),t.ALo(65,"translate"),t.ALo(66,"translate"),t.qZA(),t.YNc(67,sa,2,3,"option",15),t.qZA(),t._UZ(68,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(69,"div",4),t.TgZ(70,"div",5),t.TgZ(71,"label"),t._uU(72),t.ALo(73,"translate"),t.qZA(),t._UZ(74,"input",20),t.ALo(75,"translate"),t.ALo(76,"translate"),t._UZ(77,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(78,"div",4),t.TgZ(79,"div",5),t.TgZ(80,"label"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t._UZ(83,"input",21),t.ALo(84,"translate"),t.ALo(85,"translate"),t._UZ(86,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(87,"div",4),t.TgZ(88,"div",5),t.TgZ(89,"label",22),t._uU(90),t.ALo(91,"translate"),t.qZA(),t._UZ(92,"input",23),t.ALo(93,"translate"),t.ALo(94,"translate"),t._UZ(95,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(96,"div",4),t.TgZ(97,"div",5),t.TgZ(98,"mat-slide-toggle",24),t.NdJ("change",function(s){return o.isChildCustomerChecked(s)}),t.qZA(),t.TgZ(99,"label",22),t._uU(100),t.ALo(101,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(102,ra,8,9,"div",25),t.qZA(),t.TgZ(103,"div",26),t.TgZ(104,"div",27),t.TgZ(105,"input",28),t.NdJ("click",function(){return o.closeModel()}),t.ALo(106,"translate"),t.qZA(),t._uU(107," \xa0\xa0 "),t._UZ(108,"input",29),t.ALo(109,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(44);t.xp6(1),t.Oqu(t.lcZ(2,48,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,50,"Site_Id")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,52,"Please_Enter")," ",t.lcZ(14,54,"Site_Id"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Oqu(t.lcZ(20,56,"Site_Eng_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,58,"Please_Enter")," ",t.lcZ(23,60,"Site_Eng_Name"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteName),t.xp6(4),t.Oqu(t.lcZ(29,62,"Site_Arb_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,64,"Please_Enter")," ",t.lcZ(32,66,"Site_Arb_Name"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteArbName),t.xp6(4),t.Oqu(t.lcZ(38,68,"Customer_Code")),t.xp6(2),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.s9C("readonly",o.readonly),t.hYB("placeholder","",t.lcZ(41,70,"Please_Enter")," ",t.lcZ(42,72,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",n),t.xp6(5),t.Q6J("ngForOf",t.lcZ(46,74,o.filteredCustCodes)),t.xp6(2),t.Q6J("control",o.custCodeControl),t.xp6(4),t.Oqu(t.lcZ(52,76,"Address")),t.xp6(2),t.hYB("placeholder","",t.lcZ(54,78,"Please_Enter")," ",t.lcZ(55,80,"Address"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteAddress),t.xp6(4),t.Oqu(t.lcZ(61,82,"City")),t.xp6(4),t.AsE("",t.lcZ(65,84,"Select")," ",t.lcZ(66,86,"City")," "),t.xp6(3),t.Q6J("ngForOf",o.cityList),t.xp6(1),t.Q6J("control",o.form.controls.siteCityCode),t.xp6(4),t.Oqu(t.lcZ(73,88,"Geo_Location")),t.xp6(2),t.hYB("placeholder","",t.lcZ(75,90,"Please_Enter")," ",t.lcZ(76,92,"Geo_Location"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteGeoLatitude),t.xp6(4),t.Oqu(t.lcZ(82,94,"Geo_Location")),t.xp6(2),t.hYB("placeholder","",t.lcZ(84,96,"Please_Enter")," ",t.lcZ(85,98,"Geo_Location"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteGeoLongitude),t.xp6(4),t.Oqu(t.lcZ(91,100,"Gain_Height")),t.xp6(2),t.hYB("placeholder","",t.lcZ(93,102,"Please_Enter")," ",t.lcZ(94,104,"Gain_Height"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteGeoGain),t.xp6(5),t.hij(" \xa0 \xa0 ",t.lcZ(101,106,"Is_Child_Customer")," "),t.xp6(2),t.Q6J("ngIf",o.isChildCustomer),t.xp6(3),t.s9C("value",t.lcZ(106,108,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(109,110,"Save"))}},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,ht.z,at.ZL,l.oH,at.XC,f.sg,l.EJ,l.YN,l.Kr,l.wV,Ot.Rr,f.O5,St.ey],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function la(i,a){if(1&i&&(t.TgZ(0,"option",24),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",e.text,"")}}let ve=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.cityList=[],this.custCodeControl=new l.NI,this.isDataLoading=!1}ngOnInit(){this.loadCities(),this.setForm(),this.id>0&&this.setEditForm()}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({siteCode:["SITEXXXXXX"],siteName:["",l.kI.required],siteArbName:["",l.kI.required],customerCode:["",l.kI.required],siteAddress:["",l.kI.required],siteCityCode:["",l.kI.required],siteGeoLatitude:["",l.kI.required],siteGeoLongitude:["",l.kI.required],siteGeoGain:["",l.kI.required],isActive:[!0]})}submit(){this.form.valid?(this.id>0&&(this.form.value.id=0),this.apiService.post("CustomerSite",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("CustomerMaster",this.id).subscribe(e=>{this.form.value.id=0,e&&this.form.controls.customerCode.setValue(e.custCode)})}loadCities(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.cityList=e})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-site-to-customer"]],features:[t.qOj],decls:89,vars:92,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","siteCode","readonly","",1,"form-control",3,"placeholder"],["type","text","formControlName","siteName",1,"form-control",3,"placeholder"],[1,"form-group","mb-4"],["for","city",1,"mr-sm-2"],["type","text","formControlName","siteArbName",1,"form-control",3,"placeholder"],["type","text","formControlName","customerCode","readonly","readonly",1,"form-control",3,"placeholder"],["type","text","formControlName","siteAddress",1,"form-control",3,"placeholder"],["formControlName","siteCityCode",1,"custom-select","mr-sm-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","siteGeoLatitude",1,"form-control",3,"placeholder"],["type","text","formControlName","siteGeoLongitude",1,"form-control",3,"placeholder"],[1,"mr-sm-2"],["type","text","formControlName","siteGeoGain",1,"form-control",3,"placeholder"],[1,"row","customrow"],[1,"col-lg-12","col-md-12","text-center"],["type","button",1,"btn","btn-secondary",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",4),t.TgZ(16,"div",5),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",7),t.ALo(21,"translate"),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.TgZ(23,"div",4),t.TgZ(24,"div",8),t.TgZ(25,"label",9),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",10),t.ALo(29,"translate"),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",4),t.TgZ(32,"div",5),t.TgZ(33,"label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",11),t.ALo(37,"translate"),t.ALo(38,"translate"),t.qZA(),t.qZA(),t.TgZ(39,"div",4),t.TgZ(40,"div",5),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",12),t.ALo(45,"translate"),t.ALo(46,"translate"),t.qZA(),t.qZA(),t.TgZ(47,"div",4),t.TgZ(48,"div",5),t.TgZ(49,"label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"select",13),t.TgZ(53,"option",14),t._uU(54),t.ALo(55,"translate"),t.ALo(56,"translate"),t.qZA(),t.YNc(57,la,2,3,"option",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",4),t.TgZ(59,"div",5),t.TgZ(60,"label"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"input",16),t.ALo(64,"translate"),t.ALo(65,"translate"),t.qZA(),t.qZA(),t.TgZ(66,"div",4),t.TgZ(67,"div",5),t.TgZ(68,"label"),t._uU(69),t.ALo(70,"translate"),t.qZA(),t._UZ(71,"input",17),t.ALo(72,"translate"),t.ALo(73,"translate"),t.qZA(),t.qZA(),t.TgZ(74,"div",4),t.TgZ(75,"div",5),t.TgZ(76,"label",18),t._uU(77),t.ALo(78,"translate"),t.qZA(),t._UZ(79,"input",19),t.ALo(80,"translate"),t.ALo(81,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(82,"div",20),t.TgZ(83,"div",21),t.TgZ(84,"input",22),t.NdJ("click",function(){return o.closeModel()}),t.ALo(85,"translate"),t.qZA(),t._uU(86," \xa0\xa0 "),t._UZ(87,"input",23),t.ALo(88,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,32,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,34,"Site_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,36,"Please_Enter")," ",t.lcZ(14,38,"Site_ID"),""),t.xp6(6),t.Oqu(t.lcZ(19,40,"Site_Eng_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(21,42,"Please_Enter")," ",t.lcZ(22,44,"Site_Eng_Name"),""),t.xp6(6),t.Oqu(t.lcZ(27,46,"Site_Arb_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(29,48,"Please_Enter")," ",t.lcZ(30,50,"Site_Arb_Name"),""),t.xp6(6),t.Oqu(t.lcZ(35,52,"Customer_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(37,54,"Please_Enter")," ",t.lcZ(38,56,"Customer_Code"),""),t.xp6(6),t.Oqu(t.lcZ(43,58,"Address")),t.xp6(2),t.hYB("placeholder","",t.lcZ(45,60,"Please_Enter")," ",t.lcZ(46,62,"Address"),""),t.xp6(6),t.Oqu(t.lcZ(51,64,"City")),t.xp6(4),t.AsE("",t.lcZ(55,66,"Select")," ",t.lcZ(56,68,"City")," "),t.xp6(3),t.Q6J("ngForOf",o.cityList),t.xp6(4),t.Oqu(t.lcZ(62,70,"Geo_Location")),t.xp6(2),t.hYB("placeholder","",t.lcZ(64,72,"Please_Enter")," ",t.lcZ(65,74,"Geo_Location"),""),t.xp6(6),t.Oqu(t.lcZ(70,76,"Geo_Location")),t.xp6(2),t.hYB("placeholder","",t.lcZ(72,78,"Please_Enter")," ",t.lcZ(73,80,"Geo_Location"),""),t.xp6(6),t.Oqu(t.lcZ(78,82,"Gain_Height")),t.xp6(2),t.hYB("placeholder","",t.lcZ(80,84,"Please_Enter")," ",t.lcZ(81,86,"Gain(Height)"),""),t.xp6(5),t.s9C("value",t.lcZ(85,88,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(88,90,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,f.sg],pipes:[Z.X$],encapsulation:2}),i})();var ut=X(574),Xt=X(5913);function ca(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().generateReport()}),t._uU(1," Generate Report "),t.qZA()}}function pa(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",47),t._uU(2," print "),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportexcel()}),t._uU(5,"ExportExcel"),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.Q6J("useExistingCss",!0))}function ua(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function da(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function ma(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function _a(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function ga(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Eng_Name")," "))}function ha(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteName)}}function fa(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Arb_Name")," "))}function Za(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteArbName)}}function Ca(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Address")," "))}function Aa(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteAddress)}}function Ta(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"City")," "))}function va(i,a){if(1&i&&(t.TgZ(0,"td",49),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCityCode)}}function xa(i,a){1&i&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function qa(i,a){1&i&&(t.TgZ(0,"span",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function ba(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function ya(i,a){if(1&i&&(t.TgZ(0,"td",49),t.YNc(1,qa,3,3,"span",50),t.YNc(2,ba,3,3,"ng-template",null,51,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function Sa(i,a){1&i&&(t.TgZ(0,"th",54),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function wa(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",49),t.TgZ(1,"div",55),t.TgZ(2,"a",56),t._UZ(3,"i",57),t.qZA(),t.TgZ(4,"div",58),t.TgZ(5,"a",59),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editSite(s.id)}),t._UZ(6,"i",60),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"Edit_Site")," "))}function Ua(i,a){1&i&&t._UZ(0,"tr",61)}function La(i,a){1&i&&t._UZ(0,"tr",62)}function Da(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.customerCode),t.xp6(2),t.Oqu(e.siteCode),t.xp6(2),t.Oqu(e.siteName),t.xp6(2),t.Oqu(e.siteArbName),t.xp6(2),t.Oqu(e.siteAddress),t.xp6(2),t.Oqu(e.siteCityCode),t.xp6(2),t.Oqu(e.isActive)}}function Na(i,a){if(1&i&&(t.TgZ(0,"div",63),t.TgZ(1,"div",64),t.TgZ(2,"table",65),t.TgZ(3,"tr"),t.TgZ(4,"td",66),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td",66),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(18,"br"),t.qZA(),t.TgZ(19,"table",67),t.TgZ(20,"tr"),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"th"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"th"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"th"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.YNc(42,Da,15,7,"tr",68),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,15,"Report_On_Customer_Sites")),t.xp6(4),t.AsE("",t.lcZ(10,17,"Customer_Code"),":",null==(null==e.filter?null:e.filter.customerCode)||""==e.filter.customerCode?"All":e.filter.customerCode,""),t.xp6(3),t.AsE("",t.lcZ(13,19,"Branch_Code"),":",null==(null==e.filter?null:e.filter.branchCode)||""==e.filter.branchCode?"All":e.filter.branchCode,""),t.xp6(4),t.AsE("",t.lcZ(17,21,"Search_Key"),":",e.searchValue,""),t.xp6(6),t.hij(" ",t.lcZ(23,23,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(26,25,"Site_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(29,27,"Site_Eng_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(32,29,"Site_Arb_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(35,31,"Address")," "),t.xp6(3),t.hij(" ",t.lcZ(38,33,"Branch_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(41,35,"Is_Active")," "),t.xp6(2),t.Q6J("ngForOf",e.reportData)}}const Ea=function(){return{standalone:!0}};let Oa=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.route=h,this.oprService=C,this.displayedColumns=["customerCode","siteCode","siteName","siteArbName","siteAddress","siteCityCode","isActive","Actions"],this.searchValue="",this.sortingOrder="customerCode desc",this.isLoading=!1,this.filter={customerCode:"",branchCode:""},this.reportData=[],this.isArab=!1,this.customerSelectionList=[],this.citySelectionList=[]}ngOnInit(){this.isArab=this.utilService.isArabic(),this.initialLoading()}refresh(){this.reportData=[],this.resetFilter()}resetFilter(){this.filter={customerCode:"",branchCode:""},this.applyFilter("")}initialLoading(){this.searchValue="",this.loadCitiesList(),this.loadCustomersList(),this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.reportData=[],this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.oprService.getPaginationWithFilter("CustomerSite/getSitesPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder),this.reportData=[]}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Site","Add",Te)}editSite(e){this.openDialogManage(e,g.O.update,"Updating_Site","Update",Te)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("CustomerSite",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}cahngeEnquiryStatus(e,o){this.apiService.post("ServiceEnquiries/changeEnquiryStatus?enquiryID="+e+"&statusEnquiry="+o,null).subscribe(n=>{this.utilService.OkMessage(),this.ngOnInit()},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}addsitetocustomer(e){this.openDialogManage(e,g.O.create,"Adding_New_Site_to_Customer","Add",ve)}clearReport(){this.reportData=[]}generateReport(){this.reportData=[];for(let e=0;e<=Math.floor(this.totalItemsCount/100);e++){let o={pageIndex:e,pageSize:100,previousPageIndex:0==e?0:e-1,length:0};this.loadListReport(o.pageIndex,o.pageSize,this.searchValue,this.sortingOrder)}}loadListReport(e,o,n,s){this.isLoading=!0,this.oprService.getPaginationWithFilter("CustomerSite/getSitesPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.isLoading=!1,this.reportData=0==this.reportData.length?r.items:this.reportData.concat(r.items)},r=>this.utilService.ShowApiErrorMessage(r))}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArab?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("Branch/getBranchSelectListForUser").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}exportexcel(){let e=document.getElementById("printcontainer");const o=ut.P6.table_to_sheet(e),n=ut.P6.book_new();ut.P6.book_append_sheet(n,o,"Sheet1"),ut.NC(n,"CustomerSitesReport.xlsx")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(L.gz),t.Y36(W.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-customer-sites"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:85,vars:40,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],["align","right",1,"row"],["align","right",1,"col-md-12","col-lg-12","text-right"],["data-toggle","modal","data-target","#addnewcustomersite","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"col-md-4","col-lg-4"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-8","col-lg-8"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-6","col-lg-6",2,"align-content","flex-start"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary","icon-refresh",3,"click"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","siteName"],["matColumnDef","siteArbName"],["matColumnDef","siteAddress"],["matColumnDef","siteCityCode"],["matColumnDef","isActive"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["id","printcontainer","hidden","",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["printTitle","Customer Sites Report","printSectionId","printcontainer","ngxPrint","",1,"btn","btn-primary",3,"useExistingCss"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""],["id","printcontainer","hidden",""],["width","100%"],["id","attndTable"],["colspan","2"],["id","attndTable","width","100%"],[4,"ngFor","ngForOf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"div",9),t.TgZ(18,"div",1),t.TgZ(19,"div",10),t.TgZ(20,"div",11),t.TgZ(21,"div",12),t.TgZ(22,"div",13),t.TgZ(23,"div",14),t.TgZ(24,"a",15),t.NdJ("click",function(){return o.create()}),t._UZ(25,"i",16),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",1),t.TgZ(29,"div",17),t.TgZ(30,"div",18),t.TgZ(31,"label"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"ng-select",19),t.NdJ("ngModelChange",function(s){return o.filter.branchCode=s})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",20),t.TgZ(36,"div",18),t.TgZ(37,"label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"ng-select",19),t.NdJ("ngModelChange",function(s){return o.filter.customerCode=s})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",1),t.TgZ(42,"div",17),t.TgZ(43,"input",21),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(44,"translate"),t.qZA(),t.qZA(),t.TgZ(45,"div",22),t.YNc(46,ca,2,0,"button",23),t.YNc(47,pa,6,1,"span",24),t.TgZ(48,"span"),t._uU(49," \xa0 "),t.TgZ(50,"button",25),t.NdJ("click",function(){return o.refresh()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"div",26),t._UZ(52,"spinner-loader",27),t.qZA(),t.qZA(),t._UZ(53,"div",28),t.TgZ(54,"div",29),t.TgZ(55,"table",30),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(56,31),t.YNc(57,ua,3,3,"th",32),t.YNc(58,da,2,1,"td",33),t.BQk(),t.ynx(59,34),t.YNc(60,ma,3,3,"th",32),t.YNc(61,_a,2,1,"td",33),t.BQk(),t.ynx(62,35),t.YNc(63,ga,3,3,"th",32),t.YNc(64,ha,2,1,"td",33),t.BQk(),t.ynx(65,36),t.YNc(66,fa,3,3,"th",32),t.YNc(67,Za,2,1,"td",33),t.BQk(),t.ynx(68,37),t.YNc(69,Ca,3,3,"th",32),t.YNc(70,Aa,2,1,"td",33),t.BQk(),t.ynx(71,38),t.YNc(72,Ta,3,3,"th",32),t.YNc(73,va,2,1,"td",33),t.BQk(),t.ynx(74,39),t.YNc(75,xa,3,3,"th",32),t.YNc(76,ya,4,2,"td",33),t.BQk(),t.ynx(77,40),t.YNc(78,Sa,3,3,"th",41),t.YNc(79,wa,9,3,"td",33),t.BQk(),t.YNc(80,Ua,1,0,"tr",42),t.YNc(81,La,1,0,"tr",43),t.qZA(),t.qZA(),t.ynx(82),t.TgZ(83,"mat-paginator",44),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(84,Na,43,37,"div",45)),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,25,"Customer_Sites")," "),t.xp6(6),t.hij(" ",t.lcZ(11,27,"Operations")," "),t.xp6(3),t.hij(" ",t.lcZ(14,29,"Sites_List")," "),t.xp6(3),t.Oqu(o.customerCode),t.xp6(10),t.hij("",t.lcZ(27,31,"Add_New_Customer_Site")," "),t.xp6(6),t.Oqu(t.lcZ(33,33,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.filter.branchCode),t.xp6(4),t.Oqu(t.lcZ(39,35,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.filter.customerCode),t.xp6(3),t.MGl("placeholder","",t.lcZ(44,37,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(39,Ea)),t.xp6(3),t.Q6J("ngIf",0==o.reportData.length),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0),t.xp6(5),t.Q6J("isLoading",o.isLoading),t.xp6(3),t.Q6J("dataSource",o.data),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0))},directives:[Dt.w9,l.JJ,l.On,l.Fj,f.O5,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,Xt.I,_.ge,v.nU,_.ev,_.XQ,_.Gk,f.sg],pipes:[Z.X$],styles:["#attndTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\n    border: solid;\n    border-width: 1px;\n    padding: 5px 5px 5px 5px;\n    text-align: center;\n  }\n\n  #attndTable[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n\n  #printcontainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n    width: 100%;\n    padding: 10px 10px 10px 10px;\n  }"]}),i})();function ja(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",19),t.TgZ(1,"input",21),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw().index;return t.oxw(2).setEntryValue(n,s)}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(1),t.s9C("id",o),t.hYB("placeholder","",t.lcZ(2,4,"Enter")," ",t.lcZ(3,6,"Value"),""),t.s9C("value",n.entryValue)}}const Ve=function(){return{standalone:!0}};function ka(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",19),t.TgZ(1,"select",22),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw().index;return t.oxw(2).setEntryValue(n,s)}),t.TgZ(2,"option",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"option",24),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"option",25),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(1),t.s9C("id",o),t.s9C("value",n.entryValue),t.Q6J("ngModelOptions",t.DdM(12,Ve)),t.xp6(2),t.Oqu(t.lcZ(4,6,"Select")),t.xp6(3),t.Oqu(t.lcZ(7,8,"Yes")),t.xp6(3),t.Oqu(t.lcZ(10,10,"No"))}}function Ma(i,a){if(1&i&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e),t.xp6(1),t.Oqu(e)}}function Ra(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",19),t.TgZ(1,"select",26),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.entryValue=n})("change",function(n){t.CHM(e);const s=t.oxw().index;return t.oxw(2).setEntryValue(n,s)}),t.TgZ(2,"option",23),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,Ma,2,2,"option",27),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(1),t.s9C("id",o),t.Q6J("ngModel",n.entryValue)("ngModelOptions",t.DdM(7,Ve)),t.xp6(2),t.Oqu(t.lcZ(4,5,"Select")),t.xp6(2),t.Q6J("ngForOf",n.listValueString.split(","))}}function Pa(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",19),t.TgZ(1,"input",29),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw().index;return t.oxw(2).setEntryValue(n,s)}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(1),t.s9C("id",o),t.hYB("placeholder","",t.lcZ(2,4,"Enter")," ",t.lcZ(3,6,"Value"),""),t.s9C("value",n.entryValue)}}function Fa(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",19),t.TgZ(1,"input",30),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw().index;return t.oxw(2).setEntryValue(n,s)}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(1),t.s9C("id",o),t.hYB("placeholder","",t.lcZ(2,4,"Enter")," ",t.lcZ(3,6,"Value"),""),t.s9C("value",n.entryValue)}}function Ia(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td",19),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.YNc(7,ja,4,8,"td",20),t.YNc(8,ka,11,13,"td",20),t.YNc(9,Ra,6,8,"td",20),t.YNc(10,Pa,4,8,"td",20),t.YNc(11,Fa,4,8,"td",20),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.hij("",e.elementEngName," "),t.xp6(2),t.Oqu(e.elementArbName),t.xp6(1),t.Q6J("ngIf","Absolute"==e.elementType),t.xp6(1),t.Q6J("ngIf","Boolean"==e.elementType),t.xp6(1),t.Q6J("ngIf","List"==e.elementType),t.xp6(1),t.Q6J("ngIf","Scale"==e.elementType),t.xp6(1),t.Q6J("ngIf","Percentage"==e.elementType)}}function Ya(i,a){if(1&i&&(t.TgZ(0,"div",13),t.TgZ(1,"table",14),t.TgZ(2,"tr"),t.TgZ(3,"th",15),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",16),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"th",17),t.qZA(),t.YNc(10,Ia,12,8,"tr",18),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,3,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(8,5,"Form_Attribute")," "),t.xp6(3),t.Q6J("ngForOf",e.surveyFormDataEntries)}}function Ja(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td",19),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.TgZ(7,"td",19),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.hij("",e.elementEngName," "),t.xp6(2),t.Oqu(e.elementArbName),t.xp6(2),t.Oqu(e.entryValue)}}function Qa(i,a){if(1&i&&(t.TgZ(0,"div",13),t.TgZ(1,"table",31),t.TgZ(2,"tr"),t.TgZ(3,"th",15),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",32),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"th",19),t.qZA(),t.YNc(10,Ja,9,4,"tr",18),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,3,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(8,5,"Form_Attribute")," "),t.xp6(3),t.Q6J("ngForOf",e.surveyFormDataEntries)}}function Ba(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().submit("Save")}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}function Ha(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().submit("Complete_Survey")}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Complete Survey"))}let Ne=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.route=h,this.dialogRef=C,this.isLoading=!0,this.showElements=!0,this.entry="",this.surveyFormDataEntries=[],this.entryValues=[],this.elementOptions=[]}ngOnInit(){this.form=this.fb.group({}),this.enquiryID=this.inputData.enquiryID,this.loadData()}loadData(){this.isLoading=!0,this.apiService.get("SurveyFormData/getSurveyFormDataByEnquiryId",this.enquiryID).subscribe(e=>{this.enquiry=e.enquiry,this.customer=e.customer,this.enquiryHeader=e.enquiryHeader,this.site=e.site,this.surveyFormHeader=e.surveyFormHeader,this.surveyFormDataEntries=e.surveyFormDataEntries,this.surveyor=e.surveyor,this.service=e.service},e=>this.utilService.ShowApiErrorMessage(e)),this.isLoading=!1}printComponent(e){this.showElements=!1;const o=document.getElementById(e),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},5)}goBack(){window.history.back()}submit(e){this.form.value.enquiryID=this.enquiryID,this.form.value.surveyFormDataEntries=this.surveyFormDataEntries,this.form.value.action=e,this.apiService.post("SurveyFormData",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}setEntryValue(e,o){this.surveyFormDataEntries[o].entryValue=e.target.value}getValue(e){document.getElementById(e.toString()).value=this.surveyFormDataEntries[e].entryValue}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(L.gz),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-editable-survey-form"]],features:[t.qOj],decls:84,vars:60,consts:[["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],[2,"font-size","1rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"font-size","1.2rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["rowspan","2",2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","400"],["style","padding-bottom:5px;padding-top:5px","class","mat-elevation-z8",4,"ngIf"],[2,"padding-bottom","5px","padding-top","5px"],[1,"col-md-12","col-lg-12","text-center"],["type","button","class","btn waves-effect waves-light btn-rounded   btn-primary btn-midblock",3,"value","click",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"],[1,"mat-elevation-z8",2,"padding-bottom","5px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],["width","3%",2,"border","2px solid #878787","padding","2px 2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","75%",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[4,"ngFor","ngForOf"],[2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["style","border:2px solid #878787;padding:5px;font-size:0.775rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight:400;",4,"ngIf"],["type","text",1,"form-control",3,"id","placeholder","value","change"],[1,"custom-select","mr-sm-2",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400",3,"id","ngModelOptions","value","change"],["value",""],["value","Yes"],["value","No"],[1,"custom-select","mr-sm-2",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400",3,"id","ngModel","ngModelOptions","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","number","min","row.minValue","max","row.maxValue",1,"form-control",3,"id","placeholder","value","change"],["type","number","min","1","max","100",1,"form-control",3,"id","placeholder","value","change"],[1,"table","table-bordered","no-wrap"],["width","75%",2,"border","2px solid #878787","padding","2px 2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h4",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"h4",2),t._uU(5),t.qZA(),t.TgZ(6,"table",3),t.TgZ(7,"tr"),t.TgZ(8,"th",4),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td",5),t._uU(12),t.qZA(),t.TgZ(13,"th",4),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"td",5),t._uU(17),t.qZA(),t.qZA(),t.TgZ(18,"tr"),t.TgZ(19,"th",4),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"td",5),t._uU(23),t.qZA(),t.TgZ(24,"th",4),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"td",5),t._uU(28),t.qZA(),t.qZA(),t.TgZ(29,"tr"),t.TgZ(30,"th",6),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"td",5),t._uU(34),t.qZA(),t.TgZ(35,"th",4),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"td",5),t._uU(39),t.qZA(),t.qZA(),t.TgZ(40,"tr"),t.TgZ(41,"td",5),t._uU(42),t.qZA(),t.TgZ(43,"th",4),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"td",5),t._uU(47),t.qZA(),t.qZA(),t.TgZ(48,"tr"),t.TgZ(49,"th",6),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"td",5),t._uU(53),t.qZA(),t.TgZ(54,"th",4),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"td",5),t._uU(58),t.qZA(),t.qZA(),t.TgZ(59,"tr"),t.TgZ(60,"td",5),t._uU(61),t.qZA(),t.TgZ(62,"th",4),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"td",5),t._uU(66),t.qZA(),t.qZA(),t.TgZ(67,"tr"),t.TgZ(68,"th",4),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"td",7),t._uU(72),t.qZA(),t.qZA(),t.qZA(),t.YNc(73,Ya,11,7,"div",8),t.YNc(74,Qa,11,7,"div",8),t.qZA(),t.TgZ(75,"div",9),t.TgZ(76,"div",10),t.YNc(77,Ba,2,3,"input",11),t._uU(78," \xa0 "),t.YNc(79,Ha,2,3,"input",11),t._uU(80," \xa0 "),t.TgZ(81,"input",12),t.NdJ("click",function(){return o.closeModel()}),t.ALo(82,"translate"),t.qZA(),t._uU(83," \xa0 "),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,34,"Survey_Form"),": "),t.xp6(3),t.AsE(" ",null==o.surveyFormHeader?null:o.surveyFormHeader.surveyFormNameArb,"(",null==o.surveyFormHeader?null:o.surveyFormHeader.surveyFormNameEng,") "),t.xp6(4),t.Oqu(t.lcZ(10,36,"Enquiry_ID")),t.xp6(3),t.Oqu(o.inputData.enquiryID),t.xp6(2),t.Oqu(t.lcZ(15,38,"Enquiry_Number")),t.xp6(3),t.Oqu(o.inputData.enquiryNumber),t.xp6(3),t.Oqu(t.lcZ(21,40,"Service_Code")),t.xp6(3),t.Oqu(null==o.service?null:o.service.serviceCode),t.xp6(2),t.Oqu(t.lcZ(26,42,"Customer")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custCode),t.xp6(3),t.Oqu(t.lcZ(32,44,"Service_Name")),t.xp6(3),t.Oqu(null==o.service?null:o.service.serviceNameEng),t.xp6(2),t.Oqu(t.lcZ(37,46,"Name")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custName),t.xp6(3),t.Oqu(null==o.service?null:o.service.serviceNameArb),t.xp6(2),t.Oqu(t.lcZ(45,48,"Mobile")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custMobile1),t.xp6(3),t.Oqu(t.lcZ(51,50,"Site_Name")),t.xp6(3),t.Oqu(null==o.site?null:o.site.siteName),t.xp6(2),t.Oqu(t.lcZ(56,52,"Address")),t.xp6(3),t.Oqu(null==o.site?null:o.site.siteAddress),t.xp6(3),t.Oqu(null==o.site?null:o.site.siteArbName),t.xp6(2),t.Oqu(t.lcZ(64,54,"City")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custCityCode1),t.xp6(3),t.Oqu(t.lcZ(70,56,"Geo_Location")),t.xp6(3),t.lnq("",null==o.site?null:o.site.siteGeoLatitude,"/",null==o.site?null:o.site.siteGeoLongitude,"/",null==o.site?null:o.site.siteGeoGain,""),t.xp6(1),t.Q6J("ngIf",!(null!=o.enquiry&&o.enquiry.isSurveyCompleted)&&o.showElements),t.xp6(1),t.Q6J("ngIf",(null==o.enquiry?null:o.enquiry.isSurveyCompleted)||!o.showElements),t.xp6(3),t.Q6J("ngIf",!(null!=o.enquiry&&o.enquiry.isSurveyCompleted)),t.xp6(2),t.Q6J("ngIf",!(null!=o.enquiry&&o.enquiry.isSurveyCompleted)),t.xp6(2),t.s9C("value",t.lcZ(82,58,"Cancel")))},directives:[f.O5,f.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On],pipes:[Z.X$],encapsulation:2}),i})();function Va(i,a){if(1&i&&(t.TgZ(0,"span",20),t._UZ(1,"validation-message",21),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.transferredDate)}}function $a(i,a){1&i&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}let $e=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.oprService=h,this.translate=C,this.dialogRef=A,this.data=[],this.isLoading=!1,this.employeePrimarySitesLogID=0,this.siteSelectionList=[]}ngOnInit(){this.setForm(),this.loadSiteSelectionList(),this.initialLoading()}refresh(){this.initialLoading()}initialLoading(){this.employeePrimarySitesLogID>0&&this.setEditForm()}setForm(){this.form=this.fb.group({employeeNumber:[this.employeePrimarySitesLogID>0?"":this.inputData.employeeNumber,l.kI.required],siteCode:["",l.kI.required],transferredDate:["",l.kI.required]})}setEditForm(){this.apiService.get("Employee/getPrimaryLogById",this.employeePrimarySitesLogID).subscribe(e=>{e&&this.form.patchValue(e)})}openDatePicker(e){e.open()}loadSiteSelectionList(){this.apiService.getall("ProjectSites/getSelectProjectSitesList2").subscribe(e=>{this.siteSelectionList=e})}submit(){if(this.form.valid){let e=new Date(this.form.controls.transferredDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.transferredDate=e,this.form.value.employeePrimarySitesLogID=this.employeePrimarySitesLogID,this.apiService.post("employee/addUpdatePrimarySiteLog",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{this.utilService.FillUpFields()})}else console.log(this.form)}cancel(){this.dialogRef.close()}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-employeeprimarysitelog"]],features:[t.qOj],decls:42,vars:33,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"row"],[1,"col-md-5","col-lg-5"],[1,"form-group"],[1,"form-control"],["bindLabel","text","bindValue","value","formControlName","siteCode",3,"items"],[1,"col-md-2","col-lg-2"],["formControlName","transferredDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","click"],["hidden",""],["matSuffix","",3,"for"],["data-date-format","yyyy/mm/dd"],["picker1",""],["style","color:red",4,"ngIf"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[2,"color","red"],[3,"control"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2,3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",7),t._uU(14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",5),t.TgZ(16,"div",6),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"ng-select",8),t.qZA(),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"div",6),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"input",10),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(32);return o.openDatePicker(r)}),t.ALo(27,"translate"),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div",11),t._UZ(30,"mat-datepicker-toggle",12),t._UZ(31,"mat-datepicker",13,14),t.qZA(),t.qZA(),t.YNc(33,Va,2,1,"span",15),t.YNc(34,$a,3,3,"span",15),t.qZA(),t.qZA(),t.TgZ(35,"div",16),t.TgZ(36,"div",17),t.TgZ(37,"input",18),t.NdJ("click",function(){return o.closeModel()}),t.ALo(38,"translate"),t.qZA(),t._uU(39," \xa0 "),t._UZ(40,"input",19),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(6),s=t.MAs(32);let r,c;t.xp6(1),t.Oqu(t.lcZ(2,17,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(6),t.Oqu(t.lcZ(12,19,"Employee")),t.xp6(3),t.lnq(" ",o.inputData.employeeNumber,"/",o.inputData.employeeName,"/",o.inputData.employeeNameAr," "),t.xp6(4),t.Oqu(t.lcZ(19,21,"Site")),t.xp6(2),t.Q6J("items",o.siteSelectionList),t.xp6(4),t.Oqu(t.lcZ(25,23,"Transfered_Date")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(27,25,"Please_Enter")," ",t.lcZ(28,27,"From_Date"),""),t.Q6J("matDatepicker",s),t.xp6(4),t.Q6J("for",s),t.xp6(3),t.Q6J("ngIf",!(null!=(r=o.form.get("transferredDate"))&&r.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(c=o.form.get("transferredDate"))?null:c.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.s9C("value",t.lcZ(38,29,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(41,31,"Save"))}},directives:[l._Y,l.JL,l.sg,Dt.w9,l.JJ,l.u,l.Fj,M.hl,M.nW,gt.R9,M.Mq,f.O5,G.s],pipes:[Z.X$],encapsulation:2}),i})();function Ga(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t.TgZ(11,"span"),t.TgZ(12,"a",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s)}),t.ALo(13,"translate"),t._UZ(14,"i",18),t.qZA(),t._uU(15,"\xa0 "),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.primarySiteCode," "),t.xp6(2),t.hij(" ",e.primarySiteName,""),t.xp6(2),t.hij(" ",e.primarySiteNameAr," "),t.xp6(2),t.hij(" ",e.primarySiteLogId>0?t.xi3(9,5,e.lastTransferDate,"dd/MM/yyyy"):"-"," "),t.xp6(4),t.s9C("matTooltip",t.lcZ(13,8,"edit"))}}let Wa=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.oprService=h,this.translate=C,this.dialogRef=A,this.data=[],this.isLoading=!1,this.employeeName="",this.employeeNameAr=""}ngOnInit(){this.initialLoading()}refresh(){this.initialLoading()}initialLoading(){this.isLoading=!0,this.apiService.getall(`Employee/getEmployeesPrimarySiteLogs/${this.employeeNumber}`).subscribe(e=>{this.data=e,this.isLoading=!1},e=>this.utilService.ShowApiErrorMessage(e)),this.apiService.getall(`Employee/getEmployeeByEmployeeNumber/${this.employeeNumber}`).subscribe(e=>{this.employeeName=e.employeeName,this.employeeNameAr=e.employeeName_AR},e=>this.utilService.ShowApiErrorMessage(e))}add(e){}edit(e){this.isLoading||this.openDialogManage(e.primarySiteLogId,g.O.update,e.primarySiteLogId>0?"Updating_Primary_Site_Log":"Adding_Primary_Site_Log","Update",$e)}closeModel(){this.dialogRef.close()}openDialogManage(e,o,n,s,r){let c=this.oprService.openFullWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.employeePrimarySitesLogID=e,c.componentInstance.inputData={employeeNumber:this.employeeNumber,employeeName:this.employeeName,employeeNameAr:this.employeeNameAr},c.afterClosed().subscribe(p=>{p&&!0===p&&this.dialogRef.close(!0)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-employeeprimarysitelogs"]],features:[t.qOj],decls:37,vars:17,consts:[[1,"card-body"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"cardtitle-divider"],[1,"col-md-12","col-lg-12",2,"text-align","center"],[1,"table","table-bordered","no-wrap"],["colspan","2"],[4,"ngFor","ngForOf"],[1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-note"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h3"),t._uU(2),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"nav",6),t.TgZ(10,"ol",7),t.TgZ(11,"li",8),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"li",8),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"li",9),t._uU(18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"div",3),t.TgZ(21,"div",11),t.TgZ(22,"div",0),t._UZ(23,"div",12),t.TgZ(24,"div",13),t.TgZ(25,"table",14),t.TgZ(26,"thead"),t.TgZ(27,"tr"),t.TgZ(28,"th",15),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"th"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"th"),t.qZA(),t.qZA(),t.TgZ(35,"tbody"),t.YNc(36,Ga,16,10,"tr",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij(" ",o.modalTitle," "),t.xp6(10),t.hij(" ",t.lcZ(13,9,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(16,11,"Primary_Site_Log")," "),t.xp6(3),t.lnq("",o.employeeNumber,"(",o.employeeName,"/",o.employeeNameAr,")"),t.xp6(11),t.hij(" ",t.lcZ(30,13,"Site")," "),t.xp6(3),t.hij(" ",t.lcZ(33,15,"Transfer_Date")," "),t.xp6(4),t.Q6J("ngForOf",o.data))},directives:[f.sg,rt.gM],pipes:[Z.X$,f.uU],encapsulation:2}),i})();function za(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Number")," "))}function Xa(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeNumber)}}function Ka(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Name")," "))}function ts(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeName)}}function es(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Name")," "))}function os(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeNameAr)}}function is(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function ns(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.primarySiteCode)}}function as(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Name")," "))}function ss(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.primarySiteName)}}function rs(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Name")," "))}function ls(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.primarySiteNameAr)}}function cs(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Transfered_Date")," "))}function ps(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.primarySiteLogId>0?t.xi3(2,1,e.lastTransferDate,"dd/MM/yyyy"):"-")}}function us(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function ds(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().view(n)}),t.ALo(2,"translate"),t._UZ(3,"i",40),t.qZA(),t._uU(4,"\xa0 "),t.qZA()}2&i&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"view_logs")))}function ms(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().add(n)}),t.ALo(2,"translate"),t._UZ(3,"i",41),t._uU(4,"\xa0 "),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"add_new_log")))}function _s(i,a){if(1&i&&(t.TgZ(0,"td",36),t.YNc(1,ds,5,3,"span",38),t.YNc(2,ms,5,3,"span",38),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.primarySiteLogId>0),t.xp6(1),t.Q6J("ngIf",0==e.primarySiteLogId)}}function gs(i,a){1&i&&t._UZ(0,"tr",42)}function hs(i,a){1&i&&t._UZ(0,"tr",43)}const fs=function(){return{standalone:!0}};let Zs=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.oprService=h,this.translate=C,this.displayedColumns=["employeeNumber","employeeName","employeeNameAr","primarySiteCode","primarySiteName","primarySiteNameAr","lastTransferDate","Actions"],this.searchValue="",this.sortingOrder="primarySiteLogId desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Employee/getEmployeesPrimarySiteLogPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}add(e){this.isLoading||this.openDialogManage2(e,0,g.O.update,e.primarySiteLogId>0?"Updating_Primary_Site_Log":"Adding_Primary_Site_Log","Update",$e)}view(e){this.isLoading||this.openDialogManage(e,g.O.update,"Primary_Sites_Log","View",Wa)}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.requestData=e,c.componentInstance.employeeNumber=e.employeeNumber,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openDialogManage2(e,o,n,s,r,c){let p=this.oprService.openFullWidthDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.employeePrimarySitesLogID=o,p.componentInstance.inputData={employeeNumber:e.employeeNumber,employeeName:e.employeeName,employeeNameAr:e.employeeNameAr},p.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-employee-primarysitelogs"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:63,vars:26,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-4","col-lg-4"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-4","col-lg-4","text-center"],[3,"isLoading"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","employeeNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["matColumnDef","employeeNameAr"],["matColumnDef","primarySiteCode"],["matColumnDef","primarySiteName"],["matColumnDef","primarySiteNameAr"],["matColumnDef","lastTransferDate"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[4,"ngIf"],[1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-list"],[1,"fas","fa-plus-circle"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"nav",4),t.TgZ(5,"ol",5),t.TgZ(6,"li",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"li",6),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",8),t.TgZ(16,"div",1),t.TgZ(17,"div",9),t.TgZ(18,"div",10),t.TgZ(19,"div",11),t.TgZ(20,"div",1),t.TgZ(21,"div",9),t.TgZ(22,"h4",12),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.TgZ(25,"div",13),t.TgZ(26,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",15),t._UZ(29,"spinner-loader",16),t.qZA(),t.qZA(),t._UZ(30,"div",17),t.TgZ(31,"div",18),t.TgZ(32,"div",19),t.ynx(33),t.TgZ(34,"table",20),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(35,21),t.YNc(36,za,3,3,"th",22),t.YNc(37,Xa,2,1,"td",23),t.BQk(),t.ynx(38,24),t.YNc(39,Ka,3,3,"th",22),t.YNc(40,ts,2,1,"td",23),t.BQk(),t.ynx(41,25),t.YNc(42,es,3,3,"th",22),t.YNc(43,os,2,1,"td",23),t.BQk(),t.ynx(44,26),t.YNc(45,is,3,3,"th",22),t.YNc(46,ns,2,1,"td",23),t.BQk(),t.ynx(47,27),t.YNc(48,as,3,3,"th",22),t.YNc(49,ss,2,1,"td",23),t.BQk(),t.ynx(50,28),t.YNc(51,rs,3,3,"th",22),t.YNc(52,ls,2,1,"td",23),t.BQk(),t.ynx(53,29),t.YNc(54,cs,3,3,"th",22),t.YNc(55,ps,3,4,"td",23),t.BQk(),t.ynx(56,30),t.YNc(57,us,3,3,"th",31),t.YNc(58,_s,3,2,"td",23),t.BQk(),t.YNc(59,gs,1,0,"tr",32),t.YNc(60,hs,1,0,"tr",33),t.qZA(),t.ynx(61),t.TgZ(62,"mat-paginator",34),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,15,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(11,17,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(14,19,"Primary_Site_Log")),t.xp6(10),t.hij("",t.lcZ(24,21,"Primary_Site_Log")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(27,23,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(25,fs)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$,f.uU],encapsulation:2}),i})(),Cs=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.employeeID=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.employeeID>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({employeeNumber:["",l.kI.required],employeeName:["",l.kI.required],employeeID:["",l.kI.required]})}submit(){this.form.valid?(this.employeeID>0&&(this.form.value.employeeID=this.employeeID),this.apiService.post("Employee",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Employee/getEmployeeById",this.employeeID).subscribe(e=>{e&&this.form.patchValue(e)})}reset(){this.form.controls.employeeNumber.setValue(""),this.form.controls.employeeName.setValue(""),this.form.controls.employeeID.setValue("")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-employee"]],features:[t.qOj],decls:41,vars:42,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","number","formControlName","employeeID",1,"form-control",3,"placeholder","readonly"],[3,"control"],["type","text","formControlName","employeeNumber",1,"form-control",3,"placeholder","readonly"],["type","text","formControlName","employeeName",1,"form-control",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",10),t.TgZ(35,"div",11),t.TgZ(36,"input",12),t.NdJ("click",function(){return o.closeModel()}),t.ALo(37,"translate"),t.qZA(),t._uU(38," \xa0 "),t._UZ(39,"input",13),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,18,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,20,"Employee_ID")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,22,"Please_Enter")," ",t.lcZ(14,24,"Employee_ID"),""),t.s9C("readonly",o.readonly),t.xp6(3),t.Q6J("control",o.form.controls.employeeID),t.xp6(4),t.Oqu(t.lcZ(20,26,"Employee_Number")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,28,"Please_Enter")," ",t.lcZ(23,30,"Employee_Number"),""),t.s9C("readonly",o.readonly),t.xp6(3),t.Q6J("control",o.form.controls.employeeNumber),t.xp6(4),t.Oqu(t.lcZ(29,32,"Employee_Name_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,34,"Please_Enter")," ",t.lcZ(32,36,"Employee_Name_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.employeeName),t.xp6(3),t.s9C("value",t.lcZ(37,38,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(40,40,"Save")))},directives:[l._Y,l.JL,l.sg,l.wV,l.Fj,l.JJ,l.u,G.s],pipes:[Z.X$],encapsulation:2}),i})();function As(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Code")," "))}function Ts(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeNumber)}}function vs(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Name_English")," "))}function xs(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeName)}}function qs(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function bs(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",34),t.TgZ(1,"div",36),t.TgZ(2,"a",37),t._UZ(3,"i",38),t.qZA(),t.TgZ(4,"div",39),t.TgZ(5,"a",40),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.employeeID)}),t._UZ(6,"i",41),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"a",40),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().delete(s.employeeID)}),t._UZ(10,"i",42),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.Oqu(t.lcZ(8,2,"Edit_Employee")),t.xp6(4),t.Oqu(t.lcZ(12,4,"Delete_Employee")))}function ys(i,a){1&i&&t._UZ(0,"tr",43)}function Ss(i,a){1&i&&t._UZ(0,"tr",44)}let ws=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.displayedColumns=["employeeNumber","employeeName","Actions"],this.searchValue="",this.sortingOrder="employeeID desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Employee/getEmployeesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,setTimeout(()=>this.data.sort=this.sort,2e3),this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,Cs);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.employeeID=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Employee","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Employee","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Employee",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-employee"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:53,vars:26,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-6","col-lg-6"],[1,"card-title","pt6"],[1,"col-md-6","col-lg-6","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],[1,"input-group","mb-3"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelChange","keyup"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","employeeNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],[1,"icon-trash"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"h4",14),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",15),t.TgZ(29,"a",16),t.NdJ("click",function(){return o.create()}),t._UZ(30,"i",17),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(33,"div",18),t.TgZ(34,"div",19),t.TgZ(35,"div",20),t.TgZ(36,"div",21),t.TgZ(37,"input",22),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)}),t.qZA(),t.qZA(),t.ynx(38),t.TgZ(39,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(40,24),t.YNc(41,As,3,3,"th",25),t.YNc(42,Ts,2,1,"td",26),t.BQk(),t.ynx(43,27),t.YNc(44,vs,3,3,"th",25),t.YNc(45,xs,2,1,"td",26),t.BQk(),t.ynx(46,28),t.YNc(47,qs,3,3,"th",29),t.YNc(48,bs,13,6,"td",26),t.BQk(),t.YNc(49,ys,1,0,"tr",30),t.YNc(50,Ss,1,0,"tr",31),t.qZA(),t.ynx(51),t.TgZ(52,"mat-paginator",32),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,14,"Employees")," "),t.xp6(6),t.hij(" ",t.lcZ(11,16,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,18,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,20,"Employees")),t.xp6(10),t.hij("",t.lcZ(27,22,"Employee_List")," "),t.xp6(5),t.hij("",t.lcZ(32,24,"Add_New_Employee")," "),t.xp6(6),t.Q6J("ngModel",o.searchValue),t.xp6(2),t.Q6J("dataSource",o.data),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function Us(i,a){if(1&i&&(t.TgZ(0,"mat-option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.AsE(" ",o.isArabic?null==e?null:e.textTwo:null==e?null:e.text,"-",null==e?null:e.value," ")}}function Ls(i,a){if(1&i&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.lnq("",e.value,"-",e.text,"-",e.textTwo,"")}}function Ds(i,a){if(1&i&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",o.isArab?e.textTwo:e.text,"")}}function Ns(i,a){if(1&i&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.Oqu(o.isArab?e.textTwo:e.text)}}function Es(i,a){if(1&i&&(t.TgZ(0,"option",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.text)}}function Os(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw().removeEnquiry(n)}),t._UZ(2,"i",59),t.qZA(),t.qZA()}}function js(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",45),t._uU(14),t.qZA(),t.TgZ(15,"td"),t.YNc(16,Os,3,0,"span",58),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();let n,s;t.xp6(2),t.Oqu(o.isArab?null==(n=o.getSite(e.siteCode))?null:n.textTwo:null==(n=o.getSite(e.siteCode))?null:n.text),t.xp6(2),t.Oqu(o.isArab?null==(s=o.getService(e.serviceCode))?null:s.textTwo:null==(s=o.getService(e.serviceCode))?null:s.text),t.xp6(2),t.Oqu(e.unitCode),t.xp6(2),t.Oqu(e.pricePerUnit),t.xp6(2),t.Oqu(e.serviceQuantity),t.xp6(2),t.Oqu(e.unitQuantity),t.xp6(2),t.Oqu(e.estimatedPrice),t.xp6(2),t.Q6J("ngIf",0==e.enquiryID||!e.isApproved)}}const Gt=function(){return{standalone:!0}};let It=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.readonly="",this.showApprove=!0,this.id=0,this.siteCodeList=[],this.siteCodeListAll=[],this.unitCodeList=[],this.serviceCodeList=[],this.customerCode="",this.custCodeControl=new l.NI("",l.kI.required),this.branchCodeList=[],this.isDataLoading=!1,this.listOfEnquiries=[],this.sequence=1,this.editsequence=0,this.enquiryNumber="",this.serviceCode="",this.serviceQuantity=0,this.pricePerUnit=0,this.unitQuantity=0,this.estimatedPrice=0,this.totalEstPrice=0,this.statusEnquiry="Open",this.serviceNameArb="",this.serviceNameEng="",this.custAddress="",this.isActive=!0,this.stusEnquiryHead="Open",this.isOldEnquiryForm=!1,this.isArabic=!1,this.isAdednum=!1,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,tt.O)(this.customerCode),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterCustCodes(h||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadBranchCodes(){this.apiService.getall("Branch/getSelectBranchCodeList").subscribe(e=>{console.log(e),this.apiService.getall("OpAuthorities/getOpAuthoritiesListByUserId").subscribe(o=>{if(console.log(o),0==o.length)this.utilService.ShowApiErrorMessage(this.translate.instant("You_Can_Not_Create_Enquiry")),this.dialogRef.close(!1);else{for(let n=0;n<o.length;n++){let s=e.find(r=>r.value==o[n].branchCode);null!=s&&-1==this.branchCodeList.findIndex(r=>r.value==s.branchCode)&&this.branchCodeList.push(s)}console.log(this.branchCodeList)}})})}loadSiteCodes(e){this.apiService.getall(`CustomerSite/getSelectSiteListByCustCode/${e}`).subscribe(o=>{this.siteCodeList=o,this.siteCodeListAll=o,this.id>0&&this.loadSiteListNotCovertedAsProject()})}loadServiceCodes(){this.apiService.getall("Services/getSelectServiceList").subscribe(e=>{this.serviceCodeList=e})}loadUnitCodes(e){this.apiService.getall("Units/getSelectUnitListByServiceCode/"+e).subscribe(o=>{this.unitCodeList=o,console.log(o)})}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.setForm(),null!=this.enquiryHead&&this.setEditForm(),this.readonly="readonly",this.loadBranchCodes()}setForm(){this.form=this.fb.group({sitecode:[""],enquiryNumber:["XXXXXXXXXX"],customerCode:["",l.kI.required],branchCode:["",l.kI.required],dateOfEnquiry:["",l.kI.required],estimateClosingDate:["",l.kI.required],userName:[""],totalEstPrice:[],remarks:[""],stusEnquiryHead:["Open"],isActive:[!0],saleRep:[""],custAddress:[""],serviceNameArb:[""],serviceNameEng:[""],serviceCode:[""],unitCode:[""]}),this.setToDefault()}submit(){let e=new Date(this.form.controls.dateOfEnquiry.value),o=new Date(this.form.controls.estimateClosingDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),o.setMinutes(o.getMinutes()-o.getTimezoneOffset()),this.form.value.dateOfEnquiry=e,this.form.value.estimateClosingDate=o,this.form.valid&&this.listOfEnquiries.length>0?(this.id>0&&(this.form.value.id=this.id),this.form.value.enquiriesList=this.listOfEnquiries,this.form.value.custAddress=this.custAddress,this.form.value.estimatedPrice=this.estimatedPrice,this.form.value.serviceNameArb=this.serviceNameArb,this.form.value.serviceNameEng=this.serviceNameEng,this.apiService.post("ServiceEnquiryForm",this.form.value).subscribe(n=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})):this.utilService.FillUpFields()}setEditForm(){this.form.controls.customerCode.disable({onlySelf:!0}),this.custCodeControl.disable({onlySelf:!0}),this.apiService.getall(`ServiceEnquiryHeader/getEnquiryFormHeaderByEnquiryNumber/${this.enquiryHead.enquiryNumber}`).subscribe(e=>{e&&(this.custCodeControl.setValue(this.enquiryHead.customerCode),this.customerCode=this.enquiryHead.customerCode,this.form.controls.customerCode.setValue(this.enquiryHead.customerCode),this.form.patchValue(e),this.form.patchValue({id:e.id}),this.id=e.id,this.getEnquiriesList(),this.loadSiteCodes(this.enquiryHead.customerCode),this.totalEstPrice=e.totalEstPrice,this.onSelectionCustomerCode(this.enquiryHead.customerCode,3))})}getEnquiriesList(){this.apiService.getall(`ServiceEnquiries/getSevriceEnquiriesByEnquiryNumber/${this.enquiryHead.enquiryNumber}`).subscribe(e=>{e&&(this.listOfEnquiries=e,e.findIndex(o=>o.isApproved)>=0&&this.loadSiteListNotCovertedAsProject())})}loadSiteListNotCovertedAsProject(){this.enquiryNumber=this.form.value.enquiryNumber,this.apiService.getall(`projectSites/getSelectSiteListWhicAreNotConvertedAsProjectByEnquiryNumber/${this.enquiryNumber}`).subscribe(e=>{this.siteCodeList=e})}addEnquiry(){this.enquiryNumber=this.form.value.enquiryNumber,null!=this.siteCode&&""!=this.siteCode&&null!=this.serviceCode&&""!=this.serviceCode&&null!=this.unitCode&&""!=this.unitCode&&this.serviceQuantity>0&&this.unitQuantity>0&&this.pricePerUnit>0&&""!=this.statusEnquiry&&(this.estimatedPrice=this.pricePerUnit*this.serviceQuantity*this.unitQuantity,this.totalEstPrice=this.totalEstPrice+this.estimatedPrice,this.listOfEnquiries.push({sequence:this.getSequence(),enquiryID:0,enquiryNumber:this.enquiryNumber,siteCode:this.siteCode,serviceCode:this.serviceCode,unitCode:this.unitCode,serviceQuantity:this.serviceQuantity,unitQuantity:this.unitQuantity,estimatedPrice:this.estimatedPrice,statusEnquiry:this.statusEnquiry,serviceNameArb:this.serviceNameArb,serviceNameEng:this.serviceNameEng,pricePerUnit:this.pricePerUnit,totalEstPrice:this.totalEstPrice,isAssignedSurveyor:!1}),this.form.value.totalEstPrice=this.totalEstPrice,this.form.value.enquiriesList=this.listOfEnquiries,this.setToDefault())}removeEnquiry(e){this.totalEstPrice=this.totalEstPrice-this.listOfEnquiries[e].estimatedPrice,this.form.value.totalEstPrice=this.totalEstPrice,this.setToDefault(),this.listOfEnquiries.splice(e,1),this.downSequence()}setToDefault(){this.siteCode=this.serviceCode=this.serviceNameEng=this.serviceNameArb=this.unitCode="",this.estimatedPrice=this.serviceQuantity=this.pricePerUnit=this.unitQuantity=0,this.isActive=!0}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.enquiryNumber.setValue(""),this.form.controls.customerCode.setValue(""),this.form.controls.siteCode.setValue(""),this.form.controls.unitCode.setValue(""),this.form.controls.pricePerUnit.setValue(0),this.form.controls.dateOfEnquiry.setValue(""),this.form.controls.estimateClosingDate.setValue(""),this.form.controls.userName.setValue(""),this.form.controls.totalEstPrice.setValue(0),this.form.controls.stusEnquiryHead.setValue(""),this.form.controls.remarks.setValue(""),this.form.controls.isActive.setValue(!0),this.form.controls.saleRep.setValue(""),this.form.controls.custAddress.setValue("")}closeModel(){this.dialogRef.close()}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o?n=e.target.value:3==o&&(n=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){this.form.patchValue({custAddress:s.custAddress1,saleRep:s.custSalesRep,customerCode:s.custCode});let r=this.custCodeControl.value;this.form.value.customerCode=r,this.loadSiteCodes(r),this.loadServiceCodes()}else this.form.controls.customerCode.setValue(""),this.form.controls.custAddress.setValue(""),this.form.controls.saleRep.setValue(""),this.custCodeControl.setValue(""),this.siteCodeList=[]})}getServiceDetails(e){if(""!=e.target.value){const o=e.target.value;this.apiService.getall("Services/getServiceByServiceCode/"+o).subscribe(n=>{this.serviceNameEng=n.serviceNameEng,this.serviceNameArb=n.serviceNameArb,this.serviceCode=o}),this.loadUnitCodes(o)}else this.unitCodeList=[];this.serviceQuantity=0,this.unitQuantity=0,this.pricePerUnit=0,this.estimatedPrice=0}getServiceUnitPrice(e){if(""!=e.target.value){const o=e.target.value;this.apiService.getall("ServiceUnitMap/getServiceUnitMapByServiceAndUnitCode?UnitCode="+o+"&ServiceCode="+this.serviceCode).subscribe(n=>{this.pricePerUnit=n.pricePerUnit,this.unitCode=o})}else this.serviceQuantity=0,this.unitQuantity=0,this.pricePerUnit=0,this.estimatedPrice=0}calculateEstimatePrice(e,o){if(null!==e){let n=e.target.value;this.estimatedPrice="serviceQuantity"==o?this.pricePerUnit*this.unitQuantity*n:"pricePerUnit"==o?n*this.serviceQuantity*this.unitQuantity:"unitQuantity"==o?n*this.serviceQuantity*this.pricePerUnit:0}else this.estimatedPrice=this.pricePerUnit*this.serviceQuantity*this.unitQuantity}getService(e){return this.serviceCodeList.find(o=>o.value==e)}getSite(e){return this.siteCodeListAll.find(o=>o.value==e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-enquiry-form"]],features:[t.qOj],decls:237,vars:217,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"col-sm-3"],[1,"mr-sm-2"],["formControlName","stusEnquiryHead",1,"custom-select","mr-sm-2"],["value","Open"],["value","Closed"],["value","InProgress"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["type","text","formControlName","enquiryNumber","readonly","",1,"form-control",3,"placeholder"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","dateOfEnquiry",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["data-date-format","mm/yyyy"],["picker",""],["formControlName","estimateClosingDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],["picker2",""],["type","text","readonly","","formControlName","custAddress",1,"form-control",3,"placeholder"],["type","text","formControlName","saleRep","readonly","readonly",1,"form-control",3,"placeholder"],["type","text","formControlName","userName",1,"form-control",3,"placeholder"],["formControlName","branchCode",1,"custom-select","mr-sm-2"],["value",""],["formControlName","remarks",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","number",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],["type","number","readonly","readonly",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"text-right"],[1,"tableicons",3,"click"],[1,"fas","fa-plus-circle"],["colspan","8"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","5","rowspan","5",1,"text-right","bgcolor"],[1,"text-right","bgcolor"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],[4,"ngIf"],[1,"fas","fa-minus-circle"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t.TgZ(12,"label",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"select",9),t.TgZ(16,"option",10),t._uU(17),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"option",10),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"option",11),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option",12),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",13),t.TgZ(30,"div",5),t.TgZ(31,"div",14),t.TgZ(32,"div",15),t.TgZ(33,"div",16),t.TgZ(34,"div",17),t.TgZ(35,"label",8),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",18),t.ALo(39,"translate"),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.TgZ(41,"div",16),t.TgZ(42,"label",8),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"div",17),t.TgZ(46,"div",19),t._UZ(47,"auto-loader",20),t._UZ(48,"input",21),t.ALo(49,"translate"),t.ALo(50,"translate"),t.TgZ(51,"mat-autocomplete",22,23),t.NdJ("optionSelected",function(s){return o.onSelectionCustomerCode(s,1)}),t.YNc(53,Us,2,3,"mat-option",24),t.ALo(54,"async"),t.qZA(),t.qZA(),t._UZ(55,"validation-message",25),t.qZA(),t.qZA(),t.TgZ(56,"div",16),t.TgZ(57,"label",8),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"div",17),t.TgZ(61,"div",19),t._UZ(62,"input",26),t.ALo(63,"translate"),t.TgZ(64,"div",27),t._UZ(65,"mat-datepicker-toggle",28),t._UZ(66,"mat-datepicker",29,30),t.qZA(),t.qZA(),t.qZA(),t._UZ(68,"validation-message",25),t.qZA(),t.TgZ(69,"div",16),t.TgZ(70,"label",8),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"div",17),t.TgZ(74,"div",19),t._UZ(75,"input",31),t.ALo(76,"translate"),t.TgZ(77,"div",27),t._UZ(78,"mat-datepicker-toggle",28),t._UZ(79,"mat-datepicker",29,32),t.qZA(),t.qZA(),t.qZA(),t._UZ(81,"validation-message",25),t.qZA(),t.TgZ(82,"div",16),t.TgZ(83,"div",17),t.TgZ(84,"label",8),t._uU(85),t.ALo(86,"translate"),t.qZA(),t._UZ(87,"input",33),t.ALo(88,"translate"),t._UZ(89,"validation-message",25),t.qZA(),t.qZA(),t.TgZ(90,"div",16),t.TgZ(91,"div",17),t.TgZ(92,"label",8),t._uU(93),t.ALo(94,"translate"),t.qZA(),t._UZ(95,"input",34),t.ALo(96,"translate"),t.ALo(97,"translate"),t.qZA(),t.qZA(),t.TgZ(98,"div",16),t.TgZ(99,"div",17),t.TgZ(100,"label",8),t._uU(101),t.ALo(102,"translate"),t.qZA(),t._UZ(103,"input",35),t.ALo(104,"translate"),t.ALo(105,"translate"),t.qZA(),t.qZA(),t.TgZ(106,"div",16),t.TgZ(107,"div",17),t.TgZ(108,"label"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t._UZ(111,"br"),t.TgZ(112,"select",36),t.TgZ(113,"option",37),t._uU(114),t.ALo(115,"translate"),t.ALo(116,"translate"),t.qZA(),t.YNc(117,Ls,2,4,"option",24),t.qZA(),t._UZ(118,"validation-message",25),t.qZA(),t.qZA(),t.TgZ(119,"div",5),t.TgZ(120,"div",17),t.TgZ(121,"label",8),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"textarea",38),t.ALo(125,"translate"),t.ALo(126,"translate"),t._uU(127,"                    \n"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(128,"div",39),t.TgZ(129,"table",40),t.TgZ(130,"thead"),t.TgZ(131,"tr"),t.TgZ(132,"th"),t._uU(133),t.ALo(134,"translate"),t.qZA(),t.TgZ(135,"th"),t._uU(136),t.ALo(137,"translate"),t.qZA(),t.TgZ(138,"th"),t._uU(139),t.ALo(140,"translate"),t.qZA(),t.TgZ(141,"th"),t._uU(142),t.ALo(143,"translate"),t.qZA(),t.TgZ(144,"th"),t._uU(145),t.ALo(146,"translate"),t.qZA(),t.TgZ(147,"th"),t._uU(148),t.ALo(149,"translate"),t.qZA(),t.TgZ(150,"th"),t._uU(151),t.ALo(152,"translate"),t.qZA(),t._UZ(153,"th"),t.qZA(),t.qZA(),t.TgZ(154,"tbody"),t.TgZ(155,"tr"),t.TgZ(156,"td"),t.TgZ(157,"select",41),t.NdJ("ngModelChange",function(s){return o.siteCode=s}),t.TgZ(158,"option",37),t._uU(159),t.ALo(160,"translate"),t.ALo(161,"translate"),t.qZA(),t.YNc(162,Ds,2,3,"option",24),t.qZA(),t.qZA(),t.TgZ(163,"td"),t.TgZ(164,"select",42),t.NdJ("ngModelChange",function(s){return o.serviceCode=s})("change",function(s){return o.getServiceDetails(s)}),t.TgZ(165,"option",37),t._uU(166),t.ALo(167,"translate"),t.ALo(168,"translate"),t.qZA(),t.YNc(169,Ns,2,2,"option",24),t.qZA(),t.qZA(),t.TgZ(170,"td"),t.TgZ(171,"select",42),t.NdJ("ngModelChange",function(s){return o.unitCode=s})("change",function(s){return o.getServiceUnitPrice(s)}),t.TgZ(172,"option",37),t._uU(173),t.ALo(174,"translate"),t.ALo(175,"translate"),t.qZA(),t.YNc(176,Es,2,2,"option",24),t.qZA(),t.qZA(),t.TgZ(177,"td"),t.TgZ(178,"input",43),t.NdJ("ngModelChange",function(s){return o.pricePerUnit=s})("keyup",function(s){return o.calculateEstimatePrice(s,"pricePerUnit")}),t.ALo(179,"translate"),t.qZA(),t.qZA(),t.TgZ(180,"td"),t.TgZ(181,"input",43),t.NdJ("ngModelChange",function(s){return o.serviceQuantity=s})("keyup",function(s){return o.calculateEstimatePrice(s,"serviceQuantity")}),t.ALo(182,"translate"),t.qZA(),t.qZA(),t.TgZ(183,"td"),t.TgZ(184,"input",43),t.NdJ("ngModelChange",function(s){return o.unitQuantity=s})("keyup",function(s){return o.calculateEstimatePrice(s,"unitQuantity")}),t.ALo(185,"translate"),t.qZA(),t.qZA(),t.TgZ(186,"td"),t.TgZ(187,"input",44),t.NdJ("ngModelChange",function(s){return o.estimatedPrice=s}),t.ALo(188,"translate"),t.qZA(),t.qZA(),t.TgZ(189,"td",45),t.TgZ(190,"a",46),t.NdJ("click",function(){return o.addEnquiry()}),t._UZ(191,"i",47),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(192,"tr"),t._UZ(193,"td",48),t.qZA(),t.TgZ(194,"thead"),t.TgZ(195,"tr"),t.TgZ(196,"th"),t._uU(197),t.ALo(198,"translate"),t.qZA(),t.TgZ(199,"th"),t._uU(200),t.ALo(201,"translate"),t.qZA(),t.TgZ(202,"th"),t._uU(203),t.ALo(204,"translate"),t.qZA(),t.TgZ(205,"th"),t._uU(206),t.ALo(207,"translate"),t.qZA(),t.TgZ(208,"th"),t._uU(209),t.ALo(210,"translate"),t.qZA(),t.TgZ(211,"th"),t._uU(212),t.ALo(213,"translate"),t.qZA(),t.TgZ(214,"th"),t._uU(215),t.ALo(216,"translate"),t.qZA(),t._UZ(217,"th"),t.qZA(),t.qZA(),t.TgZ(218,"tbody"),t.YNc(219,js,17,8,"tr",49),t.qZA(),t.TgZ(220,"tfoot"),t.TgZ(221,"tr",50),t._UZ(222,"td",51),t.TgZ(223,"td",52),t._uU(224),t.ALo(225,"translate"),t.qZA(),t.TgZ(226,"td",52),t._uU(227),t.qZA(),t._UZ(228,"td",52),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(229,"div",53),t.TgZ(230,"div",13),t.TgZ(231,"div",54),t.TgZ(232,"input",55),t.NdJ("click",function(){return o.closeModel()}),t.ALo(233,"translate"),t.qZA(),t._uU(234," \xa0 "),t._UZ(235,"input",56),t.ALo(236,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(52),s=t.MAs(67),r=t.MAs(80);t.xp6(1),t.hij(" ",t.lcZ(2,92,"Create_New_Service_Enquiry")," "),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(8),t.Oqu(t.lcZ(14,94,"Enquiry_Status")),t.xp6(4),t.AsE("",t.lcZ(18,96,"Select ")," ",t.lcZ(19,98,"Enquiry_Status"),""),t.xp6(4),t.hij("",t.lcZ(22,100,"Open")," "),t.xp6(3),t.hij("",t.lcZ(25,102,"Closed")," "),t.xp6(3),t.hij("",t.lcZ(28,104,"InProgress")," "),t.xp6(9),t.Oqu(t.lcZ(37,106,"Enquiry_Number")),t.xp6(2),t.hYB("placeholder","",t.lcZ(39,108,"Please_Enter")," ",t.lcZ(40,110,"Enquiry_Number"),""),t.xp6(5),t.Oqu(t.lcZ(44,112,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(49,114,"Please_Enter")," ",t.lcZ(50,116,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",n),t.xp6(5),t.Q6J("ngForOf",t.lcZ(54,118,o.filteredCustCodes)),t.xp6(2),t.Q6J("control",o.custCodeControl),t.xp6(3),t.Oqu(t.lcZ(59,120,"Date_of_Enquiry")),t.xp6(4),t.s9C("placeholder",t.lcZ(63,122,"Select_a_Date")),t.Q6J("matDatepicker",s),t.xp6(3),t.Q6J("for",s),t.xp6(3),t.Q6J("control",o.form.controls.dateOfEnquiry),t.xp6(3),t.Oqu(t.lcZ(72,124,"Estimate_Closing_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(76,126,"Estimate_Closing_Date")),t.Q6J("matDatepicker",r),t.xp6(3),t.Q6J("for",r),t.xp6(3),t.Q6J("control",o.form.controls.estimateClosingDate),t.xp6(4),t.Oqu(t.lcZ(86,128,"Customer_Address")),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(88,130,"Customer_Address"),""),t.xp6(2),t.Q6J("control",o.form.controls.custAddress),t.xp6(4),t.Oqu(t.lcZ(94,132,"Sales_Representative")),t.xp6(2),t.hYB("placeholder","",t.lcZ(96,134,"Please_Enter")," ",t.lcZ(97,136,"Sales_Representative"),""),t.xp6(6),t.Oqu(t.lcZ(102,138,"Enquiry_Created_By")),t.xp6(2),t.hYB("placeholder","",t.lcZ(104,140,"Please_Enter")," ",t.lcZ(105,142,"Enquiry_Created_By"),""),t.xp6(6),t.Oqu(t.lcZ(110,144,"Branch")),t.xp6(5),t.AsE("",t.lcZ(115,146,"Select")," ",t.lcZ(116,148,"Branch")," "),t.xp6(3),t.Q6J("ngForOf",o.branchCodeList),t.xp6(1),t.Q6J("control",o.form.controls.branchCode),t.xp6(4),t.Oqu(t.lcZ(123,150,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(125,152,"Please_Select")," ",t.lcZ(126,154,"Remarks"),""),t.xp6(9),t.Oqu(t.lcZ(134,156,"Site")),t.xp6(3),t.Oqu(t.lcZ(137,158,"Service_Name")),t.xp6(3),t.Oqu(t.lcZ(140,160,"Service_Unit")),t.xp6(3),t.Oqu(t.lcZ(143,162,"Price_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(146,164,"Service_Quantity")),t.xp6(3),t.Oqu(t.lcZ(149,166,"Unit_Quantity")),t.xp6(3),t.Oqu(t.lcZ(152,168,"Estimated_Price")),t.xp6(6),t.Q6J("ngModel",o.siteCode)("ngModelOptions",t.DdM(210,Gt)),t.xp6(2),t.AsE("",t.lcZ(160,170,"Select")," ",t.lcZ(161,172,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(2),t.Q6J("ngModel",o.serviceCode)("ngModelOptions",t.DdM(211,Gt)),t.xp6(2),t.AsE("",t.lcZ(167,174,"Select")," ",t.lcZ(168,176,"Service")," "),t.xp6(3),t.Q6J("ngForOf",o.serviceCodeList),t.xp6(2),t.Q6J("ngModel",o.unitCode)("ngModelOptions",t.DdM(212,Gt)),t.xp6(2),t.AsE("",t.lcZ(174,178,"Select")," ",t.lcZ(175,180,"Service_Unit")," "),t.xp6(3),t.Q6J("ngForOf",o.unitCodeList),t.xp6(2),t.s9C("placeholder",t.lcZ(179,182,"Price_Per_Unit")),t.Q6J("ngModel",o.pricePerUnit)("ngModelOptions",t.DdM(213,Gt)),t.xp6(3),t.s9C("placeholder",t.lcZ(182,184,"Service_Quantity")),t.Q6J("ngModel",o.serviceQuantity)("ngModelOptions",t.DdM(214,Gt)),t.xp6(3),t.s9C("placeholder",t.lcZ(185,186,"Unit_Quantity")),t.Q6J("ngModel",o.unitQuantity)("ngModelOptions",t.DdM(215,Gt)),t.xp6(3),t.s9C("placeholder",t.lcZ(188,188,"Estimated_Price")),t.Q6J("ngModel",o.estimatedPrice)("ngModelOptions",t.DdM(216,Gt)),t.xp6(10),t.Oqu(t.lcZ(198,190,"Site")),t.xp6(3),t.Oqu(t.lcZ(201,192,"Service_Name")),t.xp6(3),t.Oqu(t.lcZ(204,194,"Service_Unit")),t.xp6(3),t.Oqu(t.lcZ(207,196,"Price_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(210,198,"Service_Quantity")),t.xp6(3),t.Oqu(t.lcZ(213,200,"Unit_Quantity")),t.xp6(3),t.Oqu(t.lcZ(216,202,"Estimated_Price")),t.xp6(4),t.Q6J("ngForOf",o.listOfEnquiries),t.xp6(5),t.hij("",t.lcZ(225,204,"Total_Amount"),"-$"),t.xp6(3),t.Oqu(o.totalEstPrice),t.xp6(5),t.s9C("value",t.lcZ(233,206,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(236,208,"Save"))}},directives:[l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,l.YN,l.Kr,l.Fj,ht.z,at.ZL,l.oH,at.XC,f.sg,G.s,M.hl,M.nW,gt.R9,M.Mq,l.On,l.wV,St.ey,f.O5],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function ks(i,a){if(1&i&&(t.TgZ(0,"option",15),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.surveyorCode),t.xp6(1),t.AsE("",e.surveyorCode,"-",null==e?null:e.userName,"")}}let xe=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.surveyorsList=[]}ngOnInit(){this.setForm(),this.loadSurveyors()}closeModel(){this.dialogRef.close()}submit(){this.form.valid?this.apiService.post("ServiceEnquiries/addSurveyorToEnquiry",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}setForm(){this.form=this.fb.group({enquiryID:[this.id],surveyorCode:["",l.kI.required]})}loadSurveyors(){this.apiService.getall(`Surveyors/getSelectSurveyorListForBranch/${this.branchCode}`).subscribe(e=>{this.surveyorsList=e,0==this.surveyorsList.length&&this.notifyService.showWarning("No SUrveyors Found For Branch:"+this.branchCode)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-surveyor-to-enquiry"]],features:[t.qOj],decls:34,vars:30,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","enquiryID","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["formControlName","surveyorCode",1,"custom-select","mr-sm-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","customrow"],[1,"col-lg-12","col-md-12","text-center"],["type","button",1,"btn","btn-secondary",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"select",8),t.TgZ(22,"option",9),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA(),t.YNc(26,ks,2,3,"option",10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",11),t.TgZ(28,"div",12),t.TgZ(29,"input",13),t.NdJ("click",function(){return o.closeModel()}),t.ALo(30,"translate"),t.qZA(),t._uU(31," \xa0\xa0 "),t._UZ(32,"input",14),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,12,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,14,"Enquiry_ID")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,16,"Please_Enter")," ",t.lcZ(14,18,"Enquiry_ID"),""),t.xp6(3),t.Q6J("control",o.form.controls.enquiryID),t.xp6(4),t.Oqu(t.lcZ(20,20,"Surveyor_Code")),t.xp6(4),t.AsE("",t.lcZ(24,22,"Select")," ",t.lcZ(25,24,"Surveyor_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.surveyorsList),t.xp6(3),t.s9C("value",t.lcZ(30,26,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(33,28,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,l.EJ,l.YN,l.Kr,f.sg],pipes:[Z.X$],encapsulation:2}),i})();function Ms(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enquiry_Number")," "))}function Rs(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.enquiryNumber)}}function Ps(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enquiry_ID")," "))}function Fs(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.enquiryID)}}function Is(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function Ys(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function Js(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Code")," "))}function Qs(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceCode)}}function Bs(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Code")," "))}function Hs(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitCode)}}function Vs(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Price_Per_Unit")," "))}function $s(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.pricePerUnit)}}function Gs(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Quantity")," "))}function Ws(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceQuantity)}}function zs(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Estimated_Price")," "))}function Xs(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.estimatedPrice)}}function Ks(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Status")," "))}function tr(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.statusEnquiry)}}function er(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}const Ee=function(i){return{enquiryID:i}};function or(i,a){if(1&i&&(t.TgZ(0,"a",47),t._UZ(1,"i",48),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("queryParams",t.VKq(4,Ee,e.enquiryID)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"Fill_Survey_Form")," ")}}function ir(i,a){if(1&i&&(t.TgZ(0,"a",47),t._UZ(1,"i",48),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("queryParams",t.VKq(4,Ee,e.enquiryID)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"Edit_Survey_Form")," ")}}function nr(i,a){if(1&i&&(t.TgZ(0,"a",47),t._UZ(1,"i",49),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("queryParams",t.VKq(4,Ee,e.enquiryID)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"View_Survey_Form")," ")}}function ar(i,a){if(1&i&&(t.TgZ(0,"td",40),t.TgZ(1,"div",42),t.TgZ(2,"a",43),t._UZ(3,"i",44),t.qZA(),t.TgZ(4,"div",45),t.YNc(5,or,4,6,"a",46),t.YNc(6,ir,4,6,"a",46),t.YNc(7,nr,4,6,"a",46),t.qZA(),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(5),t.Q6J("ngIf","Assigned_Surveyor"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Survey_In_Progress"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Survey_Completed"==e.statusEnquiry)}}function sr(i,a){1&i&&t._UZ(0,"tr",50)}function rr(i,a){1&i&&t._UZ(0,"tr",51)}const lr=function(){return{standalone:!0}};let cr=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.route=h,this.oprService=C,this.displayedColumns=["enquiryNumber","enquiryID","siteCode","serviceCode","unitCode","pricePerUnit","serviceQuantity","estimatedPrice","statusEnquiry","Actions"],this.searchValue="",this.sortingOrder="enquiryID desc",this.isLoading=!1}ngOnInit(){this.surveyorCode=this.oprService.SurveyorCode,null==this.surveyorCode&&(this.surveyorCode=localStorage.getItem("surveyorCode")),this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ServiceEnquiries/getSevriceEnquiriesBySurveyorCodePagedList",this.utilService.getQueryString(e,o,this.surveyorCode,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Enquiry","Add",It)}edit(e){this.openDialogManage(e,g.O.update,"Updating_Enquiry","Update",It)}addSuveyorToEnquiry(e){this.openDialogManage(e,g.O.create,"Adding_Surveyor_To_Enquiry","Save",xe)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ServiceEnquiries",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(L.gz),t.Y36(W.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-enquiries-by-surveyor-code"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:75,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addEnquiries","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","enquiryNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","enquiryID"],["matColumnDef","siteCode"],["matColumnDef","serviceCode"],["matColumnDef","unitCode"],["matColumnDef","pricePerUnit"],["matColumnDef","serviceQuantity"],["matColumnDef","estimatedPrice"],["matColumnDef","statusEnquiry"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],["class","dropdown-item tableicons","routerLink","EditableSurveyForm",3,"queryParams",4,"ngIf"],["routerLink","EditableSurveyForm",1,"dropdown-item","tableicons",3,"queryParams"],[1,"icon-pencil"],[1,"icon-eye"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,Ms,3,3,"th",24),t.YNc(43,Rs,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,Ps,3,3,"th",24),t.YNc(46,Fs,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,Is,3,3,"th",24),t.YNc(49,Ys,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,Js,3,3,"th",24),t.YNc(52,Qs,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,Bs,3,3,"th",24),t.YNc(55,Hs,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,Vs,3,3,"th",24),t.YNc(58,$s,2,1,"td",25),t.BQk(),t.ynx(59,31),t.YNc(60,Gs,3,3,"th",24),t.YNc(61,Ws,2,1,"td",25),t.BQk(),t.ynx(62,32),t.YNc(63,zs,3,3,"th",24),t.YNc(64,Xs,2,1,"td",25),t.BQk(),t.ynx(65,33),t.YNc(66,Ks,3,3,"th",24),t.YNc(67,tr,2,1,"td",25),t.BQk(),t.ynx(68,34),t.YNc(69,er,3,3,"th",35),t.YNc(70,ar,8,3,"td",25),t.BQk(),t.YNc(71,sr,1,0,"tr",36),t.YNc(72,rr,1,0,"tr",37),t.qZA(),t.ynx(73),t.TgZ(74,"mat-paginator",38),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Services_Enquiry")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Services_Enquiry")),t.xp6(10),t.hij("",t.lcZ(27,24,"Services_Enquiry_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,lr)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Services_Enquiry")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(31),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,L.yS,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function pr(i,a){if(1&i&&(t.TgZ(0,"mat-option",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.value," ")}}function ur(i,a){if(1&i&&(t.TgZ(0,"option",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",o.isArabic?e.textTwo:e.text,"")}}function dr(i,a){if(1&i&&(t.TgZ(0,"option",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.Oqu(o.isArabic?e.textTwo:e.text)}}function mr(i,a){if(1&i&&(t.TgZ(0,"option",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.Oqu(o.isArabic?e.textTwo:e.text)}}function _r(i,a){if(1&i&&(t.TgZ(0,"option",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.Oqu(o.isArabic?e.textTwo:e.text)}}function gr(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td",47),t._uU(18),t.qZA(),t.TgZ(19,"td"),t.TgZ(20,"a",48),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().removeEnquiry(s)}),t._UZ(21,"i",60),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.siteCode),t.xp6(2),t.Oqu(e.serviceCode),t.xp6(2),t.Oqu(e.serviceNameEng),t.xp6(2),t.Oqu(e.serviceNameArb),t.xp6(2),t.Oqu(e.unitCode),t.xp6(2),t.Oqu(e.pricePerUnit),t.xp6(2),t.Oqu(e.serviceQuantity),t.xp6(2),t.Oqu(e.unitQuantity),t.xp6(2),t.Oqu(e.estimatedPrice)}}const Yt=function(){return{standalone:!0}};let Ge=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.readonly="",this.showApprove=!0,this.id=0,this.siteCodeList=[],this.unitCodeList=[],this.serviceCodeList=[],this.customerCode="",this.custCodeControl=new l.NI("",l.kI.required),this.branchCodeList=[],this.isDataLoading=!1,this.listOfEnquiries=[],this.sequence=1,this.editsequence=0,this.enquiryNumber="",this.serviceCode="",this.serviceQuantity=0,this.pricePerUnit=0,this.unitQuantity=0,this.estimatedPrice=0,this.totalEstPrice=0,this.statusEnquiry="Open",this.serviceNameArb="",this.serviceNameEng="",this.custAddress="",this.isActive=!0,this.stusEnquiryHead="Open",this.isArabic=!1,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,tt.O)(this.customerCode),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterCustCodes(h||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadBranchCodes(){this.apiService.getall("Branch/getSelectBranchCodeList").subscribe(e=>{this.branchCodeList=e})}loadSiteCodes(e){this.apiService.getall(`CustomerSite/getSelectSiteListByCustCode/${e}`).subscribe(o=>{this.siteCodeList=o})}loadServiceCodes(){this.apiService.getall("Services/getSelectServiceList").subscribe(e=>{this.serviceCodeList=e})}loadUnitCodes(e){this.apiService.getall("Units/getSelectUnitListByServiceCode/"+e).subscribe(o=>{this.unitCodeList=o})}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.setForm(),this.readonly="readonly",this.loadBranchCodes()}setForm(){this.form=this.fb.group({sitecode:[""],enquiryNumber:["XXXXXXXXXX"],customerCode:["",l.kI.required],branchCode:["",l.kI.required],dateOfEnquiry:["",l.kI.required],estimateClosingDate:["",l.kI.required],userName:[""],totalEstPrice:[],remarks:[""],stusEnquiryHead:["Open"],isActive:[!0],saleRep:[""],custAddress:[""],serviceNameArb:[""],serviceNameEng:[""],serviceCode:[""],unitCode:[""]}),this.setToDefault()}submit(){let e=new Date(this.form.controls.dateOfEnquiry.value),o=new Date(this.form.controls.estimateClosingDate.value);this.form.value.dateOfEnquiry=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1),this.form.value.estimateClosingDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()+1),this.form.valid&&this.listOfEnquiries.length>0?(this.id>0&&(this.form.value.id=this.id),this.form.value.enquiriesList=this.listOfEnquiries,this.form.value.custAddress=this.custAddress,this.form.value.estimatedPrice=this.estimatedPrice,this.form.value.serviceNameArb=this.serviceNameArb,this.form.value.serviceNameEng=this.serviceNameEng,this.apiService.post("ExistingProjects",this.form.value).subscribe(n=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})):this.utilService.FillUpFields()}addEnquiry(){this.enquiryNumber=this.form.value.enquiryNumber,null!=this.siteCode&&""!=this.siteCode&&null!=this.serviceCode&&""!=this.serviceCode&&null!=this.unitCode&&""!=this.unitCode&&this.serviceQuantity>0&&this.unitQuantity>0&&this.pricePerUnit>0&&""!=this.statusEnquiry&&(this.estimatedPrice=this.pricePerUnit*this.serviceQuantity*this.unitQuantity,this.totalEstPrice=this.totalEstPrice+this.estimatedPrice,this.listOfEnquiries.push({sequence:this.getSequence(),enquiryNumber:this.enquiryNumber,siteCode:this.siteCode,serviceCode:this.serviceCode,unitCode:this.unitCode,serviceQuantity:this.serviceQuantity,unitQuantity:this.unitQuantity,estimatedPrice:this.estimatedPrice,statusEnquiry:this.statusEnquiry,serviceNameArb:this.serviceNameArb,serviceNameEng:this.serviceNameEng,pricePerUnit:this.pricePerUnit,totalEstPrice:this.totalEstPrice}),this.form.value.totalEstPrice=this.totalEstPrice,this.form.value.enquiriesList=this.listOfEnquiries,this.setToDefault())}removeEnquiry(e){this.totalEstPrice=this.totalEstPrice-this.listOfEnquiries[e].estimatedPrice,this.form.value.totalEstPrice=this.totalEstPrice,this.setToDefault(),this.listOfEnquiries.splice(e,1),this.downSequence()}setToDefault(){this.siteCode=this.serviceCode=this.serviceNameEng=this.serviceNameArb=this.unitCode="",this.estimatedPrice=this.serviceQuantity=this.pricePerUnit=this.unitQuantity=0,this.isActive=!0}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.enquiryNumber.setValue(""),this.form.controls.customerCode.setValue(""),this.form.controls.siteCode.setValue(""),this.form.controls.unitCode.setValue(""),this.form.controls.pricePerUnit.setValue(0),this.form.controls.dateOfEnquiry.setValue(""),this.form.controls.estimateClosingDate.setValue(""),this.form.controls.userName.setValue(""),this.form.controls.totalEstPrice.setValue(0),this.form.controls.stusEnquiryHead.setValue(""),this.form.controls.remarks.setValue(""),this.form.controls.isActive.setValue(!0),this.form.controls.saleRep.setValue(""),this.form.controls.custAddress.setValue("")}closeModel(){this.dialogRef.close()}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o&&(n=e.target.value),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){this.form.patchValue({custAddress:s.custAddress1,saleRep:s.custSalesRep,customerCode:s.custCode});let r=this.custCodeControl.value;this.form.value.customerCode=r,this.loadSiteCodes(r),this.loadServiceCodes()}else this.form.controls.customerCode.setValue(""),this.form.controls.custAddress.setValue(""),this.form.controls.saleRep.setValue(""),this.custCodeControl.setValue(""),this.siteCodeList=[]})}getServiceDetails(e){if(""!=e.target.value){const o=e.target.value;this.apiService.getall("Services/getServiceByServiceCode/"+o).subscribe(n=>{this.serviceNameEng=n.serviceNameEng,this.serviceNameArb=n.serviceNameArb,this.serviceCode=o}),this.loadUnitCodes(o)}else this.unitCodeList=[];this.serviceQuantity=0,this.unitQuantity=0,this.pricePerUnit=0,this.estimatedPrice=0}getServiceUnitPrice(e){if(""!=e.target.value){const o=e.target.value;this.apiService.getall("ServiceUnitMap/getServiceUnitMapByServiceAndUnitCode?UnitCode="+o+"&ServiceCode="+this.serviceCode).subscribe(n=>{this.pricePerUnit=n.pricePerUnit,this.unitCode=o})}else this.serviceQuantity=0,this.unitQuantity=0,this.pricePerUnit=0,this.estimatedPrice=0}calculateEstimatePrice(e,o){if(null!==e){let n=e.target.value;this.estimatedPrice="serviceQuantity"==o?this.pricePerUnit*this.unitQuantity*n:"pricePerUnit"==o?n*this.serviceQuantity*this.unitQuantity:"unitQuantity"==o?n*this.serviceQuantity*this.pricePerUnit:0}else this.estimatedPrice=this.pricePerUnit*this.serviceQuantity*this.unitQuantity}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-existing-project"]],features:[t.qOj],decls:255,vars:241,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"col-sm-3"],[1,"mr-sm-2"],["formControlName","stusEnquiryHead",1,"custom-select","mr-sm-2"],["value","Open"],["value","Closed"],["value","InProgress"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["type","text","formControlName","enquiryNumber","readonly","",1,"form-control",3,"placeholder"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","dateOfEnquiry",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["data-date-format","mm/yyyy"],["picker",""],["formControlName","estimateClosingDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],["picker2",""],["type","text","readonly","","formControlName","custAddress",1,"form-control",3,"placeholder"],["type","text","formControlName","saleRep","readonly","readonly",1,"form-control",3,"placeholder"],["type","text","formControlName","userName",1,"form-control",3,"placeholder"],["formControlName","branchCode",1,"custom-select","mr-sm-2"],["value",""],["formControlName","remarks",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2","custom-select180",3,"ngModel","ngModelOptions","ngModelChange"],[1,"custom-select","mr-sm-2","custom-select120",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","readonly",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","number",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],["type","number","readonly","readonly",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"text-right"],[1,"tableicons",3,"click"],[1,"fas","fa-plus-circle"],["colspan","12"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","6","rowspan","5",1,"text-right","bgcolor"],[1,"text-right","bgcolor"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],[1,"fas","fa-minus-circle"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"div",4),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t.TgZ(12,"label",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"select",9),t.TgZ(16,"option",10),t._uU(17),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"option",10),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"option",11),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option",12),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"div",13),t.TgZ(30,"div",5),t.TgZ(31,"div",14),t.TgZ(32,"div",15),t.TgZ(33,"div",16),t.TgZ(34,"div",17),t.TgZ(35,"label",8),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",18),t.ALo(39,"translate"),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.TgZ(41,"div",16),t.TgZ(42,"label",8),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"div",17),t.TgZ(46,"div",19),t._UZ(47,"auto-loader",20),t._UZ(48,"input",21),t.ALo(49,"translate"),t.ALo(50,"translate"),t.TgZ(51,"mat-autocomplete",22,23),t.NdJ("optionSelected",function(s){return o.onSelectionCustomerCode(s,1)}),t.YNc(53,pr,2,2,"mat-option",24),t.ALo(54,"async"),t.qZA(),t.qZA(),t._UZ(55,"validation-message",25),t.qZA(),t.qZA(),t.TgZ(56,"div",16),t.TgZ(57,"label",8),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"div",17),t.TgZ(61,"div",19),t._UZ(62,"input",26),t.ALo(63,"translate"),t.TgZ(64,"div",27),t._UZ(65,"mat-datepicker-toggle",28),t._UZ(66,"mat-datepicker",29,30),t.qZA(),t.qZA(),t.qZA(),t._UZ(68,"validation-message",25),t.qZA(),t.TgZ(69,"div",16),t.TgZ(70,"label",8),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"div",17),t.TgZ(74,"div",19),t._UZ(75,"input",31),t.ALo(76,"translate"),t.TgZ(77,"div",27),t._UZ(78,"mat-datepicker-toggle",28),t._UZ(79,"mat-datepicker",29,32),t.qZA(),t.qZA(),t.qZA(),t._UZ(81,"validation-message",25),t.qZA(),t.TgZ(82,"div",16),t.TgZ(83,"div",17),t.TgZ(84,"label",8),t._uU(85),t.ALo(86,"translate"),t.qZA(),t._UZ(87,"input",33),t.ALo(88,"translate"),t._UZ(89,"validation-message",25),t.qZA(),t.qZA(),t.TgZ(90,"div",16),t.TgZ(91,"div",17),t.TgZ(92,"label",8),t._uU(93),t.ALo(94,"translate"),t.qZA(),t._UZ(95,"input",34),t.ALo(96,"translate"),t.ALo(97,"translate"),t.qZA(),t.qZA(),t.TgZ(98,"div",16),t.TgZ(99,"div",17),t.TgZ(100,"label",8),t._uU(101),t.ALo(102,"translate"),t.qZA(),t._UZ(103,"input",35),t.ALo(104,"translate"),t.ALo(105,"translate"),t.qZA(),t.qZA(),t.TgZ(106,"div",16),t.TgZ(107,"div",17),t.TgZ(108,"label"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t._UZ(111,"br"),t.TgZ(112,"select",36),t.TgZ(113,"option",37),t._uU(114),t.ALo(115,"translate"),t.ALo(116,"translate"),t.qZA(),t.YNc(117,ur,2,3,"option",24),t.qZA(),t._UZ(118,"validation-message",25),t.qZA(),t.qZA(),t.TgZ(119,"div",5),t.TgZ(120,"div",17),t.TgZ(121,"label",8),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"textarea",38),t.ALo(125,"translate"),t.ALo(126,"translate"),t._uU(127,"                    \n"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(128,"div",39),t.TgZ(129,"table",40),t.TgZ(130,"thead"),t.TgZ(131,"tr"),t.TgZ(132,"th"),t._uU(133),t.ALo(134,"translate"),t.qZA(),t.TgZ(135,"th"),t._uU(136),t.ALo(137,"translate"),t.qZA(),t.TgZ(138,"th"),t._uU(139),t.ALo(140,"translate"),t.qZA(),t.TgZ(141,"th"),t._uU(142),t.ALo(143,"translate"),t.qZA(),t.TgZ(144,"th"),t._uU(145),t.ALo(146,"translate"),t.qZA(),t.TgZ(147,"th"),t._uU(148),t.ALo(149,"translate"),t.qZA(),t.TgZ(150,"th"),t._uU(151),t.ALo(152,"translate"),t.qZA(),t.TgZ(153,"th"),t._uU(154),t.ALo(155,"translate"),t.qZA(),t.TgZ(156,"th"),t._uU(157),t.ALo(158,"translate"),t.qZA(),t._UZ(159,"th"),t.qZA(),t.qZA(),t.TgZ(160,"tbody"),t.TgZ(161,"tr"),t.TgZ(162,"td"),t.TgZ(163,"select",41),t.NdJ("ngModelChange",function(s){return o.siteCode=s}),t.TgZ(164,"option",37),t._uU(165),t.ALo(166,"translate"),t.ALo(167,"translate"),t.qZA(),t.YNc(168,dr,2,2,"option",24),t.qZA(),t.qZA(),t.TgZ(169,"td"),t.TgZ(170,"select",42),t.NdJ("ngModelChange",function(s){return o.serviceCode=s})("change",function(s){return o.getServiceDetails(s)}),t.TgZ(171,"option",37),t._uU(172),t.ALo(173,"translate"),t.ALo(174,"translate"),t.qZA(),t.YNc(175,mr,2,2,"option",24),t.qZA(),t.qZA(),t.TgZ(176,"td"),t.TgZ(177,"input",43),t.NdJ("ngModelChange",function(s){return o.serviceNameEng=s}),t.ALo(178,"translate"),t.qZA(),t.qZA(),t.TgZ(179,"td"),t.TgZ(180,"input",43),t.NdJ("ngModelChange",function(s){return o.serviceNameArb=s}),t.ALo(181,"translate"),t.qZA(),t.qZA(),t.TgZ(182,"td"),t.TgZ(183,"select",44),t.NdJ("ngModelChange",function(s){return o.unitCode=s})("change",function(s){return o.getServiceUnitPrice(s)}),t.TgZ(184,"option",37),t._uU(185),t.ALo(186,"translate"),t.ALo(187,"translate"),t.qZA(),t.YNc(188,_r,2,2,"option",24),t.qZA(),t.qZA(),t.TgZ(189,"td"),t.TgZ(190,"input",45),t.NdJ("ngModelChange",function(s){return o.pricePerUnit=s})("keyup",function(s){return o.calculateEstimatePrice(s,"pricePerUnit")}),t.ALo(191,"translate"),t.qZA(),t.qZA(),t.TgZ(192,"td"),t.TgZ(193,"input",45),t.NdJ("ngModelChange",function(s){return o.serviceQuantity=s})("keyup",function(s){return o.calculateEstimatePrice(s,"serviceQuantity")}),t.ALo(194,"translate"),t.qZA(),t.qZA(),t.TgZ(195,"td"),t.TgZ(196,"input",45),t.NdJ("ngModelChange",function(s){return o.unitQuantity=s})("keyup",function(s){return o.calculateEstimatePrice(s,"unitQuantity")}),t.ALo(197,"translate"),t.qZA(),t.qZA(),t.TgZ(198,"td"),t.TgZ(199,"input",46),t.NdJ("ngModelChange",function(s){return o.estimatedPrice=s}),t.ALo(200,"translate"),t.qZA(),t.qZA(),t.TgZ(201,"td",47),t.TgZ(202,"a",48),t.NdJ("click",function(){return o.addEnquiry()}),t._UZ(203,"i",49),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(204,"tr"),t._UZ(205,"td",50),t.qZA(),t.TgZ(206,"thead"),t.TgZ(207,"tr"),t.TgZ(208,"th"),t._uU(209),t.ALo(210,"translate"),t.qZA(),t.TgZ(211,"th"),t._uU(212),t.ALo(213,"translate"),t.qZA(),t.TgZ(214,"th"),t._uU(215),t.ALo(216,"translate"),t.qZA(),t.TgZ(217,"th"),t._uU(218),t.ALo(219,"translate"),t.qZA(),t.TgZ(220,"th"),t._uU(221),t.ALo(222,"translate"),t.qZA(),t.TgZ(223,"th"),t._uU(224),t.ALo(225,"translate"),t.qZA(),t.TgZ(226,"th"),t._uU(227),t.ALo(228,"translate"),t.qZA(),t.TgZ(229,"th"),t._uU(230),t.ALo(231,"translate"),t.qZA(),t.TgZ(232,"th"),t._uU(233),t.ALo(234,"translate"),t.qZA(),t._UZ(235,"th"),t.qZA(),t.qZA(),t.TgZ(236,"tbody"),t.YNc(237,gr,22,9,"tr",51),t.qZA(),t.TgZ(238,"tfoot"),t.TgZ(239,"tr",52),t._UZ(240,"td",53),t.TgZ(241,"td",54),t._uU(242),t.ALo(243,"translate"),t.qZA(),t.TgZ(244,"td",54),t._uU(245),t.qZA(),t._UZ(246,"td",54),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(247,"div",55),t.TgZ(248,"div",13),t.TgZ(249,"div",56),t.TgZ(250,"input",57),t.NdJ("click",function(){return o.closeModel()}),t.ALo(251,"translate"),t.qZA(),t._uU(252," \xa0 "),t._UZ(253,"input",58),t.ALo(254,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(52),s=t.MAs(67),r=t.MAs(80);t.xp6(1),t.hij(" ",t.lcZ(2,102,"Create_New_Service_Enquiry_For_Existing_Project")," "),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(8),t.Oqu(t.lcZ(14,104,"Enquiry_Status")),t.xp6(4),t.AsE("",t.lcZ(18,106,"Select ")," ",t.lcZ(19,108,"Enquiry_Status"),""),t.xp6(4),t.hij("",t.lcZ(22,110,"Open")," "),t.xp6(3),t.hij("",t.lcZ(25,112,"Closed")," "),t.xp6(3),t.hij("",t.lcZ(28,114,"InProgress")," "),t.xp6(9),t.Oqu(t.lcZ(37,116,"Enquiry_Number")),t.xp6(2),t.hYB("placeholder","",t.lcZ(39,118,"Please_Enter")," ",t.lcZ(40,120,"Enquiry_Number"),""),t.xp6(5),t.Oqu(t.lcZ(44,122,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(49,124,"Please_Enter")," ",t.lcZ(50,126,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",n),t.xp6(5),t.Q6J("ngForOf",t.lcZ(54,128,o.filteredCustCodes)),t.xp6(2),t.Q6J("control",o.custCodeControl),t.xp6(3),t.Oqu(t.lcZ(59,130,"Project_Start_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(63,132,"Select_a_Date")),t.Q6J("matDatepicker",s),t.xp6(3),t.Q6J("for",s),t.xp6(3),t.Q6J("control",o.form.controls.dateOfEnquiry),t.xp6(3),t.Oqu(t.lcZ(72,134,"Project_Closing_Date")),t.xp6(4),t.s9C("placeholder",t.lcZ(76,136,"Estimate_Closing_Date")),t.Q6J("matDatepicker",r),t.xp6(3),t.Q6J("for",r),t.xp6(3),t.Q6J("control",o.form.controls.estimateClosingDate),t.xp6(4),t.Oqu(t.lcZ(86,138,"Customer_Address")),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(88,140,"Customer_Address"),""),t.xp6(2),t.Q6J("control",o.form.controls.custAddress),t.xp6(4),t.Oqu(t.lcZ(94,142,"Sales_Representative")),t.xp6(2),t.hYB("placeholder","",t.lcZ(96,144,"Please_Enter")," ",t.lcZ(97,146,"Sales_Representative"),""),t.xp6(6),t.Oqu(t.lcZ(102,148,"Enquiry_Created_By")),t.xp6(2),t.hYB("placeholder","",t.lcZ(104,150,"Please_Enter")," ",t.lcZ(105,152,"Enquiry_Created_By"),""),t.xp6(6),t.Oqu(t.lcZ(110,154,"Branch")),t.xp6(5),t.AsE("",t.lcZ(115,156,"Select")," ",t.lcZ(116,158,"Branch")," "),t.xp6(3),t.Q6J("ngForOf",o.branchCodeList),t.xp6(1),t.Q6J("control",o.form.controls.branchCode),t.xp6(4),t.Oqu(t.lcZ(123,160,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(125,162,"Please_Select")," ",t.lcZ(126,164,"Remarks"),""),t.xp6(9),t.Oqu(t.lcZ(134,166,"Site")),t.xp6(3),t.Oqu(t.lcZ(137,168,"Service_Code")),t.xp6(3),t.Oqu(t.lcZ(140,170,"Service_Name_Eng")),t.xp6(3),t.Oqu(t.lcZ(143,172,"Service_Name_Arb")),t.xp6(3),t.Oqu(t.lcZ(146,174,"Service_Unit")),t.xp6(3),t.Oqu(t.lcZ(149,176,"Price_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(152,178,"Service_Quantity")),t.xp6(3),t.Oqu(t.lcZ(155,180,"Unit_Quantity")),t.xp6(3),t.Oqu(t.lcZ(158,182,"Estimated_Price")),t.xp6(6),t.Q6J("ngModel",o.siteCode)("ngModelOptions",t.DdM(232,Yt)),t.xp6(2),t.AsE("",t.lcZ(166,184,"Select")," ",t.lcZ(167,186,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(2),t.Q6J("ngModel",o.serviceCode)("ngModelOptions",t.DdM(233,Yt)),t.xp6(2),t.AsE("",t.lcZ(173,188,"Select")," ",t.lcZ(174,190,"Service_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.serviceCodeList),t.xp6(2),t.s9C("placeholder",t.lcZ(178,192,"Service_Name_Eng")),t.Q6J("ngModel",o.serviceNameEng)("ngModelOptions",t.DdM(234,Yt)),t.xp6(3),t.s9C("placeholder",t.lcZ(181,194,"Service_Name_Arb")),t.Q6J("ngModel",o.serviceNameArb)("ngModelOptions",t.DdM(235,Yt)),t.xp6(3),t.Q6J("ngModel",o.unitCode)("ngModelOptions",t.DdM(236,Yt)),t.xp6(2),t.AsE("",t.lcZ(186,196,"Select")," ",t.lcZ(187,198,"Service_Unit")," "),t.xp6(3),t.Q6J("ngForOf",o.unitCodeList),t.xp6(2),t.s9C("placeholder",t.lcZ(191,200,"Price_Per_Unit")),t.Q6J("ngModel",o.pricePerUnit)("ngModelOptions",t.DdM(237,Yt)),t.xp6(3),t.s9C("placeholder",t.lcZ(194,202,"Service_Quantity")),t.Q6J("ngModel",o.serviceQuantity)("ngModelOptions",t.DdM(238,Yt)),t.xp6(3),t.s9C("placeholder",t.lcZ(197,204,"Unit_Quantity")),t.Q6J("ngModel",o.unitQuantity)("ngModelOptions",t.DdM(239,Yt)),t.xp6(3),t.s9C("placeholder",t.lcZ(200,206,"Estimated_Price")),t.Q6J("ngModel",o.estimatedPrice)("ngModelOptions",t.DdM(240,Yt)),t.xp6(10),t.Oqu(t.lcZ(210,208,"Site")),t.xp6(3),t.Oqu(t.lcZ(213,210,"Service_Code")),t.xp6(3),t.Oqu(t.lcZ(216,212,"Service_Name_Eng")),t.xp6(3),t.Oqu(t.lcZ(219,214,"Service_Name_Arb")),t.xp6(3),t.Oqu(t.lcZ(222,216,"Service_Unit")),t.xp6(3),t.Oqu(t.lcZ(225,218,"Price_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(228,220,"Service_Quantity")),t.xp6(3),t.Oqu(t.lcZ(231,222,"Unit_Quantity")),t.xp6(3),t.Oqu(t.lcZ(234,224,"Estimated_Price")),t.xp6(4),t.Q6J("ngForOf",o.listOfEnquiries),t.xp6(5),t.hij("",t.lcZ(243,226,"Total_Amount"),"-$"),t.xp6(3),t.Oqu(o.totalEstPrice),t.xp6(5),t.s9C("value",t.lcZ(251,228,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(254,230,"Save"))}},directives:[l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,l.YN,l.Kr,l.Fj,ht.z,at.ZL,l.oH,at.XC,f.sg,G.s,M.hl,M.nW,gt.R9,M.Mq,l.On,l.wV,St.ey],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function hr(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function fr(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function Zr(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function Cr(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function Ar(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name_English")," "))}function Tr(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectNameEng)}}function vr(i,a){1&i&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name_Arab")," "))}function xr(i,a){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectNameArb)}}function qr(i,a){1&i&&t._UZ(0,"tr",35)}function br(i,a){1&i&&t._UZ(0,"tr",36)}const yr=function(){return{standalone:!0}};let Sr=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.oprService=m,this.pageService=h,this.translate=C,this.displayedColumns=["customerCode","projectCode","projectNameEng","projectNameArb"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.form=this.fb.group({}),this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.searchValue="",this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Project/getProjectsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}submit(){}create(){this.openFullWindow(0,g.O.create,"Adding_New_Service_Enquiry_Form_For_Existing_Project","Add",Ge)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(W.f),t.Y36(V.N),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-existing-projects"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:55,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[3,"isLoading"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addEnquiries","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","projectCode"],["matColumnDef","projectNameEng"],["matColumnDef","projectNameArb"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",1),t.TgZ(21,"div",10),t.TgZ(22,"h4",13),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"spinner-loader",14),t.qZA(),t.TgZ(26,"div",15),t.TgZ(27,"input",16),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.TgZ(36,"div",22),t.ynx(37),t.TgZ(38,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(39,24),t.YNc(40,hr,3,3,"th",25),t.YNc(41,fr,2,1,"td",26),t.BQk(),t.ynx(42,27),t.YNc(43,Zr,3,3,"th",25),t.YNc(44,Cr,2,1,"td",26),t.BQk(),t.ynx(45,28),t.YNc(46,Ar,3,3,"th",25),t.YNc(47,Tr,2,1,"td",26),t.BQk(),t.ynx(48,29),t.YNc(49,vr,3,3,"th",25),t.YNc(50,xr,2,1,"td",26),t.BQk(),t.YNc(51,qr,1,0,"tr",30),t.YNc(52,br,1,0,"tr",31),t.qZA(),t.ynx(53),t.TgZ(54,"mat-paginator",32),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Existing_Projects")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(14,20,"Existing_Projects")),t.xp6(10),t.hij("",t.lcZ(24,22,"Project_List")," "),t.xp6(2),t.Q6J("isLoading",o.isLoading),t.xp6(2),t.MGl("placeholder","",t.lcZ(28,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,yr)),t.xp6(5),t.hij("",t.lcZ(33,26,"Add_New_Services_Enquiry")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[_t.r,l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();class qe{static isCodeExist(a,e){return o=>{let n=o.get(a),s=o.get(e);return""==n.value?(n.setErrors({required:!0}),{required:!0}):s.value?(n.setErrors({isExist:!0}),{isExist:!0}):null}}}function wr(i,a){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Ur(i,a){1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Code Already Exists")," "))}function Lr(i,a){if(1&i&&(t.TgZ(0,"div",28),t.YNc(1,wr,3,3,"div",29),t.YNc(2,Ur,3,3,"div",29),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.vehicleNumber.errors.required),t.xp6(1),t.Q6J("ngIf",e.f.vehicleNumber.errors.isExist)}}const Dr=function(i){return{"is-invalid":i}};let Nr=(()=>{class i extends q{constructor(e,o,n,s,r,c){super(o),this.dialogRef=e,this.authService=o,this.fb=n,this.apiService=s,this.utilService=r,this.opservice=c,this.id=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}setForm(){this.form=this.fb.group({vehicleNumber:["",l.kI.required],vehicleNameInEnglish:["",l.kI.required],vehicleNameInArabic:["",l.kI.required],dailyFuelCost:["",l.kI.required],dailyMiscCost:["",l.kI.required],estimatedDailyMaintenanceCost:["",l.kI.required],otherDailyOperationCost:["",l.kI.required],totalDailyServiceCost:[0],dailyServicePrice:["",l.kI.required],valueofVehicle:["",l.kI.required],vehicletype:["",l.kI.required],minMargin:["",l.kI.required],isActive:[!0,l.kI.required],remarks:[""],isExist:[!1]},{validators:[qe.isCodeExist("vehicleNumber","isExist")]})}closeModel(){this.dialogRef.close()}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("Logisticsandvehicle",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Logisticsandvehicle/getLogisticsandvehicleById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}reset(){this.form.reset()}verifyCode(e){let o=e.target.value.toUpperCase();""!=o&&this.opservice.verifyCode("Logisticsandvehicle/isExistCode/"+o).subscribe(n=>{this.form.controls.isExist.setValue(n),this.form.controls.vehicleNumber.setValue(o)})}get f(){return this.form.controls}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.so),t.Y36(x._),t.Y36(l.qu),t.Y36(b.s),t.Y36(y.t),t.Y36(W.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-updatelogisticsandvehicle"]],features:[t.qOj],decls:143,vars:145,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","vehicleNumber",1,"form-control",3,"ngClass","placeholder","readonly","keyup"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","vehicleNameInEnglish",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","vehicleNameInArabic",1,"form-control",3,"placeholder"],["type","number","formControlName","dailyFuelCost",1,"form-control",3,"placeholder"],["type","number","formControlName","dailyMiscCost",1,"form-control",3,"placeholder"],["type","number","formControlName","estimatedDailyMaintenanceCost",1,"form-control",3,"placeholder"],["type","number","formControlName","otherDailyOperationCost",1,"form-control",3,"placeholder"],["type","number","readonly","","formControlName","totalDailyServiceCost",1,"form-control",3,"placeholder"],["type","number","formControlName","dailyServicePrice",1,"form-control",3,"placeholder"],["type","text","formControlName","valueofVehicle",1,"form-control",3,"placeholder"],["formControlName","vehicletype",1,"form-control"],["value",""],["type","number","formControlName","minMargin",1,"form-control",3,"placeholder"],["color","primary","formControlName","isActive"],["formControlName","remarks",1,"form-control",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," \xd7 "),t.qZA(),t.qZA(),t.TgZ(6,"form",3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"input",7),t.NdJ("keyup",function(s){return o.verifyCode(s)}),t.ALo(14,"translate"),t.ALo(15,"translate"),t.qZA(),t.YNc(16,Lr,3,2,"div",8),t.qZA(),t.qZA(),t.TgZ(17,"div",5),t.TgZ(18,"div",6),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",9),t.ALo(23,"translate"),t.ALo(24,"translate"),t._UZ(25,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(26,"div",5),t.TgZ(27,"div",6),t.TgZ(28,"label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",11),t.ALo(32,"translate"),t.ALo(33,"translate"),t._UZ(34,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(35,"div",5),t.TgZ(36,"div",6),t.TgZ(37,"label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"input",12),t.ALo(41,"translate"),t.ALo(42,"translate"),t._UZ(43,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(44,"div",5),t.TgZ(45,"div",6),t.TgZ(46,"label"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._UZ(49,"input",13),t.ALo(50,"translate"),t.ALo(51,"translate"),t._UZ(52,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(53,"div",5),t.TgZ(54,"div",6),t.TgZ(55,"label"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t._UZ(58,"input",14),t.ALo(59,"translate"),t.ALo(60,"translate"),t._UZ(61,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(62,"div",5),t.TgZ(63,"div",6),t.TgZ(64,"label"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t._UZ(67,"input",15),t.ALo(68,"translate"),t.ALo(69,"translate"),t._UZ(70,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(71,"div",5),t.TgZ(72,"div",6),t.TgZ(73,"label"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t._UZ(76,"input",16),t.ALo(77,"translate"),t.ALo(78,"translate"),t.qZA(),t.qZA(),t.TgZ(79,"div",5),t.TgZ(80,"div",6),t.TgZ(81,"label"),t._uU(82),t.ALo(83,"translate"),t.qZA(),t._UZ(84,"input",17),t.ALo(85,"translate"),t.ALo(86,"translate"),t._UZ(87,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(88,"div",5),t.TgZ(89,"div",6),t.TgZ(90,"label"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t._UZ(93,"input",18),t.ALo(94,"translate"),t.ALo(95,"translate"),t._UZ(96,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(97,"div",5),t.TgZ(98,"div",6),t.TgZ(99,"label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t.TgZ(102,"select",19),t.TgZ(103,"option",20),t._uU(104),t.ALo(105,"translate"),t.ALo(106,"translate"),t.qZA(),t.TgZ(107,"option"),t._uU(108,"Passenger"),t.qZA(),t.TgZ(109,"option"),t._uU(110,"Goods"),t.qZA(),t.qZA(),t._UZ(111,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(112,"div",5),t.TgZ(113,"div",6),t.TgZ(114,"label"),t._uU(115),t.ALo(116,"translate"),t.qZA(),t._UZ(117,"input",21),t.ALo(118,"translate"),t.ALo(119,"translate"),t._UZ(120,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(121,"div",5),t.TgZ(122,"div",6),t.TgZ(123,"label"),t._uU(124),t.ALo(125,"translate"),t.qZA(),t._UZ(126,"br"),t._UZ(127,"mat-slide-toggle",22),t.qZA(),t.qZA(),t.TgZ(128,"div",5),t.TgZ(129,"div",6),t.TgZ(130,"label"),t._uU(131),t.ALo(132,"translate"),t.qZA(),t._UZ(133,"textarea",23),t.ALo(134,"translate"),t.ALo(135,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(136,"div",24),t.TgZ(137,"div",25),t.TgZ(138,"input",26),t.NdJ("click",function(){return o.closeModel()}),t.ALo(139,"translate"),t.qZA(),t._uU(140," \xa0 "),t._UZ(141,"input",27),t.ALo(142,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij("",t.lcZ(3,57,"Add_Logistics_and_Vehicle")," "),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(12,59,"Vehicle_Number")),t.xp6(2),t.hYB("placeholder","",t.lcZ(14,61,"Please_Enter")," ",t.lcZ(15,63,"Vehicle_Number"),""),t.s9C("readonly",o.readonly),t.Q6J("ngClass",t.VKq(143,Dr,o.f.vehicleNumber.errors&&o.f.vehicleNumber.touched)),t.xp6(3),t.Q6J("ngIf",o.f.vehicleNumber.errors),t.xp6(4),t.Oqu(t.lcZ(21,65,"Vehicle_Name_In_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(23,67,"Please_Enter")," ",t.lcZ(24,69,"Name_In_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.vehicleNameInEnglish),t.xp6(4),t.Oqu(t.lcZ(30,71,"Vehicle_Name_In_Arabic")),t.xp6(2),t.hYB("placeholder","",t.lcZ(32,73,"Please_Enter")," ",t.lcZ(33,75,"Name_In_Arabic"),""),t.xp6(3),t.Q6J("control",o.form.controls.vehicleNameInArabic),t.xp6(4),t.Oqu(t.lcZ(39,77,"Daily_Fuel_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(41,79,"Please_Enter")," ",t.lcZ(42,81,"Daily_Fuel_Cost"),""),t.xp6(3),t.Q6J("control",o.form.controls.dailyFuelCost),t.xp6(4),t.Oqu(t.lcZ(48,83,"Daily_Misc_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(50,85,"Please_Enter")," ",t.lcZ(51,87,"Daily_Misc_Cost"),""),t.xp6(3),t.Q6J("control",o.form.controls.dailyMiscCost),t.xp6(4),t.Oqu(t.lcZ(57,89,"Estimated_Daily_Maintenance_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(59,91,"Please_Enter")," ",t.lcZ(60,93,"Estimated_Daily_Maintenance_Cost"),""),t.xp6(3),t.Q6J("control",o.form.controls.estimatedDailyMaintenanceCost),t.xp6(4),t.Oqu(t.lcZ(66,95,"Other_Daily_Operation_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(68,97,"Please_Enter")," ",t.lcZ(69,99,"Other_Daily_Operation_Cost"),""),t.xp6(3),t.Q6J("control",o.form.controls.otherDailyOperationCost),t.xp6(4),t.Oqu(t.lcZ(75,101,"Total_Daily_Service_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(77,103,"Please_Enter")," ",t.lcZ(78,105,"Total_Daily_Service_Cost"),""),t.xp6(6),t.Oqu(t.lcZ(83,107,"Daily_Service_Price")),t.xp6(2),t.hYB("placeholder","",t.lcZ(85,109,"Please_Enter")," ",t.lcZ(86,111,"Daily_Service_Price"),""),t.xp6(3),t.Q6J("control",o.form.controls.dailyServicePrice),t.xp6(4),t.Oqu(t.lcZ(92,113,"Value_of_Vehicle")),t.xp6(2),t.hYB("placeholder","",t.lcZ(94,115,"Please_Enter")," ",t.lcZ(95,117,"Value_of_Vehicle"),""),t.xp6(3),t.Q6J("control",o.form.controls.valueofVehicle),t.xp6(4),t.Oqu(t.lcZ(101,119,"Vehicle_type")),t.xp6(4),t.AsE("",t.lcZ(105,121,"Select")," ",t.lcZ(106,123,"Vehicle_type")," "),t.xp6(7),t.Q6J("control",o.form.controls.vehicletype),t.xp6(4),t.Oqu(t.lcZ(116,125,"Min_Margin")),t.xp6(2),t.hYB("placeholder","",t.lcZ(118,127,"Please_Enter")," ",t.lcZ(119,129,"Min_Margin_Required"),""),t.xp6(3),t.Q6J("control",o.form.controls.minMargin),t.xp6(4),t.Oqu(t.lcZ(125,131,"Is_Active")),t.xp6(7),t.Oqu(t.lcZ(132,133,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(134,135,"Please_Enter")," ",t.lcZ(135,137,"Remarks"),""),t.xp6(5),t.s9C("value",t.lcZ(139,139,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(142,141,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,f.mk,f.O5,G.s,l.wV,l.EJ,l.YN,l.Kr,Ot.Rr],pipes:[Z.X$],encapsulation:2}),i})();function Er(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vehicle_Number")," "))}function Or(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.vehicleNumber)}}function jr(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vehicle_Name_In_English")," "))}function kr(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.vehicleNameInEnglish)}}function Mr(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Vehicle_Name_In_Arabic")," "))}function Rr(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.vehicleNameInArabic)}}function Pr(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Cost")," "))}function Fr(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.totalDailyServiceCost)}}function Ir(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function Yr(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.isActive)}}function Jr(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Qr(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"a",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",39),t.qZA(),t.qZA()}}function Br(i,a){1&i&&t._UZ(0,"tr",40)}function Hr(i,a){1&i&&t._UZ(0,"tr",41)}const Vr=function(){return{standalone:!0}};let $r=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.notifyService=p,this.validationService=u,this.pageService=d,this.dialog=m,this.displayedColumns=["vehicleNumber","vehicleNameInEnglish","vehicleNameInArabic","totalDailyServiceCost","isActive","Actions"],this.searchValue="",this.isLoading=!1,this.sortingOrder="id desc"}ngOnInit(){this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Logisticsandvehicle/getLogisticsandvehiclesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,Nr);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}setForm(){this.form=this.fb.group({})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Logisticandvehicle","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Logisticandvehicle","Update")}refresh(){this.searchValue="",this.initialLoading()}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Logisticsandvehicle",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(w.g),t.Y36(N.R),t.Y36(V.N),t.Y36(T.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-logisticsandvehicle"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:63,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addLogisticsandvehicle","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","vehicleNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","vehicleNameInEnglish"],["matColumnDef","vehicleNameInArabic"],["matColumnDef","totalDailyServiceCost"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,Er,3,3,"th",24),t.YNc(43,Or,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,jr,3,3,"th",24),t.YNc(46,kr,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,Mr,3,3,"th",24),t.YNc(49,Rr,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,Pr,3,3,"th",24),t.YNc(52,Fr,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,Ir,3,3,"th",24),t.YNc(55,Yr,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,Jr,3,3,"th",31),t.YNc(58,Qr,3,0,"td",25),t.BQk(),t.YNc(59,Br,1,0,"tr",32),t.YNc(60,Hr,1,0,"tr",33),t.qZA(),t.ynx(61),t.TgZ(62,"mat-paginator",34),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Logistics_and_Vehicle")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Logistics_and_Vehicle")),t.xp6(10),t.hij("",t.lcZ(27,24,"Logistics_and_Vehicle_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,Vr)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Logistics_and_Vehicle")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})(),Gr=(()=>{class i extends q{constructor(e,o,n,s,r,c){super(o),this.dialogRef=e,this.authService=o,this.fb=n,this.apiService=s,this.utilService=r,this.opservice=c,this.id=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}setForm(){this.form=this.fb.group({isExist:[!1],code:["MEXXXXXX",l.kI.required],category:["",l.kI.required],nameInEnglish:["",l.kI.required],nameInArabic:["",l.kI.required],type:["",l.kI.required],estimatedCostValue:["",l.kI.required],isDepreciationApplicable:[!1,l.kI.required],minimumCostPerUsage:["",l.kI.required],depreciationPerYear:["",l.kI.required],usageLifetermsYear:["",l.kI.required],isActive:[!0,l.kI.required],remarks:[""]},{validators:[qe.isCodeExist("code","isExist")]})}closeModel(){this.dialogRef.close()}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("Materialequipment",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Materialequipment/getMaterialequipmentById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}reset(){this.form.controls.code.setValue(""),this.form.controls.category.setValue(""),this.form.controls.nameInEnglish.setValue(""),this.form.controls.nameInArabic.setValue(""),this.form.controls.type.setValue(""),this.form.controls.estimatedCostValue.setValue(""),this.form.controls.isDepreciationApplicable.setValue(!1),this.form.controls.minimumCostPerUsage.setValue(""),this.form.controls.depreciationPerYear.setValue(""),this.form.controls.usageLifetermsYear.setValue(""),this.form.controls.isActive.setValue(!0),this.form.controls.remarks.setValue("")}verifyCode(e){let o=e.target.value.toUpperCase();""!=o&&this.opservice.verifyCode("Materialequipment/isExistCode/"+o).subscribe(n=>{this.form.controls.isExist.setValue(n),this.form.controls.code.setValue(o)})}get f(){return this.form.controls}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.so),t.Y36(x._),t.Y36(l.qu),t.Y36(b.s),t.Y36(y.t),t.Y36(W.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-materialequipment"]],features:[t.qOj],decls:128,vars:114,consts:[[1,"modal-title"],["type","button","data-dismiss","modal","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","code","readonly","",1,"form-control",3,"placeholder"],["formControlName","category",1,"form-control"],["value",""],[3,"control"],["type","text","formControlName","nameInEnglish",1,"form-control",3,"placeholder"],["type","text","formControlName","nameInArabic",1,"form-control",3,"placeholder"],["formControlName","type",1,"form-control"],["type","number","formControlName","estimatedCostValue",1,"form-control",3,"placeholder"],["color","primary","formControlName","isDepreciationApplicable"],["type","number","formControlName","minimumCostPerUsage",1,"form-control",3,"placeholder"],["type","number","formControlName","depreciationPerYear",1,"form-control",3,"placeholder"],["type","number","formControlName","usageLifetermsYear",1,"form-control",3,"placeholder"],["color","primary","formControlName","isActive"],["formControlName","remarks",1,"form-control",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7 "),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",4),t.TgZ(16,"div",5),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"select",7),t.TgZ(21,"option",8),t._uU(22),t.ALo(23,"translate"),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"option"),t._uU(26,"Equipment"),t.qZA(),t.TgZ(27,"option"),t._uU(28,"Inventory"),t.qZA(),t.qZA(),t._UZ(29,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(30,"div",4),t.TgZ(31,"div",5),t.TgZ(32,"label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"input",10),t.ALo(36,"translate"),t.ALo(37,"translate"),t._UZ(38,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(39,"div",4),t.TgZ(40,"div",5),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",11),t.ALo(45,"translate"),t.ALo(46,"translate"),t._UZ(47,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(48,"div",4),t.TgZ(49,"div",5),t.TgZ(50,"label"),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"select",12),t.TgZ(54,"option",8),t._uU(55),t.ALo(56,"translate"),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"option"),t._uU(59,"Asset"),t.qZA(),t.TgZ(60,"option"),t._uU(61,"Consumable"),t.qZA(),t.qZA(),t._UZ(62,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(63,"div",4),t.TgZ(64,"div",5),t.TgZ(65,"label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t._UZ(68,"input",13),t.ALo(69,"translate"),t.ALo(70,"translate"),t._UZ(71,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(72,"div",4),t.TgZ(73,"div",5),t.TgZ(74,"label"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t._UZ(77,"br"),t._UZ(78,"mat-slide-toggle",14),t.qZA(),t.qZA(),t.TgZ(79,"div",4),t.TgZ(80,"div",5),t.TgZ(81,"label"),t._uU(82),t.ALo(83,"translate"),t.qZA(),t._UZ(84,"input",15),t.ALo(85,"translate"),t.ALo(86,"translate"),t._UZ(87,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(88,"div",4),t.TgZ(89,"div",5),t.TgZ(90,"label"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t._UZ(93,"input",16),t.ALo(94,"translate"),t.ALo(95,"translate"),t._UZ(96,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(97,"div",4),t.TgZ(98,"div",5),t.TgZ(99,"label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t._UZ(102,"input",17),t.ALo(103,"translate"),t.ALo(104,"translate"),t._UZ(105,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(106,"div",4),t.TgZ(107,"div",5),t.TgZ(108,"label"),t._uU(109),t.ALo(110,"translate"),t.qZA(),t._UZ(111,"br"),t._UZ(112,"mat-slide-toggle",18),t.qZA(),t.qZA(),t.TgZ(113,"div",4),t.TgZ(114,"div",5),t.TgZ(115,"label"),t._uU(116),t.ALo(117,"translate"),t.qZA(),t._UZ(118,"textarea",19),t.ALo(119,"translate"),t.ALo(120,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(121,"div",20),t.TgZ(122,"div",21),t.TgZ(123,"input",22),t.NdJ("click",function(){return o.closeModel()}),t.ALo(124,"translate"),t.qZA(),t._uU(125," \xa0 "),t._UZ(126,"input",23),t.ALo(127,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,44,"Add_New_Material_Equipment_Master")," "),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,46,"Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,48,"Please_Enter")," ",t.lcZ(14,50,"Code"),""),t.xp6(6),t.Oqu(t.lcZ(19,52,"Category")),t.xp6(4),t.AsE("",t.lcZ(23,54,"Select")," ",t.lcZ(24,56,"Category")," "),t.xp6(7),t.Q6J("control",o.form.controls.category),t.xp6(4),t.Oqu(t.lcZ(34,58,"Name_In_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(36,60,"Please_Enter")," ",t.lcZ(37,62,"Name_In_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.nameInEnglish),t.xp6(4),t.Oqu(t.lcZ(43,64,"Name_In_Arabic")),t.xp6(2),t.hYB("placeholder","",t.lcZ(45,66,"Please_Enter")," ",t.lcZ(46,68,"Name_In_Arabic"),""),t.xp6(3),t.Q6J("control",o.form.controls.nameInArabic),t.xp6(4),t.Oqu(t.lcZ(52,70,"Type")),t.xp6(4),t.AsE("",t.lcZ(56,72,"Select")," ",t.lcZ(57,74,"Type")," "),t.xp6(7),t.Q6J("control",o.form.controls.type),t.xp6(4),t.Oqu(t.lcZ(67,76,"Estimated_Cost_Value")),t.xp6(2),t.hYB("placeholder","",t.lcZ(69,78,"Please_Enter")," ",t.lcZ(70,80,"Estimated_Cost_Value"),""),t.xp6(3),t.Q6J("control",o.form.controls.estimatedCostValue),t.xp6(4),t.Oqu(t.lcZ(76,82,"Is_Depreciation_Applicable")),t.xp6(7),t.Oqu(t.lcZ(83,84,"Minimum_Cost_Per_Usage")),t.xp6(2),t.hYB("placeholder","",t.lcZ(85,86,"Please_Enter")," ",t.lcZ(86,88,"Minimum_Cost_Per_Usage"),""),t.xp6(3),t.Q6J("control",o.form.controls.minimumCostPerUsage),t.xp6(4),t.Oqu(t.lcZ(92,90,"Depreciation_Per_Year")),t.xp6(2),t.hYB("placeholder","",t.lcZ(94,92,"Please_Enter")," ",t.lcZ(95,94,"Depreciation_Per_Year"),""),t.xp6(3),t.Q6J("control",o.form.controls.depreciationPerYear),t.xp6(4),t.Oqu(t.lcZ(101,96,"Usage_Life_terms_Year")),t.xp6(2),t.hYB("placeholder","",t.lcZ(103,98,"Please_Enter")," ",t.lcZ(104,100,"Usage_Life_terms_Year"),""),t.xp6(3),t.Q6J("control",o.form.controls.usageLifetermsYear),t.xp6(4),t.Oqu(t.lcZ(110,102,"Is_Active")),t.xp6(7),t.Oqu(t.lcZ(117,104,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(119,106,"Please_Enter")," ",t.lcZ(120,108,"Remarks"),""),t.xp6(5),t.s9C("value",t.lcZ(124,110,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(127,112,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,G.s,l.wV,Ot.Rr],pipes:[Z.X$],encapsulation:2}),i})();function Wr(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Code")," "))}function zr(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.code)}}function Xr(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Name_In_English")," "))}function Kr(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.nameInEnglish)}}function tl(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Name_In_Arabic")," "))}function el(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.nameInArabic)}}function ol(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Category")," "))}function il(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.category)}}function nl(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Type")," "))}function al(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.type)}}function sl(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function rl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"a",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",39),t.qZA(),t.qZA()}}function ll(i,a){1&i&&t._UZ(0,"tr",40)}function cl(i,a){1&i&&t._UZ(0,"tr",41)}const pl=function(){return{standalone:!0}};let ul=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.notifyService=p,this.validationService=u,this.pageService=d,this.dialog=m,this.displayedColumns=["code","nameInEnglish","nameInArabic","category","type","Actions"],this.searchValue="",this.isLoading=!1,this.sortingOrder="id desc"}ngOnInit(){this.initialLoading()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}setForm(){this.form=this.fb.group({})}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Materialequipment/getMaterialequipmentsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,Gr);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Materialequipment","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Materialequipment","Update")}refresh(){this.searchValue="",this.initialLoading()}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Materialequipment",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(w.g),t.Y36(N.R),t.Y36(V.N),t.Y36(T.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-materialequipment"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:63,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addMaterialEquipment","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","code"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nameInEnglish"],["matColumnDef","nameInArabic"],["matColumnDef","category"],["matColumnDef","type"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,Wr,3,3,"th",24),t.YNc(43,zr,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,Xr,3,3,"th",24),t.YNc(46,Kr,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,tl,3,3,"th",24),t.YNc(49,el,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,ol,3,3,"th",24),t.YNc(52,il,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,nl,3,3,"th",24),t.YNc(55,al,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,sl,3,3,"th",31),t.YNc(58,rl,3,0,"td",25),t.BQk(),t.YNc(59,ll,1,0,"tr",32),t.YNc(60,cl,1,0,"tr",33),t.qZA(),t.ynx(61),t.TgZ(62,"mat-paginator",34),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Material_Equipment_Master")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Material_Equipment_Master")),t.xp6(10),t.hij("",t.lcZ(27,24,"Material_Equipment_Master_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,pl)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Material_Equipment_Master")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function dl(i,a){if(1&i&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.AsE(" ",e.value,"-",e.text," ")}}function ml(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(t.lcZ(2,2,e.value))}}function _l(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.index;t.xp6(1),t.Oqu(e+1)}}function gl(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.dayText," ")}}function hl(i,a){if(1&i&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.employeeNumber),t.xp6(1),t.AsE(" ",e.employeeName,"-",e.employeeNumber," ")}}function fl(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function Zl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"select",38),t.NdJ("change",function(n){const r=t.CHM(e).index;return t.oxw(2).onSelectShift(n,r)}),t.TgZ(2,"option",20),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.YNc(6,fl,2,2,"option",17),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("formControl",e),t.xp6(2),t.AsE("",t.lcZ(4,4,"Select")," ",t.lcZ(5,6,"Shift_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.listOfShiftCodes)}}function Cl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",32),t.TgZ(1,"table",33),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t._UZ(4,"th"),t.YNc(5,_l,2,1,"th",34),t._UZ(6,"td"),t._UZ(7,"td"),t.qZA(),t.TgZ(8,"tr"),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,gl,2,1,"th",34),t._UZ(13,"td"),t._UZ(14,"td"),t.qZA(),t.qZA(),t.TgZ(15,"tbody"),t.TgZ(16,"tr"),t.TgZ(17,"td"),t._UZ(18,"auto-loader",13),t._UZ(19,"input",35),t.ALo(20,"translate"),t.ALo(21,"translate"),t.TgZ(22,"mat-autocomplete",15,36),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().autoSelectionEmployeeNumber(n,"select")}),t.YNc(24,hl,2,3,"mat-option",17),t.ALo(25,"async"),t.qZA(),t.qZA(),t.YNc(26,Zl,7,8,"td",34),t.TgZ(27,"td"),t._uU(28),t.qZA(),t.TgZ(29,"td"),t.TgZ(30,"i",37),t.NdJ("click",function(){return t.CHM(e),t.oxw().addEntry()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(23),o=t.oxw();t.xp6(5),t.Q6J("ngForOf",o.listOfDays),t.xp6(5),t.hij(" ",t.lcZ(11,11,"Employee")," "),t.xp6(2),t.Q6J("ngForOf",o.listOfDays),t.xp6(6),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(20,13,"Please_Enter")," ",t.lcZ(21,15,"Employee"),""),t.Q6J("formControl",o.empCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(25,17,o.filteredEmployeeNumbers)),t.xp6(2),t.Q6J("ngForOf",o.shiftsFormControls.controls),t.xp6(2),t.Oqu(o.newTotalShifts)}}function Al(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.index;t.xp6(1),t.Oqu(e+1)}}function Tl(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.dayText," ")}}function vl(i,a){if(1&i&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(),n=o.index,s=o.$implicit,r=t.oxw(2);t.s9C("matTooltip",r.getCellInfo(n,e)),t.xp6(1),t.hij(" ",s.s[e]," ")}}function xl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,vl,2,2,"td",40),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t.TgZ(7,"i",41),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).removeEntry(s)}),t.qZA(),t._uU(8," \xa0 "),t.TgZ(9,"i",42),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).editRoasterEntry(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",e.employeeNumber," "),t.xp6(1),t.Q6J("ngForOf",n.listOfDays),t.xp6(2),t.hij(" ",n.totalShiftsRow[o]," ")}}function ql(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.Oqu(o.totalShiftsCol[e])}}function bl(i,a){if(1&i&&(t.TgZ(0,"div",39),t.TgZ(1,"table",33),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t._UZ(4,"th"),t.YNc(5,Al,2,1,"th",34),t._UZ(6,"td"),t._UZ(7,"td"),t.qZA(),t.TgZ(8,"tr"),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,Tl,2,1,"th",34),t._UZ(13,"td"),t.qZA(),t.qZA(),t.TgZ(14,"tbody"),t.YNc(15,xl,10,3,"tr",34),t.TgZ(16,"tr"),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.YNc(20,ql,2,1,"td",34),t.TgZ(21,"td"),t._uU(22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",e.listOfDays),t.xp6(5),t.hij(" ",t.lcZ(11,7,"Employee")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(3),t.Q6J("ngForOf",e.listOfRoasters),t.xp6(3),t.Oqu(t.lcZ(19,9,"Total_Shifts")),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Oqu(e.grandTotalShifts)}}let yl=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfRoasters=[],this.listOfDays=[],this.sequence=1,this.editsequence=0,this.remarks="",this.shiftsFormControls=new l.Oe([new l.NI("")]),this.noOfDays=0,this.saveEnable=!1,this.editEnable=!1,this.monthYear="",this.employeeNumber="",this.employeeName="",this.s=[],this.custCodeControl=new l.NI("",l.kI.required),this.empCodeControl=new l.NI(""),this.siteCodeList=[],this.customerCode="",this.listOfShiftCodes=[],this.employeeList=[],this.siteCode="",this.projectCode="",this.month=0,this.year=0,this.shiftCode="",this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0,this.newTotalShifts=0,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,tt.O)(this.customerCode),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(m=>(""!==m.trim()&&(this.isDataLoading=!0),this.filterCustCodes(m||"")))),this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,tt.O)(this.employeeNumber),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(m=>(""!==m.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(m||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterEmployeeNumbers(e){return this.apiService.getall(`Employee/getAutoFillEmployeeList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadShiftCodes(){this.apiService.getall("ShiftMaster/getSelectShiftsToSiteBySiteCode/"+this.siteCode).subscribe(e=>{this.listOfShiftCodes=e,this.findNoOfShifts()})}loadEmployees(){this.apiService.getall("Employee/getSelectEmployeeList").subscribe(e=>{this.employeeList=e})}ngOnInit(){let e=new Date(Date.now());this.year=e.getFullYear(),this.setForm(),this.readonly="readonly"}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],monthYear:[""],siteCode:["",l.kI.required],month:[0],year:[this.year],employeeNumber:[""],shiftCode:[""]})}submit(){this.saveEnable&&(this.form.controls.customerCode.setValue(this.customerCode),this.form.controls.siteCode.setValue(this.siteCode),this.form.controls.employeeNumber.setValue(this.employeeNumber),this.form.value.roastersList=this.listOfRoasters,this.form.value.s=this.s,this.form.value.month=this.month,this.form.value.year=this.year,this.form.value.employeeNumber=this.employeeNumber,this.form.value.employeeName=this.employeeName,this.form.value.customerCode=this.customerCode,this.form.value.siteCode=this.siteCode,this.listOfRoasters.length>0?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("MonthlyRoaster/createUpdateMonthlyRoaster",this.form.value).subscribe(e=>{this.utilService.OkMessage()},e=>{console.log(e),console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields())}addEntry(){if(""!=this.employeeNumber&&null!=this.employeeNumber&&0!=this.newTotalShifts){let e=this.listOfRoasters.findIndex(n=>n.employeeNumber==this.employeeNumber),o={employeeNumber:this.employeeNumber,employeeName:this.employeeName,s:this.s.slice()};-1!=e?(this.removeEntry(e),this.listOfRoasters.splice(e,0,o)):this.listOfRoasters.push(o),this.findNoOfShifts(),this.saveEnable=!0,this.employeeNumber="",this.form.controls.employeeNumber.setValue(""),this.empCodeControl.setValue(""),this.resetShiftsFormControls()}}removeEntry(e){this.listOfRoasters.splice(e,1),this.saveEnable=!0,this.findNoOfShifts()}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.employeeNumber.setValue(""),this.form.controls.employeeName.setValue("")}goBack(){window.history.back()}onSelectionCustomerCode(e,o){let n="";n="change"==o?e.target.value:e.option.value,this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){this.form.patchValue({customerCode:s.custCode});let r=this.custCodeControl.value;this.form.value.customerCode=r,this.customerCode=r,this.loadSiteCodes(r)}else this.form.controls.customerCode.setValue(""),this.custCodeControl.setValue(""),this.customerCode="",this.siteCodeList=[]}),this.form.controls.siteCode.setValue(""),this.loadData()}autoSelectionEmployeeNumber(e,o){let n=this.empCodeControl.value,s=-1;this.employeeNumber=n,this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+n).subscribe(r=>{if(null!=r){this.employeeName=r.employeeName,this.form.value.employeeNumber=n,this.form.value.employeeName=r.employeeName,this.s=[];for(var c=1;c<=31;c++)this.s.push("");this.resetShiftsFormControls(),s=this.listOfRoasters.findIndex(p=>p.employeeNumber==this.employeeNumber),s>=0&&this.editRoasterEntry(s)}else this.empCodeControl.setValue(""),this.employeeNumber="",this.employeeName="",this.resetShiftsFormControls()})}onSelectSiteCode(e){let o="";o=e.target.value,this.form.value.siteCode=o,this.form.controls.siteCode.setValue(o),this.siteCode=o,this.loadData()}loadData(){if(""!=this.customerCode&&""!=this.siteCode&&0!=this.month&&0!=this.year){let o=new Date(this.year,this.month-1,1),n=new Date(this.year,this.month,0);this.listOfDays=[],this.noOfDays=n.getDate()-o.getDate()+1,this.apiService.getall(`MonthlyRoaster/getMonthlyRoaster/${this.customerCode}/${this.siteCode}/${this.month}/${this.year}`).subscribe(s=>{this.listOfRoasters=s,this.sequence=this.listOfRoasters.length+1}),this.loadWeekDays(),this.shiftsFormControls.clear();for(var e=1;e<=this.noOfDays;e++)this.shiftsFormControls.push(new l.NI(""));this.loadShiftCodes(),this.listOfShiftCodes=[]}else this.listOfRoasters=[]}loadWeekDays(){this.form.controls.monthYear.setValue(new Date(this.year,this.month-1,1));for(var e=1;e<=this.noOfDays;e++){let o=new Date(this.year,this.month-1,e),s={dayText:o.toDateString().substring(0,1),dayNumber:e,dayFullName:o.toDateString()};this.listOfDays.push(s)}}loadSiteCodes(e){this.apiService.getall(`CustomerSite/getSelectSiteListByCustCode/${e}`).subscribe(o=>{this.siteCodeList=o})}onSelectShift(e,o){if(0!=this.newTotalShifts)this.s[o]=e.target.value,this.shiftsFormControls.controls[o].setValue(e.target.value);else for(var n=1;n<=this.noOfDays;n++)this.s[n-1]=e.target.value,this.shiftsFormControls.controls[n-1].setValue(e.target.value);this.findTotalNewShifts()}resetShiftsFormControls(){this.shiftsFormControls.clear();for(var e=1;e<=this.noOfDays;e++)this.shiftsFormControls.push(new l.NI("")),this.s[e-1]="";this.findTotalNewShifts()}openDatePicker(e){e.open()}closeDatePicker(e,o){let s=Ae(e).format("YYYY-MM");this.month=parseInt(s.toString().substring(5,7)),this.year=Number(s.toString().substring(0,4)),""!=this.customerCode&&""!=this.siteCode&&this.loadData(),o.close()}findNoOfShifts(){this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0;for(var e=0;e<this.noOfDays;e++){let s=0;for(var o=0;o<this.listOfRoasters.length;o++){let r=0,c=this.listOfRoasters[o];for(var n=0;n<c.s.length;n++)r+=this.shiftValue(c.s[n]),n==e&&(s+=this.shiftValue(c.s[n]));this.totalShiftsRow.push(r)}this.totalShiftsCol.push(s),this.grandTotalShifts=this.grandTotalShifts+this.totalShiftsCol[e]}}findTotalNewShifts(){let e=0;for(var o=0;o<this.noOfDays;o++)e+=this.shiftValue(this.s[o]);this.newTotalShifts=e}shiftValue(e){let o=this.listOfShiftCodes.find(n=>n.value==e);return null==o||""==e?0:"False"==o.textTwo?1:0}RoastersCount(){return this.listOfRoasters.length}getCellInfo(e,o){return`Date:${new Date(this.year,this.month-1,o+1).toDateString()}\nShift: ${this.getShiftInfo(e,o)}`}getShiftInfo(e,o){return`Shift Name: ${this.listOfRoasters[e].s[o]}`}editRoasterEntry(e){let o=this.listOfRoasters[e];this.employeeNumber=o.employeeNumber,this.employeeName=o.employeeName,this.empCodeControl.setValue(this.employeeNumber),this.s=o.s.slice();for(var n=1;n<=this.noOfDays;n++)this.shiftsFormControls.controls[n-1].setValue(this.s[n-1]),this.empCodeControl.setValue(this.employeeNumber);this.findTotalNewShifts(),document.getElementById("inputEntry").scrollIntoView()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-monthly-roaster"]],features:[t.qOj],decls:59,vars:45,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete","change"],[3,"optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],["formControlName","monthYear",1,"form-control","datapickerinput",3,"matDatepicker","placeholder","click"],["matSuffix","",3,"for"],["startView","year","data-date-format","mm/yyyy",3,"monthSelected"],["dp2",""],["class","table-responsive","id","inputEntry",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],["id","inputEntry",1,"table-responsive"],["id","zero_config1",1,"table","table-bordered","no-wrap"],[4,"ngFor","ngForOf"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],["auto_emp","matAutocomplete"],[1,"fas","fa-plus-circle",3,"click"],[1,"custom-select","mr-sm-2",3,"formControl","change"],[1,"table-responsive"],[3,"matTooltip",4,"ngFor","ngForOf"],[1,"fas","icon-trash",3,"click"],[1,"fas","icon-note",3,"click"],[3,"matTooltip"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._UZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",4),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"label",10),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t._UZ(16,"auto-loader",13),t.TgZ(17,"input",14),t.NdJ("change",function(r){return o.onSelectionCustomerCode(r,"change")}),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,"select")}),t.YNc(22,dl,2,3,"mat-option",17),t.ALo(23,"async"),t.qZA(),t.qZA(),t._UZ(24,"validation-message",18),t.qZA(),t.qZA(),t.TgZ(25,"div",9),t.TgZ(26,"div",11),t.TgZ(27,"label",10),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"select",19),t.NdJ("change",function(r){return o.onSelectSiteCode(r)}),t.TgZ(31,"option",20),t._uU(32),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.YNc(35,ml,3,4,"option",17),t.qZA(),t._UZ(36,"validation-message",18),t.qZA(),t.qZA(),t.TgZ(37,"div",9),t.TgZ(38,"div",11),t.TgZ(39,"label",10),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div",11),t.TgZ(43,"div",12),t.TgZ(44,"input",21),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(48);return o.openDatePicker(r)}),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"mat-datepicker-toggle",22),t.TgZ(47,"mat-datepicker",23,24),t.NdJ("monthSelected",function(r){t.CHM(n);const c=t.MAs(48);return o.closeDatePicker(r,c)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(49,Cl,31,19,"div",25),t.YNc(50,bl,23,11,"div",26),t.TgZ(51,"div",27),t.TgZ(52,"div",6),t.TgZ(53,"div",28),t.TgZ(54,"input",29),t.NdJ("click",function(){return o.goBack()}),t.ALo(55,"translate"),t.qZA(),t._uU(56," \xa0 "),t._UZ(57,"input",30),t.ALo(58,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(21),s=t.MAs(48);t.Q6J("formGroup",o.form),t.xp6(12),t.Oqu(t.lcZ(13,23,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(18,25,"Please_Enter")," ",t.lcZ(19,27,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",n),t.xp6(5),t.Q6J("ngForOf",t.lcZ(23,29,o.filteredCustCodes)),t.xp6(2),t.Q6J("control",o.custCodeControl),t.xp6(4),t.Oqu(t.lcZ(29,31,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(33,33,"Select")," ",t.lcZ(34,35,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Oqu(t.lcZ(41,37,"Year_Month")),t.xp6(4),t.hYB("placeholder","",t.lcZ(45,39,"Select")," ","Year_Month",""),t.Q6J("matDatepicker",s),t.xp6(2),t.Q6J("for",s),t.xp6(3),t.Q6J("ngIf",0!=o.noOfDays),t.xp6(1),t.Q6J("ngIf",0!=o.RoastersCount()),t.xp6(4),t.s9C("value",t.lcZ(55,41,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(58,43,"Save"))}},directives:[l._Y,l.JL,l.sg,ht.z,l.Fj,at.ZL,l.JJ,l.oH,at.XC,f.sg,G.s,l.EJ,l.u,l.YN,l.Kr,M.hl,M.nW,gt.R9,M.Mq,f.O5,St.ey,rt.gM],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function Sl(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Id")," "))}function wl(i,a){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function Ul(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Eng_Name")," "))}function Ll(i,a){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteName)}}function Dl(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Arb_Name")," "))}function Nl(i,a){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteArbName)}}function El(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Address")," "))}function Ol(i,a){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteAddress)}}function jl(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"City")," "))}function kl(i,a){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCityCode)}}function Ml(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Customer_Active")," "))}function Rl(i,a){1&i&&(t.TgZ(0,"span",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function Pl(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function Fl(i,a){if(1&i&&(t.TgZ(0,"td",38),t.YNc(1,Rl,3,3,"span",39),t.YNc(2,Pl,3,3,"ng-template",null,40,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function Il(i,a){1&i&&(t.TgZ(0,"th",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Yl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",38),t.TgZ(1,"div",44),t.TgZ(2,"a",45),t._UZ(3,"i",46),t.qZA(),t.TgZ(4,"div",47),t.TgZ(5,"a",48),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().editSite(s.id)}),t._UZ(6,"i",49),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"Edit_Site")," "))}function Jl(i,a){1&i&&t._UZ(0,"tr",50)}function Ql(i,a){1&i&&t._UZ(0,"tr",51)}const Bl=function(){return{standalone:!0}};let We=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.route=h,this.oprService=C,this.dialogRef=A,this.displayedColumns=["siteCode","siteName","siteArbName","siteAddress","siteCityCode","isActive","Actions"],this.searchValue="",this.sortingOrder="customerCode desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("CustomerSite/getCustomerSitesByCustCodePagedList",this.utilService.getQueryString(e,o,this.customerCode,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}create(e){this.openDialogManage(e,g.O.create,"Adding_New_Enquiry","Add",ve)}editSite(e){this.openDialogManage(e,g.O.update,"Updating_Site","Update",Te)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("CustomerSite",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}addsitetocustomer(e){this.openDialogManage(e,g.O.create,"Adding_New_Site_to_Customer","Add",ve)}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(L.gz),t.Y36(W.f),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sites-list-by-customer-code"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:63,vars:26,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],["align","right",1,"row"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],["align","right",1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addnewcustomersite","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","siteCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteName"],["matColumnDef","siteArbName"],["matColumnDef","siteAddress"],["matColumnDef","siteCityCode"],["matColumnDef","isActive"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"nav",6),t.TgZ(10,"ol",7),t.TgZ(11,"li",8),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"li",8),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"li",9),t._uU(18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"div",3),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",13),t.TgZ(24,"div",14),t.TgZ(25,"div",15),t.TgZ(26,"input",16),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",17),t.TgZ(29,"a",18),t.NdJ("click",function(){return o.create(o.custId)}),t._UZ(30,"i",19),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(33,"div",20),t.TgZ(34,"div",21),t.TgZ(35,"div",22),t.ynx(36),t.TgZ(37,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(38,24),t.YNc(39,Sl,3,3,"th",25),t.YNc(40,wl,2,1,"td",26),t.BQk(),t.ynx(41,27),t.YNc(42,Ul,3,3,"th",25),t.YNc(43,Ll,2,1,"td",26),t.BQk(),t.ynx(44,28),t.YNc(45,Dl,3,3,"th",25),t.YNc(46,Nl,2,1,"td",26),t.BQk(),t.ynx(47,29),t.YNc(48,El,3,3,"th",25),t.YNc(49,Ol,2,1,"td",26),t.BQk(),t.ynx(50,30),t.YNc(51,jl,3,3,"th",25),t.YNc(52,kl,2,1,"td",26),t.BQk(),t.ynx(53,31),t.YNc(54,Ml,3,3,"th",25),t.YNc(55,Fl,4,2,"td",26),t.BQk(),t.ynx(56,32),t.YNc(57,Il,3,3,"th",33),t.YNc(58,Yl,9,3,"td",26),t.BQk(),t.YNc(59,Jl,1,0,"tr",34),t.YNc(60,Ql,1,0,"tr",35),t.qZA(),t.ynx(61),t.TgZ(62,"mat-paginator",36),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,15,o.modalTitle)),t.xp6(11),t.hij(" ",t.lcZ(13,17,"Operations")," "),t.xp6(3),t.hij(" ",t.lcZ(16,19,"Sites_List")," "),t.xp6(3),t.Oqu(o.customerCode),t.xp6(8),t.MGl("placeholder","",t.lcZ(27,21,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(25,Bl)),t.xp6(5),t.hij("",t.lcZ(32,23,"Add_New_Customer_Site")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();var Hl=X(137);function Vl(i,a){1&i&&(t.TgZ(0,"span",51),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function $l(i,a){1&i&&(t.TgZ(0,"span",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function Gl(i,a){if(1&i&&t.YNc(0,$l,3,3,"span",52),2&i){const e=t.oxw(),o=t.MAs(47);t.Q6J("ngIf",null==e.filter?null:e.filter.isActive)("ngIfElse",o)}}function Wl(i,a){1&i&&(t.TgZ(0,"span",54),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"All"),""))}function zl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw().generateReport()}),t._uU(1," Generate Report "),t.qZA()}}function Xl(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",56),t._uU(2," print "),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportexcel()}),t._uU(5,"ExportExcel"),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.Q6J("useExistingCss",!0))}function Kl(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function tc(i,a){if(1&i&&(t.TgZ(0,"td",58),t.TgZ(1,"div",59),t._uU(2),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngClass",e.isActive?"":"circle-color-red"),t.xp6(1),t.hij(" \xa0\xa0\xa0\xa0\xa0\xa0 ",e.custCode,"")}}function ec(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Name")," "))}function oc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArabic?e.custArbName:e.custName)}}function ic(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Category")," "))}function nc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.custCatCode)}}function ac(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"City")," "))}function sc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.custCityCode1)}}function rc(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Mobile")," "))}function lc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.custMobile1)}}function cc(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Phone")," "))}function pc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.custPhone1)}}function uc(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Contact_Person")," "))}function dc(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.custSalesRep)}}function mc(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No_Of_Sites")," "))}function _c(i,a){if(1&i&&(t.TgZ(0,"td",58),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.numberOfSites)}}function gc(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function hc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",58),t.TgZ(1,"a",61),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t.ALo(2,"translate"),t._UZ(3,"i",62),t.qZA(),t.TgZ(4,"a",61),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewCustomerSites(s.custCode,s.id)}),t.ALo(5,"translate"),t._UZ(6,"i",63),t.qZA(),t.TgZ(7,"a",64),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().addsitetocustomer(s.id)}),t.ALo(8,"translate"),t._UZ(9,"i",15),t.qZA(),t.TgZ(10,"a",65),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().uploadFile(s.custCode)}),t.ALo(11,"translate"),t._UZ(12,"i",66),t.qZA(),t._uU(13," \xa0 "),t.qZA()}2&i&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,4,"Edit_Customer")),t.xp6(3),t.MGl("matTooltip"," ",t.lcZ(5,6,"View_Customer_Sites"),""),t.xp6(3),t.s9C("matTooltip",t.lcZ(8,8,"Add_New_Site")),t.xp6(3),t.s9C("matTooltip",t.lcZ(11,10,"Document_Upload")))}function fc(i,a){1&i&&t._UZ(0,"tr",67)}function Zc(i,a){1&i&&t._UZ(0,"tr",68)}function Cc(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.custCode),t.xp6(2),t.Oqu(o.isArabic?e.custArbName:e.custName),t.xp6(2),t.Oqu(e.custCatCode),t.xp6(2),t.Oqu(e.custCityCode1),t.xp6(2),t.Oqu(e.custMobile1),t.xp6(2),t.Oqu(e.custPhone1),t.xp6(2),t.Oqu(e.custSalesRep),t.xp6(2),t.Oqu(e.numberOfSites)}}function Ac(i,a){if(1&i&&(t.TgZ(0,"div",69),t.TgZ(1,"div",70),t.TgZ(2,"table",71),t.TgZ(3,"tr"),t.TgZ(4,"td",72),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td",72),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(14,"br"),t.qZA(),t.TgZ(15,"table",73),t.TgZ(16,"tr"),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"th"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.YNc(41,Cc,17,8,"tr",74),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,14,"Report_On_Customers")),t.xp6(4),t.AsE("",t.lcZ(10,16,"Branch_Code"),":",null==(null==e.filter?null:e.filter.branchCode)||""==e.filter.branchCode?"All":e.filter.branchCode,""),t.xp6(3),t.AsE("",t.lcZ(13,18,"Search_Key"),":",e.searchValue,""),t.xp6(6),t.hij(" ",t.lcZ(19,20,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(22,22,"Name")," "),t.xp6(3),t.hij(" ",t.lcZ(25,24,"Category")," "),t.xp6(3),t.hij(" ",t.lcZ(28,26,"City")," "),t.xp6(3),t.hij(" ",t.lcZ(31,28,"Mobile")," "),t.xp6(3),t.hij(" ",t.lcZ(34,30,"Phone")," "),t.xp6(3),t.hij(" ",t.lcZ(37,32,"Contact_Person")," "),t.xp6(3),t.hij(" ",t.lcZ(40,34,"No_Of_Sites")," "),t.xp6(2),t.Q6J("ngForOf",e.reportData)}}const Tc=function(){return{standalone:!0}};let vc=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.oprService=h,this.translate=C,this.displayedColumns=["custCode","custName","custCatCode","custCityCode1","custMobile1","custPhone1","custSalesRep","numberOfSites","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isArabic=!1,this.filter={branchCode:""},this.reportData=[],this.isArab=!1,this.citySelectionList=[]}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.initialLoading()}refresh(){this.reportData=[],this.resetFilter()}resetFilter(){this.filter={branchCode:""},this.applyFilter("")}initialLoading(){this.searchValue="",this.loadCitiesList(),this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}loadCitiesList(){this.apiService.getall("Branch/getBranchSelectListForUser").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}onSortOrder(e){this.reportData=[],this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.oprService.getPaginationWithFilter("CustomerMaster/getCustomersPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder),this.reportData=[]}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&location.reload(),this.isLoading=!1})}openFullWindow(e,o,n,s,r,c){let p=this.oprService.fullWindow(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.customerCode=o,p.componentInstance.custId=e,p.componentInstance.custId=e,p.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}createCust(){}createSite(){this.openDialogManage(0,g.O.create,"Adding_New_Site","Add",Te)}addsitetocustomer(e){this.openDialogManage(e,g.O.create,"Adding_New_Site_to_Customer","Add",ve)}edit(e){console.log("id="+e)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("CustomerMaster",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}viewCustomerSites(e,o){this.openFullWindow(o,e,g.O.create,"Customer_Sites","",We)}clearReport(){this.reportData=[]}loadListReport(e,o,n,s){this.isLoading=!0,this.oprService.getPaginationWithFilter("CustomerMaster/getCustomersPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.isLoading=!1,this.reportData=0==this.reportData.length?r.items:this.reportData.concat(r.items)},r=>this.utilService.ShowApiErrorMessage(r))}generateReport(){this.reportData=[];for(let e=0;e<=Math.floor(this.totalItemsCount/100);e++){let o={pageIndex:e,pageSize:100,previousPageIndex:0==e?0:e-1,length:0};this.loadListReport(o.pageIndex,o.pageSize,this.searchValue,this.sortingOrder)}}exportexcel(){let e=document.getElementById("printcontainer");const o=ut.P6.table_to_sheet(e),n=ut.P6.book_new();ut.P6.book_append_sheet(n,o,"Sheet1"),ut.NC(n,"CustomersReport.xlsx")}openFileUploadDialogManage(e="",o,n,s=80){let r=this.utilService.openDialogCongif(this.dialog,o,s);r.componentInstance.modalTitle=e,r.componentInstance.moduleFile=n,r.afterClosed().subscribe(c=>{})}uploadFile(e){this.openFileUploadDialogManage(this.translate.instant("Document_Upload"),Hl.Y,{module:"OPR",action:"OPR_CUST",id:e,sourceId:e})}CustomerActiveChecked(e){this.filter.isActive=e.checked,this.applyFilter(this.searchValue)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-opcustomer"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:95,vars:40,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],["align","right",1,"col-md-12","col-lg-12","text-right"],["data-toggle","modal","data-target","#addnewcustomer","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],["data-toggle","modal","data-target","#addnewcustomersite","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"col-md-4","col-lg-4"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],["class","badge badge-pill badge-light",4,"ngIf","ngIfElse"],["Active",""],["All",""],["color","primary",3,"ngModel","ngModelChange","change"],[1,"col-md-4","col-lg-4",2,"align-content","flex-start"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary","icon-refresh",3,"click"],[1,"col-md-1","col-lg-1","text-center"],[3,"isLoading"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","custCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","custName"],["matColumnDef","custCatCode"],["matColumnDef","custCityCode1"],["matColumnDef","custMobile1"],["matColumnDef","custPhone1"],["matColumnDef","custSalesRep"],["matColumnDef","numberOfSites"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["id","printcontainer","hidden","",4,"ngIf"],[1,"badge","badge-pill","badge-light"],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-warning"],[1,"btn","btn-primary",3,"click"],["printTitle","Customer Sites Report","printSectionId","printcontainer","ngxPrint","",1,"btn","btn-primary",3,"useExistingCss"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"circle-color",3,"ngClass"],["mat-header-cell",""],[1,"tableicons",3,"matTooltip","click"],[1,"icon-note"],[1,"icon-eye"],["data-target","#addsitetocustomer",1,"tableicons",3,"matTooltip","click"],["data-toggle","modal","data-target","#scrollable-modal",1,"tableicons","pcursor",3,"matTooltip","click"],[1,"icon-cloud-upload"],["mat-header-row",""],["mat-row",""],["id","printcontainer","hidden",""],["width","100%"],["id","attndTable"],["colspan","2"],["id","attndTable","width","100%"],[4,"ngFor","ngForOf"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",1),t.TgZ(21,"div",13),t.TgZ(22,"a",14),t.NdJ("click",function(){return o.createCust()}),t._UZ(23,"i",15),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._uU(26," \xa0\xa0 "),t.TgZ(27,"a",16),t.NdJ("click",function(){return o.createSite()}),t._UZ(28,"i",15),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",1),t.TgZ(32,"div",17),t.TgZ(33,"div",18),t.TgZ(34,"label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"ng-select",19),t.NdJ("ngModelChange",function(s){return o.filter.branchCode=s})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",1),t.TgZ(39,"div",17),t.TgZ(40,"input",20),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.TgZ(42,"div",17),t.YNc(43,Vl,3,3,"span",21),t.YNc(44,Gl,1,2,"ng-template",null,22,t.W1O),t.YNc(46,Wl,3,3,"ng-template",null,23,t.W1O),t._uU(48," \xa0\xa0\xa0\xa0 "),t.TgZ(49,"mat-slide-toggle",24),t.NdJ("ngModelChange",function(s){return o.filter.isActive=s})("change",function(s){return o.CustomerActiveChecked(s)}),t.qZA(),t._uU(50," \xa0\xa0\xa0\xa0 "),t.qZA(),t.TgZ(51,"div",25),t.YNc(52,zl,2,0,"button",26),t.YNc(53,Xl,6,1,"span",27),t.TgZ(54,"span"),t._uU(55," \xa0 "),t.TgZ(56,"button",28),t.NdJ("click",function(){return o.refresh()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(57,"div",29),t._UZ(58,"spinner-loader",30),t.qZA(),t.qZA(),t._UZ(59,"div",31),t.TgZ(60,"div",32),t.TgZ(61,"div",33),t.TgZ(62,"table",34),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(63,35),t.YNc(64,Kl,3,3,"th",36),t.YNc(65,tc,3,2,"td",37),t.BQk(),t.ynx(66,38),t.YNc(67,ec,3,3,"th",36),t.YNc(68,oc,2,1,"td",37),t.BQk(),t.ynx(69,39),t.YNc(70,ic,3,3,"th",36),t.YNc(71,nc,2,1,"td",37),t.BQk(),t.ynx(72,40),t.YNc(73,ac,3,3,"th",36),t.YNc(74,sc,2,1,"td",37),t.BQk(),t.ynx(75,41),t.YNc(76,rc,3,3,"th",36),t.YNc(77,lc,2,1,"td",37),t.BQk(),t.ynx(78,42),t.YNc(79,cc,3,3,"th",36),t.YNc(80,pc,2,1,"td",37),t.BQk(),t.ynx(81,43),t.YNc(82,uc,3,3,"th",36),t.YNc(83,dc,2,1,"td",37),t.BQk(),t.ynx(84,44),t.YNc(85,mc,3,3,"th",36),t.YNc(86,_c,2,1,"td",37),t.BQk(),t.ynx(87,45),t.YNc(88,gc,3,3,"th",46),t.YNc(89,hc,14,12,"td",37),t.BQk(),t.YNc(90,fc,1,0,"tr",47),t.YNc(91,Zc,1,0,"tr",48),t.qZA(),t.qZA(),t.qZA(),t.ynx(92),t.TgZ(93,"mat-paginator",49),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(94,Ac,42,36,"div",50)),2&e){const n=t.MAs(45);t.xp6(4),t.hij(" ",t.lcZ(5,25,"Customers")," "),t.xp6(6),t.hij(" ",t.lcZ(11,27,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(14,29,"Customers_List")),t.xp6(11),t.hij("",t.lcZ(25,31,"Add_New_Customer")," "),t.xp6(5),t.hij("",t.lcZ(30,33,"Add_New_Customer_Site")," "),t.xp6(6),t.Oqu(t.lcZ(36,35,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.filter.branchCode),t.xp6(3),t.MGl("placeholder","",t.lcZ(41,37,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(39,Tc)),t.xp6(3),t.Q6J("ngIf",!o.filter.isActive&&null!=(null==o.filter?null:o.filter.isActive))("ngIfElse",n),t.xp6(6),t.Q6J("ngModel",o.filter.isActive),t.xp6(3),t.Q6J("ngIf",0==o.reportData.length),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0),t.xp6(5),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.Q6J("dataSource",o.data),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0)}},directives:[Dt.w9,l.JJ,l.On,l.Fj,f.O5,Ot.Rr,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,Xt.I,_.ge,v.nU,_.ev,f.mk,rt.gM,_.XQ,_.Gk,f.sg],pipes:[Z.X$],styles:["#attndTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\n    border: solid;\n    border-width: 1px;\n    padding: 5px 5px 5px 5px;\n    text-align: center;\n  }\n\n  #attndTable[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n\n  #printcontainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n    width: 100%;\n    padding: 10px 10px 10px 10px;\n  }"]}),i})(),xc=(()=>{class i extends q{constructor(e,o,n,s,r,c){super(o),this.dialogRef=e,this.authService=o,this.fb=n,this.apiService=s,this.utilService=r,this.opservice=c,this.id=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}setForm(){this.form=this.fb.group({isExist:[!1],costHead:["CHXXXXXX",l.kI.required],costType:["",l.kI.required],costNameInEnglish:["",l.kI.required],costNameInArabic:["",l.kI.required],minServiceCosttoCompany:["",l.kI.required],minServicePrice:["",l.kI.required],grossMargin:["",l.kI.required],isActive:[!0,l.kI.required],isApplicableForMaterial:[!0],isApplicableForSkillset:[!0],isApplicableForVehicle:[!0],isApplicableForFinancialExpense:[!0],remarks:[""]},{validators:[qe.isCodeExist("costHead","isExist")]})}closeModel(){this.dialogRef.close()}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("OperationExpenseHead",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("OperationExpenseHead/getOperationExpenseHeadById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}reset(){this.form.reset()}verifyCode(e){let o=e.target.value.toUpperCase();""!=o&&this.opservice.verifyCode("OperationExpenseHead/isExistCode/"+o).subscribe(n=>{this.form.controls.isExist.setValue(n),this.form.controls.costHead.setValue(o)})}get f(){return this.form.controls}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.so),t.Y36(x._),t.Y36(l.qu),t.Y36(b.s),t.Y36(y.t),t.Y36(W.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-operationexpenseheads"]],features:[t.qOj],decls:126,vars:103,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","costHead","readonly","",1,"form-control",3,"placeholder"],["formControlName","costType",1,"form-control"],["value",""],[3,"control"],["type","text","formControlName","costNameInEnglish",1,"form-control",3,"placeholder"],["type","text","formControlName","costNameInArabic",1,"form-control",3,"placeholder"],["type","number","formControlName","minServiceCosttoCompany",1,"form-control",3,"placeholder"],["type","number","formControlName","minServicePrice",1,"form-control",3,"placeholder"],["type","number","formControlName","grossMargin",1,"form-control",3,"placeholder"],["color","primary","formControlName","isApplicableForMaterial"],["color","primary","formControlName","isApplicableForSkillset"],["color","primary","formControlName","isApplicableForVehicle"],["color","primary","formControlName","isApplicableForFinancialExpense"],["color","primary","formControlName","isActive"],["formControlName","remarks",1,"form-control",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," \xd7 "),t.qZA(),t.qZA(),t.TgZ(6,"form",3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",7),t.ALo(14,"translate"),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.TgZ(16,"div",5),t.TgZ(17,"div",6),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"select",8),t.TgZ(22,"option",9),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"option"),t._uU(27,"Fixed"),t.qZA(),t.TgZ(28,"option"),t._uU(29,"Operation"),t.qZA(),t.qZA(),t._UZ(30,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(31,"div",5),t.TgZ(32,"div",6),t.TgZ(33,"label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",11),t.ALo(37,"translate"),t.ALo(38,"translate"),t._UZ(39,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(40,"div",5),t.TgZ(41,"div",6),t.TgZ(42,"label"),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"input",12),t.ALo(46,"translate"),t.ALo(47,"translate"),t._UZ(48,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(49,"div",5),t.TgZ(50,"div",6),t.TgZ(51,"label"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t._UZ(54,"input",13),t.ALo(55,"translate"),t.ALo(56,"translate"),t._UZ(57,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(58,"div",5),t.TgZ(59,"div",6),t.TgZ(60,"label"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"input",14),t.ALo(64,"translate"),t.ALo(65,"translate"),t._UZ(66,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(67,"div",5),t.TgZ(68,"div",6),t.TgZ(69,"label"),t._uU(70),t.ALo(71,"translate"),t.qZA(),t._UZ(72,"input",15),t.ALo(73,"translate"),t.ALo(74,"translate"),t._UZ(75,"validation-message",10),t.qZA(),t.qZA(),t.TgZ(76,"div",5),t.TgZ(77,"div",6),t.TgZ(78,"label"),t._uU(79),t.ALo(80,"translate"),t.qZA(),t._UZ(81,"br"),t._UZ(82,"mat-slide-toggle",16),t.qZA(),t.qZA(),t.TgZ(83,"div",5),t.TgZ(84,"div",6),t.TgZ(85,"label"),t._uU(86),t.ALo(87,"translate"),t.qZA(),t._UZ(88,"br"),t._UZ(89,"mat-slide-toggle",17),t.qZA(),t.qZA(),t.TgZ(90,"div",5),t.TgZ(91,"div",6),t.TgZ(92,"label"),t._uU(93),t.ALo(94,"translate"),t.qZA(),t._UZ(95,"br"),t._UZ(96,"mat-slide-toggle",18),t.qZA(),t.qZA(),t.TgZ(97,"div",5),t.TgZ(98,"div",6),t.TgZ(99,"label"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t._UZ(102,"br"),t._UZ(103,"mat-slide-toggle",19),t.qZA(),t.qZA(),t.TgZ(104,"div",5),t.TgZ(105,"div",6),t.TgZ(106,"label"),t._uU(107),t.ALo(108,"translate"),t.qZA(),t._UZ(109,"br"),t._UZ(110,"mat-slide-toggle",20),t.qZA(),t.qZA(),t.TgZ(111,"div",5),t.TgZ(112,"div",6),t.TgZ(113,"label"),t._uU(114),t.ALo(115,"translate"),t.qZA(),t._UZ(116,"textarea",21),t.ALo(117,"translate"),t.ALo(118,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(119,"div",22),t.TgZ(120,"div",23),t.TgZ(121,"input",24),t.NdJ("click",function(){return o.closeModel()}),t.ALo(122,"translate"),t.qZA(),t._uU(123," \xa0 "),t._UZ(124,"input",25),t.ALo(125,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.hij("",t.lcZ(3,39,"Add_Operation_Expense_Heads")," "),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(12,41,"Cost_Head")),t.xp6(2),t.hYB("placeholder","",t.lcZ(14,43,"Please_Enter")," ",t.lcZ(15,45,"Cost_Head"),""),t.xp6(6),t.Oqu(t.lcZ(20,47,"Cost_Type")),t.xp6(4),t.AsE("",t.lcZ(24,49,"Select")," ",t.lcZ(25,51,"Cost_Type")," "),t.xp6(7),t.Q6J("control",o.form.controls.costType),t.xp6(4),t.Oqu(t.lcZ(35,53,"Cost_Name_In_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(37,55,"Please_Enter")," ",t.lcZ(38,57,"Cost_Name_In_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.costNameInEnglish),t.xp6(4),t.Oqu(t.lcZ(44,59,"Cost_Name_In_Arabic")),t.xp6(2),t.hYB("placeholder","",t.lcZ(46,61,"Please_Enter")," ",t.lcZ(47,63,"Cost_Name_In_Arabic"),""),t.xp6(3),t.Q6J("control",o.form.controls.costNameInArabic),t.xp6(4),t.Oqu(t.lcZ(53,65,"Min_Service_Cost_to_Company")),t.xp6(2),t.hYB("placeholder","",t.lcZ(55,67,"Please_Enter")," ",t.lcZ(56,69,"Min_Service_Cost_to_Company"),""),t.xp6(3),t.Q6J("control",o.form.controls.minServiceCosttoCompany),t.xp6(4),t.Oqu(t.lcZ(62,71,"Min_Service_Price")),t.xp6(2),t.hYB("placeholder","",t.lcZ(64,73,"Please_Enter")," ",t.lcZ(65,75,"Min_Service_Price"),""),t.xp6(3),t.Q6J("control",o.form.controls.minServicePrice),t.xp6(4),t.Oqu(t.lcZ(71,77,"Gross_Margin")),t.xp6(2),t.hYB("placeholder","",t.lcZ(73,79,"Please_Enter")," ",t.lcZ(74,81,"Gross_Margin"),""),t.xp6(3),t.Q6J("control",o.form.controls.grossMargin),t.xp6(4),t.Oqu(t.lcZ(80,83,"Is_Applicable_For_Material")),t.xp6(7),t.Oqu(t.lcZ(87,85,"Is_Applicable_For_Skillset")),t.xp6(7),t.Oqu(t.lcZ(94,87,"Is_Applicable_For_Vehicle")),t.xp6(7),t.Oqu(t.lcZ(101,89,"Is_Applicable_For_Financial_Expense")),t.xp6(7),t.Oqu(t.lcZ(108,91,"Is_Active")),t.xp6(7),t.Oqu(t.lcZ(115,93,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(117,95,"Please_Enter")," ",t.lcZ(118,97,"Remarks"),""),t.xp6(5),t.s9C("value",t.lcZ(122,99,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(125,101,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,G.s,l.wV,Ot.Rr],pipes:[Z.X$],encapsulation:2}),i})();function qc(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Cost_Head")," "))}function bc(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.costHead)}}function yc(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Cost_Name_In_English")," "))}function Sc(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.costNameInEnglish)}}function wc(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Cost_Name_In_Arabic")," "))}function Uc(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.costNameInArabic)}}function Lc(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Price")," "))}function Dc(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.minServicePrice)}}function Nc(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Cost")," "))}function Ec(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.minServiceCosttoCompany)}}function Oc(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function jc(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.isActive)}}function kc(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Mc(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",37),t.TgZ(1,"a",39),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",40),t.qZA(),t.qZA()}}function Rc(i,a){1&i&&t._UZ(0,"tr",41)}function Pc(i,a){1&i&&t._UZ(0,"tr",42)}const Fc=function(){return{standalone:!0}};let Ic=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.notifyService=p,this.validationService=u,this.pageService=d,this.dialog=m,this.displayedColumns=["costHead","costNameInEnglish","costNameInArabic","minServicePrice","minServiceCosttoCompany","isActive","Actions"],this.searchValue="",this.isLoading=!1,this.sortingOrder="id desc"}ngOnInit(){this.initialLoading()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}setForm(){this.form=this.fb.group({})}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("OperationExpenseHead/getOperationExpenseHeadsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,xc);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Operationexpensehead","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Operationexpensehead","Update")}refresh(){this.searchValue="",this.initialLoading()}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("OperationExpenseHead",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(w.g),t.Y36(N.R),t.Y36(V.N),t.Y36(T.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-operationexpenseheads"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:66,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addOperationExpenseHead","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","costHead"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","costNameInEnglish"],["matColumnDef","costNameInArabic"],["matColumnDef","minServicePrice"],["matColumnDef","minServiceCosttoCompany"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,qc,3,3,"th",24),t.YNc(43,bc,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,yc,3,3,"th",24),t.YNc(46,Sc,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,wc,3,3,"th",24),t.YNc(49,Uc,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,Lc,3,3,"th",24),t.YNc(52,Dc,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,Nc,3,3,"th",24),t.YNc(55,Ec,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,Oc,3,3,"th",24),t.YNc(58,jc,2,1,"td",25),t.BQk(),t.ynx(59,31),t.YNc(60,kc,3,3,"th",32),t.YNc(61,Mc,3,0,"td",25),t.BQk(),t.YNc(62,Rc,1,0,"tr",33),t.YNc(63,Pc,1,0,"tr",34),t.qZA(),t.ynx(64),t.TgZ(65,"mat-paginator",35),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Operation_Expense_Heads")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Operation_Expense_Heads")),t.xp6(10),t.hij("",t.lcZ(27,24,"Operation_Expense_Heads_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,Fc)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Operation_Expense_Heads")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})(),Yc=(()=>{class i extends q{constructor(e,o,n){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.currentDate=new Date,this.currentMonth="",this.currentYear=""}ngOnInit(){this.initialLoading()}initialLoading(){this.currentMonth=this.currentDate.toString().substr(4,3)+","+this.currentDate.toString().substr(11,4),this.currentYear=this.currentDate.toString().substr(11,4),this.apiService.getall("OperationsDashboard/getOpeartionsDashboard").subscribe(e=>{this.data=e})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(x._),t.Y36(y.t))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-opr-dash-board"]],features:[t.qOj],decls:99,vars:6,consts:[[1,"container-fluid"],[1,"card-group"],[1,"card","border-right"],[1,"card-body"],[1,"d-flex","d-lg-flex","d-md-block","align-items-center"],[1,"d-inline-flex","align-items-center"],[1,"text-dark","mb-1","font-weight-medium"],[1,"text-muted","font-weight-normal","mb-0","w-100","text-truncate"],[1,"ml-auto","mt-md-3","mt-lg-0"],[1,"opacity-7","text-muted"],[1,"fab","fa-wpforms",2,"font-size","25px"],[1,"text-dark","mb-1","w-100","text-truncate","font-weight-medium"],[1,"icon-calender",2,"font-size","25px"],[1,"icon-user",2,"font-size","25px"],[1,"card"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-globe"],["cx","12","cy","12","r","10"],["x1","2","y1","12","x2","22","y2","12"],["d","M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"],[1,"row"],[1,"col-lg-6"],[1,"card-title"],["id","pie-chart","height","150"],[1,"table-responsive"],[1,"table","no-wrap","v-middle","mb-0"],[1,"border-0"],[1,"border-0","font-14","font-weight-medium","text-muted"],[1,"border-0","font-14","font-weight-medium","text-muted","px-2"],[1,"border-0","font-14","font-weight-medium","text-muted","text-center"],[1,"border-top-0","px-2","py-4"],[1,"border-top-0","text-muted","px-2","py-4","font-14"],[1,"border-top-0","text-center","px-2","py-4","text-success","font-14"],["data-toggle","tooltip","data-placement","top","title","","data-original-title","Active",1,"fa","fa-circle","text-success","font-12"],[1,"border-top-0","text-center","px-2","py-4","text-danger","font-14"],["data-toggle","tooltip","data-placement","top","title","","data-original-title","Active",1,"fa","fa-circle","text-danger","font-12"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div"),t.TgZ(6,"div",5),t.TgZ(7,"h2",6),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"h6",7),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"div",8),t.TgZ(12,"span",9),t._UZ(13,"i",10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",2),t.TgZ(15,"div",3),t.TgZ(16,"div",4),t.TgZ(17,"div"),t.TgZ(18,"h2",11),t._uU(19),t.qZA(),t.TgZ(20,"h6",7),t._uU(21),t.qZA(),t.qZA(),t.TgZ(22,"div",8),t.TgZ(23,"span",9),t._UZ(24,"i",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",2),t.TgZ(26,"div",3),t.TgZ(27,"div",4),t.TgZ(28,"div"),t.TgZ(29,"div",5),t.TgZ(30,"h2",6),t._uU(31),t.qZA(),t.qZA(),t.TgZ(32,"h6",7),t._uU(33,"Customers"),t.qZA(),t.qZA(),t.TgZ(34,"div",8),t.TgZ(35,"span",9),t._UZ(36,"i",13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",14),t.TgZ(38,"div",3),t.TgZ(39,"div",4),t.TgZ(40,"div"),t.TgZ(41,"h2",6),t._uU(42),t.qZA(),t.TgZ(43,"h6",7),t._uU(44,"Sites"),t.qZA(),t.qZA(),t.TgZ(45,"div",8),t.TgZ(46,"span",9),t.O4$(),t.TgZ(47,"svg",15),t._UZ(48,"circle",16),t._UZ(49,"line",17),t._UZ(50,"path",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.kcU(),t.TgZ(51,"div",19),t.TgZ(52,"div",20),t.TgZ(53,"div",14),t.TgZ(54,"div",3),t.TgZ(55,"h4",21),t._uU(56,"Approved Status"),t.qZA(),t.TgZ(57,"div"),t._UZ(58,"canvas",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",20),t.TgZ(60,"div",14),t.TgZ(61,"div",3),t.TgZ(62,"h4",21),t._uU(63,"Current Active Sites"),t.qZA(),t.TgZ(64,"div",23),t.TgZ(65,"table",24),t.TgZ(66,"thead"),t.TgZ(67,"tr",25),t.TgZ(68,"th",26),t._uU(69," Site Name "),t.qZA(),t.TgZ(70,"th",27),t._uU(71," Project "),t.qZA(),t.TgZ(72,"th",28),t._uU(73," Status "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(74,"tbody"),t.TgZ(75,"tr"),t.TgZ(76,"td",29),t._uU(77," Site 1 "),t.qZA(),t.TgZ(78,"td",30),t._uU(79,"Project1"),t.qZA(),t.TgZ(80,"td",31),t._UZ(81,"i",32),t._uU(82," Active"),t.qZA(),t.qZA(),t.TgZ(83,"tr"),t.TgZ(84,"td",29),t._uU(85," Site 1 "),t.qZA(),t.TgZ(86,"td",30),t._uU(87,"Project2"),t.qZA(),t.TgZ(88,"td",33),t._UZ(89,"i",34),t._uU(90," Inactive"),t.qZA(),t.qZA(),t.TgZ(91,"tr"),t.TgZ(92,"td",29),t._uU(93," Site 1 "),t.qZA(),t.TgZ(94,"td",30),t._uU(95,"Project2"),t.qZA(),t.TgZ(96,"td",33),t._UZ(97,"i",34),t._uU(98," Inactive"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(8),t.Oqu(null==o.data?null:o.data.enquiriesCurentMonth),t.xp6(2),t.hij("Enquiries this month ",o.currentMonth,""),t.xp6(9),t.Oqu(null==o.data?null:o.data.enquiriesCurentYear),t.xp6(2),t.hij(" Enquiries this year ",o.currentYear," "),t.xp6(10),t.Oqu(null==o.data?null:o.data.noOfCustomers),t.xp6(11),t.Oqu(null==o.data?null:o.data.noOfSites))},encapsulation:2}),i})(),Jc=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.payrollGroupID=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0&&(this.payrollGroupID=this.id,this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({payrollGroupID:[0],payrollGroupName_EN:["",l.kI.required],payrollGroupName_AR:["",l.kI.required],companyID:[""],siteID:[""],projectId:[""],businessUnitID:[""],divisionID:[""],branchID:[""],countryID:[""],startPayRollDate:[""],currentPayRollMonth:[""],endPayRollDate:[""],currentPayRollYear:[""],remarks:[""],isForFutureEmployee:[!0],isForAllEmployee:[!0]})}submit(){this.form.valid?(this.id>0&&(this.form.value.payrollGroupID=this.payrollGroupID),this.apiService.post("PayRollGroup",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("PayRollGroup/getPayRollGroupById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({payrollGroupID:0}))})}reset(){this.form.controls.payrollGroupID.setValue(0),this.form.controls.payrollGroupName_EN.setValue(""),this.form.controls.payrollGroupName_AR.setValue(""),this.form.controls.companyID.setValue(""),this.form.controls.siteID.setValue(""),this.form.controls.projectId.setValue(""),this.form.controls.businessUnitID.setValue(""),this.form.controls.divisionID.setValue(""),this.form.controls.branchID.setValue(""),this.form.controls.countryID.setValue(""),this.form.controls.startPayRollDate.setValue(""),this.form.controls.currentPayRollMonth.setValue(""),this.form.controls.endPayRollDate.setValue(""),this.form.controls.currentPayRollYear.setValue(""),this.form.controls.remarks.setValue(""),this.form.controls.isForFutureEmployee.setValue(!0),this.form.controls.isForAllEmployee.setValue(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-payroll-group"]],features:[t.qOj],decls:163,vars:160,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","payrollGroupName_EN",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","payrollGroupName_AR",1,"form-control",3,"placeholder"],["type","number","formControlName","companyID",1,"form-control",3,"placeholder"],["type","number","formControlName","siteID",1,"form-control",3,"placeholder"],["type","number","formControlName","projectId",1,"form-control",3,"placeholder"],["type","number","formControlName","businessUnitID",1,"form-control",3,"placeholder"],["type","number","formControlName","divisionID",1,"form-control",3,"placeholder"],["type","number","formControlName","branchID",1,"form-control",3,"placeholder"],["type","number","formControlName","countryID",1,"form-control",3,"placeholder"],["formControlName","startPayRollDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["type","number","min","1","max","12","formControlName","currentPayRollMonth",1,"form-control",3,"placeholder"],["formControlName","endPayRollDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker"],["picker2",""],["type","number","formControlName","currentPayRollYear",1,"form-control",3,"placeholder"],["type","text","formControlName","remarks",1,"form-control",3,"placeholder"],["color","primary","formControlName","isForAllEmployee"],["color","primary","formControlName","isForFutureEmployee"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," \xd7"),t.qZA(),t.qZA(),t.TgZ(6,"form",3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",7),t.ALo(14,"translate"),t.ALo(15,"translate"),t._UZ(16,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(17,"div",5),t.TgZ(18,"div",6),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",9),t.ALo(23,"translate"),t.ALo(24,"translate"),t._UZ(25,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(26,"div",5),t.TgZ(27,"div",6),t.TgZ(28,"label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",10),t.ALo(32,"translate"),t.ALo(33,"translate"),t._UZ(34,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(35,"div",5),t.TgZ(36,"div",6),t.TgZ(37,"label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"input",11),t.ALo(41,"translate"),t.ALo(42,"translate"),t._UZ(43,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(44,"div",5),t.TgZ(45,"div",6),t.TgZ(46,"label"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._UZ(49,"input",12),t.ALo(50,"translate"),t.ALo(51,"translate"),t._UZ(52,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(53,"div",5),t.TgZ(54,"div",6),t.TgZ(55,"label"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t._UZ(58,"input",13),t.ALo(59,"translate"),t.ALo(60,"translate"),t._UZ(61,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(62,"div",5),t.TgZ(63,"div",6),t.TgZ(64,"label"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t._UZ(67,"input",14),t.ALo(68,"translate"),t.ALo(69,"translate"),t._UZ(70,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(71,"div",5),t.TgZ(72,"div",6),t.TgZ(73,"label"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t._UZ(76,"input",15),t.ALo(77,"translate"),t.ALo(78,"translate"),t._UZ(79,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(80,"div",5),t.TgZ(81,"div",6),t.TgZ(82,"label"),t._uU(83),t.ALo(84,"translate"),t.qZA(),t._UZ(85,"input",16),t.ALo(86,"translate"),t.ALo(87,"translate"),t._UZ(88,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(89,"div",5),t.TgZ(90,"div",6),t.TgZ(91,"label"),t._uU(92),t.ALo(93,"translate"),t.qZA(),t._UZ(94,"input",17),t.ALo(95,"translate"),t.ALo(96,"translate"),t._UZ(97,"validation-message",8),t.TgZ(98,"div",18),t._UZ(99,"mat-datepicker-toggle",19),t._UZ(100,"mat-datepicker",null,20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(102,"div",5),t.TgZ(103,"div",6),t.TgZ(104,"label"),t._uU(105),t.ALo(106,"translate"),t.qZA(),t._UZ(107,"input",21),t.ALo(108,"translate"),t.ALo(109,"translate"),t._UZ(110,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(111,"div",5),t.TgZ(112,"div",6),t.TgZ(113,"label"),t._uU(114),t.ALo(115,"translate"),t.qZA(),t._UZ(116,"input",22),t.ALo(117,"translate"),t.ALo(118,"translate"),t._UZ(119,"validation-message",8),t.TgZ(120,"div",18),t._UZ(121,"mat-datepicker-toggle",19),t._UZ(122,"mat-datepicker",null,23),t.qZA(),t.qZA(),t.qZA(),t.TgZ(124,"div",5),t.TgZ(125,"div",6),t.TgZ(126,"label"),t._uU(127),t.ALo(128,"translate"),t.qZA(),t._UZ(129,"input",24),t.ALo(130,"translate"),t.ALo(131,"translate"),t._UZ(132,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(133,"div",5),t.TgZ(134,"div",6),t.TgZ(135,"label"),t._uU(136),t.ALo(137,"translate"),t.qZA(),t._UZ(138,"input",25),t.ALo(139,"translate"),t.ALo(140,"translate"),t._UZ(141,"validation-message",8),t.qZA(),t.qZA(),t.TgZ(142,"div",5),t.TgZ(143,"div",6),t.TgZ(144,"label"),t._uU(145),t.ALo(146,"translate"),t.qZA(),t._UZ(147,"br"),t._UZ(148,"mat-slide-toggle",26),t.qZA(),t.qZA(),t.TgZ(149,"div",5),t.TgZ(150,"div",6),t.TgZ(151,"label"),t._uU(152),t.ALo(153,"translate"),t.qZA(),t._UZ(154,"br"),t._UZ(155,"mat-slide-toggle",27),t.qZA(),t.qZA(),t.qZA(),t.TgZ(156,"div",28),t.TgZ(157,"div",29),t.TgZ(158,"input",30),t.NdJ("click",function(){return o.closeModel()}),t.ALo(159,"translate"),t.qZA(),t._uU(160," \xa0 "),t._UZ(161,"input",31),t.ALo(162,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(101),s=t.MAs(123);t.xp6(2),t.Oqu(t.lcZ(3,66,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(12,68,"payrollGroupName_EN")),t.xp6(2),t.hYB("placeholder","",t.lcZ(14,70,"Please_Enter")," ",t.lcZ(15,72,"payrollGroupName_EN"),""),t.xp6(3),t.Q6J("control",o.form.controls.payrollGroupName_EN),t.xp6(4),t.Oqu(t.lcZ(21,74,"payrollGroupName_AR")),t.xp6(2),t.hYB("placeholder","",t.lcZ(23,76,"Please_Enter")," ",t.lcZ(24,78,"payrollGroupName_AR"),""),t.xp6(3),t.Q6J("control",o.form.controls.payrollGroupName_AR),t.xp6(4),t.Oqu(t.lcZ(30,80,"Company_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(32,82,"Please_Enter")," ",t.lcZ(33,84,"companyID"),""),t.xp6(3),t.Q6J("control",o.form.controls.companyID),t.xp6(4),t.Oqu(t.lcZ(39,86,"Site_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(41,88,"Please_Enter")," ",t.lcZ(42,90,"siteID"),""),t.xp6(3),t.Q6J("control",o.form.controls.siteID),t.xp6(4),t.Oqu(t.lcZ(48,92,"Project_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(50,94,"Please_Enter")," ",t.lcZ(51,96,"projectId"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectId),t.xp6(4),t.Oqu(t.lcZ(57,98,"businessUnitID")),t.xp6(2),t.hYB("placeholder","",t.lcZ(59,100,"Please_Enter")," ",t.lcZ(60,102,"businessUnitID"),""),t.xp6(3),t.Q6J("control",o.form.controls.businessUnitID),t.xp6(4),t.Oqu(t.lcZ(66,104,"divisionID")),t.xp6(2),t.hYB("placeholder","",t.lcZ(68,106,"Please_Enter")," ",t.lcZ(69,108,"divisionID"),""),t.xp6(3),t.Q6J("control",o.form.controls.divisionID),t.xp6(4),t.Oqu(t.lcZ(75,110,"branchID")),t.xp6(2),t.hYB("placeholder","",t.lcZ(77,112,"Please_Enter")," ",t.lcZ(78,114,"branchID"),""),t.xp6(3),t.Q6J("control",o.form.controls.branchID),t.xp6(4),t.Oqu(t.lcZ(84,116,"Country_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(86,118,"Please_Enter")," ",t.lcZ(87,120,"countryID"),""),t.xp6(3),t.Q6J("control",o.form.controls.countryID),t.xp6(4),t.Oqu(t.lcZ(93,122,"startPayRollDate")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(95,124,"Please_Enter")," ",t.lcZ(96,126,"startPayRollDate"),""),t.Q6J("matDatepicker",n),t.xp6(3),t.Q6J("control",o.form.controls.startPayRollDate),t.xp6(2),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(106,128,"currentPayRollMonth")),t.xp6(2),t.hYB("placeholder","",t.lcZ(108,130,"Please_Enter")," ",t.lcZ(109,132,"currentPayRollMonth"),""),t.xp6(3),t.Q6J("control",o.form.controls.currentPayRollMonth),t.xp6(4),t.Oqu(t.lcZ(115,134,"endPayRollDate")),t.xp6(2),t.hYB("placeholder"," ",t.lcZ(117,136,"Please_Enter")," ",t.lcZ(118,138,"endPayRollDate"),""),t.Q6J("matDatepicker",s),t.xp6(3),t.Q6J("control",o.form.controls.endPayRollDate),t.xp6(2),t.Q6J("for",s),t.xp6(6),t.Oqu(t.lcZ(128,140,"currentPayRollYear")),t.xp6(2),t.hYB("placeholder","",t.lcZ(130,142,"Please_Enter")," ",t.lcZ(131,144,"currentPayRollYear"),""),t.xp6(3),t.Q6J("control",o.form.controls.currentPayRollYear),t.xp6(4),t.Oqu(t.lcZ(137,146,"remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(139,148,"Please_Enter")," ",t.lcZ(140,150,"Remarks"),""),t.xp6(3),t.Q6J("control",o.form.controls.remarks),t.xp6(4),t.Oqu(t.lcZ(146,152,"isForAllEmployee")),t.xp6(7),t.Oqu(t.lcZ(153,154,"isForFutureEmployee")),t.xp6(6),t.s9C("value",t.lcZ(159,156,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(162,158,"Save"))}},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,l.wV,M.hl,M.nW,gt.R9,M.Mq,l.qQ,l.Fd,Ot.Rr],pipes:[Z.X$],encapsulation:2}),i})();function Qc(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"payrollGroupID")," "))}function Bc(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.payrollGroupID)}}function Hc(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"payrollGroupName_EN")," "))}function Vc(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.payrollGroupName_EN)}}function $c(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"payrollGroupName_AR")," "))}function Gc(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.payrollGroupName_AR)}}function Wc(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Company_ID")," "))}function zc(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.companyID)}}function Xc(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function Kc(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteID)}}function tp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function ep(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectId)}}function op(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"businessUnitID")," "))}function ip(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.businessUnitID)}}function np(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"divisionID")," "))}function ap(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.divisionID)}}function sp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"branchID")," "))}function rp(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchID)}}function lp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Country_Code")," "))}function cp(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.countryID)}}function pp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"startPayRollDate")," "))}function up(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.startPayRollDate)}}function dp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"isForFutureEmployee")," "))}function mp(i,a){1&i&&(t.TgZ(0,"span",50),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function _p(i,a){1&i&&(t.TgZ(0,"span",51),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function gp(i,a){if(1&i&&(t.TgZ(0,"td",47),t.YNc(1,mp,3,3,"span",48),t.YNc(2,_p,3,3,"ng-template",null,49,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isForFutureEmployee)("ngIfElse",o)}}function hp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"isForAllEmployee")," "))}function fp(i,a){1&i&&(t.TgZ(0,"span",50),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Zp(i,a){1&i&&(t.TgZ(0,"span",51),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Cp(i,a){if(1&i&&(t.TgZ(0,"td",47),t.YNc(1,fp,3,3,"span",48),t.YNc(2,Zp,3,3,"ng-template",null,49,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isForAllEmployee)("ngIfElse",o)}}function Ap(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"currentPayRollMonth")," "))}function Tp(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.currentPayRollMonth)}}function vp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"endPayRollDate")," "))}function xp(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.endPayRollDate)}}function qp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"currentPayRollYear")," "))}function bp(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.currentPayRollYear)}}function yp(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Remarks")," "))}function Sp(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.remarks)}}function wp(i,a){1&i&&(t.TgZ(0,"th",52),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Up(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",47),t.TgZ(1,"div",53),t.TgZ(2,"a",54),t._UZ(3,"i",55),t.qZA(),t.TgZ(4,"div",56),t.TgZ(5,"a",57),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.payrollGroupID)}),t._UZ(6,"i",58),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"a",57),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().delete(s.payrollGroupID)}),t._UZ(10,"i",59),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.Oqu(t.lcZ(8,2,"Edit_Project")),t.xp6(4),t.Oqu(t.lcZ(12,4,"Delete_Project")))}function Lp(i,a){1&i&&t._UZ(0,"tr",60)}function Dp(i,a){1&i&&t._UZ(0,"tr",61)}let Np=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.displayedColumns=["payrollGroupID","payrollGroupName_EN","payrollGroupName_AR","companyID","siteID","projectId","businessUnitID","divisionID","branchID","countryID","startPayRollDate","isForFutureEmployee","isForAllEmployee","currentPayRollMonth","endPayRollDate","currentPayRollYear","remarks","Actions"],this.searchValue="",this.sortingOrder="payrollGroupID desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PayRollGroup/getPayRollGroupsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,setTimeout(()=>this.data.sort=this.sort,2e3),this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,Jc);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_PayrollGroup","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_PayrollGroup","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PayRollGroup",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-payroll-group"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:96,vars:25,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-6","col-lg-6"],[1,"card-title","pt6"],[1,"col-md-6","col-lg-6","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","payrollGroupID"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","payrollGroupName_EN"],["matColumnDef","payrollGroupName_AR"],["matColumnDef","companyID"],["matColumnDef","siteID"],["matColumnDef","projectId"],["matColumnDef","businessUnitID"],["matColumnDef","divisionID"],["matColumnDef","branchID"],["matColumnDef","countryID"],["matColumnDef","startPayRollDate"],["matColumnDef","isForFutureEmployee"],["matColumnDef","isForAllEmployee"],["matColumnDef","currentPayRollMonth"],["matColumnDef","endPayRollDate"],["matColumnDef","currentPayRollYear"],["matColumnDef","remarks"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],[1,"icon-trash"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"h4",14),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",15),t.TgZ(29,"a",16),t.NdJ("click",function(){return o.create()}),t._UZ(30,"i",17),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(33,"div",18),t.TgZ(34,"div",19),t.TgZ(35,"div",20),t.ynx(36),t.TgZ(37,"table",21),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(38,22),t.YNc(39,Qc,3,3,"th",23),t.YNc(40,Bc,2,1,"td",24),t.BQk(),t.ynx(41,25),t.YNc(42,Hc,3,3,"th",23),t.YNc(43,Vc,2,1,"td",24),t.BQk(),t.ynx(44,26),t.YNc(45,$c,3,3,"th",23),t.YNc(46,Gc,2,1,"td",24),t.BQk(),t.ynx(47,27),t.YNc(48,Wc,3,3,"th",23),t.YNc(49,zc,2,1,"td",24),t.BQk(),t.ynx(50,28),t.YNc(51,Xc,3,3,"th",23),t.YNc(52,Kc,2,1,"td",24),t.BQk(),t.ynx(53,29),t.YNc(54,tp,3,3,"th",23),t.YNc(55,ep,2,1,"td",24),t.BQk(),t.ynx(56,30),t.YNc(57,op,3,3,"th",23),t.YNc(58,ip,2,1,"td",24),t.BQk(),t.ynx(59,31),t.YNc(60,np,3,3,"th",23),t.YNc(61,ap,2,1,"td",24),t.BQk(),t.ynx(62,32),t.YNc(63,sp,3,3,"th",23),t.YNc(64,rp,2,1,"td",24),t.BQk(),t.ynx(65,33),t.YNc(66,lp,3,3,"th",23),t.YNc(67,cp,2,1,"td",24),t.BQk(),t.ynx(68,34),t.YNc(69,pp,3,3,"th",23),t.YNc(70,up,2,1,"td",24),t.BQk(),t.ynx(71,35),t.YNc(72,dp,3,3,"th",23),t.YNc(73,gp,4,2,"td",24),t.BQk(),t.ynx(74,36),t.YNc(75,hp,3,3,"th",23),t.YNc(76,Cp,4,2,"td",24),t.BQk(),t.ynx(77,37),t.YNc(78,Ap,3,3,"th",23),t.YNc(79,Tp,2,1,"td",24),t.BQk(),t.ynx(80,38),t.YNc(81,vp,3,3,"th",23),t.YNc(82,xp,2,1,"td",24),t.BQk(),t.ynx(83,39),t.YNc(84,qp,3,3,"th",23),t.YNc(85,bp,2,1,"td",24),t.BQk(),t.ynx(86,40),t.YNc(87,yp,3,3,"th",23),t.YNc(88,Sp,2,1,"td",24),t.BQk(),t.ynx(89,41),t.YNc(90,wp,3,3,"th",42),t.YNc(91,Up,13,6,"td",24),t.BQk(),t.YNc(92,Lp,1,0,"tr",43),t.YNc(93,Dp,1,0,"tr",44),t.qZA(),t.ynx(94),t.TgZ(95,"mat-paginator",45),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,13,"PayrollGroups")," "),t.xp6(6),t.hij(" ",t.lcZ(11,15,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,17,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,19,"PayrollGroups")),t.xp6(10),t.hij("",t.lcZ(27,21,"PayrollGroups_List")," "),t.xp6(5),t.hij("",t.lcZ(32,23,"Add_New_PayrollGroup")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(55),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function Ep(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",12),t._uU(2),t.qZA(),t.TgZ(3,"td",12),t._uU(4),t.qZA(),t.TgZ(5,"td",12),t._uU(6),t.qZA(),t.TgZ(7,"td",12),t._uU(8),t.qZA(),t.TgZ(9,"td",12),t._uU(10),t.qZA(),t.TgZ(11,"td",12),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td",12),t._uU(15),t.qZA(),t.TgZ(16,"td",12),t._uU(17),t.qZA(),t.TgZ(18,"td",12),t._uU(19),t.ALo(20,"number"),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(e.enquiryID),t.xp6(2),t.Oqu(e.siteCode),t.xp6(2),t.Oqu(e.serviceCode),t.xp6(2),t.Oqu(e.unitCode),t.xp6(2),t.Oqu(t.xi3(13,9,e.pricePerUnit,"3.2-5")),t.xp6(3),t.Oqu(e.unitQuantity),t.xp6(2),t.Oqu(e.serviceQuantity),t.xp6(2),t.Oqu(t.xi3(20,12,e.estimatedPrice,"3.2-5"))}}let ze=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.route=h,this.oprService=C,this.dialogRef=A,this.displayedColumns=["enquiryID","siteCode","serviceCode","unitCode","pricePerUnit","serviceQuantity","estimatedPrice"],this.searchValue="",this.sortingOrder="enquiryID desc",this.isLoading=!1,this.enquiries=[]}ngOnInit(){this.LoadEnquiries(),this.LoadFormHeaderData()}refresh(){this.searchValue=""}LoadFormHeaderData(){this.isLoading=!0,this.apiService.getall("ServiceEnquiryForm/getEnquiryFormByEnquiryNumber/"+this.enquiryNumber).subscribe(e=>{this.customerCode=e.customerCode,this.dateOfEnquiry=e.dateOfEnquiry,this.estimateClosingDate=e.estimateClosingDate,this.custAddress=e.custAddress,this.saleRep=e.saleRep,this.userName=e.userName,this.remarks=e.remarks,this.totalEstPrice=e.totalEstPrice,""!=this.customerCode&&(this.isLoading=!0,this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+e.customerCode).subscribe(o=>{null!=o?(this.custAddress=o.custAddress1,this.saleRep=o.custSalesRep,this.isLoading=!1):(this.custAddress="",this.saleRep="",this.isLoading=!1)})),this.isLoading=!1},e=>this.utilService.ShowApiErrorMessage(e))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Enquiry","Add",It)}edit(e){this.openDialogManage(e,g.O.update,"Updating_Enquiry","Update",It)}addSuveyorToEnquiry(e){this.openDialogManage(e,g.O.create,"Adding_Surveyor_To_Enquiry","Save",xe)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ServiceEnquiries",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}cahngeEnquiryStatus(e,o){this.apiService.post("ServiceEnquiries/changeEnquiryStatus?enquiryID="+e+"&statusEnquiry="+o,null).subscribe(n=>{this.utilService.OkMessage(),this.ngOnInit()},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}printComponent(e){const o=document.getElementById(e),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}goBack(){window.history.back()}closeModel(){this.dialogRef.close()}printEnquiryForm(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}LoadEnquiries(){this.isLoading=!0,this.apiService.getall(`ServiceEnquiries/getSevriceEnquiriesByEnquiryNumber/${this.enquiryNumber}`).subscribe(e=>{this.enquiries=e},e=>this.utilService.ShowApiErrorMessage(e)),this.isLoading=!1}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(L.gz),t.Y36(W.f),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-print-enquiries-by-enquiry-number"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:96,vars:70,consts:[[2,"position","fixed"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","1050px","padding-top","5px"],[2,"font-size","1.2rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],[2,"padding-bottom","5px","padding-top","5px"],["width","5%",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[4,"ngFor","ngForOf"],[2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.printEnquiryForm()}),t._uU(2,"Print"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," Close"),t.qZA(),t.qZA(),t._UZ(6,"br"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.TgZ(10,"h4",4),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"table",5),t.TgZ(14,"tr"),t.TgZ(15,"th",6),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"td",7),t._uU(19),t.qZA(),t.TgZ(20,"th",6),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"td",7),t._uU(24),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"th",6),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"td",7),t._uU(30),t.qZA(),t.TgZ(31,"th",6),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"td",7),t._uU(35),t.qZA(),t.qZA(),t.TgZ(36,"tr"),t.TgZ(37,"th",6),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"td",7),t._uU(41),t.qZA(),t.TgZ(42,"th",6),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"td",7),t._uU(46),t.qZA(),t.qZA(),t.TgZ(47,"tr"),t.TgZ(48,"th",6),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"td",7),t._uU(52),t.qZA(),t.TgZ(53,"th",6),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"td",7),t._uU(57),t.qZA(),t.qZA(),t.TgZ(58,"tr"),t.TgZ(59,"th",6),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"td",7),t._uU(63),t.ALo(64,"number"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"div",8),t.TgZ(66,"table",5),t.TgZ(67,"tr"),t.TgZ(68,"th",9),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"th",10),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"th",10),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"th",10),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"th",10),t._uU(81),t.ALo(82,"translate"),t.qZA(),t.TgZ(83,"th",10),t._uU(84),t.ALo(85,"translate"),t.qZA(),t.TgZ(86,"th",10),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.TgZ(89,"th",10),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"th",10),t._uU(93),t.ALo(94,"translate"),t.qZA(),t.qZA(),t.YNc(95,Ep,21,15,"tr",11),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(11),t.hij(" ",t.lcZ(12,29,"Survices_Enquiry_Form")," "),t.xp6(5),t.Oqu(t.lcZ(17,31,"Enquiry_Number")),t.xp6(3),t.hij(" ",o.enquiryNumber,""),t.xp6(2),t.Oqu(t.lcZ(22,33,"Customer_Code")),t.xp6(3),t.Oqu(o.customerCode),t.xp6(3),t.Oqu(t.lcZ(28,35,"Date_of_Enquiry")),t.xp6(3),t.Oqu(o.dateOfEnquiry),t.xp6(2),t.Oqu(t.lcZ(33,37,"Estimate_Closing_Date")),t.xp6(3),t.Oqu(o.estimateClosingDate),t.xp6(3),t.Oqu(t.lcZ(39,39,"Customer_Address")),t.xp6(3),t.Oqu(o.custAddress),t.xp6(2),t.Oqu(t.lcZ(44,41,"Sales_Representative")),t.xp6(3),t.Oqu(o.saleRep),t.xp6(3),t.Oqu(t.lcZ(50,43,"User_Name")),t.xp6(3),t.Oqu(o.userName),t.xp6(2),t.Oqu(t.lcZ(55,45,"Remarks")),t.xp6(3),t.Oqu(o.remarks),t.xp6(3),t.Oqu(t.lcZ(61,47,"Total_Price")),t.xp6(3),t.Oqu(t.xi3(64,49,o.totalEstPrice,"3.2-5")),t.xp6(6),t.hij(" ",t.lcZ(70,52,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(73,54,"Enquiry_ID")," "),t.xp6(3),t.hij(" ",t.lcZ(76,56,"Site_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(79,58,"Service_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(82,60,"Unit_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(85,62,"Price_Per_Unit")," "),t.xp6(3),t.hij(" ",t.lcZ(88,64,"Unit_Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(91,66,"Service_Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(94,68,"Estimated_Price")," "),t.xp6(2),t.Q6J("ngForOf",o.enquiries))},directives:[f.sg],pipes:[Z.X$,f.JJ],encapsulation:2}),i})();function Op(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",17),t._uU(2),t.qZA(),t.TgZ(3,"td",17),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.TgZ(7,"td",17),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.hij("",e.elementEngName," "),t.xp6(2),t.Oqu(e.elementArbName),t.xp6(2),t.Oqu(e.entryValue)}}let Oe=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.route=h,this.dialogRef=C,this.isLoading=!1,this.surveyFormElements=[],this.elementOptions=[],this.surveyFormDataEntries=[],this.showElements=!0}ngOnInit(){this.enquiryID=this.inputData.enquiryID,this.enquiryNumber=this.inputData.enquiryNumber,this.loadData()}loadData(){this.isLoading=!0,this.apiService.get("SurveyFormData/getSurveyFormDataByEnquiryId",this.enquiryID).subscribe(e=>{this.customer=e.customer,this.enquiryHeader=e.enquiryHeader,this.site=e.site,this.surveyFormHeader=e.surveyFormHeader,this.surveyFormElements=e.surveyFormElements,this.surveyor=e.surveyor,this.service=e.service,this.enquiry=e.enquiry,this.surveyFormDataEntries=e.surveyFormDataEntries,this.surveyor=e.surveyor,this.service=e.service},e=>this.utilService.ShowApiErrorMessage(e)),this.isLoading=!1}printComponent(e){const o=document.getElementById(e),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}goBack(){window.history.back()}printSurveyForm(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}printInvoice(){this.openPrint()}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(L.gz),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-print-survey-form"]],features:[t.qOj],decls:93,vars:60,consts:[[2,"position","fixed"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],[2,"font-size","1rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"font-size","1.2rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["rowspan","2",2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","400"],[2,"padding-bottom","5px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],["width","5%",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","75%",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","20%",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[4,"ngFor","ngForOf"],[2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.printSurveyForm()}),t._uU(2,"Print"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," Close"),t.qZA(),t.qZA(),t._UZ(6,"br"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.TgZ(10,"h4",4),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"h4",5),t._uU(14),t.qZA(),t.TgZ(15,"table",6),t.TgZ(16,"tr"),t.TgZ(17,"th",7),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"td",8),t._uU(21),t.qZA(),t.TgZ(22,"th",7),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"td",8),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"tr"),t.TgZ(28,"th",7),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"td",8),t._uU(32),t.qZA(),t.TgZ(33,"th",7),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"td",8),t._uU(37),t.qZA(),t.qZA(),t.TgZ(38,"tr"),t.TgZ(39,"th",9),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"td",8),t._uU(43),t.qZA(),t.TgZ(44,"th",7),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"td",8),t._uU(48),t.qZA(),t.qZA(),t.TgZ(49,"tr"),t.TgZ(50,"td",8),t._uU(51),t.qZA(),t.TgZ(52,"th",7),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"td",8),t._uU(56),t.qZA(),t.qZA(),t.TgZ(57,"tr"),t.TgZ(58,"th",9),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"td",8),t._uU(62),t.qZA(),t.TgZ(63,"th",7),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"td",8),t._uU(67),t.qZA(),t.qZA(),t.TgZ(68,"tr"),t.TgZ(69,"td",8),t._uU(70),t.qZA(),t.TgZ(71,"th",7),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"td",8),t._uU(75),t.qZA(),t.qZA(),t.TgZ(76,"tr"),t.TgZ(77,"th",7),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"td",10),t._uU(81),t.qZA(),t.qZA(),t.qZA(),t.TgZ(82,"div",11),t.TgZ(83,"table",12),t.TgZ(84,"tr"),t.TgZ(85,"th",13),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.TgZ(88,"th",14),t._uU(89),t.ALo(90,"translate"),t.qZA(),t._UZ(91,"th",15),t.qZA(),t.YNc(92,Op,9,4,"tr",16),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(11),t.hij(" ",t.lcZ(12,32,"Survey_Form"),": "),t.xp6(3),t.AsE(" ",null==o.surveyFormHeader?null:o.surveyFormHeader.surveyFormNameArb,"(",null==o.surveyFormHeader?null:o.surveyFormHeader.surveyFormNameEng,") "),t.xp6(4),t.Oqu(t.lcZ(19,34,"Enquiry_ID")),t.xp6(3),t.Oqu(o.inputData.enquiryID),t.xp6(2),t.Oqu(t.lcZ(24,36,"Enquiry_Number")),t.xp6(3),t.Oqu(o.inputData.enquiryNumber),t.xp6(3),t.Oqu(t.lcZ(30,38,"Service_Code")),t.xp6(3),t.Oqu(null==o.service?null:o.service.serviceCode),t.xp6(2),t.Oqu(t.lcZ(35,40,"Customer")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custCode),t.xp6(3),t.Oqu(t.lcZ(41,42,"Service_Name")),t.xp6(3),t.Oqu(null==o.service?null:o.service.serviceNameEng),t.xp6(2),t.Oqu(t.lcZ(46,44,"Name")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custName),t.xp6(3),t.Oqu(null==o.service?null:o.service.serviceNameArb),t.xp6(2),t.Oqu(t.lcZ(54,46,"Mobile")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custMobile1),t.xp6(3),t.Oqu(t.lcZ(60,48,"Site_Name")),t.xp6(3),t.Oqu(null==o.site?null:o.site.siteName),t.xp6(2),t.Oqu(t.lcZ(65,50,"Address")),t.xp6(3),t.Oqu(null==o.site?null:o.site.siteAddress),t.xp6(3),t.Oqu(null==o.site?null:o.site.siteArbName),t.xp6(2),t.Oqu(t.lcZ(73,52,"City")),t.xp6(3),t.Oqu(null==o.customer?null:o.customer.custCityCode1),t.xp6(3),t.Oqu(t.lcZ(79,54,"Geo_Location")),t.xp6(3),t.lnq("",null==o.site?null:o.site.siteGeoLatitude,"/",null==o.site?null:o.site.siteGeoLongitude,"/",null==o.site?null:o.site.siteGeoGain,""),t.xp6(5),t.hij(" ",t.lcZ(87,56,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(90,58,"Form_Attribute")," "),t.xp6(3),t.Q6J("ngForOf",o.surveyFormDataEntries))},directives:[f.sg],pipes:[Z.X$],encapsulation:2}),i})();function jp(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Request_Number"),":",e.id," ")}}function kp(i,a){if(1&i&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function Mp(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.customerCode)}}function Rp(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Pp(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function Fp(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.projectCode)}}function Ip(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Yp(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function Jp(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function Qp(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Bp(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.Oqu(o.isArabic?null==e?null:e.textTwo:null==e?null:e.text)}}function Hp(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",36),t.TgZ(14,"span",37),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).edit(s)}),t._UZ(15,"i",47),t._uU(16,"\xa0"),t.qZA(),t.TgZ(17,"span",37),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).delete(s)}),t._UZ(18,"i",48),t._uU(19,"\xa0"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(o.getSkillSet(null==e?null:e.skillsetCode).text),t.xp6(2),t.Oqu(null==e?null:e.qty),t.xp6(2),t.Oqu(o.ToDateString(null==e?null:e.fromDate)),t.xp6(2),t.Oqu(o.ToDateString(null==e?null:e.toDate)),t.xp6(2),t.Oqu(null==e?null:e.pricePerUnit),t.xp6(2),t.Oqu((null==e?null:e.pricePerUnit)*(null==e?null:e.qty)),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(3),t.Q6J("matTooltip",o.translateToolTip("Delete"))}}function Vp(i,a){if(1&i&&(t.TgZ(0,"div",25),t.TgZ(1,"div",26),t.TgZ(2,"div",27),t.TgZ(3,"table",28),t.TgZ(4,"tr"),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.YNc(26,Hp,20,8,"tr",46),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(6),t.hij(" ",t.lcZ(7,8,"Skillset")," "),t.xp6(3),t.hij(" ",t.lcZ(10,10,"Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(13,12,"From_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(16,14,"To_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(19,16,"Price_Per_Unit")," "),t.xp6(3),t.hij(" ",t.lcZ(22,18,"Total_Price")," "),t.xp6(3),t.hij(" ",t.lcZ(25,20,"Action")," "),t.xp6(2),t.Q6J("ngForOf",e.resourceList)}}function $p(i,a){1&i&&(t.TgZ(0,"span"),t._UZ(1,"input",49),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.s9C("value",t.lcZ(2,1,"Save")))}const oe=function(){return{standalone:!0}};let Ht=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u){super(r),this.notifyService=e,this.datepipe=o,this.translate=n,this.fb=s,this.authService=r,this.utilService=c,this.apiService=p,this.dialogRef=u,this.resourceList=[],this.editResource={id:"",skillsetCode:"",qty:"",pricePerUnit:"",toDate:"",fromDate:""},this.emptyResource={id:"",skillsetCode:"",qty:"",pricePerUnit:"",toDate:"",fromDate:""},this.readonly="",this.siteCodeList=[],this.skillSetsList=[],this.customerCode="",this.isDataLoading=!1,this.custCodeControl=new l.NI("",l.kI.required),this.isArabic=!1,this.isUpdating=!1,this.projectsList=[],this.isFromProjectsAction=!1,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,tt.O)(this.customerCode),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(d=>(""!==d.trim()&&(this.isDataLoading=!0),this.filterCustCodes(d||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.loadSkillSetsList(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],projectCode:["",l.kI.required],siteCode:["",l.kI.required],id:[this.id],resourceList:[this.resourceList]}),this.isFromProjectsAction&&(this.custCodeControl.setValue(this.projectData.customerCode),this.form.controls.siteCode.setValue(this.projectData.siteCode),this.form.controls.projectCode.setValue(this.projectData.projectCode),this.form.controls.customerCode.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode),this.loadSiteCodes(this.projectData.projectCode),this.onSelectionSiteCode())}loadSkillSetsList(){this.apiService.getall("Skillset/GetSelectSkillsetList/").subscribe(e=>{this.skillSetsList=e})}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o?n=e.target.value:3==o&&(n=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){let r=this.custCodeControl.value;this.form.controls.customerCode.setValue(r),this.loadProjectsList(r)}else this.form.controls.customerCode.setValue(""),this.custCodeControl.setValue(""),this.projectsList=[]}),this.form.controls.projectCode.setValue(""),this.form.controls.siteCode.setValue(""),this.siteCodeList=[],this.resourceList=[]}onSelectionProjectCode(){this.loadSiteCodes(this.form.controls.projectCode.value),this.form.controls.siteCode.setValue(""),this.resourceList=[]}getProjectData(){""!=this.form.controls.siteCode.value&&(this.isDataLoading=!0,this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectData=e}),this.isDataLoading=!1)}loadSiteCodes(e){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(o=>{this.siteCodeList=o}),this.isDataLoading=!1}loadProjectsList(e){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(o=>{this.projectsList=o}),this.isDataLoading=!1}editForm(){this.apiService.get("PvAddResource/getPvAddResourceReqById",this.id).subscribe(e=>{null!=e&&(this.requestData=e,this.resourceList=e.resourceList,this.custCodeControl.setValue(e.customerCode),this.form.controls.projectCode.setValue(e.projectCode),this.form.controls.customerCode.setValue(e.customerCode),this.form.controls.siteCode.setValue(e.siteCode),this.getProjectData(),this.form.controls.resourceList.setValue(e.resourceList),this.loadProjectsList(e.customerCode),this.loadSiteCodes(e.projectCode),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.resourceList.length>0&&(this.resourceList.forEach(e=>{let o=new Date(e.fromDate);o.setMinutes(o.getMinutes()-o.getTimezoneOffset()),e.fromDate=o;let n=new Date(e.toDate);n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),e.toDate=n}),this.form.controls.resourceList.setValue(this.resourceList)),this.form.valid&&this.resourceList.length>0?(this.isUpdating=!0,this.apiService.post("PvAddResource",this.form.value).subscribe(e=>{this.isUpdating=!1,e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e),this.isUpdating=!1})):this.utilService.FillUpFields())}onSelectionSiteCode(){this.getProjectData(),this.resourceList=[],this.editResource.fromDate=""}edit(e){this.editResource=this.resourceList[e],0==this.resourceList[e].id&&(this.editResource.id=-1),document.getElementById("inputEntry").scrollIntoView()}delete(e){this.resourceList.splice(e,1)}translateToolTip(e){return this.translate.instant(e)}openDatePicker(e){e.open()}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}addUpdate(){""!=this.editResource.skillsetCode&&this.editResource.qty*this.editResource.pricePerUnit>0&&""!=this.editResource.fromDate&&""!=this.editResource.toDate&&new Date(this.editResource.fromDate)<new Date(this.editResource.toDate)&&((0==this.editResource.id||""==this.editResource.id)&&(this.editResource.id=0,this.resourceList.push(this.editResource)),this.editResource={id:"",skillsetCode:"",qty:"",pricePerUnit:"",toDate:"",fromDate:""})}getSkillSet(e){let o=this.skillSetsList.find(n=>n.value==e);return this.isArabic&&(o.text=o.textTwo),o}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(w.g),t.Y36(f.uU),t.Y36(Z.sK),t.Y36(l.qu),t.Y36(x._),t.Y36(y.t),t.Y36(b.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-add-resource"]],features:[t.qOj],decls:129,vars:114,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-4","col-lg-4"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto3","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","projectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],[1,"col-md-12","col-lg-12",2,"padding-top","5px"],[1,"row","mt-2"],[1,"table-responsive"],[1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange"],["type","number",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"form-control","datapickerinput",3,"ngModel","ngModelOptions","matDatepicker","placeholder","min","max","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],[1,"clickaction","clickicons"],[3,"matTooltip","click"],[1,"fas","fa-plus-circle"],["class","col-md-12 col-lg-12","style","padding-top:5px",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"control"],[3,"value"],[4,"ngFor","ngForOf"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.YNc(7,jp,3,4,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",7),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"auto-loader",15),t._UZ(22,"input",16),t.ALo(23,"translate"),t.ALo(24,"translate"),t.TgZ(25,"mat-autocomplete",17,18),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1)}),t.YNc(27,kp,2,2,"mat-option",19),t.ALo(28,"async"),t.qZA(),t.qZA(),t.YNc(29,Mp,2,1,"span",20),t.YNc(30,Rp,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(31,"div",11),t.TgZ(32,"label",12),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div",13),t.TgZ(36,"div",14),t.TgZ(37,"select",21),t.NdJ("change",function(){return o.onSelectionProjectCode()}),t.TgZ(38,"option",22),t._uU(39),t.ALo(40,"translate"),t.ALo(41,"translate"),t.qZA(),t.YNc(42,Pp,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(43,Fp,2,1,"span",20),t.YNc(44,Ip,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(45,"div",11),t.TgZ(46,"label",12),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",13),t.TgZ(50,"div",14),t.TgZ(51,"select",24),t.NdJ("change",function(){return o.onSelectionSiteCode()}),t.TgZ(52,"option",22),t._uU(53),t.ALo(54,"translate"),t.ALo(55,"translate"),t.qZA(),t.YNc(56,Yp,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(57,Jp,2,1,"span",20),t.YNc(58,Qp,3,3,"span",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",25),t.TgZ(60,"div",26),t.TgZ(61,"div",27),t.TgZ(62,"table",28),t.TgZ(63,"tr"),t.TgZ(64,"th"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.TgZ(67,"th"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"th"),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"th"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"th"),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.TgZ(79,"th"),t._uU(80),t.ALo(81,"translate"),t.qZA(),t.TgZ(82,"th"),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.qZA(),t.TgZ(85,"tr"),t.TgZ(86,"td"),t.TgZ(87,"select",29),t.NdJ("ngModelChange",function(r){return o.editResource.skillsetCode=r}),t.TgZ(88,"option",22),t._uU(89),t.ALo(90,"translate"),t.ALo(91,"translate"),t.qZA(),t.YNc(92,Bp,2,2,"option",23),t.qZA(),t.qZA(),t.TgZ(93,"td"),t.TgZ(94,"input",30),t.NdJ("ngModelChange",function(r){return o.editResource.qty=r}),t.qZA(),t.qZA(),t.TgZ(95,"td"),t.TgZ(96,"div",14),t.TgZ(97,"input",31),t.NdJ("ngModelChange",function(r){return o.editResource.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(103);return o.openDatePicker(r)}),t.ALo(98,"translate"),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"div",32),t._UZ(101,"mat-datepicker-toggle",33),t._UZ(102,"mat-datepicker",null,34),t.qZA(),t.qZA(),t.qZA(),t.TgZ(104,"td"),t.TgZ(105,"div",14),t.TgZ(106,"input",31),t.NdJ("ngModelChange",function(r){return o.editResource.toDate=r})("click",function(){t.CHM(n);const r=t.MAs(112);return o.openDatePicker(r)}),t.ALo(107,"translate"),t.ALo(108,"translate"),t.qZA(),t.TgZ(109,"div",32),t._UZ(110,"mat-datepicker-toggle",33),t._UZ(111,"mat-datepicker",null,35),t.qZA(),t.qZA(),t.qZA(),t.TgZ(113,"td"),t.TgZ(114,"input",30),t.NdJ("ngModelChange",function(r){return o.editResource.pricePerUnit=r}),t.qZA(),t.qZA(),t.TgZ(115,"td"),t._uU(116),t.qZA(),t.TgZ(117,"td",36),t.TgZ(118,"span",37),t.NdJ("click",function(){return o.addUpdate()}),t._UZ(119,"i",38),t._uU(120,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(121,Vp,27,22,"div",39),t.qZA(),t.qZA(),t.TgZ(122,"div",7),t.TgZ(123,"div",8),t.TgZ(124,"div",40),t.TgZ(125,"input",41),t.NdJ("click",function(){return o.closeModel()}),t.ALo(126,"translate"),t.qZA(),t._uU(127," \xa0 "),t.YNc(128,$p,3,3,"span",4),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),s=t.MAs(26),r=t.MAs(103),c=t.MAs(112);let p,u,d,m,h,C;t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.id>0),t.xp6(10),t.Oqu(t.lcZ(18,61,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(23,63,"Please_Enter")," ",t.lcZ(24,65,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",s),t.xp6(5),t.Q6J("ngForOf",t.lcZ(28,67,o.filteredCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(p=o.form.get("customerCode"))&&p.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(u=o.form.get("customerCode"))?null:u.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(34,69,"Project")),t.xp6(6),t.AsE("",t.lcZ(40,71,"Select")," ",t.lcZ(41,73,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.projectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(d=o.form.get("projectCode"))&&d.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(m=o.form.get("projectCode"))?null:m.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(48,75,"Site")),t.xp6(6),t.AsE("",t.lcZ(54,77,"Select")," ",t.lcZ(55,79,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(h=o.form.get("siteCode"))&&h.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(C=o.form.get("siteCode"))?null:C.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(7),t.hij(" ",t.lcZ(66,81,"Skillset")," "),t.xp6(3),t.hij(" ",t.lcZ(69,83,"Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(72,85,"From_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(75,87,"To_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(78,89,"Price_Per_Unit")," "),t.xp6(3),t.hij(" ",t.lcZ(81,91,"Total_Price")," "),t.xp6(3),t.hij(" ",t.lcZ(84,93,"Action")," "),t.xp6(4),t.Q6J("ngModel",o.editResource.skillsetCode)("ngModelOptions",t.DdM(109,oe)),t.xp6(2),t.AsE("",t.lcZ(90,95,"Select")," ",t.lcZ(91,97,"Skillset_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.skillSetsList),t.xp6(2),t.Q6J("ngModel",o.editResource.qty)("ngModelOptions",t.DdM(110,oe)),t.xp6(3),t.hYB("placeholder","",t.lcZ(98,99,"Please_Enter")," ",t.lcZ(99,101,"Project_End_Date"),""),t.Q6J("ngModel",o.editResource.fromDate)("ngModelOptions",t.DdM(111,oe))("matDatepicker",r)("min",null==o.projectData?null:o.projectData.startDate)("max",null==o.projectData?null:o.projectData.endDate),t.xp6(4),t.Q6J("for",r),t.xp6(5),t.hYB("placeholder","",t.lcZ(107,103,"Please_Enter")," ",t.lcZ(108,105,"Project_End_Date"),""),t.Q6J("ngModel",o.editResource.toDate)("ngModelOptions",t.DdM(112,oe))("matDatepicker",c)("min",null==o.projectData?null:o.projectData.startDate)("max",null==o.projectData?null:o.projectData.endDate),t.xp6(4),t.Q6J("for",c),t.xp6(4),t.Q6J("ngModel",o.editResource.pricePerUnit)("ngModelOptions",t.DdM(113,oe)),t.xp6(2),t.Oqu(o.editResource.qty*o.editResource.pricePerUnit),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Add")),t.xp6(3),t.Q6J("ngIf",0!=o.resourceList.length),t.xp6(4),t.s9C("value",t.lcZ(126,107,"Cancel")),t.xp6(3),t.Q6J("ngIf",0!=o.resourceList.length&&"View"!=o.modalBtnTitle)}},directives:[l._Y,l.JL,l.sg,f.O5,ht.z,l.Fj,at.ZL,l.JJ,l.oH,at.XC,f.sg,l.EJ,l.u,l.YN,l.Kr,l.On,l.wV,M.hl,M.nW,gt.R9,M.Mq,rt.gM,St.ey,G.s],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function Gp(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Leave_Type"),"\xa0 : ",e.leaveType," ")}}function Wp(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Transfered"),"?\xa0 "))}function zp(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Resigned"),"?\xa0 "))}function Xp(i,a){if(1&i&&(t.TgZ(0,"span"),t._UZ(1,"br"),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.AsE(" ",t.lcZ(3,2,"No.Of_Updates"),"\xa0 :",e.noOfUpdates," ")}}const Kp=function(){return{standalone:!0}};function tu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"div",7),t.TgZ(2,"label",8),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"textarea",9),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().remarks=n}),t.ALo(6,"translate"),t.ALo(7,"translate"),t._uU(8,"        \n"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"Project_Details")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,7,"Enter")," ",t.lcZ(7,9,"Remarks"),""),t.Q6J("ngModel",e.remarks)("ngModelOptions",t.DdM(11,Kp))}}let xt=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d){super(p),this.translate=e,this.notifyService=o,this.utilService=n,this.dialog=s,this.apiService=r,this.dialogRef=c,this.authService=p,this.fb=u,this.oprService=d,this.confirmType="",this.leaveType="",this.remarks=""}ngOnInit(){this.setForm()}setForm(){this.form=this.fb.group({})}closeModel(e){"true"==e&&("transResign"==this.confirmType&&"TR"==this.leaveType&&""!=this.remarks||"transResign"==this.confirmType&&"R"==this.leaveType||"leave"==this.confirmType)?this.dialogRef.close({res:!0,remarks:this.remarks}):"true"==e&&"transResign"==this.confirmType&&"TR"==this.leaveType?this.notifyService.showError(this.translate.instant("Enter_Remarks")):this.dialogRef.close("true"==e&&"cancelLeave"==this.confirmType||"true"==e&&"postAttendance"==this.confirmType||"true"==e&&"general"==this.confirmType||"true"==e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.sK),t.Y36(w.g),t.Y36(y.t),t.Y36(T.uw),t.Y36(b.s),t.Y36(T.so),t.Y36(x._),t.Y36(l.qu),t.Y36(W.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-confirm-dialog-window"]],features:[t.qOj],decls:17,vars:15,consts:[["novalidate","",1,"mt-4",3,"formGroup"],[1,"col-md-12","col-lg-12","text-center"],[4,"ngIf"],["class","row",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-success","btn-midblock",3,"value","click"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-danger","btn-midblock",3,"value","click"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"mr-sm-2"],[1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t._uU(2),t.ALo(3,"translate"),t.YNc(4,Gp,3,4,"span",2),t.YNc(5,Wp,3,3,"span",2),t.YNc(6,zp,3,3,"span",2),t.YNc(7,Xp,4,4,"span",2),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"div",1),t.YNc(10,tu,9,12,"div",3),t.TgZ(11,"input",4),t.NdJ("click",function(){return o.closeModel("true")}),t.ALo(12,"translate"),t.qZA(),t._uU(13," \xa0 "),t.TgZ(14,"input",5),t.NdJ("click",function(){return o.closeModel("false")}),t.ALo(15,"translate"),t.qZA(),t._uU(16," \xa0 "),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(2),t.hij(" ",t.lcZ(3,9,"Are_You_Sure?"),"\xa0 "),t.xp6(2),t.Q6J("ngIf","leave"==o.confirmType),t.xp6(1),t.Q6J("ngIf","transResign"==o.confirmType&&"TR"==o.leaveType),t.xp6(1),t.Q6J("ngIf","transResign"==o.confirmType&&"R"==o.leaveType),t.xp6(1),t.Q6J("ngIf","postAttendance"==o.confirmType),t.xp6(3),t.Q6J("ngIf","transResign"==o.confirmType&&"TR"==o.leaveType),t.xp6(1),t.s9C("value",t.lcZ(12,11,"Yes")),t.xp6(3),t.s9C("value",t.lcZ(15,13,"No")))},directives:[l._Y,l.JL,l.sg,f.O5,l.Fj,l.JJ,l.On],pipes:[Z.X$],encapsulation:2}),i})();function eu(i,a){1&i&&(t.TgZ(0,"th",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Action")," "))}function ou(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.employeeNumber," ")}}function iu(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);let n;t.xp6(1),t.hij(" ",null==(n=o.getEmployee(null==e?null:e.employeeNumber))?null:n.text," ")}}function nu(i,a){if(1&i&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(4);t.Q6J("value",e),t.xp6(1),t.AsE(" ",e.text,"-",o.isArab?e.textAr:e.textTwo," ")}}function au(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",17),t._UZ(1,"auto-loader",25),t._UZ(2,"input",26),t.ALo(3,"translate"),t.ALo(4,"translate"),t.TgZ(5,"mat-autocomplete",27,28),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw(3).autoSelectionEmployeeNumber(n)}),t.YNc(7,nu,2,3,"mat-option",29),t.ALo(8,"async"),t.qZA(),t._UZ(9,"validation-message",30),t.qZA()}if(2&i){const e=t.MAs(6),o=t.oxw(3);t.xp6(1),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(3,7,"Enter")," ",t.lcZ(4,9,"Employee"),""),t.Q6J("formControl",o.empCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(8,11,o.filteredEmployeeNumbers)),t.xp6(2),t.Q6J("control",o.empCodeControl)}}function su(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.defShift," ")}}function ru(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.shiftCode),t.xp6(1),t.Oqu(e.shiftCode)}}const Xe=function(){return{standalone:!0}};function lu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"select",32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.defShift=n}),t.TgZ(2,"option",33),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,ru,2,2,"option",29),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngModel",e.defShift)("ngModelOptions",t.DdM(6,Xe)),t.xp6(2),t.Oqu(t.lcZ(4,4,"Select")),t.xp6(2),t.Q6J("ngForOf",o.shiftCodesForProjectSite)}}function cu(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",o.getOffDay(null==e?null:e.offDay)," ")}}function pu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"select",32),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.offDay=n}),t.TgZ(2,"option",34),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"option",35),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"option",36),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"option",37),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"option",38),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"option",39),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"option",40),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"option",41),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",e.offDay)("ngModelOptions",t.DdM(26,Xe)),t.xp6(2),t.Oqu(t.lcZ(4,10,"Select")),t.xp6(3),t.Oqu(t.lcZ(7,12,"Sunday")),t.xp6(3),t.Oqu(t.lcZ(10,14,"Monday")),t.xp6(3),t.Oqu(t.lcZ(13,16,"Tuesday")),t.xp6(3),t.Oqu(t.lcZ(16,18,"Wednesday")),t.xp6(3),t.Oqu(t.lcZ(19,20,"Thursday")),t.xp6(3),t.Oqu(t.lcZ(22,22,"Friday")),t.xp6(3),t.Oqu(t.lcZ(25,24,"Saturday"))}}function uu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",42),t.TgZ(1,"i",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).editMap(n)}),t.qZA(),t.qZA()}}function du(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,ou,2,1,"td",11),t.YNc(4,iu,2,1,"td",11),t.YNc(5,au,10,13,"td",23),t.YNc(6,su,2,1,"td",11),t.YNc(7,lu,6,7,"td",11),t.YNc(8,cu,2,1,"td",11),t.YNc(9,pu,26,27,"td",11),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.YNc(14,uu,2,0,"td",24),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.Oqu(n.getSkillSet(null==e?null:e.skillSet).text),t.xp6(1),t.Q6J("ngIf",n.editRow!=o),t.xp6(1),t.Q6J("ngIf",n.editRow!=o),t.xp6(1),t.Q6J("ngIf",n.editRow==o),t.xp6(1),t.Q6J("ngIf",n.editRow!=o),t.xp6(1),t.Q6J("ngIf",n.editRow==o),t.xp6(1),t.Q6J("ngIf",n.editRow!=o),t.xp6(1),t.Q6J("ngIf",n.editRow==o),t.xp6(2),t.Oqu(n.ToDateString(null==e?null:e.fromDate)),t.xp6(2),t.Oqu(n.ToDateString(null==e?null:e.toDate)),t.xp6(1),t.Q6J("ngIf","View"!=n.modalBtnTitle)}}function mu(i,a){if(1&i&&(t.TgZ(0,"div",12),t.TgZ(1,"div",13),t.TgZ(2,"table",14),t.TgZ(3,"tr",15),t.TgZ(4,"th",16),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",17),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",18),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",19),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.YNc(22,eu,3,3,"th",20),t.qZA(),t.YNc(23,du,15,11,"tr",21),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,8,"Skillset")," "),t.xp6(3),t.hij(" ",t.lcZ(9,10,"Employee")," "),t.xp6(3),t.hij(" ",t.lcZ(12,12,"Default_Shift")," "),t.xp6(3),t.hij(" ",t.lcZ(15,14,"OffDay")," "),t.xp6(3),t.hij(" ",t.lcZ(18,16,"From_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(21,18,"To_Date")," "),t.xp6(2),t.Q6J("ngIf","View"!=e.modalBtnTitle),t.xp6(1),t.Q6J("ngForOf",e.mappingsList)}}function _u(i,a){1&i&&(t._UZ(0,"input",45),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}function gu(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,_u,2,3,"input",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf","View"!=e.modalBtnTitle)}}let Jt=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u){super(r),this.notifyService=e,this.datepipe=o,this.translate=n,this.fb=s,this.authService=r,this.utilService=c,this.apiService=p,this.dialogRef=u,this.isDataLoading=!1,this.mappingsList=[],this.skillSetsList=[],this.isArabic=!1,this.editRow=-1,this.empCodeControl=new l.NI(""),this.employeeList=[],this.employeesForProjectSite=[],this.employeeNumber="",this.offDay="-1",this.shiftCodesForProjectSite=[],this.isUpdating=!1,this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,tt.O)(""),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(d=>(""!==d.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(d||""))))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.loadSkillSetsList(),this.apiService.get("PvAddResource/getPvAddResourceEmpToResMapsByReqIdById",this.id).subscribe(e=>{null!=e&&(this.mappingsList=e,this.loadEmployeesForProjectSite(),this.loadShiftCodesForProjectSite())})}setForm(){this.form=this.fb.group({})}submit(){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):this.mappingsList.findIndex(e=>""==e.employeeNumber||""==e.defShift)>=0?this.notifyService.showInfo(this.translate.instant("Empty EMployee_Number Or Shift Code")):(this.isUpdating=!0,this.apiService.post("PvAddResource/CreateUpdatePvAddResourceEmployeeToResourceMap",{mappingsList:this.mappingsList}).subscribe(e=>{this.isUpdating=!1,e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e),this.isUpdating=!1}))}closeModel(){this.dialogRef.close()}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}getSkillSet(e){let o=this.skillSetsList.find(n=>n.value==e);return this.isArabic&&(o.text=o.textTwo),o}loadSkillSetsList(){this.apiService.getall("Skillset/GetSelectSkillsetList/").subscribe(e=>{this.skillSetsList=e})}filterEmployeeNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.mappingsList[0].projectCode}/${this.mappingsList[0].siteCode}/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}editMap(e){-1==this.editRow?(this.editRow=e,this.empCodeControl.setValue(this.mappingsList[this.editRow].employeeNumber)):this.editRow=-1}loadEmployees(){this.apiService.getall("Employee/getSelectEmployeeList").subscribe(e=>{this.employeeList=e},e=>this.utilService.ShowApiErrorMessage(e))}loadEmployeesForProjectSite(){this.apiService.getall(`EmployeesToProjectSite/getEmployeesOfProjectSite/${this.mappingsList[0].projectCode}/${this.mappingsList[0].siteCode}`).subscribe(e=>{this.employeesForProjectSite=e,0==this.employeesForProjectSite.length&&this.notifyService.showError(this.translate.instant("Employees_Not_Assigned_To_Site"))},e=>this.utilService.ShowApiErrorMessage(e))}autoSelectionEmployeeNumber(e){this.mappingsList.findIndex(o=>o.employeeNumber==e.option.value.text)<0?(this.mappingsList[this.editRow].employeeID=e.option.value.value,this.mappingsList[this.editRow].employeeNumber=e.option.value.text,this.mappingsList[this.editRow].empName=e.option.value.textTwo,this.mappingsList[this.editRow].empNameAr=e.option.value.textAr,this.empCodeControl.setValue(e.option.value.text)):(this.empCodeControl.setValue(""),this.mappingsList[this.editRow].employeeNumber="")}canSave(){return this.mappingsList.findIndex(e=>""==e.employeeNumber)<0}getEmployee(e){if(""==e)return{text:""};let o=this.employeesForProjectSite.find(n=>n.employeeNumber==e);return o.text=this.isArabic?o.employeeNameAr:o.employeeName,o}getOffDay(e){switch(e.toString()){case"0":return this.isArabic?"SundayAr":"Sunday";case"1":return this.isArabic?"MondayAr":"Monday";case"2":return this.isArabic?"TuesdayAr":"Tuesday";case"3":return this.isArabic?"WednesdayAr":"Wednesday";case"4":return this.isArabic?"ThursdayAr":"Thursday";case"5":return this.isArabic?"FridayAr":"Friday";case"6":return this.isArabic?"SaturdayAr":"Saturday";default:return this.isArabic?"No Off Day Ar":"No Off Day"}}loadShiftCodesForProjectSite(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.mappingsList[0].projectCode}/${this.mappingsList[0].siteCode}`).subscribe(e=>{this.shiftCodesForProjectSite=e},e=>this.utilService.ShowApiErrorMessage(e))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(w.g),t.Y36(f.uU),t.Y36(Z.sK),t.Y36(l.qu),t.Y36(x._),t.Y36(y.t),t.Y36(b.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-pv-emp-to-res-map"]],features:[t.qOj],decls:19,vars:7,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],["class","col-md-12 col-lg-12","style","padding-top:5px",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],[4,"ngIf"],[1,"col-md-12","col-lg-12",2,"padding-top","5px"],[1,"row","mt-2"],[1,"table","table-bordered","no-wrap"],["width","100%"],["width","10%"],["colspan","2"],["width","15%"],["width","20%"],["width","5%",4,"ngIf"],[4,"ngFor","ngForOf"],["width","5%"],["colspan","2",4,"ngIf"],["class","clickaction clickicons",4,"ngIf"],[3,"isLoading"],["type","text","matInput","",1,"form-control",2,"width","inherit",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto_emp","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],[3,"value"],[1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["value",""],["value","-1"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],[1,"clickaction","clickicons"],[1,"icon-note",3,"click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.YNc(11,mu,24,20,"div",8),t.qZA(),t.qZA(),t.TgZ(12,"div",6),t.TgZ(13,"div",7),t.TgZ(14,"div",9),t.TgZ(15,"input",10),t.NdJ("click",function(){return o.closeModel()}),t.ALo(16,"translate"),t.qZA(),t._uU(17," \xa0 "),t.YNc(18,gu,2,1,"span",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(7),t.Q6J("ngIf",0!=o.mappingsList.length),t.xp6(4),t.s9C("value",t.lcZ(16,5,"Cancel")),t.xp6(3),t.Q6J("ngIf",0!=o.mappingsList.length))},directives:[l._Y,l.JL,l.sg,f.O5,f.sg,ht.z,l.Fj,at.ZL,l.JJ,l.oH,at.XC,G.s,St.ey,l.EJ,l.On,l.YN,l.Kr],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function hu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().uploadFile()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Upload"))}let ie=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m}ngOnInit(){console.log(this.requestData),this.requestType="ProjectVariations"==this.requestData.requestType?this.requestData.requestSubType.replace("(","").replace(")",""):this.requestData.requestType}submit(){}closeModel(){this.dialogRef.close()}onFileChanged(e,o){let n=new FileReader;if(e.target.files&&e.target.files.length>0){let s=e.target.files[0];n.readAsDataURL(s),n.onload=()=>{1===o&&(this.requestData.fileIForm=s,this.requestData.fileName=n.result)}}}uploadFile(){const e=new FormData;e.append("id",this.requestData.requestNumber),e.append("requestType",this.requestData.requestType),e.append("requestSubType",this.requestData.requestSubType),e.append("fileIForm",this.requestData.fileIForm),e.append("fileName",this.authService.ApiEndPoint().replace("api","")+"Uploads/Adendums/"),null!=this.requestData.fileIForm?this.apiService.post("pvAllRequests/fileUpload",e).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)}):this.utilService.ShowApiErrorMessage(this.translate.instant("Select_File"))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-upload-adendum"]],features:[t.qOj],decls:44,vars:24,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"row",2,"text-align","center"],[1,"col-md-12","col-lg-12"],[1,"table","table-bordered","no-wrap"],[1,"col-md-8","col-lg-8"],[1,"form-group"],["accept",".pdf","type","file",3,"change"],[1,"col-md-4","col-lg-4","align-content-center"],["type","button","class","btn waves-effect waves- active btn-rounded   btn-primary btn-midblock",3,"value","click",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-","active","btn-rounded","btn-primary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"div"),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"table",4),t.TgZ(9,"thead"),t.TgZ(10,"tr"),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"tbody"),t.TgZ(27,"tr"),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.TgZ(30,"td"),t._uU(31),t.qZA(),t.TgZ(32,"td"),t._uU(33),t.qZA(),t.TgZ(34,"td"),t._uU(35),t.qZA(),t.TgZ(36,"td"),t._uU(37),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",5),t.TgZ(39,"div",6),t.TgZ(40,"input",7),t.NdJ("change",function(s){return o.onFileChanged(s,1)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",8),t.YNc(42,hu,2,3,"input",9),t._uU(43," \xa0 "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,12,"Uploading_Addendum")),t.xp6(11),t.hij(" ",t.lcZ(13,14,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(16,16,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(19,18,"Site_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(22,20,"Request_Type")," "),t.xp6(3),t.hij(" ",t.lcZ(25,22,"Request_Number")," "),t.xp6(5),t.hij(" ",o.requestData.customerCode," "),t.xp6(2),t.hij(" ",o.requestData.projectCode," "),t.xp6(2),t.hij(" ",o.requestData.siteCode," "),t.xp6(2),t.hij(" ",o.requestType," "),t.xp6(2),t.hij(" ",o.requestData.requestNumber," "),t.xp6(5),t.Q6J("ngIf",null!=(null==o.requestData?null:o.requestData.fileIForm)))},directives:[f.O5],pipes:[Z.X$],encapsulation:2}),i})();function fu(i,a){if(1&i&&(t.TgZ(0,"option",6),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text,"")}}function Zu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"select",3),t.NdJ("change",function(n){return t.CHM(e),t.oxw().OnTemplateSelection(n)}),t.TgZ(2,"option",4),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.YNc(6,fu,2,2,"option",5),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(3),t.AsE("",t.lcZ(4,3,"Select")," ",t.lcZ(5,5,"SelectTemplate")," "),t.xp6(3),t.Q6J("ngForOf",e.templatesSelectionList)}}function Cu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().createContractTemplate()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Create_Template")))}function Au(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().editContractTemplate()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit_Template")))}function Tu(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().printInvoice()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Print")))}function vu(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",27),t._uU(2),t.qZA(),t.TgZ(3,"td",27),t._uU(4),t.qZA(),t.TgZ(5,"td",27),t._uU(6),t.qZA(),t.TgZ(7,"td",27),t._uU(8),t.qZA(),t.TgZ(9,"td",27),t._uU(10),t.qZA(),t.TgZ(11,"td",27),t._uU(12),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(8);t.xp6(2),t.Oqu(o.getSkillSet(null==e?null:e.skillsetCode).text),t.xp6(2),t.Oqu(null==e?null:e.qty),t.xp6(2),t.Oqu(o.ToDateString(null==e?null:e.fromDate)),t.xp6(2),t.Oqu(o.ToDateString(null==e?null:e.toDate)),t.xp6(2),t.Oqu(null==e?null:e.pricePerUnit),t.xp6(2),t.Oqu((null==e?null:e.pricePerUnit)*(null==e?null:e.qty))}}function xu(i,a){if(1&i&&(t.TgZ(0,"div",23),t.TgZ(1,"table",11),t.TgZ(2,"tr"),t.TgZ(3,"th",24),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",24),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",24),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",24),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",24),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th",24),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.YNc(21,vu,13,6,"tr",20),t.TgZ(22,"tr"),t.TgZ(23,"th",25),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th",26),t._uU(27),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(7);t.xp6(4),t.hij(" ",t.lcZ(5,9,"Skillset")," "),t.xp6(3),t.hij(" ",t.lcZ(8,11,"Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(11,13,"From_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(14,15,"To_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(17,17,"Price_Per_Unit")," "),t.xp6(3),t.hij(" ",t.lcZ(20,19,"Total_Price")," "),t.xp6(2),t.Q6J("ngForOf",null==e.resourceCostings?null:e.resourceCostings.resourceList),t.xp6(3),t.hij(" ",t.lcZ(25,21,"Total")," "),t.xp6(3),t.hij(" ",null==e.resourceCostings?null:e.resourceCostings.totalCost," ")}}function qu(i,a){if(1&i&&(t.TgZ(0,"ng-contaier"),t.YNc(1,xu,28,23,"div",22),t.qZA()),2&i){const e=t.oxw(6);t.xp6(1),t.Q6J("ngIf",(null==e.resourceCostings?null:e.resourceCostings.resourceList.length)>0)}}function bu(i,a){if(1&i&&(t.TgZ(0,"div",23),t.TgZ(1,"table",11),t.TgZ(2,"tr"),t.TgZ(3,"th",24),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",24),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.TgZ(9,"tr"),t.TgZ(10,"td",27),t._uU(11),t.qZA(),t.TgZ(12,"td",27),t._uU(13),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(7);t.xp6(4),t.hij(" ",t.lcZ(5,4,"Skillset")," "),t.xp6(3),t.hij(" ",t.lcZ(8,6,"From_Date")," "),t.xp6(4),t.Oqu(e.isArabic?null==e.pvRequest?null:e.pvRequest.nameInArabic:null==e.pvRequest?null:e.pvRequest.nameInEnglish),t.xp6(2),t.Oqu(e.ToDateString(null==e.pvRequest?null:e.pvRequest.fromDate))}}function yu(i,a){if(1&i&&(t.TgZ(0,"ng-contaier"),t.YNc(1,bu,14,8,"div",22),t.qZA()),2&i){const e=t.oxw(6);t.xp6(1),t.Q6J("ngIf",null!=e.pvRequest)}}function Su(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",21),t.YNc(3,qu,2,1,"ng-contaier",0),t.YNc(4,yu,2,1,"ng-contaier",0),t.qZA(),t.qZA(),t.BQk()),2&i){const e=t.oxw(5);t.xp6(3),t.Q6J("ngIf","ForAddingResources"==e.type),t.xp6(1),t.Q6J("ngIf","ForRemovingResources"==e.type)}}function wu(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",28),t.TgZ(2,"b"),t.TgZ(3,"u"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td",28),t.TgZ(6,"b"),t.TgZ(7,"u"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.clauseTitleEng),t.xp6(4),t.hij(" ",e.clauseTitleArb,"")}}function Uu(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",29),t.TgZ(2,"b"),t.TgZ(3,"u"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td",30),t.TgZ(6,"b"),t.TgZ(7,"u"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.hij(" ",e.clauseSubTitleEng,""),t.xp6(4),t.Oqu(e.clauseSubTitleArb)}}function Lu(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",31),t._uU(2),t.qZA(),t.TgZ(3,"td",31),t._uU(4),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.clauseDescriptionEng," "),t.xp6(2),t.hij(" ",e.clauseDescriptionArb," ")}}function Du(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Su,5,2,"ng-container",0),t.YNc(2,wu,9,2,"tr",0),t.YNc(3,Uu,9,2,"tr",0),t.YNc(4,Lu,5,2,"tr",0),t.BQk()),2&i){const e=a.$implicit,o=a.index;t.xp6(1),t.Q6J("ngIf",2==o),t.xp6(1),t.Q6J("ngIf",null!=e.clauseTitleEng),t.xp6(1),t.Q6J("ngIf",null!=e.clauseSubTitleEng),t.xp6(1),t.Q6J("ngIf",null!=e.clauseDescriptionEng)}}function Nu(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Du,5,4,"ng-container",20),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.contractFormData.contractClauses)}}function Eu(i,a){if(1&i&&(t.TgZ(0,"div",9),t.TgZ(1,"div",10),t._UZ(2,"br"),t.TgZ(3,"table",11),t.TgZ(4,"tr"),t.TgZ(5,"td",12),t._uU(6),t.qZA(),t.TgZ(7,"td",13),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"tr"),t.TgZ(10,"td",14),t.TgZ(11,"b"),t.TgZ(12,"u"),t._uU(13,"Addendum of providing Security Guarding Services"),t._UZ(14,"br"),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"td",14),t.TgZ(17,"b"),t.TgZ(18,"u"),t._uU(19,"\u0645\u0644\u062d\u0642 \u062a\u0642\u062f\u064a\u0645 \u062e\u062f\u0645\u0627\u062a \u0627\u0644\u062d\u0631\u0627\u0633\u0629 \u0627\u0644\u0623\u0645\u0646\u064a\u0629"),t._UZ(20,"br"),t._uU(21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"tr"),t.TgZ(23,"td",15),t._uU(24),t.qZA(),t.TgZ(25,"td",15),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"tr"),t.TgZ(28,"td",16),t.TgZ(29,"u"),t._uU(30," (Referred to it from here on as first party)"),t.qZA(),t.qZA(),t.TgZ(31,"td",17),t.TgZ(32,"u"),t._uU(33,"(\u0648\u064a\u0634\u0627\u0631 \u0625\u0644\u064a\u0647\u0627 \u0641\u064a\u0645\u0627 \u0628\u0639\u062f \u0628\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u0623\u0648\u0644)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"tr"),t.TgZ(35,"td",15),t._uU(36),t.qZA(),t.TgZ(37,"td",15),t._uU(38),t.qZA(),t.qZA(),t.TgZ(39,"tr"),t.TgZ(40,"td",16),t.TgZ(41,"u"),t._uU(42," (Referred to it from here on as Second party)"),t.qZA(),t.qZA(),t.TgZ(43,"td",17),t.TgZ(44,"u"),t._uU(45,"( \u0648 \u064a\u0634\u0627\u0631 \u0625\u0644\u064a\u0647\u0627 \u0641\u064a\u0645\u0627 \u0628\u0639\u062f \u0628\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u062b\u0627\u0646\u064a)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"tr"),t.TgZ(47,"td",14),t.TgZ(48,"b"),t.TgZ(49,"u"),t._uU(50," Preamble"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"td",14),t.TgZ(52,"b"),t.TgZ(53,"u"),t._uU(54,"\u0627\u0644\u0628\u0646\u062f \u0627\u0644\u062a\u0645\u0647\u064a\u062f\u064a"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"tr"),t.TgZ(56,"td",15),t._uU(57),t.qZA(),t.TgZ(58,"td",15),t._uU(59),t.qZA(),t.qZA(),t.YNc(60,Nu,2,1,"ng-container",0),t.TgZ(61,"tr"),t.TgZ(62,"td",16),t.TgZ(63,"b"),t._uU(64," First party:"),t.qZA(),t.qZA(),t.TgZ(65,"td",17),t.TgZ(66,"b"),t._uU(67," :\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u0623\u0648"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"tr"),t.TgZ(69,"td",18),t._uU(70),t.qZA(),t.TgZ(71,"td",19),t._uU(72),t.qZA(),t.qZA(),t._UZ(73,"br"),t.TgZ(74,"tr"),t.TgZ(75,"td",16),t.TgZ(76,"b"),t._uU(77," Second party:"),t.qZA(),t.qZA(),t.TgZ(78,"td",17),t.TgZ(79,"b"),t._uU(80," :\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u062b\u0627\u0646\u064a"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(81,"tr"),t.TgZ(82,"td",18),t._uU(83),t.qZA(),t.TgZ(84,"td",19),t._uU(85),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.hij(" (Reference No.",e.referenceNumber,") "),t.xp6(2),t.hij(" (",e.referenceNumber,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639) "),t.xp6(7),t.hij("(",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.titleOfServiceEng,")"),t.xp6(6),t.hij("(",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.titleOfServiceArb,")"),t.xp6(3),t.hij(" ",e.TranslateTaggedDataEng(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.companyDetailsEng)," "),t.xp6(2),t.hij(" ",e.TranslateTaggedDataArb(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.companyDetailsArb)," "),t.xp6(10),t.hij(" ",e.TranslateTaggedDataEng(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.customerDetailsEng)," "),t.xp6(2),t.hij(" ",e.TranslateTaggedDataArb(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.customerDetailsArb)," "),t.xp6(19),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.preambleEng," "),t.xp6(2),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.preambleArb," "),t.xp6(1),t.Q6J("ngIf",(null==e.contractFormData?null:e.contractFormData.contractClauses.length)>0),t.xp6(10),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.firstPartyEng," "),t.xp6(2),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.firstPartyArb," "),t.xp6(11),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.secondPartyEng," "),t.xp6(2),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.secondPartyArb," ")}}function Ou(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Eu,86,15,"div",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=(null==e.contractFormData?null:e.contractFormData.contractClauses.length)&&null!=e.contractFormData)}}let be=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(u),this.datepipe=e,this.oprService=o,this.fb=n,this.http=s,this.router=r,this.apiService=c,this.dialog=p,this.authService=u,this.utilService=d,this.translate=m,this.notifyService=h,this.validationService=C,this.dialogRef=A,this.referenceNumber="000/0000",this.grandTotal=0,this.siteCodeSelectList=[],this.type="",this.templatesSelectionList=[],this.skillSetsList=[],this.contractFormData={contractClauses:[],contractFormHead:""},this.isArabic=!1,this.date=new Date}ngOnInit(){this.loadInitialData()}loadCosting(){switch(this.type){case"ForAddingResources":this.loadAddResourceCosting();break;case"ForRemovingResources":this.getSkillsetOfEmployee(this.pvRequest.employeeNumber)}}loadAddResourceCosting(){this.apiService.get("PvAddResource/getPvAddResourceReqById",this.pvRequest.id).subscribe(e=>{if(null!=e){e.totalCost=0;for(let o=0;o<(null==e?void 0:e.resourceList.length);o++)e.totalCost+=(null==e?void 0:e.resourceList[o].pricePerUnit)*(null==e?void 0:e.resourceList[o].qty);this.resourceCostings=e}})}loadSkillSetsList(){this.apiService.getall("Skillset/GetSelectSkillsetList/").subscribe(e=>{this.skillSetsList=e})}loadContractTemplates(){this.apiService.getall(`ContractFormTemplates/getSelectionContractFormTemplates/${this.type}`).subscribe(e=>{null!=e&&(this.templatesSelectionList=e)})}OnTemplateSelection(e){if(""!=e.target.value){let o=Number(e.target.value);this.apiService.get("ContractFormTemplates/getContractFormTemplateById",o).subscribe(n=>{if(null!=n){this.templateData=n;for(let r=0;r<n.clauses.length;r++)n.clauses[r].id=0;this.contractFormData.contractClauses=n.clauses.slice(),this.contractFormData.contractFormHead=n.templateHead,this.contractFormData.contractFormHead.id=this.contractFormData.contractFormHead.id}})}else this.templateData=null}submit(){}loadProjectData(){this.apiService.getall(`Project/getProjectByProjectCode/${this.pvRequest.projectCode}`).subscribe(e=>{null!=e&&(this.projectData=e)})}loadDefaultContractForm(){this.apiService.post("ContractForm/getContractForm",{projectCode:this.pvRequest.projectCode,siteCode:this.pvRequest.siteCode,customerCode:this.pvRequest.customerCode,isAdendum:!0}).subscribe(o=>{null!=o&&(this.contractFormData=o)})}loadCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.pvRequest.customerCode}`).subscribe(e=>{null!=e&&(this.customerData=e,console.log(e),this.apiService.getall(`Company/getCompanyByCityCode/${e.custCityCode1}`).subscribe(o=>{null!=o&&(this.companyData=o,console.log(o))}),this.getCity(e.custCityCode1))})}loadInitialData(){this.loadDefaultContractForm(),this.templateData=null,this.isArabic=this.utilService.isArabic(),this.loadSkillSetsList(),this.loadProjectData(),this.loadCustomerData(),this.loadContractTemplates(),this.loadCosting(),this.getReferenceNumber()}getCity(e){this.apiService.getall(`City/getStateCountrybyCityCode/${e}`).subscribe(o=>{this.city=o,console.log(o)})}printComponent(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}printInvoice(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}closeModel(){this.dialogRef.close(!0)}createContractTemplate(){let e=this.utilService.openCrudDialog(this.dialog,ee);e.componentInstance.modalTitle="Create Template",e.componentInstance.modalBtnTitle="Add",e.componentInstance.contractTemplateData=this.contractFormData,e.componentInstance.id=0,e.componentInstance.type=this.type,e.afterClosed().subscribe(o=>{o&&!0===o&&this.loadInitialData()})}editContractTemplate(){let e=this.utilService.openCrudDialog(this.dialog,ee);e.componentInstance.modalTitle="Update Template",e.componentInstance.modalBtnTitle="Update",e.componentInstance.contractTemplateData=this.templateData,e.componentInstance.id=this.templateData.templateId,e.componentInstance.type=this.type,e.afterClosed().subscribe(o=>{o&&!0===o&&this.loadInitialData()})}getReferenceNumber(){this.referenceNumber=this.pvRequest.projectCode+"/"+this.pvRequest.siteCode+"/"+("ForAddingResources"==this.type?"AR":"ForRemovingResources"==this.type?"RR":"XX")+"/"+this.pvRequest.id}TranslateTaggedDataEng(e){var o,n,s,r,c,p;let u="Second: "+this.customerData.custName+" Commercial Register "+this.referenceNumber+", Whose address -"+this.customerData.custAddress1+","+(null===(o=this.city)||void 0===o?void 0:o.cityName)+", Kingdom of Saudi Arabia, Phone: "+(null===(n=this.customerData)||void 0===n?void 0:n.custPhone1)+", email:"+this.customerData.custEmail1+" represented in signing this contract by "+this.customerData.custSalesRep+".",d=e.replace(/<<customer>>/gi,u),m="Thanks God alone and then: On "+this.referenceNumber+" - Corresponding to "+this.translate.instant(this.date.toLocaleDateString())+" A.D. Agreement in city of "+(null===(s=this.city)||void 0===s?void 0:s.cityName)+" between both: First: "+(null===(r=this.companyData)||void 0===r?void 0:r.companyName)+", address: "+(null===(c=this.companyData)||void 0===c?void 0:c.companyAddress)+", Kingdom of Saudi Arabia, Phone: "+(null===(p=this.companyData)||void 0===p?void 0:p.phone)+"  represented in signing this contract by Mohammed Abdullah Al Mansaky as being COO STS Group.";return d.replace(/<<company>>/gi,m)}TranslateTaggedDataArb(e){var o,n,s,r,c,p,u;let d="\u062b\u0627\u0646\u064a\u0627: - \u0634\u0631\u0643\u0629 "+this.customerData.custArbName+" \u0633\u062c\u0644 \u062a\u062c\u0627\u0631\u064a "+this.referenceNumber+",\u0639\u0646\u0648\u0627\u0646\u0647\u0627"+this.customerData.custAddress1+","+(null===(o=this.city)||void 0===o?void 0:o.cityNameAr)+", \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629 \u060c \u0627\u0644\u0647\u0627\u062a\u0641  "+(null===(n=this.customerData)||void 0===n?void 0:n.custPhone1)+", \u0627\u064a\u0645\u064a\u0644"+this.customerData.custEmail1+" \u0648\u064a\u0645\u062b\u0644\u0647\u0627 \u0641\u064a \u0627\u0644\u062a\u0648\u0642\u064a\u0639 \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u0639\u0642\u062f \u0627\u0644\u0623\u0633\u062a\u0627\u0630 "+(null===(s=this.customerData)||void 0===s?void 0:s.custSalesRep)+".",m=e.replace(/<<customer>>/gi,d),h="\u0627\u0647\u0640 \u0627\u0644\u0645\u0648\u0627\u0641\u0642 \u0644\u062d\u0645\u062f \u0644\u0644\u0647 \u0648\u062d\u062f\u0647 \u0648\u0628\u0639\u062f: - \u0641\u064a \u064a\u0648\u0645"+this.referenceNumber+"\u0645 \u062a\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642"+this.translate.instant(this.date.toLocaleDateString())+" A.D. \u0627\u062a\u0641\u0627\u0642\u064a\u0629 \u0641\u064a \u0645\u062f\u064a\u0646\u0629 "+(null===(r=this.city)||void 0===r?void 0:r.cityName)+"\u0628\u064a\u0646 \u0627\u0644\u0627\u062b\u0646\u064a\u0646: \u0623\u0648\u0644\u0627:"+(null===(c=this.companyData)||void 0===c?void 0:c.companyName)+", \u0639\u0646\u0648\u0627\u0646: "+(null===(p=this.companyData)||void 0===p?void 0:p.companyAddress)+", \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629\u060c \u0647\u0627\u062a\u0641: "+(null===(u=this.companyData)||void 0===u?void 0:u.phone)+"  \u0645\u0645\u062b\u0644\u0629 \u0641\u064a \u062a\u0648\u0642\u064a\u0639 \u0647\u0630\u0627 \u0627\u0644\u0639\u0642\u062f \u0645\u0646 \u0642\u0628\u0644 Mohammed Abdullah Al Mansaky \u0643\u0645\u0627 \u064a\u062c\u0631\u064a  COO STS Group.";return m.replace(/<<company>>/gi,h)}getSkillSet(e){let o=this.skillSetsList.find(n=>n.value==e);return this.isArabic&&(o.text=o.textTwo),o}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}getSkillsetOfEmployee(e){this.apiService.post("skillset/employeeSkillsetForMonth",{employeeNumber:e,projectCode:this.pvRequest.projectCode,siteCode:this.pvRequest.siteCode,date:this.pvRequest.fromDate}).subscribe(n=>{this.pvRequest.nameInEnglish=null==n?void 0:n.nameInEnglish,this.pvRequest.nameInArabic=null==n?void 0:n.nameInArabic})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(W.f),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(T.uw),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addendum-form"]],features:[t.qOj],decls:15,vars:5,consts:[[4,"ngIf"],[3,"click",4,"ngIf"],["type","button","aria-hidden","true",1,"",3,"click"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"click"],["class","container-fluid invoice-container print-container","style"," width:850px; padding-top:5px;","id","printcontainer",4,"ngIf"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],[2,"page-break-after","always"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],[2,"width","50%","font-style","italic","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","50%","font-style","italic","text-align","right","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","50%","text-align","center","padding","10px"],[2,"width","50%","text-align","justify","padding","10px","vertical-align","top"],[2,"width","50%","text-align","left","padding","10px"],[2,"width","50%","text-align","right","padding","10px"],[2,"width","50%","text-align","left","padding","10px","white-space","pre-wrap","vertical-align","top"],[2,"width","50%","text-align","right","padding","10px","white-space","pre-wrap","vertical-align","top"],[4,"ngFor","ngForOf"],["colspan","2"],["class","col-md-12 col-lg-12","style","padding-top:5px",4,"ngIf"],[1,"col-md-12","col-lg-12",2,"padding-top","5px"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","5",2,"border","1px solid #878787","padding","5px","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","50%","text-align","center","padding","10px","vertical-align","top"],[2,"width","50%","text-align","left","padding","10px","vertical-align","top"],[2,"width","50%","text-align","right","padding","10px","vertical-align","top"],[2,"width","50%","text-align","justify","padding","10px","white-space","pre-wrap","vertical-align","top"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.YNc(1,Zu,7,7,"span",0),t.TgZ(2,"span"),t._UZ(3,"br"),t.qZA(),t.YNc(4,Cu,5,3,"span",0),t.YNc(5,Au,5,3,"span",0),t.TgZ(6,"span"),t.YNc(7,Tu,3,3,"button",1),t._uU(8,"\xa0 "),t.TgZ(9,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(10," Close"),t.qZA(),t.qZA(),t.qZA(),t._UZ(11,"br"),t._UZ(12,"br"),t._UZ(13,"br"),t.YNc(14,Ou,2,1,"div",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",0!=o.templatesSelectionList.length),t.xp6(3),t.Q6J("ngIf",0==o.templatesSelectionList.length||0==(null==o.contractFormData||null==o.contractFormData.contractFormHead?null:o.contractFormData.contractFormHead.id)),t.xp6(1),t.Q6J("ngIf",null!=o.templateData),t.xp6(2),t.Q6J("ngIf",(null==o.contractFormData||null==o.contractFormData.contractFormHead?null:o.contractFormData.contractFormHead.id)>0||null!=o.templateData),t.xp6(7),t.Q6J("ngIf",(null==o.contractFormData||null==o.contractFormData.contractFormHead?null:o.contractFormData.contractFormHead.id)>0||null!=o.templateData))},directives:[f.O5,l.YN,l.Kr,f.sg],pipes:[Z.X$],encapsulation:2}),i})();function ju(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function ku(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function Mu(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function Ru(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function Pu(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function Fu(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function Iu(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function Yu(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Ju(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Qu(i,a){if(1&i&&(t.TgZ(0,"td",39),t.YNc(1,Yu,3,3,"span",40),t.YNc(2,Ju,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function Bu(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_EmpMapped")," "))}function Hu(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Vu(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function $u(i,a){if(1&i&&(t.TgZ(0,"td",39),t.YNc(1,Hu,3,3,"span",40),t.YNc(2,Vu,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isEmpMapped)("ngIfElse",o)}}function Gu(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Merged")," "))}function Wu(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function zu(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Xu(i,a){if(1&i&&(t.TgZ(0,"td",39),t.YNc(1,Wu,3,3,"span",40),t.YNc(2,zu,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isMerged)("ngIfElse",o)}}function Ku(i,a){1&i&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function td(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",49),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function ed(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",50),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function od(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",51),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function id(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,td,3,1,"span",47),t.YNc(2,ed,3,1,"span",47),t.YNc(3,od,3,1,"span",47),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)&&!e.isMerged)}}function nd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().mapEmpToRes(n.id)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Mapp_Employee_To_Resource"))}}function ad(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().mergeRequest(n.id)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Merge_Resources"))}}function sd(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,nd,3,1,"span",47),t.YNc(2,ad,3,1,"span",47),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",(e.canEditReq||e.isAdmin)&&e.isEmpMapped)}}function rd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewRequest(n.id)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_Request"))}}function ld(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewMappings(n.id)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_Resource_Mapping"))}}function cd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendumForm(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Generate_Addendum"))}}function pd(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",56),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function ud(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",57),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function dd(i,a){if(1&i&&(t.TgZ(0,"td",45),t.YNc(1,id,4,3,"span",46),t.YNc(2,sd,3,2,"span",46),t.YNc(3,rd,3,1,"span",47),t.YNc(4,ld,3,1,"span",47),t.YNc(5,cd,3,1,"span",47),t.YNc(6,pd,3,1,"span",47),t.YNc(7,ud,3,1,"span",47),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isApproved&&!e.isMerged),t.xp6(1),t.Q6J("ngIf",!e.isEmpMapped),t.xp6(1),t.Q6J("ngIf",e.isEmpMapped),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&e.fileUrl)}}function md(i,a){1&i&&t._UZ(0,"tr",58)}function _d(i,a){1&i&&t._UZ(0,"tr",59)}const gd=function(){return{standalone:!0}};let hd=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.oprService=h,this.translate=C,this.displayedColumns=["customerCode","siteCode","projectCode","isApproved","isEmpMapped","isMerged","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isUdpating=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvAddResource/getPvAddResourceReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u?"Confirming_Approve_Request"==n?this.apiService.get("PvAddResource/ApproveReqPvAddResourceReqById",e).subscribe(d=>{this.isUdpating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isUdpating=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)}):"Confirming_Merge_Request"==n&&this.apiService.get("PvAddResource/mergePvAddResourceReqById",e).subscribe(d=>{this.isUdpating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isUdpating=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)}):(this.notifyService.showError(this.translate.instant("Something_Went_Wrong")),this.isUdpating=!1)})}create(){this.openDialogManage(0,g.O.create,"New_Request_For_Adding_Resources","Add",Ht)}edit(e){this.openDialogManage(e,g.O.update,"Updating_Request_For_Adding_Resources","Update",Ht)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PvAddResource",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e,g.O.create,"Request_For_Add_Resource","View",Ht)}viewAddendumForm(e){let o=this.utilService.openCrudDialog(this.dialog,be);o.componentInstance.modalTitle=this.translate.instant("Addendum_For_Adding_Resources"),o.componentInstance.pvRequest=e,o.componentInstance.type="ForAddingResources",o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewMappings(e){this.openDialogManage(e,g.O.create,"Employee_Mapping_For_Add_Resources","View",Jt)}approveRequest(e){this.isUdpating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUdpating=!0,this.openConfirmationDialogManage(e,g.O.update,"Confirming_Approve_Request","Approve",xt,"general"))}mergeRequest(e){this.isUdpating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUdpating=!0,this.openConfirmationDialogManage(e,g.O.update,"Confirming_Merge_Request","Merge",xt,"general"))}mapEmpToRes(e){this.openDialogManage(e,g.O.create,"Employee_To_Resource_Mapping","Add",Jt)}viewAddendum(e){window.open(e.fileUrl)}uploadAdendum(e){let o=this.oprService.openAutoWidthDialog(this.dialog,ie);o.componentInstance.requestData=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-resource"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:64,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"col-md-5","col-lg-5","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","isApproved"],["matColumnDef","isEmpMapped"],["matColumnDef","isMerged"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-users"],[1,"fas","fa-redo"],[1,"fas","fa-eye"],[1,"far","fa-arrow-alt-circle-down"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.TgZ(36,"div",22),t.ynx(37),t.TgZ(38,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(39,24),t.YNc(40,ju,3,3,"th",25),t.YNc(41,ku,2,1,"td",26),t.BQk(),t.ynx(42,27),t.YNc(43,Mu,3,3,"th",25),t.YNc(44,Ru,2,1,"td",26),t.BQk(),t.ynx(45,28),t.YNc(46,Pu,3,3,"th",25),t.YNc(47,Fu,2,1,"td",26),t.BQk(),t.ynx(48,29),t.YNc(49,Iu,3,3,"th",25),t.YNc(50,Qu,4,2,"td",26),t.BQk(),t.ynx(51,30),t.YNc(52,Bu,3,3,"th",25),t.YNc(53,$u,4,2,"td",26),t.BQk(),t.ynx(54,31),t.YNc(55,Gu,3,3,"th",25),t.YNc(56,Xu,4,2,"td",26),t.BQk(),t.ynx(57,32),t.YNc(58,Ku,3,3,"th",33),t.YNc(59,dd,8,7,"td",34),t.BQk(),t.YNc(60,md,1,0,"tr",35),t.YNc(61,_d,1,0,"tr",36),t.qZA(),t.ynx(62),t.TgZ(63,"mat-paginator",37),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Requests_For_Adding_Resources")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,gd)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(33,26,"New_Request")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function fd(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Request_Number"),":",e.id," ")}}function Zd(i,a){if(1&i&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function Cd(i,a){if(1&i&&(t.TgZ(0,"span",35),t._UZ(1,"validation-message",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.customerCode)}}function Ad(i,a){1&i&&(t.TgZ(0,"span",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Td(i,a){if(1&i&&(t.TgZ(0,"option",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function vd(i,a){if(1&i&&(t.TgZ(0,"span",35),t._UZ(1,"validation-message",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.projectCode)}}function xd(i,a){1&i&&(t.TgZ(0,"span",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function qd(i,a){if(1&i&&(t.TgZ(0,"option",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function bd(i,a){if(1&i&&(t.TgZ(0,"span",35),t._UZ(1,"validation-message",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function yd(i,a){1&i&&(t.TgZ(0,"span",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Sd(i,a){if(1&i&&(t.TgZ(0,"mat-option",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function wd(i,a){if(1&i&&(t.TgZ(0,"span",35),t._UZ(1,"validation-message",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.employeeNumber)}}function Ud(i,a){1&i&&(t.TgZ(0,"span",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Ld(i,a){if(1&i&&(t.TgZ(0,"span",35),t._UZ(1,"validation-message",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.fromDate)}}function Dd(i,a){1&i&&(t.TgZ(0,"span",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Nd(i,a){1&i&&(t._UZ(0,"input",38),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let Rt=(()=>{class i extends q{constructor(e,o,n,s,r,c,p){super(s),this.datepipe=e,this.translate=o,this.fb=n,this.authService=s,this.utilService=r,this.apiService=c,this.dialogRef=p,this.readonly="",this.siteCodeList=[],this.customerCode="",this.empNumber="",this.isDataLoading=!1,this.custCodeControl=new l.NI("",l.kI.required),this.empNumberControl=new l.NI("",l.kI.required),this.isArabic=!1,this.isFromProjectsAction=!1,this.projectsList=[],this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,tt.O)(this.customerCode),(0,et.b)(r.autoDelay()),(0,ot.x)(),(0,it.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterCustCodes(u||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],projectCode:["",l.kI.required],siteCode:["",l.kI.required],id:[this.id],fromDate:["",l.kI.required],employeeNumber:["",l.kI.required]}),this.isFromProjectsAction&&(this.custCodeControl.setValue(this.projectData.customerCode),this.form.controls.siteCode.setValue(this.projectData.siteCode),this.form.controls.projectCode.setValue(this.projectData.projectCode),this.form.controls.customerCode.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode),this.loadSiteCodes(this.projectData.projectCode),this.onSelectionSiteCode())}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o?n=e.target.value:3==o&&(n=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){let r=this.custCodeControl.value;this.form.controls.customerCode.setValue(r),this.loadProjectsList(r)}else this.form.controls.customerCode.setValue("");this.form.controls.projectCode.setValue(""),this.form.controls.siteCode.setValue(""),this.form.controls.employeeNumber.setValue(""),this.form.controls.fromDate.setValue(""),this.empNumberControl.setValue(""),this.projectsList=[],this.siteCodeList=[]})}onSelectionEmployee(e,o){let n="";1==o?n=e.option.value.toString():2==o?n=e.target.value.toString():3==o&&(n=e),this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+n).subscribe(s=>{this.form.controls.employeeNumber.setValue(null!=s?this.empNumberControl.value:"")})}onSelectionProjectCode(){this.loadSiteCodes(this.form.controls.projectCode.value),""!=this.form.controls.projectCode.value&&(this.isDataLoading=!0,this.form.controls.siteCode.setValue(""),this.form.controls.employeeNumber.setValue(""),this.form.controls.fromDate.setValue(""),this.empNumberControl.setValue("")),this.isDataLoading=!1}getProjectData(){this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectData=e})}loadSiteCodes(e){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(o=>{this.siteCodeList=o,this.isDataLoading=!1})}loadProjectsList(e){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(o=>{this.projectsList=o,this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.apiService.get("PvRemoveResource/getPvRemoveResourceReqById",this.id).subscribe(e=>{null!=e&&(this.requestData=e,this.custCodeControl.setValue(e.customerCode),this.empNumberControl.setValue(e.employeeNumber),this.loadProjectsList(e.customerCode),this.loadSiteCodes(e.projectCode),this.form.controls.projectCode.setValue(e.projectCode),this.form.controls.customerCode.setValue(e.customerCode),this.form.controls.siteCode.setValue(e.siteCode),this.form.controls.employeeNumber.setValue(e.employeeNumber),this.form.controls.fromDate.setValue(e.fromDate),this.getProjectData(),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){this.form.value.projectCode=this.form.controls.projectCode.value,this.form.value.siteCode=this.form.controls.siteCode.value;let e=new Date(this.form.controls.fromDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.fromDate=e,this.form.valid?this.apiService.post("PvRemoveResource",this.form.value).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)}):this.utilService.FillUpFields()}onSelectionSiteCode(){""!=this.form.controls.siteCode.value&&(this.form.controls.fromDate.setValue(""),this.filteredEmployees=this.empNumberControl.valueChanges.pipe((0,tt.O)(this.empNumber),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmpNumbers(e||"")))),this.getProjectData(),this.form.controls.employeeNumber.setValue(""),this.form.controls.fromDate.setValue(""),this.empNumberControl.setValue(""))}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(Z.sK),t.Y36(l.qu),t.Y36(x._),t.Y36(y.t),t.Y36(b.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-req-remove-resource"]],features:[t.qOj],decls:98,vars:80,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-4","col-lg-4"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","projectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["auto3","matAutocomplete"],[1,"input-group"],["formControlName","fromDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","max","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"control"],[3,"value"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.YNc(7,fd,3,4,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",7),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"auto-loader",15),t._UZ(22,"input",16),t.ALo(23,"translate"),t.ALo(24,"translate"),t.TgZ(25,"mat-autocomplete",17,18),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1)}),t.YNc(27,Zd,2,2,"mat-option",19),t.ALo(28,"async"),t.qZA(),t.qZA(),t.YNc(29,Cd,2,1,"span",20),t.YNc(30,Ad,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(31,"div",11),t.TgZ(32,"label",12),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div",13),t.TgZ(36,"div",14),t.TgZ(37,"select",21),t.NdJ("change",function(){return o.onSelectionProjectCode()}),t.TgZ(38,"option",22),t._uU(39),t.ALo(40,"translate"),t.ALo(41,"translate"),t.qZA(),t.YNc(42,Td,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(43,vd,2,1,"span",20),t.YNc(44,xd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(45,"div",11),t.TgZ(46,"label",12),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",13),t.TgZ(50,"div",14),t.TgZ(51,"select",24),t.NdJ("change",function(){return o.onSelectionSiteCode()}),t.TgZ(52,"option",22),t._uU(53),t.ALo(54,"translate"),t.ALo(55,"translate"),t.qZA(),t.YNc(56,qd,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(57,bd,2,1,"span",20),t.YNc(58,yd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(59,"div",11),t.TgZ(60,"label",12),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"div",13),t.TgZ(64,"div",14),t._UZ(65,"auto-loader",15),t._UZ(66,"input",16),t.ALo(67,"translate"),t.ALo(68,"translate"),t.TgZ(69,"mat-autocomplete",17,25),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1)}),t.YNc(71,Sd,2,3,"mat-option",19),t.ALo(72,"async"),t.qZA(),t.qZA(),t.YNc(73,wd,2,1,"span",20),t.YNc(74,Ud,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(75,"div",11),t.TgZ(76,"div",13),t.TgZ(77,"label",12),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"div",13),t.TgZ(81,"div",26),t.TgZ(82,"input",27),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(88);return o.openDatePicker(r)}),t.ALo(83,"translate"),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"div",28),t._UZ(86,"mat-datepicker-toggle",29),t._UZ(87,"mat-datepicker",null,30),t.qZA(),t.qZA(),t.YNc(89,Ld,2,1,"span",20),t.YNc(90,Dd,3,3,"span",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(91,"div",7),t.TgZ(92,"div",8),t.TgZ(93,"div",31),t.TgZ(94,"input",32),t.NdJ("click",function(){return o.closeModel()}),t.ALo(95,"translate"),t.qZA(),t._uU(96," \xa0 "),t.YNc(97,Nd,2,3,"input",33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),s=t.MAs(26),r=t.MAs(70),c=t.MAs(88);let p,u,d,m,h,C,A,S,D,U;t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.id>0),t.xp6(10),t.Oqu(t.lcZ(18,44,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(23,46,"Please_Enter")," ",t.lcZ(24,48,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",s),t.xp6(5),t.Q6J("ngForOf",t.lcZ(28,50,o.filteredCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(p=o.form.get("customerCode"))&&p.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(u=o.form.get("customerCode"))?null:u.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(34,52,"Project")),t.xp6(6),t.AsE("",t.lcZ(40,54,"Select")," ",t.lcZ(41,56,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.projectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(d=o.form.get("projectCode"))&&d.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(m=o.form.get("projectCode"))?null:m.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(48,58,"Site")),t.xp6(6),t.AsE("",t.lcZ(54,60,"Select")," ",t.lcZ(55,62,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(h=o.form.get("siteCode"))&&h.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(C=o.form.get("siteCode"))?null:C.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(62,64,"Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(67,66,"Please_Enter")," ",t.lcZ(68,68,"Employee"),""),t.Q6J("formControl",o.empNumberControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(72,70,o.filteredEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(A=o.form.get("employeeNumber"))&&A.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(S=o.form.get("employeeNumber"))?null:S.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.hij(" ",t.lcZ(79,72,"From_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(83,74,"Please_Enter")," ",t.lcZ(84,76,"From_Date"),""),t.Q6J("matDatepicker",c)("min",null==o.projectData?null:o.projectData.startDate)("max",null==o.projectData?null:o.projectData.endDate),t.xp6(4),t.Q6J("for",c),t.xp6(3),t.Q6J("ngIf",!(null!=(D=o.form.get("fromDate"))&&D.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(U=o.form.get("fromDate"))?null:U.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.s9C("value",t.lcZ(95,78,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle)}},directives:[l._Y,l.JL,l.sg,f.O5,ht.z,l.Fj,at.ZL,l.JJ,l.oH,at.XC,f.sg,l.EJ,l.u,l.YN,l.Kr,M.hl,M.nW,gt.R9,M.Mq,St.ey,G.s],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function Ed(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Request_Number"),":",e.id," ")}}function Od(i,a){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function jd(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcCustomerCode)}}function kd(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Md(i,a){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function Rd(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcProjectCode)}}function Pd(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Fd(i,a){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function Id(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcSiteCode)}}function Yd(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Jd(i,a){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function Qd(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.employeeNumber)}}function Bd(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Hd(i,a){if(1&i&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function Vd(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destCustomerCode)}}function $d(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Gd(i,a){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function Wd(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destProjectCode)}}function zd(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Xd(i,a){if(1&i&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function Kd(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destSiteCode)}}function tm(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function em(i,a){if(1&i&&(t.TgZ(0,"span",40),t._UZ(1,"validation-message",41),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.fromDate)}}function om(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function im(i,a){1&i&&(t._UZ(0,"input",43),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let Pt=(()=>{class i extends q{constructor(e,o,n,s,r,c,p){super(s),this.datepipe=e,this.translate=o,this.fb=n,this.authService=s,this.utilService=r,this.apiService=c,this.dialogRef=p,this.readonly="",this.srcSiteCodeList=[],this.destSiteCodeList=[],this.srcCustomerCode="",this.destCustomerCode="",this.empNumber="",this.isDataLoading=!1,this.srcCustCodeControl=new l.NI("",l.kI.required),this.destCustCodeControl=new l.NI("",l.kI.required),this.empNumberControl=new l.NI("",l.kI.required),this.isArabic=!1,this.srcProjectsList=[],this.destProjectsList=[],this.isFromProjectsAction=!1,this.filteredSrcCustCodes=this.srcCustCodeControl.valueChanges.pipe((0,tt.O)(this.srcCustomerCode),(0,et.b)(r.autoDelay()),(0,ot.x)(),(0,it.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterSrcCustCodes(u||"")))),this.filteredDestCustCodes=this.destCustCodeControl.valueChanges.pipe((0,tt.O)(this.destCustomerCode),(0,et.b)(r.autoDelay()),(0,ot.x)(),(0,it.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterDestCustCodes(u||""))))}filterSrcCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterDestCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.srcProjectCode.value}/${this.form.controls.srcSiteCode.value}/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}setForm(){this.form=this.fb.group({srcCustomerCode:["",l.kI.required],destCustomerCode:["",l.kI.required],srcProjectCode:["",l.kI.required],destProjectCode:["",l.kI.required],srcSiteCode:["",l.kI.required],destSiteCode:["",l.kI.required],id:[this.id,l.kI.required],fromDate:["",l.kI.required],employeeNumber:["",l.kI.required]}),this.isFromProjectsAction&&(this.srcCustCodeControl.setValue(this.projectData.customerCode),this.form.controls.srcSiteCode.setValue(this.projectData.siteCode),this.form.controls.srcProjectCode.setValue(this.projectData.projectCode),this.form.controls.srcCustomerCode.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode,"src"),this.loadSiteCodes(this.projectData.projectCode,"src"),this.onSelectionSiteCode("src"))}onSelectionCustomerCode(e,o,n){let s="";1==o?s=e.option.value:2==o?s=e.target.value:3==o&&(s=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+s).subscribe(r=>{null!=r?("src"==n&&(this.form.controls.srcCustomerCode.setValue(s),this.loadProjectsList(s,"src"),this.form.controls.srcSiteCode.setValue(""),this.form.controls.srcProjectCode.setValue(""),this.srcSiteCodeList=[],this.empNumberControl.setValue(""),this.form.controls.employeeNumber.setValue(""),this.form.controls.fromDate.setValue("")),"dest"==n&&(this.form.controls.destCustomerCode.setValue(s),this.loadProjectsList(s,"dest"),this.form.controls.destSiteCode.setValue(""),this.form.controls.destProjectCode.setValue(""),this.destSiteCodeList=[])):("src"==n&&(this.form.controls.srcCustomerCode.setValue(""),this.srcCustCodeControl.setValue(""),this.srcProjectsList=[],this.srcSiteCodeList=[],this.form.controls.srcProjectCode.setValue(""),this.form.controls.srcSiteCode.setValue(""),this.empNumberControl.setValue(""),this.form.controls.employeeNumber.setValue(""),this.form.controls.fromDate.setValue("")),"dest"==n&&(this.form.controls.destCustomerCode.setValue(""),this.destCustCodeControl.setValue(""),this.destProjectsList=[],this.destSiteCodeList=[],this.form.controls.destProjectCode.setValue(""),this.form.controls.destSiteCode.setValue("")))})}onSelectionEmployee(e,o){let n="";1==o?n=e.option.value.toString():2==o?n=e.target.value.toString():3==o&&(n=e),this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+n).subscribe(s=>{this.form.controls.employeeNumber.setValue(null!=s?this.empNumberControl.value:"")})}onSelectionProjectCode(e){"src"==e&&(this.form.controls.srcSiteCode.setValue(""),this.srcSiteCodeList=[],this.loadSiteCodes(this.form.controls.srcProjectCode.value,e),this.form.controls.fromDate.setValue(""),this.empNumberControl.setValue(""),this.form.controls.employeeNumber.setValue("")),"dest"==e&&(this.form.controls.destSiteCode.setValue(""),this.destSiteCodeList=[],this.loadSiteCodes(this.form.controls.destProjectCode.value,e)),this.isDataLoading=!1}getProjectData(e){"src"==e?this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.srcProjectCode.value}/${this.form.controls.srcSiteCode.value}`).subscribe(o=>{this.srcProjectData=o}):this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.destProjectCode.value}/${this.form.controls.destSiteCode.value}`).subscribe(o=>{this.destProjectData=o})}loadSiteCodes(e,o){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(n=>{"src"==o&&(this.srcSiteCodeList=n),"dest"==o&&(this.destSiteCodeList=n),this.isDataLoading=!1})}loadProjectsList(e,o){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(n=>{"src"==o&&(this.srcProjectsList=n),"dest"==o&&(this.destProjectsList=n),this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.apiService.get("PvTransferResource/getPvTransferResourceReqById",this.id).subscribe(e=>{null!=e&&(console.log(e),this.requestData=e,this.srcCustCodeControl.setValue(e.srcCustomerCode),this.destCustCodeControl.setValue(e.destCustomerCode),this.empNumberControl.setValue(e.employeeNumber),this.loadProjectsList(e.srcCustomerCode,"src"),this.loadProjectsList(e.destCustomerCode,"dest"),this.form.controls.srcProjectCode.setValue(e.srcProjectCode),this.form.controls.destProjectCode.setValue(e.destProjectCode),this.loadSiteCodes(e.srcProjectCode,"src"),this.loadSiteCodes(e.destProjectCode,"dest"),this.form.controls.srcCustomerCode.setValue(e.srcCustomerCode),this.form.controls.destCustomerCode.setValue(e.destCustomerCode),this.form.controls.srcSiteCode.setValue(e.srcSiteCode),this.form.controls.destSiteCode.setValue(e.destSiteCode),this.form.controls.employeeNumber.setValue(e.employeeNumber),this.form.controls.fromDate.setValue(e.fromDate),this.getProjectData("dest"),this.getProjectData("src"),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){if(this.form.valid){this.form.value.srcCustomerCode=this.srcCustCodeControl.value,this.form.value.destCustomerCode=this.destCustCodeControl.value;let e=new Date(this.form.controls.fromDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.fromDate=e,this.apiService.post("PvTransferResource",this.form.value).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}else this.utilService.FillUpFields()}onSelectionSiteCode(e){"src"==e&&(""!=this.form.controls.srcSiteCode.value&&(this.isDataLoading=!0,this.getProjectData("src"),this.form.controls.fromDate.setValue("")),this.empNumberControl.setValue(""),this.filteredEmployees=this.empNumberControl.valueChanges.pipe((0,tt.O)(this.empNumber),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filterEmpNumbers(o||"")))))}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(Z.sK),t.Y36(l.qu),t.Y36(x._),t.Y36(y.t),t.Y36(b.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-transfer-resource-req"]],features:[t.qOj],decls:144,vars:121,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","srcProjectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","srcSiteCode",1,"custom-select","mr-sm-2",3,"change"],["auto3","matAutocomplete"],[1,"col-md-12","col-lg-12",2,"padding","5px","text-align","center","font-size","xx-large"],[1,"fas","fa-arrow-alt-circle-down"],["auto2","matAutocomplete"],["formControlName","destProjectCode",1,"custom-select","mr-sm-2",3,"change"],["formControlName","destSiteCode",1,"custom-select","mr-sm-2",3,"change"],[1,"input-group"],["formControlName","fromDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","max","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"control"],[3,"value"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.YNc(7,Ed,3,4,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",7),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"auto-loader",15),t._UZ(22,"input",16),t.ALo(23,"translate"),t.ALo(24,"translate"),t.TgZ(25,"mat-autocomplete",17,18),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1,"src")}),t.YNc(27,Od,2,2,"mat-option",19),t.ALo(28,"async"),t.qZA(),t.qZA(),t.YNc(29,jd,2,1,"span",20),t.YNc(30,kd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(31,"div",11),t.TgZ(32,"label",12),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div",13),t.TgZ(36,"div",14),t.TgZ(37,"select",21),t.NdJ("change",function(){return o.onSelectionProjectCode("src")}),t.TgZ(38,"option",22),t._uU(39),t.ALo(40,"translate"),t.ALo(41,"translate"),t.qZA(),t.YNc(42,Md,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(43,Rd,2,1,"span",20),t.YNc(44,Pd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(45,"div",11),t.TgZ(46,"label",12),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",13),t.TgZ(50,"div",14),t.TgZ(51,"select",24),t.NdJ("change",function(){return o.onSelectionSiteCode("src")}),t.TgZ(52,"option",22),t._uU(53),t.ALo(54,"translate"),t.ALo(55,"translate"),t.qZA(),t.YNc(56,Fd,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(57,Id,2,1,"span",20),t.YNc(58,Yd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(59,"div",11),t.TgZ(60,"label",12),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"div",13),t.TgZ(64,"div",14),t._UZ(65,"auto-loader",15),t._UZ(66,"input",16),t.ALo(67,"translate"),t.ALo(68,"translate"),t.TgZ(69,"mat-autocomplete",17,25),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1)}),t.YNc(71,Jd,2,3,"mat-option",19),t.ALo(72,"async"),t.qZA(),t.qZA(),t.YNc(73,Qd,2,1,"span",20),t.YNc(74,Bd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(75,"div",26),t._UZ(76,"i",27),t.qZA(),t.TgZ(77,"div",11),t.TgZ(78,"label",12),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"div",13),t.TgZ(82,"div",14),t._UZ(83,"auto-loader",15),t._UZ(84,"input",16),t.ALo(85,"translate"),t.ALo(86,"translate"),t.TgZ(87,"mat-autocomplete",17,28),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1,"dest")}),t.YNc(89,Hd,2,2,"mat-option",19),t.ALo(90,"async"),t.qZA(),t.qZA(),t.YNc(91,Vd,2,1,"span",20),t.YNc(92,$d,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(93,"div",11),t.TgZ(94,"label",12),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"div",13),t.TgZ(98,"div",14),t.TgZ(99,"select",29),t.NdJ("change",function(){return o.onSelectionProjectCode("dest")}),t.TgZ(100,"option",22),t._uU(101),t.ALo(102,"translate"),t.ALo(103,"translate"),t.qZA(),t.YNc(104,Gd,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(105,Wd,2,1,"span",20),t.YNc(106,zd,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(107,"div",11),t.TgZ(108,"label",12),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"div",13),t.TgZ(112,"div",14),t.TgZ(113,"select",30),t.NdJ("change",function(){return o.onSelectionSiteCode("dest")}),t.TgZ(114,"option",22),t._uU(115),t.ALo(116,"translate"),t.ALo(117,"translate"),t.qZA(),t.YNc(118,Xd,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(119,Kd,2,1,"span",20),t.YNc(120,tm,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(121,"div",11),t.TgZ(122,"div",13),t.TgZ(123,"label",12),t._uU(124),t.ALo(125,"translate"),t.qZA(),t.TgZ(126,"div",13),t.TgZ(127,"div",31),t.TgZ(128,"input",32),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(134);return o.openDatePicker(r)}),t.ALo(129,"translate"),t.ALo(130,"translate"),t.qZA(),t.TgZ(131,"div",33),t._UZ(132,"mat-datepicker-toggle",34),t._UZ(133,"mat-datepicker",null,35),t.qZA(),t.qZA(),t.YNc(135,em,2,1,"span",20),t.YNc(136,om,3,3,"span",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(137,"div",7),t.TgZ(138,"div",8),t.TgZ(139,"div",36),t.TgZ(140,"input",37),t.NdJ("click",function(){return o.closeModel()}),t.ALo(141,"translate"),t.qZA(),t._uU(142," \xa0 "),t.YNc(143,im,2,3,"input",38),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),s=t.MAs(26),r=t.MAs(70),c=t.MAs(88),p=t.MAs(134);let u,d,m,h,C,A,S,D,U,R,O,J,F,nt,$,z;t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.id>0),t.xp6(10),t.Oqu(t.lcZ(18,65,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(23,67,"Please_Enter")," ",t.lcZ(24,69,"Customer_Code"),""),t.Q6J("formControl",o.srcCustCodeControl)("matAutocomplete",s),t.xp6(5),t.Q6J("ngForOf",t.lcZ(28,71,o.filteredSrcCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(u=o.form.get("srcCustomerCode"))&&u.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(d=o.form.get("srcCustomerCode"))?null:d.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(34,73,"Project")),t.xp6(6),t.AsE("",t.lcZ(40,75,"Select")," ",t.lcZ(41,77,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.srcProjectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(m=o.form.get("srcProjectCode"))&&m.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(h=o.form.get("srcProjectCode"))?null:h.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(48,79,"Site")),t.xp6(6),t.AsE("",t.lcZ(54,81,"Select")," ",t.lcZ(55,83,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.srcSiteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(C=o.form.get("srcSiteCode"))&&C.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(A=o.form.get("srcSiteCode"))?null:A.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(62,85,"Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(67,87,"Please_Enter")," ",t.lcZ(68,89,"Employee"),""),t.Q6J("formControl",o.empNumberControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(72,91,o.filteredEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(S=o.form.get("employeeNumber"))&&S.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(D=o.form.get("employeeNumber"))?null:D.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(5),t.Oqu(t.lcZ(80,93,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(85,95,"Please_Enter")," ",t.lcZ(86,97,"Customer_Code"),""),t.Q6J("formControl",o.destCustCodeControl)("matAutocomplete",c),t.xp6(5),t.Q6J("ngForOf",t.lcZ(90,99,o.filteredDestCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(U=o.form.get("destCustomerCode"))&&U.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(R=o.form.get("destCustomerCode"))?null:R.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(96,101,"Project")),t.xp6(6),t.AsE("",t.lcZ(102,103,"Select")," ",t.lcZ(103,105,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.destProjectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(O=o.form.get("destProjectCode"))&&O.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(J=o.form.get("destProjectCode"))?null:J.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(110,107,"Site")),t.xp6(6),t.AsE("",t.lcZ(116,109,"Select")," ",t.lcZ(117,111,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.destSiteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(F=o.form.get("destSiteCode"))&&F.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(nt=o.form.get("destSiteCode"))?null:nt.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.hij(" ",t.lcZ(125,113,"From_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(129,115,"Please_Enter")," ",t.lcZ(130,117,"From_Date"),""),t.Q6J("matDatepicker",p)("min",null==o.srcProjectData?null:o.srcProjectData.startDate)("max",null==o.srcProjectData?null:o.srcProjectData.endDate),t.xp6(4),t.Q6J("for",p),t.xp6(3),t.Q6J("ngIf",!(null!=($=o.form.get("fromDate"))&&$.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(z=o.form.get("fromDate"))?null:z.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.s9C("value",t.lcZ(141,119,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle)}},directives:[l._Y,l.JL,l.sg,f.O5,ht.z,l.Fj,at.ZL,l.JJ,l.oH,at.XC,f.sg,l.EJ,l.u,l.YN,l.Kr,M.hl,M.nW,gt.R9,M.Mq,St.ey,G.s],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function nm(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Request_Number"),":",e.id," ")}}function am(i,a){if(1&i&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function sm(i,a){if(1&i&&(t.TgZ(0,"span",39),t._UZ(1,"validation-message",40),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.customerCode)}}function rm(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function lm(i,a){if(1&i&&(t.TgZ(0,"option",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function cm(i,a){if(1&i&&(t.TgZ(0,"span",39),t._UZ(1,"validation-message",40),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.projectCode)}}function pm(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function um(i,a){if(1&i&&(t.TgZ(0,"option",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function dm(i,a){if(1&i&&(t.TgZ(0,"span",39),t._UZ(1,"validation-message",40),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function mm(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function _m(i,a){if(1&i&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function gm(i,a){if(1&i&&(t.TgZ(0,"span",39),t._UZ(1,"validation-message",40),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.resignedEmployeeNumber)}}function hm(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function fm(i,a){if(1&i&&(t.TgZ(0,"mat-option",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function Zm(i,a){if(1&i&&(t.TgZ(0,"span",39),t._UZ(1,"validation-message",40),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.replacedEmployeeNumber)}}function Cm(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Am(i,a){if(1&i&&(t.TgZ(0,"span",39),t._UZ(1,"validation-message",40),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.fromDate)}}function Tm(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function vm(i,a){1&i&&(t._UZ(0,"input",42),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let Mt=(()=>{class i extends q{constructor(e,o,n,s,r,c,p){super(s),this.datepipe=e,this.translate=o,this.fb=n,this.authService=s,this.utilService=r,this.apiService=c,this.dialogRef=p,this.readonly="",this.siteCodeList=[],this.customerCode="",this.empNumber="",this.isDataLoading=!1,this.custCodeControl=new l.NI("",l.kI.required),this.resEmpNumberControl=new l.NI("",l.kI.required),this.repEmpNumberControl=new l.NI("",l.kI.required),this.isArabic=!1,this.projectsList=[],this.isFromProjectsAction=!1,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,tt.O)(this.customerCode),(0,et.b)(r.autoDelay()),(0,ot.x)(),(0,it.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterCustCodes(u||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.isDataLoading=!0,this.setForm(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],projectCode:["",l.kI.required],siteCode:["",l.kI.required],id:[this.id],fromDate:["",l.kI.required],resignedEmployeeNumber:["",l.kI.required],replacedEmployeeNumber:["",l.kI.required]}),this.isFromProjectsAction&&(this.custCodeControl.setValue(this.projectData.customerCode),this.form.controls.siteCode.setValue(this.projectData.siteCode),this.form.controls.projectCode.setValue(this.projectData.projectCode),this.form.controls.customerCode.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode),this.loadSiteCodes(this.projectData.projectCode),this.onSelectionSiteCode())}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o?n=e.target.value:3==o&&(n=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){let r=this.custCodeControl.value;this.form.controls.customerCode.setValue(r),this.loadProjectsList(r)}else this.form.controls.customerCode.setValue("");this.form.controls.projectCode.setValue(""),this.form.controls.siteCode.setValue(""),this.form.controls.resignedEmployeeNumber.setValue(""),this.form.controls.replacedEmployeeNumber.setValue(""),this.form.controls.fromDate.setValue(""),this.resEmpNumberControl.setValue(""),this.repEmpNumberControl.setValue(""),this.projectsList=[],this.siteCodeList=[]})}onSelectionEmployee(e,o,n){let s="";1==o?s=e.option.value.toString():2==o?s=e.target.value.toString():3==o&&(s=e),this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+s).subscribe(r=>{null!=r?("resigned"==n&&this.form.controls.resignedEmployeeNumber.setValue(this.resEmpNumberControl.value),"replaced"==n&&this.form.controls.replacedEmployeeNumber.setValue(this.repEmpNumberControl.value)):("resigned"==n&&this.form.controls.resignedEmployeeNumber.setValue(""),"replaced"==n&&this.form.controls.replacedEmployeeNumber.setValue(""))})}onSelectionProjectCode(){this.loadSiteCodes(this.form.controls.projectCode.value),""!=this.form.controls.projectCode.value&&(this.isDataLoading=!0,this.form.controls.siteCode.setValue(""),this.form.controls.resignedEmployeeNumber.setValue(""),this.form.controls.replacedEmployeeNumber.setValue(""),this.form.controls.fromDate.setValue(""),this.resEmpNumberControl.setValue(""),this.repEmpNumberControl.setValue("")),this.isDataLoading=!1}getProjectData(){this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectData=e})}loadSiteCodes(e){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(o=>{this.siteCodeList=o,this.isDataLoading=!1})}loadProjectsList(e){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(o=>{this.projectsList=o,this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.filteredResEmployees=this.resEmpNumberControl.valueChanges.pipe((0,tt.O)(""),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmpNumbers(e||"")))),this.filteredRepEmployees=this.repEmpNumberControl.valueChanges.pipe((0,tt.O)(""),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmpNumbers(e||"")))),this.apiService.get("PvReplaceResource/getPvReplaceResourceReqById",this.id).subscribe(e=>{null!=e&&(this.requestData=e,this.custCodeControl.setValue(e.customerCode),this.resEmpNumberControl.setValue(e.resignedEmployeeNumber),this.repEmpNumberControl.setValue(e.replacedEmployeeNumber),this.loadProjectsList(e.customerCode),this.loadSiteCodes(e.projectCode),this.form.controls.projectCode.setValue(e.projectCode),this.form.controls.customerCode.setValue(e.customerCode),this.form.controls.siteCode.setValue(e.siteCode),this.form.controls.resignedEmployeeNumber.setValue(e.resignedEmployeeNumber),this.form.controls.replacedEmployeeNumber.setValue(e.replacedEmployeeNumber),this.form.controls.fromDate.setValue(e.fromDate),this.getProjectData(),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){let e=new Date(this.form.controls.fromDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.fromDate=e,this.form.valid?this.apiService.post("PvReplaceResource",this.form.value).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)}):this.utilService.FillUpFields()}onSelectionSiteCode(){this.form.controls.fromDate.setValue(""),this.form.controls.replacedEmployeeNumber.setValue(""),this.form.controls.resignedEmployeeNumber.setValue(""),this.resEmpNumberControl.setValue(""),this.repEmpNumberControl.setValue(""),this.filteredResEmployees=this.resEmpNumberControl.valueChanges.pipe((0,tt.O)(""),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmpNumbers(e||"")))),this.filteredRepEmployees=this.repEmpNumberControl.valueChanges.pipe((0,tt.O)(""),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmpNumbers(e||"")))),this.getProjectData()}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(Z.sK),t.Y36(l.qu),t.Y36(x._),t.Y36(y.t),t.Y36(b.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-req-replace-employee"]],features:[t.qOj],decls:116,vars:97,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-4","col-lg-4"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","projectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],[1,"col-md-3","col-lg-3"],["auto3","matAutocomplete"],[1,"col-md-2","col-lg-2",2,"text-align","center","vertical-align","central","font-size","xx-large"],[1,"fas","fa-arrow-alt-circle-left"],["auto2","matAutocomplete"],[1,"input-group"],["formControlName","fromDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","max","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"control"],[3,"value"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.YNc(7,nm,3,4,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",7),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"auto-loader",15),t._UZ(22,"input",16),t.ALo(23,"translate"),t.ALo(24,"translate"),t.TgZ(25,"mat-autocomplete",17,18),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1)}),t.YNc(27,am,2,2,"mat-option",19),t.ALo(28,"async"),t.qZA(),t.qZA(),t.YNc(29,sm,2,1,"span",20),t.YNc(30,rm,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(31,"div",11),t.TgZ(32,"label",12),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"div",13),t.TgZ(36,"div",14),t.TgZ(37,"select",21),t.NdJ("change",function(){return o.onSelectionProjectCode()}),t.TgZ(38,"option",22),t._uU(39),t.ALo(40,"translate"),t.ALo(41,"translate"),t.qZA(),t.YNc(42,lm,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(43,cm,2,1,"span",20),t.YNc(44,pm,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(45,"div",11),t.TgZ(46,"label",12),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",13),t.TgZ(50,"div",14),t.TgZ(51,"select",24),t.NdJ("change",function(){return o.onSelectionSiteCode()}),t.TgZ(52,"option",22),t._uU(53),t.ALo(54,"translate"),t.ALo(55,"translate"),t.qZA(),t.YNc(56,um,2,2,"option",23),t.qZA(),t.qZA(),t.YNc(57,dm,2,1,"span",20),t.YNc(58,mm,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(59,"div",25),t.TgZ(60,"label",12),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"div",13),t.TgZ(64,"div",14),t._UZ(65,"auto-loader",15),t._UZ(66,"input",16),t.ALo(67,"translate"),t.ALo(68,"translate"),t.TgZ(69,"mat-autocomplete",17,26),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1,"resigned")}),t.YNc(71,_m,2,3,"mat-option",19),t.ALo(72,"async"),t.qZA(),t.qZA(),t.YNc(73,gm,2,1,"span",20),t.YNc(74,hm,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(75,"div",27),t._UZ(76,"i",28),t.qZA(),t.TgZ(77,"div",25),t.TgZ(78,"label",12),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"div",13),t.TgZ(82,"div",14),t._UZ(83,"auto-loader",15),t._UZ(84,"input",16),t.ALo(85,"translate"),t.ALo(86,"translate"),t.TgZ(87,"mat-autocomplete",17,29),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1,"replaced")}),t.YNc(89,fm,2,3,"mat-option",19),t.ALo(90,"async"),t.qZA(),t.qZA(),t.YNc(91,Zm,2,1,"span",20),t.YNc(92,Cm,3,3,"span",20),t.qZA(),t.qZA(),t.TgZ(93,"div",11),t.TgZ(94,"div",13),t.TgZ(95,"label",12),t._uU(96),t.ALo(97,"translate"),t.qZA(),t.TgZ(98,"div",13),t.TgZ(99,"div",30),t.TgZ(100,"input",31),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(106);return o.openDatePicker(r)}),t.ALo(101,"translate"),t.ALo(102,"translate"),t.qZA(),t.TgZ(103,"div",32),t._UZ(104,"mat-datepicker-toggle",33),t._UZ(105,"mat-datepicker",null,34),t.qZA(),t.qZA(),t.YNc(107,Am,2,1,"span",20),t.YNc(108,Tm,3,3,"span",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(109,"div",7),t.TgZ(110,"div",8),t.TgZ(111,"div",35),t.TgZ(112,"input",36),t.NdJ("click",function(){return o.closeModel()}),t.ALo(113,"translate"),t.qZA(),t._uU(114," \xa0 "),t.YNc(115,vm,2,3,"input",37),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),s=t.MAs(26),r=t.MAs(70),c=t.MAs(88),p=t.MAs(106);let u,d,m,h,C,A,S,D,U,R,O,J;t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.id>0),t.xp6(10),t.Oqu(t.lcZ(18,53,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(23,55,"Please_Enter")," ",t.lcZ(24,57,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",s),t.xp6(5),t.Q6J("ngForOf",t.lcZ(28,59,o.filteredCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(u=o.form.get("customerCode"))&&u.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(d=o.form.get("customerCode"))?null:d.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(34,61,"Project")),t.xp6(6),t.AsE("",t.lcZ(40,63,"Select")," ",t.lcZ(41,65,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.projectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(m=o.form.get("projectCode"))&&m.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(h=o.form.get("projectCode"))?null:h.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(48,67,"Site")),t.xp6(6),t.AsE("",t.lcZ(54,69,"Select")," ",t.lcZ(55,71,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(C=o.form.get("siteCode"))&&C.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(A=o.form.get("siteCode"))?null:A.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(62,73,"Resigned_Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(67,75,"Please_Enter")," ",t.lcZ(68,77,"Employee"),""),t.Q6J("formControl",o.resEmpNumberControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(72,79,o.filteredResEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(S=o.form.get("resEmpNumberControl"))&&S.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(D=o.form.get("resEmpNumberControl"))?null:D.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(5),t.Oqu(t.lcZ(80,81,"Replaced_Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(85,83,"Please_Enter")," ",t.lcZ(86,85,"Employee"),""),t.Q6J("formControl",o.repEmpNumberControl)("matAutocomplete",c),t.xp6(5),t.Q6J("ngForOf",t.lcZ(90,87,o.filteredRepEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(U=o.form.get("repEmpNumberControl"))&&U.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(R=o.form.get("repEmpNumberControl"))?null:R.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.hij(" ",t.lcZ(97,89,"From_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(101,91,"Please_Enter")," ",t.lcZ(102,93,"From_Date"),""),t.Q6J("matDatepicker",p)("min",null==o.projectData?null:o.projectData.startDate)("max",null==o.projectData?null:o.projectData.endDate),t.xp6(4),t.Q6J("for",p),t.xp6(3),t.Q6J("ngIf",!(null!=(O=o.form.get("fromDate"))&&O.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(J=o.form.get("fromDate"))?null:J.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.s9C("value",t.lcZ(113,95,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle)}},directives:[l._Y,l.JL,l.sg,f.O5,ht.z,l.Fj,at.ZL,l.JJ,l.oH,at.XC,f.sg,l.EJ,l.u,l.YN,l.Kr,M.hl,M.nW,gt.R9,M.Mq,St.ey,G.s],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function xm(i,a){if(1&i&&(t.TgZ(0,"span",23),t._UZ(1,"validation-message",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.effectiveDate)}}function qm(i,a){1&i&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function bm(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"div",12),t.TgZ(2,"label",11),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",12),t.TgZ(6,"div",17),t.TgZ(7,"input",18),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(13);return t.oxw().openDatePicker(n)}),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",19),t._UZ(11,"mat-datepicker-toggle",20),t._UZ(12,"mat-datepicker",null,21),t.qZA(),t.qZA(),t.YNc(14,xm,2,1,"span",22),t.YNc(15,qm,3,3,"span",22),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(13),o=t.oxw(),n=t.MAs(5);let s,r;t.xp6(3),t.hij(" ",t.lcZ(4,9,"Effective_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(8,11,"Please_Enter")," ",t.lcZ(9,13,"From_Date"),""),t.Q6J("matDatepicker",e)("min",o.min1)("max",o.max1),t.xp6(4),t.Q6J("for",e),t.xp6(3),t.Q6J("ngIf",!(null!=(s=o.form.get("effectiveDate"))&&s.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(r=o.form.get("effectiveDate"))?null:r.hasError("required"))&&(null==n?null:n.submitted))}}function ym(i,a){if(1&i&&(t.TgZ(0,"span",23),t._UZ(1,"validation-message",24),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.extensionDate)}}function Sm(i,a){1&i&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function wm(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"div",12),t.TgZ(2,"label",11),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",12),t.TgZ(6,"div",17),t.TgZ(7,"input",25),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(13);return t.oxw().openDatePicker(n)}),t.ALo(8,"translate"),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",19),t._UZ(11,"mat-datepicker-toggle",20),t._UZ(12,"mat-datepicker",null,26),t.qZA(),t.qZA(),t.YNc(14,ym,2,1,"span",22),t.YNc(15,Sm,3,3,"span",22),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(13),o=t.oxw(),n=t.MAs(5);let s,r;t.xp6(3),t.hij(" ",t.lcZ(4,8,"To_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(8,10,"Please_Enter")," ",t.lcZ(9,12,"To_Date"),""),t.Q6J("matDatepicker",e)("min",o.min2),t.xp6(4),t.Q6J("for",o.picker1),t.xp6(3),t.Q6J("ngIf",!(null!=(s=o.form.get("extensionDate"))&&s.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(r=o.form.get("extensionDate"))?null:r.hasError("required"))&&(null==n?null:n.submitted))}}function Um(i,a){1&i&&(t._UZ(0,"input",27),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let Et=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u){super(r),this.notifyService=e,this.datepipe=o,this.translate=n,this.fb=s,this.authService=r,this.utilService=c,this.apiService=p,this.dialogRef=u,this.readonly="",this.currentDate=new Date,this.isUpdating=!1,this.isArabic=!1,this.min1=new Date,this.min2=new Date,this.max1=new Date,this.max2=new Date,this.recentAttendanceDate=new Date}ngOnInit(){this.setForm(),this.isArabic=this.utilService.isArabic()}getRecentAttendanceDate(){null!=this.requestData&&(this.apiService.getall(`ProjectSites/getRecenetAttendanceDate/${this.requestData.projectCode}/${this.requestData.siteCode}`).subscribe(e=>{this.recentAttendanceDate=e,this.min1=e}),this.interval=setInterval(()=>{},1e3))}setForm(){var e,o,n,s,r,c,p;if(this.form=this.fb.group({effectiveDate:[this.requestData.id>0?null===(e=this.requestData)||void 0===e?void 0:e.effectiveDate:""],extensionDate:[this.requestData.id>0?null===(o=this.requestData)||void 0===o?void 0:o.extensionDate:""]}),0==this.requestData.id&&(this.requestData.effectiveDate="",this.requestData.extensionDate=""),(null===(n=this.requestData)||void 0===n?void 0:n.isExtendProjReq)||(null===(s=this.requestData)||void 0===s?void 0:s.isReOpenReq)){this.form.controls.extensionDate.addValidators(l.kI.required);let u=new Date(this.requestData.endDate);if(this.min2=new Date(u.setDate(u.getDate()+1)),null===(r=this.requestData)||void 0===r?void 0:r.isReOpenReq){this.form.controls.effectiveDate.addValidators(l.kI.required);let d=new Date(this.requestData.endDate);this.min1=new Date(d.getFullYear(),d.getMonth(),d.getDate()+1),this.max1.setUTCFullYear(this.currentDate.getUTCFullYear()+1)}}else((null===(c=this.requestData)||void 0===c?void 0:c.isCloseReq)||(null===(p=this.requestData)||void 0===p?void 0:p.isSuspendReq)||this.requestData.isCancelReq)&&(this.form.controls.effectiveDate.addValidators(l.kI.required),this.getRecentAttendanceDate(),this.max1=new Date(this.requestData.endDate))}closeModel(){this.dialogRef.close()}submit(){var e,o,n,s,r,c,p,u,d;if(this.isUpdating)this.notifyService.showError(this.translate.instant("Please wait..."));else if(this.isUpdating=!0,this.form.valid){if(this.requestData.isRevokeSuspReq)this.requestData.extensionDate=null,this.requestData.effectiveDate=null;else if(null===(e=this.requestData)||void 0===e?void 0:e.isExtendProjReq){let m=new Date(this.form.controls.extensionDate.value);m.setMinutes(m.getMinutes()-m.getTimezoneOffset()),this.form.value.extensionDate=m,this.requestData.extensionDate=m,this.requestData.effectiveDate=null}else if((null===(o=this.requestData)||void 0===o?void 0:o.isCloseReq)||(null===(n=this.requestData)||void 0===n?void 0:n.isSuspendReq)||this.requestData.isCancelReq){let m=new Date(this.form.controls.effectiveDate.value);m.setMinutes(m.getMinutes()-m.getTimezoneOffset()),this.form.value.effectiveDate=m,this.requestData.effectiveDate=m,this.requestData.extensionDate=null}else if(this.requestData.isReOpenReq){let m=new Date(this.form.controls.extensionDate.value);m.setMinutes(m.getMinutes()-m.getTimezoneOffset()),this.form.value.extensionDate=m,this.requestData.extensionDate=m;let h=new Date(this.form.controls.effectiveDate.value);h.setMinutes(h.getMinutes()-h.getTimezoneOffset()),this.form.value.effectiveDate=h,this.requestData.effectiveDate=h}this.requestData.isCloseReq=!!(null===(s=this.requestData)||void 0===s?void 0:s.isCloseReq),this.requestData.isSuspendReq=!!(null===(r=this.requestData)||void 0===r?void 0:r.isSuspendReq),this.requestData.isCancelReq=!!(null===(c=this.requestData)||void 0===c?void 0:c.isCancelReq),this.requestData.isReOpenReq=!!(null===(p=this.requestData)||void 0===p?void 0:p.isReOpenReq),this.requestData.isRevokeSuspReq=!!(null===(u=this.requestData)||void 0===u?void 0:u.isRevokeSuspReq),this.requestData.isExtendProjReq=!!(null===(d=this.requestData)||void 0===d?void 0:d.isExtendProjReq),this.requestData.id=this.requestData.id>0?this.requestData.id:0,this.isUpdating=!0,this.apiService.post("PvOpenCloseReq",this.requestData).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},m=>{this.isUpdating=!1,console.error(m),this.utilService.ShowApiErrorMessage(m)})}else this.isUpdating=!1,this.utilService.FillUpFields()}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(w.g),t.Y36(f.uU),t.Y36(Z.sK),t.Y36(l.qu),t.Y36(x._),t.Y36(y.t),t.Y36(b.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-pv-open-close-req"]],features:[t.qOj],decls:42,vars:22,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-4","col-lg-4"],[1,"mr-sm-2"],[1,"form-group"],["class","col-md-4 col-lg-4",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[1,"input-group"],["formControlName","effectiveDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","max","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["style","color:red",4,"ngIf"],[2,"color","red"],[3,"control"],["formControlName","extensionDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","click"],["picker2",""],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t._uU(7),t.TgZ(8,"div",4),t.TgZ(9,"div",5),t.TgZ(10,"div",6),t.TgZ(11,"div",7),t.TgZ(12,"div",6),t.TgZ(13,"div",8),t.TgZ(14,"div",9),t.TgZ(15,"div",10),t.TgZ(16,"label",11),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",12),t._uU(20),t.qZA(),t.qZA(),t.TgZ(21,"div",10),t.TgZ(22,"label",11),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"div",12),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"div",10),t.TgZ(28,"label",11),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"div",12),t._uU(32),t.qZA(),t.qZA(),t.YNc(33,bm,16,15,"div",13),t.YNc(34,wm,16,14,"div",13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",6),t.TgZ(36,"div",7),t.TgZ(37,"div",14),t.TgZ(38,"input",15),t.NdJ("click",function(){return o.closeModel()}),t.ALo(39,"translate"),t.qZA(),t._uU(40," \xa0 "),t.YNc(41,Um,2,3,"input",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.AsE(" ",null==o.requestData?null:o.requestData.requestSubType,"/",(null==o.requestData?null:o.requestData.id)>0?null==o.requestData?null:o.requestData.id:"new"," "),t.xp6(10),t.Oqu(t.lcZ(18,14,"Customer_Code")),t.xp6(3),t.hij(" ",o.requestData.customerCode," "),t.xp6(3),t.Oqu(t.lcZ(24,16,"Project")),t.xp6(3),t.hij(" ",o.requestData.projectCode," "),t.xp6(3),t.Oqu(t.lcZ(30,18,"Site")),t.xp6(3),t.hij(" ",o.requestData.siteCode," "),t.xp6(1),t.Q6J("ngIf",(null==o.requestData?null:o.requestData.isCloseReq)||(null==o.requestData?null:o.requestData.isSuspendReq)||(null==o.requestData?null:o.requestData.isCancelReq)||(null==o.requestData?null:o.requestData.isReOpenReq)),t.xp6(1),t.Q6J("ngIf",(null==o.requestData?null:o.requestData.isExtendProjReq)||(null==o.requestData?null:o.requestData.isReOpenReq)),t.xp6(4),t.s9C("value",t.lcZ(39,20,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle))},directives:[l._Y,l.JL,l.sg,f.O5,l.Fj,M.hl,l.JJ,l.u,M.nW,gt.R9,M.Mq,G.s],pipes:[Z.X$],encapsulation:2}),i})();function Lm(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Request_Number"),":",e.id," ")}}function Dm(i,a){if(1&i&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function Nm(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcCustomerCode)}}function Em(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Om(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function jm(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcProjectCode)}}function km(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Mm(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function Rm(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcSiteCode)}}function Pm(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Fm(i,a){if(1&i&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function Im(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcEmployeeNumber)}}function Ym(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Jm(i,a){if(1&i&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function Qm(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destCustomerCode)}}function Bm(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Hm(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function Vm(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destProjectCode)}}function $m(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Gm(i,a){if(1&i&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function Wm(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destSiteCode)}}function zm(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Xm(i,a){if(1&i&&(t.TgZ(0,"mat-option",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function Km(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destEmployeeNumber)}}function t_(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function e_(i,a){if(1&i&&(t.TgZ(0,"span",43),t._UZ(1,"validation-message",44),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.fromDate)}}function o_(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function i_(i,a){1&i&&(t._UZ(0,"input",46),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let Kt=(()=>{class i extends q{constructor(e,o,n,s,r,c,p){super(s),this.datepipe=e,this.translate=o,this.fb=n,this.authService=s,this.utilService=r,this.apiService=c,this.dialogRef=p,this.id=0,this.readonly="",this.srcSiteCodeList=[],this.destSiteCodeList=[],this.srcCustomerCode="",this.destCustomerCode="",this.srcEmpNumber="",this.destEmpNumber="",this.isDataLoading=!1,this.srcCustCodeControl=new l.NI("",l.kI.required),this.destCustCodeControl=new l.NI("",l.kI.required),this.srcEmpNumberControl=new l.NI("",l.kI.required),this.destEmpNumberControl=new l.NI("",l.kI.required),this.isArabic=!1,this.srcProjectsList=[],this.destProjectsList=[],this.isFromProjectsAction=!1,this.filteredSrcCustCodes=this.srcCustCodeControl.valueChanges.pipe((0,tt.O)(this.srcCustomerCode),(0,et.b)(r.autoDelay()),(0,ot.x)(),(0,it.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterSrcCustCodes(u||"")))),this.filteredDestCustCodes=this.destCustCodeControl.valueChanges.pipe((0,tt.O)(this.destCustomerCode),(0,et.b)(r.autoDelay()),(0,ot.x)(),(0,it.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterDestCustCodes(u||""))))}filterSrcCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterDestCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filtersrcEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.srcProjectCode.value}/${this.form.controls.srcSiteCode.value}/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterdestEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.destProjectCode.value}/${this.form.controls.destSiteCode.value}/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}setForm(){this.form=this.fb.group({srcCustomerCode:["",l.kI.required],destCustomerCode:["",l.kI.required],srcProjectCode:["",l.kI.required],destProjectCode:["",l.kI.required],srcSiteCode:["",l.kI.required],destSiteCode:["",l.kI.required],id:[this.id,l.kI.required],fromDate:["",l.kI.required],srcEmployeeNumber:["",l.kI.required],destEmployeeNumber:["",l.kI.required]}),this.isFromProjectsAction&&(this.srcProjectData=this.projectData,this.srcCustCodeControl.setValue(this.srcProjectData.customerCode),this.form.controls.srcSiteCode.setValue(this.projectData.siteCode),this.form.controls.srcProjectCode.setValue(this.projectData.projectCode),this.form.controls.srcCustomerCode.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode,"src"),this.loadSiteCodes(this.projectData.projectCode,"src"),this.onSelectionSiteCode("src"))}onSelectionCustomerCode(e,o,n){let s="";1==o?s=e.option.value:2==o?s=e.target.value:3==o&&(s=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+s).subscribe(r=>{null!=r?("src"==n&&(this.form.controls.srcCustomerCode.setValue(s),this.loadProjectsList(s,"src"),this.form.controls.srcSiteCode.setValue(""),this.form.controls.srcProjectCode.setValue(""),this.srcSiteCodeList=[],this.srcEmpNumberControl.setValue(""),this.form.controls.srcEmployeeNumber.setValue(""),this.form.controls.fromDate.setValue("")),"dest"==n&&(this.form.controls.destCustomerCode.setValue(s),this.loadProjectsList(s,"dest"),this.form.controls.destSiteCode.setValue(""),this.form.controls.destProjectCode.setValue(""),this.form.controls.destEmployeeNumber.setValue(""),this.destEmpNumberControl.setValue(""),this.destSiteCodeList=[])):("src"==n&&(this.form.controls.srcCustomerCode.setValue(""),this.srcCustCodeControl.setValue(""),this.srcProjectsList=[],this.srcSiteCodeList=[],this.form.controls.srcProjectCode.setValue(""),this.form.controls.srcSiteCode.setValue(""),this.srcEmpNumberControl.setValue(""),this.form.controls.srcEmployeeNumber.setValue(""),this.form.controls.fromDate.setValue("")),"dest"==n&&(this.form.controls.destCustomerCode.setValue(""),this.destCustCodeControl.setValue(""),this.destProjectsList=[],this.destSiteCodeList=[],this.form.controls.destProjectCode.setValue(""),this.form.controls.destSiteCode.setValue(""),this.destEmpNumberControl.setValue(""),this.form.controls.destEmployeeNumber.setValue("")))})}onSelectionEmployee(e,o,n){let s="";1==o?s=e.option.value.toString():2==o?s=e.target.value.toString():3==o&&(s=e),"src"==n?this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+s).subscribe(r=>{this.form.controls.srcEmployeeNumber.setValue(null!=r?this.srcEmpNumberControl.value:"")}):"dest"==n&&this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+s).subscribe(r=>{this.form.controls.destEmployeeNumber.setValue(null!=r?this.destEmpNumberControl.value:"")})}onSelectionProjectCode(e){"src"==e?(this.form.controls.srcSiteCode.setValue(""),this.srcSiteCodeList=[],this.loadSiteCodes(this.form.controls.srcProjectCode.value,e),this.form.controls.fromDate.setValue(""),this.srcEmpNumberControl.setValue(""),this.form.controls.srcEmployeeNumber.setValue("")):"dest"==e&&(this.form.controls.destSiteCode.setValue(""),this.destSiteCodeList=[],this.loadSiteCodes(this.form.controls.destProjectCode.value,e),this.destEmpNumberControl.setValue(""),this.form.controls.destEmployeeNumber.setValue("")),this.isDataLoading=!1}getProjectData(e){"src"==e?this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.srcProjectCode.value}/${this.form.controls.srcSiteCode.value}`).subscribe(o=>{this.srcProjectData=o}):this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.destProjectCode.value}/${this.form.controls.destSiteCode.value}`).subscribe(o=>{this.destProjectData=o})}loadSiteCodes(e,o){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(n=>{"src"==o&&(this.srcSiteCodeList=n),"dest"==o&&(this.destSiteCodeList=n),this.isDataLoading=!1})}loadProjectsList(e,o){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(n=>{"src"==o&&(this.srcProjectsList=n),"dest"==o&&(this.destProjectsList=n),this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.apiService.get("PvSwapEmployees/getPvSwapEmployeesReqById",this.id).subscribe(e=>{null!=e&&(console.log(e),this.requestData=e,this.srcCustCodeControl.setValue(e.srcCustomerCode),this.destCustCodeControl.setValue(e.destCustomerCode),this.srcEmpNumberControl.setValue(e.srcEmployeeNumber),this.destEmpNumberControl.setValue(e.destEmployeeNumber),this.loadProjectsList(e.srcCustomerCode,"src"),this.loadProjectsList(e.destCustomerCode,"dest"),this.form.controls.srcProjectCode.setValue(e.srcProjectCode),this.form.controls.destProjectCode.setValue(e.destProjectCode),this.loadSiteCodes(e.srcProjectCode,"src"),this.loadSiteCodes(e.destProjectCode,"dest"),this.form.controls.srcCustomerCode.setValue(e.srcCustomerCode),this.form.controls.destCustomerCode.setValue(e.destCustomerCode),this.form.controls.srcSiteCode.setValue(e.srcSiteCode),this.form.controls.destSiteCode.setValue(e.destSiteCode),this.form.controls.srcEmployeeNumber.setValue(e.srcEmployeeNumber),this.form.controls.destEmployeeNumber.setValue(e.destEmployeeNumber),this.form.controls.fromDate.setValue(e.fromDate),this.getProjectData("dest"),this.getProjectData("src"),this.id>0&&(this.filteredSrcEmployees=this.srcEmpNumberControl.valueChanges.pipe((0,tt.O)(this.srcEmpNumber),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filtersrcEmpNumbers(o||"")))),this.filteredDestEmployees=this.destEmpNumberControl.valueChanges.pipe((0,tt.O)(this.destEmpNumber),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filterdestEmpNumbers(o||""))))),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){if(this.form.valid){this.form.value.srcCustomerCode=this.srcCustCodeControl.value,this.form.value.destCustomerCode=this.destCustCodeControl.value;let e=new Date(this.form.controls.fromDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.fromDate=e,this.apiService.post("PvSwapEmployees",this.form.value).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}else this.utilService.FillUpFields()}onSelectionSiteCode(e){"src"==e?(""!=this.form.controls.srcSiteCode.value&&(this.isDataLoading=!0,this.getProjectData("src"),this.form.controls.fromDate.setValue("")),this.srcEmpNumberControl.setValue(""),this.filteredSrcEmployees=this.srcEmpNumberControl.valueChanges.pipe((0,tt.O)(this.srcEmpNumber),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filtersrcEmpNumbers(o||""))))):"dest"==e&&(""!=this.form.controls.destSiteCode.value&&(this.isDataLoading=!0,this.getProjectData("dest"),this.form.controls.fromDate.setValue("")),this.destEmpNumberControl.setValue(""),this.filteredDestEmployees=this.destEmpNumberControl.valueChanges.pipe((0,tt.O)(this.destEmpNumber),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filterdestEmpNumbers(o||"")))))}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(Z.sK),t.Y36(l.qu),t.Y36(x._),t.Y36(y.t),t.Y36(b.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-swap-employees"]],features:[t.qOj],decls:162,vars:138,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"outer"],[1,"row","rowm0"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-12","col-lg-12",2,"border","1px solid #f4f4f4","padding-bottom","5px"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","srcProjectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","srcSiteCode",1,"custom-select","mr-sm-2",3,"change"],["auto3","matAutocomplete"],[1,"col-md-12","col-lg-12",2,"padding","5px","text-align","center","font-size","xx-large"],[1,"fas","fa-sync-alt"],[1,"col-md-12","col-lg-12",2,"border","1px solid #f4f4f4","padding-top","5px"],["auto2","matAutocomplete"],["formControlName","destProjectCode",1,"custom-select","mr-sm-2",3,"change"],["formControlName","destSiteCode",1,"custom-select","mr-sm-2",3,"change"],["auto4","matAutocomplete"],[1,"col-md-4","col-lg-4"],[1,"input-group"],["formControlName","fromDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","max","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"control"],[3,"value"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.YNc(7,Lm,3,4,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",7),t.TgZ(13,"div",9),t.TgZ(14,"label",10),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t._UZ(19,"auto-loader",13),t._UZ(20,"input",14),t.ALo(21,"translate"),t.ALo(22,"translate"),t.TgZ(23,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1,"src")}),t.YNc(25,Dm,2,2,"mat-option",17),t.ALo(26,"async"),t.qZA(),t.qZA(),t.YNc(27,Nm,2,1,"span",18),t.YNc(28,Em,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(29,"div",9),t.TgZ(30,"label",10),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",11),t.TgZ(34,"div",12),t.TgZ(35,"select",19),t.NdJ("change",function(){return o.onSelectionProjectCode("src")}),t.TgZ(36,"option",20),t._uU(37),t.ALo(38,"translate"),t.ALo(39,"translate"),t.qZA(),t.YNc(40,Om,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(41,jm,2,1,"span",18),t.YNc(42,km,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(43,"div",9),t.TgZ(44,"label",10),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",11),t.TgZ(48,"div",12),t.TgZ(49,"select",22),t.NdJ("change",function(){return o.onSelectionSiteCode("src")}),t.TgZ(50,"option",20),t._uU(51),t.ALo(52,"translate"),t.ALo(53,"translate"),t.qZA(),t.YNc(54,Mm,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(55,Rm,2,1,"span",18),t.YNc(56,Pm,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(57,"div",9),t.TgZ(58,"label",10),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"div",11),t.TgZ(62,"div",12),t._UZ(63,"auto-loader",13),t._UZ(64,"input",14),t.ALo(65,"translate"),t.ALo(66,"translate"),t.TgZ(67,"mat-autocomplete",15,23),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1,"src")}),t.YNc(69,Fm,2,3,"mat-option",17),t.ALo(70,"async"),t.qZA(),t.qZA(),t.YNc(71,Im,2,1,"span",18),t.YNc(72,Ym,3,3,"span",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",24),t._UZ(74,"i",25),t.qZA(),t.TgZ(75,"div",26),t.TgZ(76,"div",7),t.TgZ(77,"div",9),t.TgZ(78,"label",10),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"div",11),t.TgZ(82,"div",12),t._UZ(83,"auto-loader",13),t._UZ(84,"input",14),t.ALo(85,"translate"),t.ALo(86,"translate"),t.TgZ(87,"mat-autocomplete",15,27),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1,"dest")}),t.YNc(89,Jm,2,2,"mat-option",17),t.ALo(90,"async"),t.qZA(),t.qZA(),t.YNc(91,Qm,2,1,"span",18),t.YNc(92,Bm,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(93,"div",9),t.TgZ(94,"label",10),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"div",11),t.TgZ(98,"div",12),t.TgZ(99,"select",28),t.NdJ("change",function(){return o.onSelectionProjectCode("dest")}),t.TgZ(100,"option",20),t._uU(101),t.ALo(102,"translate"),t.ALo(103,"translate"),t.qZA(),t.YNc(104,Hm,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(105,Vm,2,1,"span",18),t.YNc(106,$m,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(107,"div",9),t.TgZ(108,"label",10),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"div",11),t.TgZ(112,"div",12),t.TgZ(113,"select",29),t.NdJ("change",function(){return o.onSelectionSiteCode("dest")}),t.TgZ(114,"option",20),t._uU(115),t.ALo(116,"translate"),t.ALo(117,"translate"),t.qZA(),t.YNc(118,Gm,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(119,Wm,2,1,"span",18),t.YNc(120,zm,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(121,"div",9),t.TgZ(122,"label",10),t._uU(123),t.ALo(124,"translate"),t.qZA(),t.TgZ(125,"div",11),t.TgZ(126,"div",12),t._UZ(127,"auto-loader",13),t._UZ(128,"input",14),t.ALo(129,"translate"),t.ALo(130,"translate"),t.TgZ(131,"mat-autocomplete",15,30),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1,"dest")}),t.YNc(133,Xm,2,3,"mat-option",17),t.ALo(134,"async"),t.qZA(),t.qZA(),t.YNc(135,Km,2,1,"span",18),t.YNc(136,t_,3,3,"span",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(137,"div",24),t.TgZ(138,"div",26),t.TgZ(139,"div",31),t.TgZ(140,"div",11),t.TgZ(141,"label",10),t._uU(142),t.ALo(143,"translate"),t.qZA(),t.TgZ(144,"div",11),t.TgZ(145,"div",32),t.TgZ(146,"input",33),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(152);return o.openDatePicker(r)}),t.ALo(147,"translate"),t.ALo(148,"translate"),t.qZA(),t.TgZ(149,"div",34),t._UZ(150,"mat-datepicker-toggle",35),t._UZ(151,"mat-datepicker",null,36),t.qZA(),t.qZA(),t.YNc(153,e_,2,1,"span",18),t.YNc(154,o_,3,3,"span",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(155,"div",37),t.TgZ(156,"div",38),t.TgZ(157,"div",39),t.TgZ(158,"input",40),t.NdJ("click",function(){return o.closeModel()}),t.ALo(159,"translate"),t.qZA(),t._uU(160," \xa0 "),t.YNc(161,i_,2,3,"input",41),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),s=t.MAs(24),r=t.MAs(68),c=t.MAs(88),p=t.MAs(132),u=t.MAs(152);let d,m,h,C,A,S,D,U,R,O,J,F,nt,$,z,K,mt,st;t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.id>0),t.xp6(8),t.Oqu(t.lcZ(16,74,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(21,76,"Please_Enter")," ",t.lcZ(22,78,"Customer_Code"),""),t.Q6J("formControl",o.srcCustCodeControl)("matAutocomplete",s),t.xp6(5),t.Q6J("ngForOf",t.lcZ(26,80,o.filteredSrcCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(d=o.form.get("srcCustomerCode"))&&d.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(m=o.form.get("srcCustomerCode"))?null:m.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(32,82,"Project")),t.xp6(6),t.AsE("",t.lcZ(38,84,"Select")," ",t.lcZ(39,86,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.srcProjectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(h=o.form.get("srcProjectCode"))&&h.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(C=o.form.get("srcProjectCode"))?null:C.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(46,88,"Site")),t.xp6(6),t.AsE("",t.lcZ(52,90,"Select")," ",t.lcZ(53,92,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.srcSiteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(A=o.form.get("srcSiteCode"))&&A.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(S=o.form.get("srcSiteCode"))?null:S.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(60,94,"Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(65,96,"Please_Enter")," ",t.lcZ(66,98,"Employee"),""),t.Q6J("formControl",o.srcEmpNumberControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(70,100,o.filteredSrcEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(D=o.form.get("srcEmployeeNumber"))&&D.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(U=o.form.get("srcEmployeeNumber"))?null:U.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(7),t.Oqu(t.lcZ(80,102,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(85,104,"Please_Enter")," ",t.lcZ(86,106,"Customer_Code"),""),t.Q6J("formControl",o.destCustCodeControl)("matAutocomplete",c),t.xp6(5),t.Q6J("ngForOf",t.lcZ(90,108,o.filteredDestCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(R=o.form.get("destCustomerCode"))&&R.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(O=o.form.get("destCustomerCode"))?null:O.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(96,110,"Project")),t.xp6(6),t.AsE("",t.lcZ(102,112,"Select")," ",t.lcZ(103,114,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.destProjectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(J=o.form.get("destProjectCode"))&&J.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(F=o.form.get("destProjectCode"))?null:F.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(110,116,"Site")),t.xp6(6),t.AsE("",t.lcZ(116,118,"Select")," ",t.lcZ(117,120,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.destSiteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(nt=o.form.get("destSiteCode"))&&nt.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==($=o.form.get("destSiteCode"))?null:$.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(124,122,"Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(129,124,"Please_Enter")," ",t.lcZ(130,126,"Employee"),""),t.Q6J("formControl",o.destEmpNumberControl)("matAutocomplete",p),t.xp6(5),t.Q6J("ngForOf",t.lcZ(134,128,o.filteredDestEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(z=o.form.get("destEmployeeNumber"))&&z.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(K=o.form.get("destEmployeeNumber"))?null:K.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(6),t.hij(" ",t.lcZ(143,130,"From_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(147,132,"Please_Enter")," ",t.lcZ(148,134,"From_Date"),""),t.Q6J("matDatepicker",u)("min",null==o.srcProjectData?null:o.srcProjectData.startDate)("max",null==o.srcProjectData?null:o.srcProjectData.endDate),t.xp6(4),t.Q6J("for",u),t.xp6(3),t.Q6J("ngIf",!(null!=(mt=o.form.get("fromDate"))&&mt.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(st=o.form.get("fromDate"))?null:st.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.s9C("value",t.lcZ(159,136,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle)}},directives:[l._Y,l.JL,l.sg,f.O5,ht.z,l.Fj,at.ZL,l.JJ,l.oH,at.XC,f.sg,l.EJ,l.u,l.YN,l.Kr,M.hl,M.nW,gt.R9,M.Mq,St.ey,G.s],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function n_(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function a_(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcCustomerCode)}}function s_(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function r_(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcSiteCode)}}function l_(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function c_(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcProjectCode)}}function p_(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function u_(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destCustomerCode)}}function d_(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function m_(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destSiteCode)}}function __(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function g_(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destProjectCode)}}function h_(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Source_Employee")," "))}function f_(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcEmployeeNumber)}}function Z_(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Destination_Employee")," "))}function C_(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destEmployeeNumber)}}function A_(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"From_Date")," "))}function T_(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.ToDateString(e.fromDate))}}function v_(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function x_(i,a){1&i&&(t.TgZ(0,"span",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function q_(i,a){1&i&&(t.TgZ(0,"span",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function b_(i,a){if(1&i&&(t.TgZ(0,"td",42),t.YNc(1,x_,3,3,"span",43),t.YNc(2,q_,3,3,"ng-template",null,44,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function y_(i,a){1&i&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function S_(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function w_(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function U_(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function L_(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function D_(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",56),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function N_(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",48),t.YNc(1,S_,3,1,"span",49),t.YNc(2,w_,3,1,"span",49),t.YNc(3,U_,3,1,"span",49),t.TgZ(4,"span",50),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewRequest(s.id)}),t._UZ(5,"i",51),t.qZA(),t.YNc(6,L_,3,1,"span",49),t.YNc(7,D_,3,1,"span",49),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request")),t.xp6(2),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin))}}function E_(i,a){1&i&&t._UZ(0,"tr",57)}function O_(i,a){1&i&&t._UZ(0,"tr",58)}const j_=function(){return{standalone:!0}};let te=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=m,this.pageService=h,this.oprService=C,this.translate=A,this.displayedColumns=["srcCustomerCode","srcSiteCode","srcProjectCode","destCustomerCode","destSiteCode","destProjectCode","srcEmployeeNumber","destEmployeeNumber","fromDate","isApproved","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isUpdating=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvSwapEmployees/getPvSwapEmployeesReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u&&this.apiService.get("PvSwapEMployees/ApproveReqPvSwapEmployeesReqById",e).subscribe(d=>{this.isUpdating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isUpdating=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)})})}create(){this.openDialogManage(0,g.O.create,"New_Request_For_Swap_Employees","Add",Kt)}edit(e){this.openDialogManage(e,g.O.update,"Updating_Request_For_Swap_Employees","Update",Kt)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PvSwapEmployees",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e,g.O.create,"Request_For_Swap_Employees","View",Kt)}mergeRequest(e){}approveRequest(e){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(e,g.O.update,"Confirming_Approve_Request","Approve",xt,"general"))}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}uploadAdendum(e){}viewAddendum(e){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-swap-employees"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:75,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"col-md-5","col-lg-5","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","srcCustomerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","srcSiteCode"],["matColumnDef","srcProjectCode"],["matColumnDef","destCustomerCode"],["matColumnDef","destSiteCode"],["matColumnDef","destProjectCode"],["matColumnDef","srcEmployeeNumber"],["matColumnDef","destEmployeeNumber"],["matColumnDef","fromDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.ynx(36),t.TgZ(37,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(38,23),t.YNc(39,n_,3,3,"th",24),t.YNc(40,a_,2,1,"td",25),t.BQk(),t.ynx(41,26),t.YNc(42,s_,3,3,"th",24),t.YNc(43,r_,2,1,"td",25),t.BQk(),t.ynx(44,27),t.YNc(45,l_,3,3,"th",24),t.YNc(46,c_,2,1,"td",25),t.BQk(),t.ynx(47,28),t.YNc(48,p_,3,3,"th",24),t.YNc(49,u_,2,1,"td",25),t.BQk(),t.ynx(50,29),t.YNc(51,d_,3,3,"th",24),t.YNc(52,m_,2,1,"td",25),t.BQk(),t.ynx(53,30),t.YNc(54,__,3,3,"th",24),t.YNc(55,g_,2,1,"td",25),t.BQk(),t.ynx(56,31),t.YNc(57,h_,3,3,"th",24),t.YNc(58,f_,2,1,"td",25),t.BQk(),t.ynx(59,32),t.YNc(60,Z_,3,3,"th",24),t.YNc(61,C_,2,1,"td",25),t.BQk(),t.ynx(62,33),t.YNc(63,A_,3,3,"th",24),t.YNc(64,T_,2,1,"td",25),t.BQk(),t.ynx(65,34),t.YNc(66,v_,3,3,"th",24),t.YNc(67,b_,4,2,"td",25),t.BQk(),t.ynx(68,35),t.YNc(69,y_,3,3,"th",36),t.YNc(70,N_,8,6,"td",37),t.BQk(),t.YNc(71,E_,1,0,"tr",38),t.YNc(72,O_,1,0,"tr",39),t.qZA(),t.BQk(),t.qZA(),t.ynx(73),t.TgZ(74,"mat-paginator",40),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Requests_For_Swap_Employees")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,j_)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(33,26,"New_Request")," "),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(34),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function k_(i,a){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Request_Number"),":",e.id," ")}}function M_(i,a){if(1&i&&(t.TgZ(0,"mat-option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function R_(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcCustomerCode)}}function P_(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function F_(i,a){if(1&i&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function I_(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcProjectCode)}}function Y_(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function J_(i,a){if(1&i&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function Q_(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcSiteCode)}}function B_(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function H_(i,a){if(1&i&&(t.TgZ(0,"mat-option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function V_(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.srcEmployeeNumber)}}function $_(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function G_(i,a){if(1&i&&(t.TgZ(0,"mat-option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text," ")}}function W_(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destCustomerCode)}}function z_(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function X_(i,a){if(1&i&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function K_(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destProjectCode)}}function tg(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function eg(i,a){if(1&i&&(t.TgZ(0,"option",46),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function og(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destSiteCode)}}function ig(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function ng(i,a){if(1&i&&(t.TgZ(0,"mat-option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.Q6J("value",e.text),t.xp6(1),t.AsE(" ",e.text,"-",o.isArabic?e.textAr:e.textTwo," ")}}function ag(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.destEmployeeNumber)}}function sg(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function rg(i,a){if(1&i&&(t.TgZ(0,"span",44),t._UZ(1,"validation-message",45),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.fromDate)}}function lg(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function cg(i,a){1&i&&(t._UZ(0,"input",47),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let Ft=(()=>{class i extends q{constructor(e,o,n,s,r,c,p){super(s),this.datepipe=e,this.translate=o,this.fb=n,this.authService=s,this.utilService=r,this.apiService=c,this.dialogRef=p,this.id=0,this.readonly="",this.srcSiteCodeList=[],this.destSiteCodeList=[],this.srcCustomerCode="",this.destCustomerCode="",this.srcEmpNumber="",this.destEmpNumber="",this.isDataLoading=!1,this.srcCustCodeControl=new l.NI("",l.kI.required),this.destCustCodeControl=new l.NI("",l.kI.required),this.srcEmpNumberControl=new l.NI("",l.kI.required),this.destEmpNumberControl=new l.NI("",l.kI.required),this.isArabic=!1,this.srcProjectsList=[],this.destProjectsList=[],this.isFromProjectsAction=!1,this.filteredSrcCustCodes=this.srcCustCodeControl.valueChanges.pipe((0,tt.O)(this.srcCustomerCode),(0,et.b)(r.autoDelay()),(0,ot.x)(),(0,it.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterSrcCustCodes(u||"")))),this.filteredDestCustCodes=this.destCustCodeControl.valueChanges.pipe((0,tt.O)(this.destCustomerCode),(0,et.b)(r.autoDelay()),(0,ot.x)(),(0,it.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterDestCustCodes(u||""))))}filterSrcCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterDestCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filtersrcEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.srcProjectCode.value}/${this.form.controls.srcSiteCode.value}/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}filterdestEmpNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.form.controls.destProjectCode.value}/${this.form.controls.destSiteCode.value}/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}setForm(){this.form=this.fb.group({srcCustomerCode:["",l.kI.required],destCustomerCode:["",l.kI.required],srcProjectCode:["",l.kI.required],destProjectCode:["",l.kI.required],srcSiteCode:["",l.kI.required],destSiteCode:["",l.kI.required],id:[this.id,l.kI.required],fromDate:["",l.kI.required],srcEmployeeNumber:["",l.kI.required],destEmployeeNumber:["",l.kI.required]}),this.isFromProjectsAction&&(this.srcCustCodeControl.setValue(this.projectData.customerCode),this.form.controls.srcSiteCode.setValue(this.projectData.siteCode),this.form.controls.srcProjectCode.setValue(this.projectData.projectCode),this.form.controls.srcCustomerCode.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode,"src"),this.loadSiteCodes(this.projectData.projectCode,"src"),this.onSelectionSiteCode("src"))}onSelectionCustomerCode(e,o,n){let s="";1==o?s=e.option.value:2==o?s=e.target.value:3==o&&(s=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+s).subscribe(r=>{null!=r?("src"==n&&(this.form.controls.srcCustomerCode.setValue(s),this.loadProjectsList(s,"src"),this.form.controls.srcSiteCode.setValue(""),this.form.controls.srcProjectCode.setValue(""),this.srcSiteCodeList=[],this.srcEmpNumberControl.setValue(""),this.form.controls.srcEmployeeNumber.setValue(""),this.form.controls.fromDate.setValue("")),"dest"==n&&(this.form.controls.destCustomerCode.setValue(s),this.loadProjectsList(s,"dest"),this.form.controls.destSiteCode.setValue(""),this.form.controls.destProjectCode.setValue(""),this.form.controls.destEmployeeNumber.setValue(""),this.destEmpNumberControl.setValue(""),this.destSiteCodeList=[])):("src"==n&&(this.form.controls.srcCustomerCode.setValue(""),this.srcCustCodeControl.setValue(""),this.srcProjectsList=[],this.srcSiteCodeList=[],this.form.controls.srcProjectCode.setValue(""),this.form.controls.srcSiteCode.setValue(""),this.srcEmpNumberControl.setValue(""),this.form.controls.srcEmployeeNumber.setValue(""),this.form.controls.fromDate.setValue("")),"dest"==n&&(this.form.controls.destCustomerCode.setValue(""),this.destCustCodeControl.setValue(""),this.destProjectsList=[],this.destSiteCodeList=[],this.form.controls.destProjectCode.setValue(""),this.form.controls.destSiteCode.setValue(""),this.destEmpNumberControl.setValue(""),this.form.controls.destEmployeeNumber.setValue("")))})}onSelectionEmployee(e,o,n){let s="";1==o?s=e.option.value.toString():2==o?s=e.target.value.toString():3==o&&(s=e),"src"==n?this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+s).subscribe(r=>{this.form.controls.srcEmployeeNumber.setValue(null!=r?this.srcEmpNumberControl.value:"")}):"dest"==n&&this.apiService.getall("Employee/getEmployeeByEmployeeNumber/"+s).subscribe(r=>{this.form.controls.destEmployeeNumber.setValue(null!=r?this.destEmpNumberControl.value:"")})}onSelectionProjectCode(e){"src"==e?(this.form.controls.srcSiteCode.setValue(""),this.srcSiteCodeList=[],this.loadSiteCodes(this.form.controls.srcProjectCode.value,e),this.form.controls.fromDate.setValue(""),this.srcEmpNumberControl.setValue(""),this.form.controls.srcEmployeeNumber.setValue("")):"dest"==e&&(this.form.controls.destSiteCode.setValue(""),this.destSiteCodeList=[],this.loadSiteCodes(this.form.controls.destProjectCode.value,e),this.destEmpNumberControl.setValue(""),this.form.controls.destEmployeeNumber.setValue("")),this.isDataLoading=!1}getProjectData(e){"src"==e?this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.srcProjectCode.value}/${this.form.controls.srcSiteCode.value}`).subscribe(o=>{this.srcProjectData=o}):this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.destProjectCode.value}/${this.form.controls.destSiteCode.value}`).subscribe(o=>{this.destProjectData=o})}loadSiteCodes(e,o){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(n=>{"src"==o&&(this.srcSiteCodeList=n),"dest"==o&&(this.destSiteCodeList=n),this.isDataLoading=!1})}loadProjectsList(e,o){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(n=>{"src"==o&&(this.srcProjectsList=n),"dest"==o&&(this.destProjectsList=n),this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.apiService.get("PvTransferWithReplacement/getPvTransferWithReplacementReqById",this.id).subscribe(e=>{null!=e&&(console.log(e),this.requestData=e,this.srcCustCodeControl.setValue(e.srcCustomerCode),this.destCustCodeControl.setValue(e.destCustomerCode),this.srcEmpNumberControl.setValue(e.srcEmployeeNumber),this.destEmpNumberControl.setValue(e.destEmployeeNumber),this.loadProjectsList(e.srcCustomerCode,"src"),this.loadProjectsList(e.destCustomerCode,"dest"),this.form.controls.srcProjectCode.setValue(e.srcProjectCode),this.form.controls.destProjectCode.setValue(e.destProjectCode),this.loadSiteCodes(e.srcProjectCode,"src"),this.loadSiteCodes(e.destProjectCode,"dest"),this.form.controls.srcCustomerCode.setValue(e.srcCustomerCode),this.form.controls.destCustomerCode.setValue(e.destCustomerCode),this.form.controls.srcSiteCode.setValue(e.srcSiteCode),this.form.controls.destSiteCode.setValue(e.destSiteCode),this.form.controls.srcEmployeeNumber.setValue(e.srcEmployeeNumber),this.form.controls.destEmployeeNumber.setValue(e.destEmployeeNumber),this.form.controls.fromDate.setValue(e.fromDate),this.getProjectData("src"),this.getProjectData("dest"),this.id>0&&(this.filteredSrcEmployees=this.srcEmpNumberControl.valueChanges.pipe((0,tt.O)(this.srcEmpNumber),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filtersrcEmpNumbers(o||"")))),this.filteredDestEmployees=this.destEmpNumberControl.valueChanges.pipe((0,tt.O)(this.destEmpNumber),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filterdestEmpNumbers(o||""))))),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){if(this.form.valid){this.form.value.srcCustomerCode=this.srcCustCodeControl.value,this.form.value.destCustomerCode=this.destCustCodeControl.value;let e=new Date(this.form.controls.fromDate.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.fromDate=e,this.apiService.post("PvTransferWithReplacement",this.form.value).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}else this.utilService.FillUpFields()}onSelectionSiteCode(e){"src"==e?(""!=this.form.controls.srcSiteCode.value&&(this.isDataLoading=!0,this.getProjectData("src"),this.form.controls.fromDate.setValue("")),this.srcEmpNumberControl.setValue(""),this.filteredSrcEmployees=this.srcEmpNumberControl.valueChanges.pipe((0,tt.O)(this.srcEmpNumber),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filtersrcEmpNumbers(o||""))))):"dest"==e&&(""!=this.form.controls.destSiteCode.value&&(this.isDataLoading=!0,this.getProjectData("dest"),this.form.controls.fromDate.setValue("")),this.destEmpNumberControl.setValue(""),this.filteredDestEmployees=this.destEmpNumberControl.valueChanges.pipe((0,tt.O)(this.destEmpNumber),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(o=>(""!==o.trim()&&(this.isDataLoading=!0),this.filterdestEmpNumbers(o||"")))))}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(Z.sK),t.Y36(l.qu),t.Y36(x._),t.Y36(y.t),t.Y36(b.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-transfer-with-replacement"]],features:[t.qOj],decls:162,vars:138,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"modal-body"],[4,"ngIf"],[1,"outer"],[1,"row","rowm0"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-12","col-lg-12",2,"border","1px solid #f4f4f4","padding-bottom","5px"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","srcProjectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","srcSiteCode",1,"custom-select","mr-sm-2",3,"change"],["auto3","matAutocomplete"],[1,"col-md-12","col-lg-12",2,"padding","5px","text-align","center","font-size","xx-large"],[1,"fas","fa-arrow-alt-circle-down"],[1,"col-md-12","col-lg-12",2,"border","1px solid #f4f4f4","padding-top","5px"],["auto2","matAutocomplete"],["formControlName","destProjectCode",1,"custom-select","mr-sm-2",3,"change"],["formControlName","destSiteCode",1,"custom-select","mr-sm-2",3,"change"],["auto4","matAutocomplete"],[1,"col-md-12","col-lg-12",2,"padding","15px","text-align","center","font-size","xx-large"],[1,"col-md-4","col-lg-4"],[1,"input-group"],["formControlName","fromDate",1,"form-control","datapickerinput",3,"placeholder","matDatepicker","min","max","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"control"],[3,"value"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3"),t._uU(1),t.TgZ(2,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.qZA(),t.TgZ(4,"form",1,2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.YNc(7,k_,3,4,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",7),t.TgZ(13,"div",9),t.TgZ(14,"label",10),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t._UZ(19,"auto-loader",13),t._UZ(20,"input",14),t.ALo(21,"translate"),t.ALo(22,"translate"),t.TgZ(23,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1,"src")}),t.YNc(25,M_,2,2,"mat-option",17),t.ALo(26,"async"),t.qZA(),t.qZA(),t.YNc(27,R_,2,1,"span",18),t.YNc(28,P_,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(29,"div",9),t.TgZ(30,"label",10),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",11),t.TgZ(34,"div",12),t.TgZ(35,"select",19),t.NdJ("change",function(){return o.onSelectionProjectCode("src")}),t.TgZ(36,"option",20),t._uU(37),t.ALo(38,"translate"),t.ALo(39,"translate"),t.qZA(),t.YNc(40,F_,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(41,I_,2,1,"span",18),t.YNc(42,Y_,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(43,"div",9),t.TgZ(44,"label",10),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",11),t.TgZ(48,"div",12),t.TgZ(49,"select",22),t.NdJ("change",function(){return o.onSelectionSiteCode("src")}),t.TgZ(50,"option",20),t._uU(51),t.ALo(52,"translate"),t.ALo(53,"translate"),t.qZA(),t.YNc(54,J_,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(55,Q_,2,1,"span",18),t.YNc(56,B_,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(57,"div",9),t.TgZ(58,"label",10),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"div",11),t.TgZ(62,"div",12),t._UZ(63,"auto-loader",13),t._UZ(64,"input",14),t.ALo(65,"translate"),t.ALo(66,"translate"),t.TgZ(67,"mat-autocomplete",15,23),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1,"src")}),t.YNc(69,H_,2,3,"mat-option",17),t.ALo(70,"async"),t.qZA(),t.qZA(),t.YNc(71,V_,2,1,"span",18),t.YNc(72,$_,3,3,"span",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",24),t._UZ(74,"i",25),t.qZA(),t.TgZ(75,"div",26),t.TgZ(76,"div",7),t.TgZ(77,"div",9),t.TgZ(78,"label",10),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"div",11),t.TgZ(82,"div",12),t._UZ(83,"auto-loader",13),t._UZ(84,"input",14),t.ALo(85,"translate"),t.ALo(86,"translate"),t.TgZ(87,"mat-autocomplete",15,27),t.NdJ("optionSelected",function(r){return o.onSelectionCustomerCode(r,1,"dest")}),t.YNc(89,G_,2,2,"mat-option",17),t.ALo(90,"async"),t.qZA(),t.qZA(),t.YNc(91,W_,2,1,"span",18),t.YNc(92,z_,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(93,"div",9),t.TgZ(94,"label",10),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"div",11),t.TgZ(98,"div",12),t.TgZ(99,"select",28),t.NdJ("change",function(){return o.onSelectionProjectCode("dest")}),t.TgZ(100,"option",20),t._uU(101),t.ALo(102,"translate"),t.ALo(103,"translate"),t.qZA(),t.YNc(104,X_,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(105,K_,2,1,"span",18),t.YNc(106,tg,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(107,"div",9),t.TgZ(108,"label",10),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"div",11),t.TgZ(112,"div",12),t.TgZ(113,"select",29),t.NdJ("change",function(){return o.onSelectionSiteCode("dest")}),t.TgZ(114,"option",20),t._uU(115),t.ALo(116,"translate"),t.ALo(117,"translate"),t.qZA(),t.YNc(118,eg,2,2,"option",21),t.qZA(),t.qZA(),t.YNc(119,og,2,1,"span",18),t.YNc(120,ig,3,3,"span",18),t.qZA(),t.qZA(),t.TgZ(121,"div",9),t.TgZ(122,"label",10),t._uU(123),t.ALo(124,"translate"),t.qZA(),t.TgZ(125,"div",11),t.TgZ(126,"div",12),t._UZ(127,"auto-loader",13),t._UZ(128,"input",14),t.ALo(129,"translate"),t.ALo(130,"translate"),t.TgZ(131,"mat-autocomplete",15,30),t.NdJ("optionSelected",function(r){return o.onSelectionEmployee(r,1,"dest")}),t.YNc(133,ng,2,3,"mat-option",17),t.ALo(134,"async"),t.qZA(),t.qZA(),t.YNc(135,ag,2,1,"span",18),t.YNc(136,sg,3,3,"span",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(137,"div",31),t.TgZ(138,"div",26),t.TgZ(139,"div",32),t.TgZ(140,"div",11),t.TgZ(141,"label",10),t._uU(142),t.ALo(143,"translate"),t.qZA(),t.TgZ(144,"div",11),t.TgZ(145,"div",33),t.TgZ(146,"input",34),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(152);return o.openDatePicker(r)}),t.ALo(147,"translate"),t.ALo(148,"translate"),t.qZA(),t.TgZ(149,"div",35),t._UZ(150,"mat-datepicker-toggle",36),t._UZ(151,"mat-datepicker",null,37),t.qZA(),t.qZA(),t.YNc(153,rg,2,1,"span",18),t.YNc(154,lg,3,3,"span",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(155,"div",38),t.TgZ(156,"div",39),t.TgZ(157,"div",40),t.TgZ(158,"input",41),t.NdJ("click",function(){return o.closeModel()}),t.ALo(159,"translate"),t.qZA(),t._uU(160," \xa0 "),t.YNc(161,cg,2,3,"input",42),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(5),s=t.MAs(24),r=t.MAs(68),c=t.MAs(88),p=t.MAs(132),u=t.MAs(152);let d,m,h,C,A,S,D,U,R,O,J,F,nt,$,z,K,mt,st;t.xp6(1),t.hij(" ",o.modalTitle," "),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.Q6J("ngIf",o.id>0),t.xp6(8),t.Oqu(t.lcZ(16,74,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(21,76,"Please_Enter")," ",t.lcZ(22,78,"Customer_Code"),""),t.Q6J("formControl",o.srcCustCodeControl)("matAutocomplete",s),t.xp6(5),t.Q6J("ngForOf",t.lcZ(26,80,o.filteredSrcCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(d=o.form.get("srcCustomerCode"))&&d.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(m=o.form.get("srcCustomerCode"))?null:m.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(32,82,"Project")),t.xp6(6),t.AsE("",t.lcZ(38,84,"Select")," ",t.lcZ(39,86,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.srcProjectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(h=o.form.get("srcProjectCode"))&&h.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(C=o.form.get("srcProjectCode"))?null:C.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(46,88,"Site")),t.xp6(6),t.AsE("",t.lcZ(52,90,"Select")," ",t.lcZ(53,92,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.srcSiteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(A=o.form.get("srcSiteCode"))&&A.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(S=o.form.get("srcSiteCode"))?null:S.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(60,94,"Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(65,96,"Please_Enter")," ",t.lcZ(66,98,"Employee"),""),t.Q6J("formControl",o.srcEmpNumberControl)("matAutocomplete",r),t.xp6(5),t.Q6J("ngForOf",t.lcZ(70,100,o.filteredSrcEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(D=o.form.get("srcEmployeeNumber"))&&D.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(U=o.form.get("srcEmployeeNumber"))?null:U.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(7),t.Oqu(t.lcZ(80,102,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(85,104,"Please_Enter")," ",t.lcZ(86,106,"Customer_Code"),""),t.Q6J("formControl",o.destCustCodeControl)("matAutocomplete",c),t.xp6(5),t.Q6J("ngForOf",t.lcZ(90,108,o.filteredDestCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(R=o.form.get("destCustomerCode"))&&R.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(O=o.form.get("destCustomerCode"))?null:O.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(96,110,"Project")),t.xp6(6),t.AsE("",t.lcZ(102,112,"Select")," ",t.lcZ(103,114,"Project")," "),t.xp6(3),t.Q6J("ngForOf",o.destProjectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(J=o.form.get("destProjectCode"))&&J.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(F=o.form.get("destProjectCode"))?null:F.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(110,116,"Site")),t.xp6(6),t.AsE("",t.lcZ(116,118,"Select")," ",t.lcZ(117,120,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.destSiteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(nt=o.form.get("destSiteCode"))&&nt.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==($=o.form.get("destSiteCode"))?null:$.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(3),t.Oqu(t.lcZ(124,122,"Employee")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(129,124,"Please_Enter")," ",t.lcZ(130,126,"Employee"),""),t.Q6J("formControl",o.destEmpNumberControl)("matAutocomplete",p),t.xp6(5),t.Q6J("ngForOf",t.lcZ(134,128,o.filteredDestEmployees)),t.xp6(2),t.Q6J("ngIf",!(null!=(z=o.form.get("destEmployeeNumber"))&&z.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(K=o.form.get("destEmployeeNumber"))?null:K.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(6),t.hij(" ",t.lcZ(143,130,"From_Date")," "),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(147,132,"Please_Enter")," ",t.lcZ(148,134,"From_Date"),""),t.Q6J("matDatepicker",u)("min",null==o.srcProjectData?null:o.srcProjectData.startDate)("max",null==o.srcProjectData?null:o.srcProjectData.endDate),t.xp6(4),t.Q6J("for",u),t.xp6(3),t.Q6J("ngIf",!(null!=(mt=o.form.get("fromDate"))&&mt.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(st=o.form.get("fromDate"))?null:st.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.s9C("value",t.lcZ(159,136,"Cancel")),t.xp6(3),t.Q6J("ngIf","View"!=o.modalBtnTitle)}},directives:[l._Y,l.JL,l.sg,f.O5,ht.z,l.Fj,at.ZL,l.JJ,l.oH,at.XC,f.sg,l.EJ,l.u,l.YN,l.Kr,M.hl,M.nW,gt.R9,M.Mq,St.ey,G.s],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function pg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",55),t.TgZ(1,"a",56),t.NdJ("click",function(){return t.CHM(e),t.oxw().createNew()}),t._UZ(2,"i",57),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.hij("",t.lcZ(4,1,"New_Request")," "))}function ug(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function dg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function mg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function _g(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function gg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function hg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function fg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Request_Type")," "))}function Zg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.AsE("",e.requestType,"","ProjectVariations"==e.requestType?"/"+e.requestSubType:"","")}}function Cg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Request_Number")," "))}function Ag(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.requestNumber)}}function Tg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Requested_By")," "))}function vg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.requestedBy)}}function xg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Requested_Date")," "))}function qg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.requestedDate,"dd/MM/yyyy"))}}function bg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Effective_Date")," "))}function yg(i,a){if(1&i&&(t.TgZ(0,"td",59),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.effectiveDate,"dd/MM/yyyy"))}}function Sg(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function wg(i,a){1&i&&(t.TgZ(0,"span",62),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Ug(i,a){1&i&&(t.TgZ(0,"span",63),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Lg(i,a){if(1&i&&(t.TgZ(0,"td",59),t.YNc(1,wg,3,3,"span",60),t.YNc(2,Ug,3,3,"ng-template",null,61,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function Dg(i,a){1&i&&(t.TgZ(0,"th",64),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Ng(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().edit(n)}),t._UZ(1,"i",70),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function Eg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().delete(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function Og(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approveRequest(n)}),t._UZ(1,"i",72),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function jg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.YNc(1,Ng,3,1,"span",67),t.YNc(2,Eg,3,1,"span",67),t.YNc(3,Og,3,1,"span",67),t.TgZ(4,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewRequest(n)}),t._UZ(5,"i",69),t._uU(6,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request"))}}function kg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().edit(n)}),t._UZ(1,"i",70),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function Mg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().delete(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function Rg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().approveRequest(n)}),t._UZ(1,"i",72),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function Pg(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,kg,3,1,"span",67),t.YNc(2,Mg,3,1,"span",67),t.YNc(3,Rg,3,1,"span",67),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)&&!e.isMerged)}}function Fg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().mapEmpToRes(n)}),t._UZ(1,"i",73),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Mapp_Employee_To_Resource"))}}function Ig(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().mergeRequest(n.requestNumber)}),t._UZ(1,"i",74),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Merge_Resources"))}}function Yg(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Fg,3,1,"span",67),t.YNc(2,Ig,3,1,"span",67),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",(e.canEditReq||e.isAdmin)&&e.isMappedResources)}}function Jg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewRequest(n)}),t._UZ(1,"i",69),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Request"))}}function Qg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewMappings(n.requestNumber)}),t._UZ(1,"i",69),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Resource_Mapping"))}}function Bg(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Pg,4,3,"span",66),t.YNc(2,Yg,3,2,"span",66),t.YNc(3,Jg,3,1,"span",67),t.YNc(4,Qg,3,1,"span",67),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isApproved&&!e.isMerged),t.xp6(1),t.Q6J("ngIf",!e.isMappedResources),t.xp6(1),t.Q6J("ngIf",e.isMappedResources)}}function Hg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendumForm(n)}),t._UZ(1,"i",75),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Generate_Addendum"))}}function Vg(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",76),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function $g(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",77),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function Gg(i,a){if(1&i&&(t.TgZ(0,"td",65),t.YNc(1,jg,7,4,"span",66),t.YNc(2,Bg,5,4,"span",66),t.YNc(3,Hg,3,1,"span",67),t.YNc(4,Vg,3,1,"span",67),t.YNc(5,$g,3,1,"span",67),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","AddResource"!=e.requestType),t.xp6(1),t.Q6J("ngIf","AddResource"==e.requestType),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&e.fileUrl)}}function Wg(i,a){1&i&&t._UZ(0,"tr",78)}function zg(i,a){1&i&&t._UZ(0,"tr",79)}const Ke=function(){return{standalone:!0}};let Xg=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=m,this.pageService=h,this.oprService=C,this.translate=A,this.displayedColumns=["customerCode","siteCode","projectCode","requestType","requestNumber","requestedBy","requestedDate","effectiveDate","isApproved","Actions"],this.totalItemsCount=0,this.searchValue="",this.sortingOrder="requestedDate asc",this.isLoading=!1,this.isUpdating=!1,this.listType="",this.approvedStatus=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,"","")}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}loadList(e,o,n,s,r="",c){this.isLoading=!0,this.apiService.getPagination("PvAllRequests/getPvAllRequestsPagedList",this.utilService.getOprQueryString(e,o,n,s,this.approvedStatus,"",0,"",this.listType)).subscribe(p=>{this.isLoading=!1,this.totalItemsCount=0,this.data=new _.by(p.items),this.totalItemsCount=p.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount,this.isLoading=!1}),this.data.sort=this.sort},p=>{this.utilService.ShowApiErrorMessage(p),this.isLoading=!1})}applyFilter(e,o){(e||o)&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType))}openConfirmationDialogManage(e,o,n,s,r,c,p){let u=this.oprService.confirmationDialog(this.dialog,c);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.id=e,u.componentInstance.confirmType="general",u.afterClosed().subscribe(d=>{d?"SwapEmployees"==o?this.apiService.get("PvSwapEmployees/ApproveReqPvSwapEmployeesReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):"RemoveResource"==o?this.apiService.get("PvRemoveResource/ApproveReqPvRemoveResourceReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):"AddResource"==o?this.apiService.get("PvAddResource/ApproveReqPvAddResourceReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):"TransferResource"==o?this.apiService.get("PvTransferResource/ApproveReqPvTransferResourceReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):"TransferWithReplacement"==o?this.apiService.get("PvTransferWithReplacement/ApproveReqPvTransferWithReplacementReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):"ReplaceResource"==o?this.apiService.get("PvReplaceResource/ApproveReqPvReplaceResourceReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):"ProjectVariations"==o?this.apiService.get("PvOpenCloseReq/ApproveReqPvOpenCloseReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):this.isUpdating=!1:this.isUpdating=!1})}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openDialogManage2(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.requestData=e,c.componentInstance.id=e.id,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}approveRequest(e){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(null==e?void 0:e.requestNumber,null==e?void 0:e.requestType,g.O.update,"Conforming_Approve_Request","Approve",xt,"general"))}edit(e){let o=e.requestType,n=e.requestNumber;"SwapEmployees"==o?this.openDialogManage(n,g.O.update,"Updating_Request_For_Swap_Employees","Update",te):"RemoveResource"==o?this.openDialogManage(n,g.O.update,"Updating_Request_For_Remove_Resource","Update",Rt):"AddResource"==o?this.openDialogManage(n,g.O.update,"Updating_Request_For_Adding_Resources","Update",Ht):"TransferResource"==o?this.openDialogManage(n,g.O.update,"Updating_Request_For_Transfer_Resource","Update",Pt):"ReplaceResource"==o?this.openDialogManage(n,g.O.update,"Updating_Request_For_Replace_Employee","Update",Mt):"TransferWithReplacement"==o?this.openDialogManage(n,g.O.update,"Updating_Request_For_Transfer_With_Replacement","Update",Mt):"ProjectVariations"==o&&this.apiService.get("PvOpenCloseReq/getPvOpenCloseReqById",n).subscribe(s=>{this.openDialogManage2(s,g.O.update,"Updating_Request_For_Open_Close","Update",Et)})}delete(e){let o=e.requestType,n=e.requestNumber;this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(r=>{r&&n>0&&("SwapEmployees"==o?this.apiService.delete("PvSwapEmployees",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"RemoveResource"==o?this.apiService.delete("PvRemoveResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"AddResource"==o?this.apiService.delete("PvAddResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"TransferResource"==o?this.apiService.delete("PvTransferResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"ReplaceResource"==o?this.apiService.delete("PvReplaceResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"TransferWithReplacement"==o?this.apiService.delete("PvTransferWithReplacement",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"ProjectVariations"==o&&this.apiService.delete("PvOpenCloseReq",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}))},r=>this.utilService.ShowApiErrorMessage(r))}viewRequest(e){let o=e.requestType;"SwapEmployees"==o?this.openDialogManage(e.requestNumber,g.O.create,"Request_For_Swap_Employees","View",Kt):"RemoveResource"==o?this.openDialogManage(e.requestNumber,g.O.create,"Request_For_Remove_Resource","View",Rt):"AddResource"==o?this.openDialogManage(e.requestNumber,g.O.create,"Request_For_Add_Resource","View",Ht):"TransferResource"==o?this.openDialogManage(e.requestNumber,g.O.create,"Request_For_Transfer_Employee","View",Pt):"ReplaceResource"==o?this.openDialogManage(e.requestNumber,g.O.create,"Request_For_Replace_Resource","View",Mt):"ProjectVariations"==o?this.apiService.get("PvOpenCloseReq/getPvOpenCloseReqById",e.requestNumber).subscribe(n=>{this.openDialogManage2(n,g.O.create,"Request_For_Open_Close_Project_Site","View",Et)}):"TransferWithReplacement"==o&&this.openDialogManage(e.requestNumber,g.O.create,"Request_For_Transfer_With_Replacement","View",Ft)}translateToolTip(e){return`${this.translate.instant(e)}`}mapEmpToRes(e){this.openDialogManage(e.requestNumber,g.O.create,"Employee_To_Resource_Mapping","Add",Jt)}viewMappings(e){this.openDialogManage(e,g.O.create,"Employee_Mapping_For_Add_Resources","View",Jt)}mergeRequest(e){this.openConfirmationDialogManage2(e,g.O.update,"Confirming_Merge_Request","Merge",xt,"general")}openConfirmationDialogManage2(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u?"Confirming_Merge_Request"==n&&this.apiService.get("PvAddResource/mergePvAddResourceReqById",e).subscribe(d=>{d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{console.error(d),this.utilService.ShowApiErrorMessage(d)}):this.notifyService.showError(this.translate.instant("Something_Went_Wrong"))})}refresh(){this.searchValue="",this.sortingOrder="requestedDate desc",this.approvedStatus="",this.listType="",this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}loadApprovals(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}viewAddendum(e){window.open(e.fileUrl)}uploadAdendum(e){let o=this.oprService.openAutoWidthDialog(this.dialog,ie);o.componentInstance.requestData=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewAddendumForm(e){let o=this.utilService.openCrudDialog(this.dialog,be);o.componentInstance.pvRequest=e,o.componentInstance.type="AddResource"==e.requestType?"ForAddingResources":"RemoveResource"==e.requestType?"ForRemovingResources":"",o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-all-requests"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:119,vars:67,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-2"],[1,"mr-sm-2"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","change","ngModelChange"],["value",""],["value","addResource"],["value","removeResource"],["value","replaceResource"],["value","swapEmployees"],["value","transferResource"],["value","transferWithReplacement"],["value","projectVariations"],["value","approved"],["value","unapproved"],[1,"col-md-3"],[1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[3,"click"],[1,"btn","btn-primary","icon-refresh"],[1,"col-md-1"],[3,"isLoading"],["class","col-md-2 text-right",4,"ngIf"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","requestType"],["matColumnDef","requestNumber"],["matColumnDef","requestedBy"],["matColumnDef","requestedDate"],["matColumnDef","effectiveDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[1,"col-md-2","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-users"],[1,"fas","fa-redo"],[1,"far","fa-arrow-alt-circle-down"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"label",14),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"select",15),t.NdJ("change",function(){return o.loadApprovals()})("ngModelChange",function(s){return o.listType=s}),t.TgZ(29,"option",16),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"option",17),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"option",18),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"option",19),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"option",20),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"option",21),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"option",22),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"option",23),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(53,"div",13),t.TgZ(54,"label",14),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"select",15),t.NdJ("change",function(){return o.loadApprovals()})("ngModelChange",function(s){return o.approvedStatus=s}),t.TgZ(58,"option",16),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"option",24),t._uU(62,"Approved"),t.qZA(),t.TgZ(63,"option",25),t._uU(64,"UnApproved"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"div",26),t._UZ(66,"label",14),t.TgZ(67,"input",27),t.NdJ("ngModelChange",function(s){return o.searchValue=s}),t.ALo(68,"translate"),t.qZA(),t.qZA(),t.TgZ(69,"div",13),t.TgZ(70,"button",28),t.NdJ("click",function(){return o.applyFilter(o.searchValue,o.listType)}),t._uU(71),t.ALo(72,"translate"),t.qZA(),t._uU(73," \xa0 "),t.TgZ(74,"a",29),t.NdJ("click",function(){return o.refresh()}),t._UZ(75,"i",30),t.qZA(),t._uU(76," \xa0 "),t.qZA(),t.TgZ(77,"div",31),t._UZ(78,"spinner-loader",32),t.qZA(),t.YNc(79,pg,5,3,"div",33),t.qZA(),t._UZ(80,"div",34),t.TgZ(81,"div",35),t.TgZ(82,"div",36),t.ynx(83),t.TgZ(84,"table",37),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(85,38),t.YNc(86,ug,3,3,"th",39),t.YNc(87,dg,2,1,"td",40),t.BQk(),t.ynx(88,41),t.YNc(89,mg,3,3,"th",39),t.YNc(90,_g,2,1,"td",40),t.BQk(),t.ynx(91,42),t.YNc(92,gg,3,3,"th",39),t.YNc(93,hg,2,1,"td",40),t.BQk(),t.ynx(94,43),t.YNc(95,fg,3,3,"th",39),t.YNc(96,Zg,2,2,"td",40),t.BQk(),t.ynx(97,44),t.YNc(98,Cg,3,3,"th",39),t.YNc(99,Ag,2,1,"td",40),t.BQk(),t.ynx(100,45),t.YNc(101,Tg,3,3,"th",39),t.YNc(102,vg,2,1,"td",40),t.BQk(),t.ynx(103,46),t.YNc(104,xg,3,3,"th",39),t.YNc(105,qg,3,4,"td",40),t.BQk(),t.ynx(106,47),t.YNc(107,bg,3,3,"th",39),t.YNc(108,yg,3,4,"td",40),t.BQk(),t.ynx(109,48),t.YNc(110,Sg,3,3,"th",39),t.YNc(111,Lg,4,2,"td",40),t.BQk(),t.ynx(112,49),t.YNc(113,Dg,3,3,"th",50),t.YNc(114,Gg,6,5,"td",51),t.BQk(),t.YNc(115,Wg,1,0,"tr",52),t.YNc(116,zg,1,0,"tr",53),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.ynx(117),t.TgZ(118,"mat-paginator",54),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,31,"Project_Management_Requests")," "),t.xp6(6),t.hij(" ",t.lcZ(11,33,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,35,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,37,"Requests")),t.xp6(10),t.Oqu(t.lcZ(27,39,"RequestType")),t.xp6(2),t.Q6J("ngModel",o.listType)("ngModelOptions",t.DdM(65,Ke)),t.xp6(2),t.Oqu(t.lcZ(31,41,"Select")),t.xp6(3),t.Oqu(t.lcZ(34,43,"AddResource")),t.xp6(3),t.Oqu(t.lcZ(37,45,"RemoveResource")),t.xp6(3),t.Oqu(t.lcZ(40,47,"ReplaceResource")),t.xp6(3),t.Oqu(t.lcZ(43,49,"SwapEmployees")),t.xp6(3),t.Oqu(t.lcZ(46,51,"TransferResource")),t.xp6(3),t.Oqu(t.lcZ(49,53,"TransferWithReplacement")),t.xp6(3),t.Oqu(t.lcZ(52,55,"ProjectVariations")),t.xp6(4),t.Oqu(t.lcZ(56,57,"Approval_Status")),t.xp6(2),t.Q6J("ngModel",o.approvedStatus)("ngModelOptions",t.DdM(66,Ke)),t.xp6(2),t.Oqu(t.lcZ(60,59,"Select")),t.xp6(8),t.MGl("placeholder","",t.lcZ(68,61,"Search"),"..."),t.Q6J("ngModel",o.searchValue),t.xp6(4),t.Oqu(t.lcZ(72,63,"Search")),t.xp6(7),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",""!=o.listType&&"projectVariations"!=o.listType),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(31),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.EJ,l.JJ,l.On,l.YN,l.Kr,l.Fj,_t.r,f.O5,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,rt.gM,_.XQ,_.Gk],pipes:[Z.X$,f.uU],encapsulation:2}),i})();function Kg(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function t1(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function e1(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function o1(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function i1(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function n1(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function a1(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Request_Type")," "))}function s1(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reqType)}}function r1(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function l1(i,a){1&i&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function c1(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function p1(i,a){if(1&i&&(t.TgZ(0,"td",35),t.YNc(1,l1,3,3,"span",36),t.YNc(2,c1,3,3,"ng-template",null,37,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function u1(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function d1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n)}),t._UZ(1,"i",45),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function m1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",46),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function _1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",47),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function g1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",48),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function h1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",49),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function f1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",41),t.YNc(1,d1,3,1,"span",42),t.YNc(2,m1,3,1,"span",42),t.YNc(3,_1,3,1,"span",42),t.TgZ(4,"span",43),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewRequest(s)}),t._UZ(5,"i",44),t.qZA(),t.YNc(6,g1,3,1,"span",42),t.YNc(7,h1,3,1,"span",42),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&e.canEditReq),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&e.canEditReq),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request")),t.xp6(2),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin))}}function Z1(i,a){1&i&&t._UZ(0,"tr",50)}function C1(i,a){1&i&&t._UZ(0,"tr",51)}const A1=function(){return{standalone:!0}};let T1=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=m,this.pageService=h,this.oprService=C,this.translate=A,this.displayedColumns=["customerCode","siteCode","projectCode","reqType","isApproved","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvOpenCloseReq/getPvOpenCloseReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.isLoading=!1,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.requestData=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u?(this.isLoading=!0,this.apiService.get("PvOpenCloseReq/ApproveReqPvOpenCloseReqById",e).subscribe(d=>{this.isLoading=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isLoading=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)})):this.isLoading=!1})}edit(e){this.isLoading||this.openDialogManage(e,g.O.update,"Updating_Request_For_Open_Close","Update",Et)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PvOpenCloseReq",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e,g.O.create,"Request_For_Open_Close_Project_Site","View",Et)}mergeRequest(e){}approveRequest(e){this.isLoading?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isLoading=!0,this.openConfirmationDialogManage(e,g.O.update,"Confirming_Approve_Request","Approve",xt,"general"))}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}viewAddendum(e){window.open(e.fileUrl)}uploadAdendum(e){let o=this.oprService.openAutoWidthDialog(this.dialog,ie);o.componentInstance.requestData=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-pv-open-close-reqs"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:56,vars:26,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","reqType"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.qZA(),t._UZ(29,"div",17),t.TgZ(30,"div",18),t.TgZ(31,"div",19),t.ynx(32),t.TgZ(33,"table",20),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(34,21),t.YNc(35,Kg,3,3,"th",22),t.YNc(36,t1,2,1,"td",23),t.BQk(),t.ynx(37,24),t.YNc(38,e1,3,3,"th",22),t.YNc(39,o1,2,1,"td",23),t.BQk(),t.ynx(40,25),t.YNc(41,i1,3,3,"th",22),t.YNc(42,n1,2,1,"td",23),t.BQk(),t.ynx(43,26),t.YNc(44,a1,3,3,"th",22),t.YNc(45,s1,2,1,"td",23),t.BQk(),t.ynx(46,27),t.YNc(47,r1,3,3,"th",22),t.YNc(48,p1,4,2,"td",23),t.BQk(),t.ynx(49,28),t.YNc(50,u1,3,3,"th",29),t.YNc(51,f1,8,6,"td",30),t.BQk(),t.YNc(52,Z1,1,0,"tr",31),t.YNc(53,C1,1,0,"tr",32),t.qZA(),t.ynx(54),t.TgZ(55,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,15,"Requests_For_Open_Close_Project_Sites")," "),t.xp6(6),t.hij(" ",t.lcZ(11,17,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,19,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,21,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,23,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(25,A1)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function v1(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function x1(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function q1(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function b1(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function y1(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function S1(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function w1(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee")," "))}function U1(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeNumber)}}function L1(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"From_Date")," "))}function D1(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.ToDateString(e.fromDate))}}function N1(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function E1(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function O1(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function j1(i,a){if(1&i&&(t.TgZ(0,"td",39),t.YNc(1,E1,3,3,"span",40),t.YNc(2,O1,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function k1(i,a){1&i&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function M1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",49),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function R1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",50),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function P1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",51),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function F1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendumForm(n)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Generate_Addendum"))}}function I1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function Y1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function J1(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",45),t.YNc(1,M1,3,1,"span",46),t.YNc(2,R1,3,1,"span",46),t.YNc(3,P1,3,1,"span",46),t.YNc(4,F1,3,1,"span",46),t.YNc(5,I1,3,1,"span",46),t.YNc(6,Y1,3,1,"span",46),t.TgZ(7,"span",47),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewRequest(s)}),t._UZ(8,"i",48),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&e.fileUrl),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request"))}}function Q1(i,a){1&i&&t._UZ(0,"tr",55)}function B1(i,a){1&i&&t._UZ(0,"tr",56)}const H1=function(){return{standalone:!0}};let V1=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=m,this.pageService=h,this.oprService=C,this.translate=A,this.displayedColumns=["customerCode","siteCode","projectCode","employeeNumber","fromDate","isApproved","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isUpdating=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvRemoveResource/getPvRemoveResourceReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,console.log(r.items),this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u?this.apiService.get("PvRemoveResource/ApproveReqPvRemoveResourceReqById",e).subscribe(d=>{this.isUpdating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{console.error(d),this.utilService.ShowApiErrorMessage(d),this.isUpdating=!1}):this.isUpdating=!1})}create(){!this.isUpdating&&!this.isLoading&&this.openDialogManage(0,g.O.create,"New_Request_For_Remove_Resource","Add",Rt)}edit(e){!this.isUpdating&&!this.isLoading&&this.openDialogManage(e,g.O.update,"Updating_Request_For_Remove_Resource","Update",Rt)}delete(e){!this.isUpdating&&!this.isUpdating&&this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&(this.isUpdating=!0,this.apiService.delete("PvRemoveResource",e).subscribe(s=>{this.isUpdating=!1,this.utilService.OkMessage(),this.ngOnInit()}))},n=>{this.isUpdating=!1,this.utilService.ShowApiErrorMessage(n)})}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e.id,g.O.create,"Request_For_Remove_Resource","View",Rt)}mergeRequest(e){}approveRequest(e){this.isUpdating||this.isLoading?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(e,g.O.update,"Confirming_Approve_Request","Approve",xt,"general"))}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}viewAddendum(e){window.open(e.fileUrl)}uploadAdendum(e){let o=this.oprService.openAutoWidthDialog(this.dialog,ie);o.componentInstance.requestData=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewAddendumForm(e){let o=this.utilService.openCrudDialog(this.dialog,be);o.componentInstance.pvRequest=e,o.componentInstance.type="AddResource"==e.requestType?"ForAddingResources":"RemoveResource"==e.requestType?"ForRemovingResources":"",o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-remove-resource"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:64,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"col-md-5","col-lg-5","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","employeeNumber"],["matColumnDef","fromDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"far","fa-arrow-alt-circle-down"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.TgZ(36,"div",22),t.ynx(37),t.TgZ(38,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(39,24),t.YNc(40,v1,3,3,"th",25),t.YNc(41,x1,2,1,"td",26),t.BQk(),t.ynx(42,27),t.YNc(43,q1,3,3,"th",25),t.YNc(44,b1,2,1,"td",26),t.BQk(),t.ynx(45,28),t.YNc(46,y1,3,3,"th",25),t.YNc(47,S1,2,1,"td",26),t.BQk(),t.ynx(48,29),t.YNc(49,w1,3,3,"th",25),t.YNc(50,U1,2,1,"td",26),t.BQk(),t.ynx(51,30),t.YNc(52,L1,3,3,"th",25),t.YNc(53,D1,2,1,"td",26),t.BQk(),t.ynx(54,31),t.YNc(55,N1,3,3,"th",25),t.YNc(56,j1,4,2,"td",26),t.BQk(),t.ynx(57,32),t.YNc(58,k1,3,3,"th",33),t.YNc(59,J1,9,7,"td",34),t.BQk(),t.YNc(60,Q1,1,0,"tr",35),t.YNc(61,B1,1,0,"tr",36),t.qZA(),t.ynx(62),t.TgZ(63,"mat-paginator",37),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Requests_For_Remove_Resource")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,H1)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(33,26,"New_Request")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function $1(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function G1(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function W1(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function z1(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function X1(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function K1(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function th(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Resigned_Employee")," "))}function eh(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.resignedEmployeeNumber)}}function oh(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Replaced_Employee")," "))}function ih(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.replacedEmployeeNumber)}}function nh(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"From_Date")," "))}function ah(i,a){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.ToDateString(e.fromDate))}}function sh(i,a){1&i&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function rh(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function lh(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function ch(i,a){if(1&i&&(t.TgZ(0,"td",40),t.YNc(1,rh,3,3,"span",41),t.YNc(2,lh,3,3,"ng-template",null,42,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function ph(i,a){1&i&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function uh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",50),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function dh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",51),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function mh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function _h(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function gh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",48),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function hh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",46),t.YNc(1,uh,3,1,"span",47),t.YNc(2,dh,3,1,"span",47),t.YNc(3,mh,3,1,"span",47),t.TgZ(4,"span",48),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewRequest(s.id)}),t._UZ(5,"i",49),t.qZA(),t.YNc(6,_h,3,1,"span",47),t.YNc(7,gh,3,1,"span",47),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.isApproved&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!e.isApproved&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request")),t.xp6(2),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&!e.fileUrl&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&!e.fileUrl&&(e.canApproveReq||e.isAdmin))}}function fh(i,a){1&i&&t._UZ(0,"tr",55)}function Zh(i,a){1&i&&t._UZ(0,"tr",56)}const Ch=function(){return{standalone:!0}};let Ah=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=m,this.pageService=h,this.oprService=C,this.translate=A,this.displayedColumns=["customerCode","siteCode","projectCode","resignedEmployeeNumber","replacedEmployeeNumber","fromDate","isApproved","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isUpdating=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvReplaceResource/getPvReplaceResourceReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u?this.apiService.get("PvReplaceResource/ApproveReqPvReplaceResourceReqById",e).subscribe(d=>{this.isUpdating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isUpdating=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)}):this.isUpdating=!1})}create(){this.openDialogManage(0,g.O.create,"New_Request_For_Replace_Employee","Add",Mt)}edit(e){this.openDialogManage(e,g.O.update,"Updating_Request_For_Replace_Employee","Update",Mt)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PvReplaceResource",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e,g.O.create,"Add_Resource_Request","View",Mt)}mergeRequest(e){}approveRequest(e){this.isUpdating?this.notifyService.showError(this.translate.instant("Please wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(e,g.O.update,"Confirming_Approve_Request","Approve",xt,"general"))}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}uploadAdendum(e){}viewAddendum(e){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-replace-employee"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:67,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"col-md-5","col-lg-5","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","resignedEmployeeNumber"],["matColumnDef","replacedEmployeeNumber"],["matColumnDef","fromDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.TgZ(36,"div",22),t.ynx(37),t.TgZ(38,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(39,24),t.YNc(40,$1,3,3,"th",25),t.YNc(41,G1,2,1,"td",26),t.BQk(),t.ynx(42,27),t.YNc(43,W1,3,3,"th",25),t.YNc(44,z1,2,1,"td",26),t.BQk(),t.ynx(45,28),t.YNc(46,X1,3,3,"th",25),t.YNc(47,K1,2,1,"td",26),t.BQk(),t.ynx(48,29),t.YNc(49,th,3,3,"th",25),t.YNc(50,eh,2,1,"td",26),t.BQk(),t.ynx(51,30),t.YNc(52,oh,3,3,"th",25),t.YNc(53,ih,2,1,"td",26),t.BQk(),t.ynx(54,31),t.YNc(55,nh,3,3,"th",25),t.YNc(56,ah,2,1,"td",26),t.BQk(),t.ynx(57,32),t.YNc(58,sh,3,3,"th",25),t.YNc(59,ch,4,2,"td",26),t.BQk(),t.ynx(60,33),t.YNc(61,ph,3,3,"th",34),t.YNc(62,hh,8,6,"td",35),t.BQk(),t.YNc(63,fh,1,0,"tr",36),t.YNc(64,Zh,1,0,"tr",37),t.qZA(),t.ynx(65),t.TgZ(66,"mat-paginator",38),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Requests_For_Replace_Employee")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,Ch)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(33,26,"New_Request")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function Th(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function vh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcCustomerCode)}}function xh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function qh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcSiteCode)}}function bh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function yh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcProjectCode)}}function Sh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function wh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destCustomerCode)}}function Uh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function Lh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destSiteCode)}}function Dh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function Nh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destProjectCode)}}function Eh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee")," "))}function Oh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeNumber)}}function jh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"From_Date")," "))}function kh(i,a){if(1&i&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.ToDateString(e.fromDate))}}function Mh(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function Rh(i,a){1&i&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Ph(i,a){1&i&&(t.TgZ(0,"span",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Fh(i,a){if(1&i&&(t.TgZ(0,"td",41),t.YNc(1,Rh,3,3,"span",42),t.YNc(2,Ph,3,3,"ng-template",null,43,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function Ih(i,a){1&i&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Yh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",51),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function Jh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function Qh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function Bh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function Hh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function Vh(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",47),t.YNc(1,Yh,3,1,"span",48),t.YNc(2,Jh,3,1,"span",48),t.YNc(3,Qh,3,1,"span",48),t.TgZ(4,"span",49),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewRequest(s.id)}),t._UZ(5,"i",50),t.qZA(),t.YNc(6,Bh,3,1,"span",48),t.YNc(7,Hh,3,1,"span",48),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request")),t.xp6(2),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin))}}function $h(i,a){1&i&&t._UZ(0,"tr",56)}function Gh(i,a){1&i&&t._UZ(0,"tr",57)}const Wh=function(){return{standalone:!0}};let zh=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=m,this.pageService=h,this.oprService=C,this.translate=A,this.displayedColumns=["srcCustomerCode","srcSiteCode","srcProjectCode","destCustomerCode","destSiteCode","destProjectCode","employeeNumber","fromDate","isApproved","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isUpdating=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvTransferResource/getPvTransferResourceReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u&&this.apiService.getall(`PvTransferResource/ApproveReqPvTransferResourceReqById/${e}`).subscribe(d=>{this.isUpdating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isUpdating=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)})})}create(){this.openDialogManage(0,g.O.create,"New_Request_For_Transfer_Resource","Add",Pt)}edit(e){this.openDialogManage(e,g.O.update,"Updating_Request_For_Transfer_Resource","Update",Pt)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PvTransferResource",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e,g.O.create,"Request_For_Transfer_Employee","View",Pt)}mergeRequest(e){}approveRequest(e){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(e,g.O.update,"Confirming_Approve_Request","Approve",xt,"general"))}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}uploadAdendum(e){}viewAddendum(e){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-transfer-employee"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:72,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"col-md-5","col-lg-5","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","srcCustomerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","srcSiteCode"],["matColumnDef","srcProjectCode"],["matColumnDef","destCustomerCode"],["matColumnDef","destSiteCode"],["matColumnDef","destProjectCode"],["matColumnDef","employeeNumber"],["matColumnDef","fromDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.ynx(36),t.TgZ(37,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(38,23),t.YNc(39,Th,3,3,"th",24),t.YNc(40,vh,2,1,"td",25),t.BQk(),t.ynx(41,26),t.YNc(42,xh,3,3,"th",24),t.YNc(43,qh,2,1,"td",25),t.BQk(),t.ynx(44,27),t.YNc(45,bh,3,3,"th",24),t.YNc(46,yh,2,1,"td",25),t.BQk(),t.ynx(47,28),t.YNc(48,Sh,3,3,"th",24),t.YNc(49,wh,2,1,"td",25),t.BQk(),t.ynx(50,29),t.YNc(51,Uh,3,3,"th",24),t.YNc(52,Lh,2,1,"td",25),t.BQk(),t.ynx(53,30),t.YNc(54,Dh,3,3,"th",24),t.YNc(55,Nh,2,1,"td",25),t.BQk(),t.ynx(56,31),t.YNc(57,Eh,3,3,"th",24),t.YNc(58,Oh,2,1,"td",25),t.BQk(),t.ynx(59,32),t.YNc(60,jh,3,3,"th",24),t.YNc(61,kh,2,1,"td",25),t.BQk(),t.ynx(62,33),t.YNc(63,Mh,3,3,"th",24),t.YNc(64,Fh,4,2,"td",25),t.BQk(),t.ynx(65,34),t.YNc(66,Ih,3,3,"th",35),t.YNc(67,Vh,8,6,"td",36),t.BQk(),t.YNc(68,$h,1,0,"tr",37),t.YNc(69,Gh,1,0,"tr",38),t.qZA(),t.BQk(),t.qZA(),t.ynx(70),t.TgZ(71,"mat-paginator",39),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Requests_For_Transfer_Resource")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,Wh)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(33,26,"New_Request")," "),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(31),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function Xh(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function Kh(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcCustomerCode)}}function tf(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function ef(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcSiteCode)}}function of(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function nf(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcProjectCode)}}function af(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function sf(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destCustomerCode)}}function rf(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function lf(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destSiteCode)}}function cf(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function pf(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destProjectCode)}}function uf(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Source_Employee")," "))}function df(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.srcEmployeeNumber)}}function mf(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Destination_Employee")," "))}function _f(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.destEmployeeNumber)}}function gf(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"From_Date")," "))}function hf(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.ToDateString(e.fromDate))}}function ff(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function Zf(i,a){1&i&&(t.TgZ(0,"span",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Cf(i,a){1&i&&(t.TgZ(0,"span",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Af(i,a){if(1&i&&(t.TgZ(0,"td",42),t.YNc(1,Zf,3,3,"span",43),t.YNc(2,Cf,3,3,"ng-template",null,44,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function Tf(i,a){1&i&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function vf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().edit(n.id)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function xf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().delete(n.id)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function qf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveRequest(n.id)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function bf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function yf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",50),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",56),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function Sf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",48),t.YNc(1,vf,3,1,"span",49),t.YNc(2,xf,3,1,"span",49),t.YNc(3,qf,3,1,"span",49),t.TgZ(4,"span",50),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewRequest(s.id)}),t._UZ(5,"i",51),t.qZA(),t.YNc(6,bf,3,1,"span",49),t.YNc(7,yf,3,1,"span",49),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request")),t.xp6(2),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(!e.fileUrl||!e.isApproved)&&(e.canApproveReq||e.isAdmin))}}function wf(i,a){1&i&&t._UZ(0,"tr",57)}function Uf(i,a){1&i&&t._UZ(0,"tr",58)}const Lf=function(){return{standalone:!0}};let Df=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=m,this.pageService=h,this.oprService=C,this.translate=A,this.displayedColumns=["srcCustomerCode","srcSiteCode","srcProjectCode","destCustomerCode","destSiteCode","destProjectCode","srcEmployeeNumber","destEmployeeNumber","fromDate","isApproved","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isUpdating=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("PvTransferWithReplacement/getPvTransferWithReplacementReqsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialogManage(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u&&this.apiService.get("PvTransferWithReplacement/ApproveReqPvTransferWithReplacementReqById",e).subscribe(d=>{this.isUpdating=!1,d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{this.isUpdating=!1,console.error(d),this.utilService.ShowApiErrorMessage(d)})})}create(){this.openDialogManage(0,g.O.create,"New_Request_For_Transfer_Resource","Add",Ft)}edit(e){this.openDialogManage(e,g.O.update,"Updating_Request_For_Transfer_Resource","Update",Ft)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("PvTransferWithReplacement",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}translateToolTip(e){return`${this.translate.instant(e)}`}viewRequest(e){this.openDialogManage(e,g.O.create,"Request_For_Transfer_Employee","View",Ft)}mergeRequest(e){}approveRequest(e){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(e,g.O.update,"Confirming_Approve_Request","Approve",xt,"general"))}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}uploadAdendum(e){}viewAddendum(e){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-transfer-with-replacement"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:75,vars:29,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"col-md-5","col-lg-5","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","srcCustomerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","srcSiteCode"],["matColumnDef","srcProjectCode"],["matColumnDef","destCustomerCode"],["matColumnDef","destSiteCode"],["matColumnDef","destProjectCode"],["matColumnDef","srcEmployeeNumber"],["matColumnDef","destEmployeeNumber"],["matColumnDef","fromDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",13),t.TgZ(25,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t._UZ(28,"spinner-loader",16),t.qZA(),t.TgZ(29,"div",17),t.TgZ(30,"a",18),t.NdJ("click",function(){return o.create()}),t._UZ(31,"i",19),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"div",20),t.TgZ(35,"div",21),t.ynx(36),t.TgZ(37,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(38,23),t.YNc(39,Xh,3,3,"th",24),t.YNc(40,Kh,2,1,"td",25),t.BQk(),t.ynx(41,26),t.YNc(42,tf,3,3,"th",24),t.YNc(43,ef,2,1,"td",25),t.BQk(),t.ynx(44,27),t.YNc(45,of,3,3,"th",24),t.YNc(46,nf,2,1,"td",25),t.BQk(),t.ynx(47,28),t.YNc(48,af,3,3,"th",24),t.YNc(49,sf,2,1,"td",25),t.BQk(),t.ynx(50,29),t.YNc(51,rf,3,3,"th",24),t.YNc(52,lf,2,1,"td",25),t.BQk(),t.ynx(53,30),t.YNc(54,cf,3,3,"th",24),t.YNc(55,pf,2,1,"td",25),t.BQk(),t.ynx(56,31),t.YNc(57,uf,3,3,"th",24),t.YNc(58,df,2,1,"td",25),t.BQk(),t.ynx(59,32),t.YNc(60,mf,3,3,"th",24),t.YNc(61,_f,2,1,"td",25),t.BQk(),t.ynx(62,33),t.YNc(63,gf,3,3,"th",24),t.YNc(64,hf,2,1,"td",25),t.BQk(),t.ynx(65,34),t.YNc(66,ff,3,3,"th",24),t.YNc(67,Af,4,2,"td",25),t.BQk(),t.ynx(68,35),t.YNc(69,Tf,3,3,"th",36),t.YNc(70,Sf,8,6,"td",37),t.BQk(),t.YNc(71,wf,1,0,"tr",38),t.YNc(72,Uf,1,0,"tr",39),t.qZA(),t.BQk(),t.qZA(),t.ynx(73),t.TgZ(74,"mat-paginator",40),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Requests_For_Transfer_Resource")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Requests")),t.xp6(9),t.MGl("placeholder","",t.lcZ(26,24,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(28,Lf)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(33,26,"New_Request")," "),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(34),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function Nf(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArab?e.siteArbName:e.siteName)}}function Ef(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.costPerUnit+e.margin)}}function Of(i,a){1&i&&(t.TgZ(0,"td"),t._uU(1,"-"),t.qZA())}function jf(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.quantity)}}function kf(i,a){1&i&&(t.TgZ(0,"td"),t._uU(1,"-"),t.qZA())}function Mf(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.quantity*(e.costPerUnit+e.margin))}}function Rf(i,a){1&i&&(t.TgZ(0,"td",37),t._uU(1,"-"),t.qZA())}function Pf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",42),t.TgZ(1,"button",43),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),s=n.$implicit,r=n.index;return t.oxw(2).getResourceSubCostingList(s,r)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit")))}function Ff(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",42),t.TgZ(1,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).cancelEditCosting()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Cancel")))}function If(i,a){if(1&i&&(t.TgZ(0,"tr",38),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,Ef,2,1,"td",39),t.YNc(4,Of,2,0,"td",39),t.YNc(5,jf,2,1,"td",39),t.YNc(6,kf,2,0,"td",39),t.YNc(7,Mf,2,1,"td",40),t.YNc(8,Rf,2,0,"td",40),t.TgZ(9,"td"),t.YNc(10,Pf,4,3,"span",41),t.YNc(11,Ff,4,3,"span",41),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.Oqu(n.isArab?e.nameInArabic:e.nameInEnglish),t.xp6(1),t.Q6J("ngIf",0!=e.costPerUnit),t.xp6(1),t.Q6J("ngIf",0==e.costPerUnit),t.xp6(1),t.Q6J("ngIf",0!=e.quantity),t.xp6(1),t.Q6J("ngIf",0==e.quantity),t.xp6(1),t.Q6J("ngIf",0!=e.quantity),t.xp6(1),t.Q6J("ngIf",0==e.quantity),t.xp6(2),t.Q6J("ngIf",-1==n.activeResourceIndex),t.xp6(1),t.Q6J("ngIf",n.activeResourceIndex==o&&(null==n.projectBudgetCosting.resourceCostingsList[n.activeResourceIndex]?null:n.projectBudgetCosting.resourceCostingsList[n.activeResourceIndex].costPerUnit)+(null==n.projectBudgetCosting.resourceCostingsList[n.activeResourceIndex]?null:n.projectBudgetCosting.resourceCostingsList[n.activeResourceIndex].margin)==0)}}function Yf(i,a){if(1&i&&(t.TgZ(0,"table",34),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"th"),t.qZA(),t.qZA(),t.TgZ(16,"tbody"),t.YNc(17,If,12,9,"tr",35),t.TgZ(18,"tr"),t.TgZ(19,"th",36),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",37),t._uU(23),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,7,"Resource")," "),t.xp6(3),t.Oqu(t.lcZ(8,9,"Cost_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(11,11,"Count")),t.xp6(3),t.Oqu(t.lcZ(14,13,"Amount")),t.xp6(4),t.Q6J("ngForOf",e.projectBudgetCosting.resourceCostingsList),t.xp6(3),t.hij(" ",t.lcZ(21,15,"Total")," "),t.xp6(3),t.hij(" ",e.grandTotal," ")}}function Jf(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.costHead),t.xp6(1),t.Oqu(o.isArab?null==e?null:e.costNameInArabic:null==e?null:e.costNameInEnglish)}}function Qf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",54),t._uU(2),t.qZA(),t.TgZ(3,"td",55),t._uU(4),t.qZA(),t.TgZ(5,"td",56),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(3).removeSubCostings(s)}),t.TgZ(6,"a",57),t._UZ(7,"i",58),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(3);let n;t.xp6(2),t.Oqu(o.isArab?null==(n=o.getCostHead(e.costHead))?null:n.costNameInArabic:null==(n=o.getCostHead(e.costHead))?null:n.costNameInEnglish),t.xp6(2),t.Oqu(e.amount)}}function Bf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",43),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).SubCostingOK()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"OK")))}const Hf=function(){return{standalone:!0}};function Vf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"table",49),t.TgZ(1,"tbody"),t.TgZ(2,"tr"),t.TgZ(3,"th",50),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",51),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"th"),t.qZA(),t.YNc(10,Qf,8,2,"tr",52),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",37),t._uU(16),t.qZA(),t._UZ(17,"th"),t.qZA(),t.TgZ(18,"tr"),t.TgZ(19,"td",37),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"td"),t.TgZ(23,"input",53),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return s.projectBudgetCosting.resourceCostingsList[s.activeResourceIndex].margin=n})("keyup",function(){return t.CHM(e),t.oxw(2).changeMargin()}),t.ALo(24,"translate"),t.qZA(),t.qZA(),t._UZ(25,"td"),t.qZA(),t.TgZ(26,"tr"),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th",37),t._uU(31),t.qZA(),t.TgZ(32,"th"),t.YNc(33,Bf,4,3,"span",39),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,12,"Costing_Head")," "),t.xp6(3),t.Oqu(t.lcZ(8,14,"Amount")),t.xp6(3),t.Q6J("ngForOf",e.resourceSubCostingList),t.xp6(3),t.Oqu(t.lcZ(14,16,"Sub_Total")),t.xp6(3),t.hij(" ",null==e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex]?null:e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex].costPerUnit," "),t.xp6(4),t.Oqu(t.lcZ(21,18,"Margin")),t.xp6(3),t.s9C("placeholder",t.lcZ(24,20,"Margin")),t.Q6J("ngModel",e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex].margin)("ngModelOptions",t.DdM(24,Hf)),t.xp6(5),t.Oqu(t.lcZ(29,22,"Cost_Per_Unit")),t.xp6(3),t.hij(" ",(null==e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex]?null:e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex].costPerUnit)+(null==e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex]?null:e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex].margin)," "),t.xp6(2),t.Q6J("ngIf",(null==e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex]?null:e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex].costPerUnit)+(null==e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex]?null:e.projectBudgetCosting.resourceCostingsList[e.activeResourceIndex].margin)>0)}}function $f(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",24),t.TgZ(1,"div",23),t.TgZ(2,"div",3),t.TgZ(3,"div",24),t.TgZ(4,"select",44),t.NdJ("change",function(n){return t.CHM(e),t.oxw().selectCostHead(n)}),t.TgZ(5,"option",20),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA(),t.YNc(9,Jf,2,2,"option",21),t.qZA(),t.qZA(),t.TgZ(10,"div",25),t._UZ(11,"input",45),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",26),t.TgZ(15,"a",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().addUpdateSubCostings()}),t._UZ(16,"i",47),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,Vf,34,25,"table",48),t.qZA()}if(2&i){const e=t.oxw();t.xp6(6),t.AsE("",t.lcZ(7,6,"Select")," ",t.lcZ(8,8,"Costing_Head")," "),t.xp6(3),t.Q6J("ngForOf",e.resourceExpenceHeadSelectList),t.xp6(2),t.hYB("placeholder","",t.lcZ(12,10,"Enter")," ",t.lcZ(13,12,"Amount"),""),t.xp6(6),t.Q6J("ngIf",-1!=e.activeResourceIndex)}}function Gf(i,a){1&i&&t._UZ(0,"input",59)}function Wf(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",60),t.NdJ("click",function(){return t.CHM(e),t.oxw().skippEstimationType()}),t.qZA()}}let ne=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.skillSetsList=[],this.numberRegEx=/\-?\d*\.?\d{1,2}/,this.isArab=!1,this.canSave=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.getAllSkillSetList(),this.setForm()}getAllSkillSetList(){this.apiService.getall("Skillset/GetAllSkillsetList").subscribe(e=>{this.skillSetsList=e,console.log(e)})}setForm(){var e;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null==(null===(e=this.project)||void 0===e?void 0:e.siteCode)?"":this.project.siteCode,l.kI.required],subCostAmount:[""],subCostCostHead:[""],margin:[0,l.kI.pattern(this.numberRegEx)]}),this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{var n;null!=o?(this.siteCodeSelectList=o,null!=(null===(n=this.project)||void 0===n?void 0:n.siteCode)&&(this.loadInitialData(),this.form.controls.siteCode.disable({onlySelf:!0}))):this.siteCodeSelectList=[]})}closeModel(){this.dialogRef.close()}submit(){this.form.valid&&0!=this.grandTotal?this.apiService.post("projectBudgetCosting/createProjectResourceCostingForSite",this.projectBudgetCosting).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.log(e),console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}loadInitialData(){this.apiService.getall(`projectBudgetCosting/getProjectResourceCostingForSite/${this.project.customerCode}/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{if(null!=e.resourceCostingsList){console.log(e.resourceCostingsList);for(let o=0;o<e.resourceCostingsList.length;o++)e.resourceCostingsList[o].nameInEnglish=this.skillSetsList.find(n=>n.skillSetCode==e.resourceCostingsList[o].skillsetCode).nameInEnglish,e.resourceCostingsList[o].nameInArabic=this.skillSetsList.find(n=>n.skillSetCode==e.resourceCostingsList[o].skillsetCode).nameInArabic}this.projectBudgetCosting=e,0==this.projectBudgetCosting.status?this.createNewProjectBudgetCosting():3!=this.projectBudgetCosting.status&&this.createNewResourceBudgetCostingList(),this.findTotalsCosts()}),this.apiService.getall("OperationExpenseHead/getOperationExpenseHeadsForResources").subscribe(e=>{this.resourceExpenceHeadSelectList=e})}createNewProjectBudgetCosting(){this.projectBudgetCosting.customerCode=this.project.customerCode,this.projectBudgetCosting.projectCode=this.project.projectCode,this.projectBudgetCosting.siteCode=this.form.controls.siteCode.value,this.projectBudgetCosting.serviceType="SKILLSET",this.createNewResourceBudgetCostingList()}createNewResourceBudgetCostingList(){this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectBudgetCosting.resourceCostingsList=[];let o=[];for(let n=0;n<(null==e?void 0:e.length);n++){let s={costPerUnit:0,projectBudgetCostingId:0,quantity:e[n].quantity,margin:0,resourceCostingId:0,resourceSubCostingList:o.slice(),skillSetCode:e[n].skillSetCode,nameInEnglish:e[n].nameInEnglish,nameInArabic:e[n].nameInArabic,totResourceCost:0,siteCode:this.form.controls.siteCode.value};this.projectBudgetCosting.resourceCostingsList.push(s)}})}getResourceSubCostingList(e,o){this.activeResourceIndex=o,this.resourceSubCostingList=e.resourceSubCostingList.slice(),this.totalForResourceUnit=e.costPerUnit,this.findTotalsCosts()}findTotalsCosts(){var e,o;this.grandTotal=0,0!=(null===(e=this.projectBudgetCosting.resourceCostingsList)||void 0===e?void 0:e.length)&&(null===(o=this.projectBudgetCosting.resourceCostingsList)||void 0===o||o.forEach(n=>{n.costPerUnit=0,n.resourceSubCostingList.forEach(s=>{n.costPerUnit+=s.amount}),n.totResourceCost=(n.costPerUnit+n.margin)*n.quantity,this.grandTotal=this.grandTotal+n.totResourceCost}))}onSelectSiteCode(e){this.totalForResourceUnit=0,this.form.controls.siteCode.setValue(e.target.value),this.loadInitialData()}addUpdateSubCostings(){var e;let o=this.form.controls.subCostAmount.value,n=this.form.controls.subCostCostHead.value;if(o>0&&""!=o&&""!=n){let s={amount:o,costHead:n};if(null==this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex].resourceSubCostingList.find(c=>c.costHead==n))null===(e=this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex].resourceSubCostingList)||void 0===e||e.push(s);else{let c=this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex].resourceSubCostingList.findIndex(p=>p.costHead==n);this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex].resourceSubCostingList[c].amount=o}this.findTotalsCosts(),this.getResourceSubCostingList(this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex],this.activeResourceIndex),this.resetSubCosting()}this.canSave=!this.projectBudgetCosting.resourceCostingsList.find(s=>s.totResourceCost<=0)}removeSubCostings(e){this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex].resourceSubCostingList.splice(e,1),this.findTotalsCosts(),this.getResourceSubCostingList(this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex],this.activeResourceIndex)}resetSubCosting(){this.form.controls.subCostAmount.setValue(""),this.form.controls.subCostCostHead.setValue("")}selectCostHead(e){let o=e.target.value;if(-1!=this.activeResourceIndex){this.form.controls.subCostCostHead.setValue(e.target.value);let n=this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex].resourceSubCostingList.find(s=>s.costHead==o);this.form.controls.subCostAmount.setValue(null!=n?n.amount:"")}else this.form.controls.subCostCostHead.setValue(""),this.form.controls.subCostAmount.setValue("")}changeMargin(){this.getResourceSubCostingList(this.projectBudgetCosting.resourceCostingsList[this.activeResourceIndex],this.activeResourceIndex),this.findTotalsCosts()}getCostHead(e){return this.resourceExpenceHeadSelectList.find(o=>o.costHead==e)}getSkillSet(e){return this.skillSetsList.find(o=>o.skillSetCode==e)}SubCostingOK(){this.activeResourceIndex=-1,this.canSave=!this.projectBudgetCosting.resourceCostingsList.find(e=>e.totResourceCost<=0)}cancelEditCosting(){this.activeResourceIndex=-1,this.canSave=!this.projectBudgetCosting.resourceCostingsList.find(e=>e.totResourceCost<=0)}skippEstimationType(){this.apiService.post("projectBudgetCosting/skippEstimationType",{projectCode:this.project.projectCode,siteCode:this.project.siteCode,type:"resource"}).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.log(o),console.error(o),this.utilService.ShowApiErrorMessage(o)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-resource-costing"]],features:[t.qOj],decls:65,vars:39,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-6",2,"padding-right","0"],[1,"paddingtop15"],[1,"col-md-6","col-lg-6"],[1,"col-md-5","col-lg-4"],[1,"col-md-2","col-lg-1"],["class","table  table-bordered table-borderedcustom no-wrap","id","table",4,"ngIf"],["class","col-md-6 col-lg-6",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button","value","CLOSE",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SAVE",4,"ngIf"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SKIP",3,"click",4,"ngIf"],[3,"value"],["id","table",1,"table","table-bordered","table-borderedcustom","no-wrap"],["class","selected",4,"ngFor","ngForOf"],["colspan","3",2,"text-align","right"],[2,"text-align","right"],[1,"selected"],[4,"ngIf"],["style","text-align: right;",4,"ngIf"],["style","font-size:smaller",4,"ngIf"],[2,"font-size","smaller"],["type","button",1,"btn","waves-effect","waves-light","btn-outline-primary",3,"click"],["formControlName","subCostCostHead",1,"custom-select","mr-sm-2",3,"change"],["type","number","formControlName","subCostAmount",1,"form-control",3,"placeholder"],[2,"font-size","30px",3,"click"],[1,"icon-plus"],["class","table tablecolor  table-bordered no-wrap",4,"ngIf"],[1,"table","tablecolor","table-bordered","no-wrap"],["width","60%"],["width","30%"],[4,"ngFor","ngForOf"],["type","number",1,"form-control",2,"text-align","right",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],[2,"width","60%"],[2,"width","30%","text-align","right"],[2,"width","10%","text-align","right",3,"click"],[1,"tableicons"],[1,"icon-trash"],["type","submit","value","SAVE",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock"],["type","button","value","SKIP",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(1," \xd7"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",3),t.TgZ(9,"div",7),t.TgZ(10,"h4",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(13,"div",9),t.TgZ(14,"div"),t.TgZ(15,"div",4),t.TgZ(16,"div",10),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t.TgZ(19,"label",13),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t._UZ(24,"input",16),t.ALo(25,"translate"),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(28,"div",12),t.TgZ(29,"label",13),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",14),t.TgZ(33,"div",15),t._UZ(34,"input",18),t.ALo(35,"translate"),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(38,"div",12),t.TgZ(39,"div",14),t.TgZ(40,"label",13),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"select",19),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(44,"option",20),t._uU(45),t.ALo(46,"translate"),t.ALo(47,"translate"),t.qZA(),t.YNc(48,Nf,2,2,"option",21),t.qZA(),t._UZ(49,"validation-message",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",3),t.TgZ(51,"div",22),t.TgZ(52,"div",23),t.TgZ(53,"div",3),t._UZ(54,"div",24),t._UZ(55,"div",25),t._UZ(56,"div",26),t.qZA(),t.qZA(),t.YNc(57,Yf,24,17,"table",27),t.qZA(),t.YNc(58,$f,18,14,"div",28),t.qZA(),t.qZA(),t.TgZ(59,"div",3),t.TgZ(60,"div",29),t.TgZ(61,"input",30),t.NdJ("click",function(){return o.closeModel()}),t.qZA(),t._uU(62," \xa0 "),t.YNc(63,Gf,1,0,"input",31),t.YNc(64,Wf,1,0,"input",32),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(9),t.hij("",t.lcZ(12,19,"Resource_Costing")," "),t.xp6(9),t.Oqu(t.lcZ(21,21,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(25,23,"Please_Enter")," ",t.lcZ(26,25,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(31,27,"Project_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(35,29,"Please_Enter")," ",t.lcZ(36,31,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(42,33,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(46,35,"Select")," ",t.lcZ(47,37,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeSelectList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(8),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(1),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(5),t.Q6J("ngIf",o.canSave&&o.grandTotal>0&&-1==o.activeResourceIndex),t.xp6(1),t.Q6J("ngIf",0==o.grandTotal))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,l.EJ,l.YN,l.Kr,f.sg,f.O5,l.wV,l.On],pipes:[Z.X$],encapsulation:2}),i})();function zf(i,a){if(1&i&&(t.TgZ(0,"option",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.AsE("",e.siteCode,"(",o.isArab?e.siteArbName:e.siteName,")")}}function Xf(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",42),t._uU(2),t.qZA(),t.TgZ(3,"td",42),t._uU(4),t.qZA(),t.TgZ(5,"td",43),t._uU(6),t.qZA(),t.TgZ(7,"td",43),t._uU(8),t.qZA(),t.TgZ(9,"td",43),t._uU(10),t.qZA(),t.TgZ(11,"td",43),t._uU(12),t.qZA(),t.TgZ(13,"td",43),t._uU(14),t.qZA(),t.TgZ(15,"td",43),t._uU(16),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",n.isArab?n.getSkillset(e.position).textTwo:n.getSkillset(e.position).text," "),t.xp6(2),t.hij(" ",e.dailyShifts," "),t.xp6(2),t.hij(" ",e.dailyHrs," "),t.xp6(2),t.hij(" ",e.monthlyHrs," "),t.xp6(2),t.hij(" ",e.monthlyShiftsSchedulled," "),t.xp6(2),t.hij(" ",e.monthlyShiftsAssigned," "),t.xp6(2),t.hij(" ",e.monthlyOffs," ")}}function Kf(i,a){if(1&i&&(t.TgZ(0,"div",3),t.TgZ(1,"div",4),t.TgZ(2,"table",39),t.TgZ(3,"tr"),t.TgZ(4,"th",40),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",40),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",40),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",40),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",40),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th",40),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",40),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"th",40),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.YNc(28,Xf,17,8,"tr",41),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,9,"S.N")," "),t.xp6(3),t.hij(" ",t.lcZ(9,11,"Position")," "),t.xp6(3),t.hij(" ",t.lcZ(12,13,"Qty_Of_Manpower")," "),t.xp6(3),t.hij(" ",t.lcZ(15,15,"Daily_Hrs")," "),t.xp6(3),t.hij(" ",t.lcZ(18,17,"Monthly_Hrs")," "),t.xp6(3),t.hij(" ",t.lcZ(21,19,"Monthly_Shifts_Schedulled")," "),t.xp6(3),t.hij(" ",t.lcZ(24,21,"Monthly_Shifts_Assigned")," "),t.xp6(3),t.hij(" ",t.lcZ(27,23,"Offs")," "),t.xp6(2),t.Q6J("ngForOf",e.shiftsReport)}}function tZ(i,a){if(1&i&&(t.TgZ(0,"th",48),t._uU(1),t.qZA()),2&i){const e=a.index;t.xp6(1),t.Oqu(e+1)}}function eZ(i,a){if(1&i&&(t.TgZ(0,"th",48),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.dayText," ")}}function oZ(i,a){if(1&i&&(t.TgZ(0,"option",59),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.shiftCode),t.xp6(1),t.Oqu(e.shiftCode)}}function iZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",55),t.TgZ(1,"select",56),t.NdJ("change",function(n){const r=t.CHM(e).index;return t.oxw(2).onSelectShift(n,r)}),t._UZ(2,"option",57),t.YNc(3,oZ,2,2,"option",58),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("formControl",e),t.xp6(2),t.Q6J("ngForOf",o.listOfShiftCodes)}}function nZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",44),t.TgZ(1,"table",45),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th",46),t._uU(5),t.qZA(),t.YNc(6,tZ,2,1,"th",47),t._UZ(7,"td"),t._UZ(8,"td"),t._UZ(9,"td"),t.qZA(),t.TgZ(10,"tr"),t.TgZ(11,"th",48),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",48),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.YNc(17,eZ,2,1,"th",47),t._UZ(18,"td"),t._UZ(19,"td"),t._UZ(20,"td"),t.qZA(),t.qZA(),t.TgZ(21,"tbody",49),t.TgZ(22,"tr"),t.TgZ(23,"td",50),t._uU(24),t.qZA(),t.TgZ(25,"td",50),t._uU(26),t.qZA(),t.YNc(27,iZ,4,2,"td",51),t.TgZ(28,"td",52),t._uU(29),t.qZA(),t.TgZ(30,"td",52),t.TgZ(31,"i",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().addEntry()}),t.qZA(),t.qZA(),t.TgZ(32,"td",52),t.TgZ(33,"i",54),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearEntry()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.selectedMonth),t.xp6(1),t.Q6J("ngForOf",e.listOfDays),t.xp6(6),t.hij(" ",t.lcZ(13,9,"Employee")," "),t.xp6(3),t.hij(" ",t.lcZ(16,11,"Position")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(7),t.hij(" ",e.employeeNumber," "),t.xp6(2),t.hij(" ",e.skillsetCode," "),t.xp6(1),t.Q6J("ngForOf",e.shiftsFormControls.controls),t.xp6(2),t.Oqu(e.newTotalShifts)}}function aZ(i,a){if(1&i&&(t.TgZ(0,"th",48),t._uU(1),t.qZA()),2&i){const e=a.index;t.xp6(1),t.Oqu(e+1)}}function sZ(i,a){if(1&i&&(t.TgZ(0,"th",48),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.dayText," ")}}function rZ(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().index,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.shiftCodesForMonth[e],"")}}function lZ(i,a){if(1&i&&(t.TgZ(0,"td",64),t.YNc(1,rZ,2,1,"span",67),t.qZA()),2&i){const e=a.index,o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","x"!=o.shiftCodesForMonth[e])}}function cZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",64),t._uU(2),t.qZA(),t.TgZ(3,"td",64),t._uU(4),t.qZA(),t.TgZ(5,"td",64),t._uU(6),t.qZA(),t.YNc(7,lZ,2,1,"td",65),t.TgZ(8,"td",64),t._uU(9),t.qZA(),t.TgZ(10,"td",64),t.TgZ(11,"i",66),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).editRoasterEntry(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);let s;t.xp6(2),t.hij(" ",e.employeeNumber," "),t.xp6(2),t.hij(" ",n.isArab?null==(s=n.getEmployee(e.employeeNumber))?null:s.textAr:null==(s=n.getEmployee(e.employeeNumber))?null:s.text," "),t.xp6(2),t.hij(" ",n.isArab?n.getSkillset(e.skillsetCode).textTwo:n.getSkillset(e.skillsetCode).text," "),t.xp6(1),t.Q6J("ngForOf",n.listOfDays),t.xp6(2),t.hij(" ",n.totalShiftsRow[o]," ")}}function pZ(i,a){if(1&i&&(t.TgZ(0,"th",48),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.Oqu(o.totalShiftsCol[e])}}function uZ(i,a){if(1&i&&(t.TgZ(0,"div",60),t.TgZ(1,"table",61),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th",62),t._uU(5),t.qZA(),t.YNc(6,aZ,2,1,"th",47),t._UZ(7,"td"),t.qZA(),t.TgZ(8,"tr"),t.TgZ(9,"th",48),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",48),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",48),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.YNc(18,sZ,2,1,"th",47),t._UZ(19,"td"),t.qZA(),t.qZA(),t.TgZ(20,"tbody",49),t.YNc(21,cZ,12,5,"tr",41),t.TgZ(22,"tr"),t.TgZ(23,"th",63),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.YNc(26,pZ,2,1,"th",47),t.TgZ(27,"th",64),t._uU(28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",e.selectedMonth,""),t.xp6(1),t.Q6J("ngForOf",e.listOfDays),t.xp6(4),t.hij(" ",t.lcZ(11,10,"Employee_Number")," "),t.xp6(3),t.hij(" ",t.lcZ(14,12,"Employee_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(17,14,"Position")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(3),t.Q6J("ngForOf",e.listOfRoasters),t.xp6(3),t.Oqu(t.lcZ(25,16,"Total_Shifts")),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Oqu(e.grandTotalShifts)}}let ae=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(c),this.dialogRef=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.utilService=p,this.translate=u,this.notifyService=d,this.validationService=m,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfRoasters=[],this.listOfDays=[],this.sequence=1,this.editsequence=0,this.remarks="",this.shiftsFormControls=new l.Oe([new l.NI("")]),this.noOfDays=0,this.saveEnable=!1,this.editEnable=!1,this.monthYear="",this.skillsetCode="",this.skillsetName="",this.shiftCodesForMonth=[],this.inActiveDays=0,this.siteCodeList=[],this.customerCode="",this.listOfShiftCodes=[],this.siteCode="",this.month=0,this.year=0,this.shiftCode="",this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0,this.newTotalShifts=0,this.shiftsReport=[],this.empCodeControl=new l.NI(""),this.employeeList=[],this.employeeNumber="",this.isLoading=!1,this.isArab=!1,this.canSave=!1,this.workingHoursInSite=0,this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,tt.O)(this.employeeNumber),(0,et.b)(p.autoDelay()),(0,ot.x)(),(0,it.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(h||""))))}filterEmployeeNumbers(e){return this.apiService.getall(`Employee/getAutoFillEmployeeList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.project.projectCode}/${this.siteCode}`).subscribe(e=>{this.listOfShiftCodes=e,this.findNoOfShifts()})}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.readonly="readonly",this.loadSiteCodes(this.project.customerCode),this.loadSkillsetSelectionList()}setForm(){var e,o;this.form=this.fb.group({startDate:[""],endDate:[""],customerCode:[this.project.customerCode],monthYear:[""],siteCode:[null!=(null===(e=this.project)||void 0===e?void 0:e.siteCode)?this.project.siteCode:""],projectCode:[this.project.projectCode],month:[0],year:[this.year],skillsetCode:[""],shiftCode:[""]}),null!=(null===(o=this.project)||void 0===o?void 0:o.siteCode)&&(this.siteCode=this.project.siteCode,this.form.controls.siteCode.disable({onlySelf:!0}),this.minDate=this.project.startDate,this.maxDate=this.project.endDate,this.form.controls.startDate.setValue(this.project.startDate.toString().substring(0,10)),this.form.controls.endDate.setValue(this.project.endDate.toString().substring(0,10)),this.onSelectSiteCode({target:{value:this.project.siteCode}}))}submit(){if(this.saveEnable&&!this.isLoading){this.isLoading=!0,this.canSave=!0;for(var e=0;e<this.listOfRoasters.length;e++)if(this.listOfRoasters[e].shiftCodesForMonth.findIndex(o=>""==o)>=0){this.canSave=!1;break}this.form.value.roastersList=this.listOfRoasters,this.listOfRoasters.length>0&&this.canSave?this.apiService.post("MonthlyRoaster/updateShiftsForMonthlyRoaster",this.listOfRoasters).subscribe(o=>{this.utilService.OkMessage(),this.isLoading=!1,this.closeModel()},o=>{console.log(o),console.error(o),this.utilService.ShowApiErrorMessage(o),this.isLoading=!1}):this.canSave?this.utilService.FillUpFields():this.notifyService.showError(this.translate.instant("InComplete_Shifts_Assignment"))}else this.isLoading&&this.notifyService.showError(this.translate.instant("Please_Wait"))}getSkillset(e){return this.skillsetSelectionList.find(o=>o.value==e)}loadSkillsetSelectionList(){this.apiService.getall("Skillset/getSelectSkillsetList").subscribe(e=>{this.skillsetSelectionList=e})}addEntry(){if(0!=this.newTotalShifts){let e=this.listOfRoasters.findIndex(n=>n.employeeNumber==this.employeeNumber),o={id:this.id,customerCode:this.project.customerCode,siteCode:this.siteCode,projectCode:this.project.projectCode,month:this.month,year:this.year,skillsetCode:this.skillsetCode,skillsetName:this.skillsetName,employeeNumber:this.employeeNumber,shiftCodesForMonth:this.shiftCodesForMonth.slice(),employeeID:this.employeeID,mapId:this.mapId,isPrimaryResource:this.isPrimaryResource};-1!=e?(this.removeEntry(e),this.listOfRoasters.splice(e,0,o)):this.listOfRoasters.push(o),this.findNoOfShifts(),this.saveEnable=!0,this.skillsetCode="",this.employeeNumber="",this.resetShiftsFormControls()}}clearEntry(){for(var e=1;e<=this.noOfDays;e++)"x"!=this.shiftsFormControls.value[e-1]&&this.shiftsFormControls.controls[e-1].setValue("");this.newTotalShifts=0}removeEntry(e){this.listOfRoasters.splice(e,1),this.saveEnable=!0,this.findNoOfShifts()}onSelectSiteCode(e){if(""!=e.target.value){let o=e.target.value;this.form.controls.monthYear.setValue(""),this.month=0,this.year=0,this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.project.projectCode}/${o}`).subscribe(n=>{this.project=n,this.workingHoursInSite=n.siteWorkingHours,this.loadEmployees();let s=new Date(Date.now());this.year=s.getFullYear(),this.form.value.siteCode=o,this.form.controls.siteCode.setValue(o),this.siteCode=o,this.loadData()})}else this.listOfRoasters=[]}loadData(){if(""!=this.project.customerCode&&""!=this.siteCode&&0!=this.month&&0!=this.year){let o=new Date(this.year,this.month-1,1),n=new Date(this.year,this.month,0);this.listOfDays=[],this.noOfDays=n.getDate()-o.getDate()+1,this.listOfRoasters=[],this.apiService.getall(`MonthlyRoaster/getMonthlyRoasterForSite/${this.project.customerCode}/${this.project.projectCode}/${this.siteCode}/${this.month}/${this.year}`).subscribe(s=>{if(this.listOfRoasters=s,0==this.listOfRoasters.length)this.notifyService.showError(this.translate.instant("Roaster_Not_Generated"));else for(let r=0;r<this.listOfRoasters.length;r++)this.listOfRoasters[r].isPrimaryResource||(this.listOfRoasters.splice(r,1),r--);this.sequence=this.listOfRoasters.length+1}),this.loadWeekDays(),this.shiftsFormControls.clear();for(var e=1;e<=this.noOfDays;e++)this.shiftsFormControls.push(new l.NI("")),this.shiftsFormControls.controls[e-1].disable({onlySelf:!0});this.loadShiftCodes(),this.listOfShiftCodes=[]}else this.listOfRoasters=[]}loadWeekDays(){this.form.controls.monthYear.setValue(new Date(this.year,this.month-1,1));for(var e=1;e<=this.noOfDays;e++){let o=new Date(this.year,this.month-1,e),s={dayText:o.toDateString().substring(0,1),dayNumber:e,dayFullName:o.toDateString()};this.listOfDays.push(s)}}loadSiteCodes(e){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{this.siteCodeList=o})}onSelectShift(e,o){let n=this.listOfShiftCodes.find(r=>r.shiftCode==e.target.value);if(0!=this.newTotalShifts&&""!=e.target.value)if(n.isOff)for(var s=1;s<=this.noOfDays;s++)"x"!=this.shiftCodesForMonth[s-1]&&(s-1)%7==o%7&&(this.shiftCodesForMonth[s-1]=e.target.value,this.shiftsFormControls.controls[s-1].setValue(e.target.value));else this.shiftCodesForMonth[o]=e.target.value,this.shiftsFormControls.controls[o].setValue(e.target.value);else if(""!=e.target.value)if(this.listOfShiftCodes.find(c=>c.shiftCode==e.target.value).isOff)for(s=1;s<=this.noOfDays;s++)"x"!=this.shiftCodesForMonth[s-1]&&(s-1)%7==o%7&&(this.shiftCodesForMonth[s-1]=e.target.value,this.shiftsFormControls.controls[s-1].setValue(e.target.value));else for(s=1;s<=this.noOfDays;s++)"x"!=this.shiftCodesForMonth[s-1]&&(this.shiftCodesForMonth[s-1]=e.target.value,this.shiftsFormControls.controls[s-1].setValue(e.target.value));this.findTotalNewShifts()}resetShiftsFormControls(){this.shiftsFormControls.clear();for(var e=1;e<=this.noOfDays;e++)this.shiftsFormControls.push(new l.NI("")),this.shiftCodesForMonth[e-1]="",this.shiftsFormControls.controls[e-1].disable({onlySelf:!0});this.findTotalNewShifts()}openDatePicker(e){e.open()}closeDatePicker(e,o){let s=Ae(e).format("YYYY-MM");this.selectedMonth=e.toString().substring(4,7)+"-"+e.toString().substring(11,15),this.month=parseInt(s.toString().substring(5,7)),this.year=Number(s.toString().substring(0,4)),""!=this.project.customerCode&&""!=this.siteCode&&this.loadData(),o.close()}findNoOfShifts(){this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0;for(var e=0;e<this.noOfDays;e++){let s=0;for(var o=0;o<this.listOfRoasters.length;o++){let r=0,c=this.listOfRoasters[o];for(var n=0;n<c.shiftCodesForMonth.length;n++)r+=this.shiftValue(c.shiftCodesForMonth[n]),n==e&&(s+=this.shiftValue(c.shiftCodesForMonth[n]));this.listOfRoasters[o].totShifts=r,this.totalShiftsRow.push(r)}this.totalShiftsCol.push(s),this.grandTotalShifts=this.grandTotalShifts+this.totalShiftsCol[e]}this.getShiftsReport()}findTotalNewShifts(){let e=0;for(var o=0;o<this.noOfDays;o++)e+=this.shiftValue(this.shiftCodesForMonth[o]);this.newTotalShifts=e}shiftValue(e){let o=this.listOfShiftCodes.find(n=>n.shiftCode==e);return null==o||""==e||null==e||""==e?0:0==o.isOff?1:0}RoastersCount(){return this.listOfRoasters.length}getCellInfo(e,o){return`Date:${new Date(this.year,this.month-1,o+1).toDateString()}\nShift: ${this.getShiftInfo(e,o)}`}getShiftInfo(e,o){return`Shift Name: ${this.listOfRoasters[e].shiftCodesForMonth[o]}`}editRoasterEntry(e){let o=this.listOfRoasters[e];this.id=o.id,this.skillsetName=o.skillsetName,this.skillsetCode=o.skillsetCode,this.employeeNumber=o.employeeNumber,this.employeeID=o.employeeID,this.mapId=o.mapId,this.isPrimaryResource=o.isPrimaryResource,this.shiftCodesForMonth=o.shiftCodesForMonth.slice();for(var n=1;n<=this.noOfDays;n++)this.shiftsFormControls.controls[n-1].setValue(this.shiftCodesForMonth[n-1]),"x"==this.shiftCodesForMonth[n-1]?this.shiftsFormControls.controls[n-1].disable({onlySelf:!0}):this.shiftsFormControls.controls[n-1].enable({onlySelf:!0});this.findTotalNewShifts(),document.getElementById("inputEntry").scrollIntoView()}closeModel(){this.dialogRef.close()}canAddShifftCode(e){return"x"!=this.listOfRoasters[0].shiftCodesForMonth[e]}groupBy(e,o){const n=new Map;return e.forEach(s=>{const r=o(s),c=n.get(r);c?c.push(s):n.set(r,[s])}),n}loadEmployees(){this.apiService.getall("Employee/getSelectEmployeeList").subscribe(e=>{this.employeeList=e})}getEmployee(e){return this.employeeList.find(o=>o.value==e)}getShiftsReport(){this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${this.siteCode}`).subscribe(e=>{this.shiftsReport=[],e.forEach(o=>{let n=0,s=0;this.listOfRoasters.filter(c=>c.skillsetCode==o.skillSetCode).forEach(c=>{c.shiftCodesForMonth.forEach(p=>{var u;let d=null===(u=this.listOfShiftCodes.find(m=>m.shiftCode==p))||void 0===u?void 0:u.isOff;this.listOfShiftCodes.findIndex(m=>"x"!=p&&m.shiftCode==p)>=0&&d?s++:this.listOfShiftCodes.findIndex(m=>m.shiftCode==p)>=0&&!d&&"x"!=p&&""!=p&&n++})}),this.shiftsReport.push({position:o.skillSetCode,dailyShifts:o.quantity,dailyHrs:o.quantity*this.workingHoursInSite,monthlyHrs:this.workingHoursInSite*(o.quantity*this.noOfDays),monthlyOffs:s,monthlyReplacements:n+s-this.noOfDays*o.quantity,monthlyShiftsSchedulled:o.quantity*this.noOfDays,monthlyShiftsAssigned:n})})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.so),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-monthyl-roaster-for-project"]],features:[t.qOj],decls:85,vars:63,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],[3,"isLoading"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-2"],["type","text","formControlName","startDate","readonly","",1,"form-control"],["type","text","formControlName","endDate","readonly","",1,"form-control"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","monthYear",1,"form-control","datapickerinput",3,"matDatepicker","min","max","placeholder","click"],["matSuffix","",3,"for"],["startView","year","data-date-format","mm/yyyy",3,"monthSelected"],["dp2",""],["class","modal-body",4,"ngIf"],["class","table-responsive","id","inputEntry",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"row","mt-12","text-right"],[1,"col-md-9","col-lg-9","text-center",2,"padding-top","15px"],[1,"col-md-1","col-lg-1","text-center",2,"padding-top","15px"],[1,"col-md-1col-lg-1","text-center",2,"padding-top","15px"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],["border","0","cellpadding","0","cellspacing","0","width","100%",1,"table","table-bordered","no-wrap",2,"width","100%"],[2,"padding","3px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","center"],[4,"ngFor","ngForOf"],[2,"padding","2px","text-align","left","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300","text-align","center"],[2,"padding","2px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300","text-align","center"],["id","inputEntry",1,"table-responsive"],["id","zero_config1",1,"table","table-bordered"],["colspan","2",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","font-size:0.775rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight:600;padding: 2px",4,"ngFor","ngForOf"],[2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],[2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300"],[2,"width","auto","padding","1px 1px 1px 1px","text-align","center","padding","1px 1px 1px 1px"],["style","text-align: center; width: auto; padding: 1px 1px 1px 1px; ",4,"ngFor","ngForOf"],[2,"width","auto","padding","1px 1px 1px 1px","text-align","center"],[1,"fas","fa-plus-circle",3,"click"],[1,"fas","fa-eraser",3,"click"],[2,"text-align","center","width","auto","padding","1px 1px 1px 1px"],[2,"text-align","center","font-size","small","color","#000000","padding","3px 1px 3px 1px",3,"formControl","change"],["value","",2,"width","auto","padding","1px 1px 1px 1px","text-align","center","color","#000000"],["style","width: auto; padding: 3px 1px 3px 1px; text-align: center; color: #000000",3,"value",4,"ngFor","ngForOf"],[2,"width","auto","padding","3px 1px 3px 1px","text-align","center","color","#000000",3,"value"],[1,"table-responsive"],["id","zero_config1",1,"table","table-bordered","no-wrap"],["colspan","3",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["colspan","3",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300","padding","2px"],[2,"padding","3px"],["style","padding: 3px",4,"ngFor","ngForOf"],[1,"fas","icon-note",3,"click"],[4,"ngIf"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"input",15),t.ALo(22,"translate"),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(25,"div",11),t.TgZ(26,"label",12),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div",13),t.TgZ(30,"div",14),t._UZ(31,"auto-loader",17),t._UZ(32,"input",18),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(36,"div",19),t.TgZ(37,"div",13),t.TgZ(38,"label"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t._UZ(41,"input",20),t.qZA(),t.qZA(),t.TgZ(42,"div",19),t.TgZ(43,"div",13),t.TgZ(44,"label"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"input",21),t.qZA(),t.qZA(),t.TgZ(48,"div",11),t.TgZ(49,"div",13),t.TgZ(50,"label",12),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"select",22),t.NdJ("change",function(r){return o.onSelectSiteCode(r)}),t.TgZ(54,"option",23),t._uU(55),t.ALo(56,"translate"),t.ALo(57,"translate"),t.qZA(),t.YNc(58,zf,2,3,"option",24),t.qZA(),t._UZ(59,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(60,"div",11),t.TgZ(61,"div",13),t.TgZ(62,"label",12),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"div",13),t.TgZ(66,"div",14),t.TgZ(67,"input",25),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(71);return o.openDatePicker(r)}),t.ALo(68,"translate"),t.qZA(),t._UZ(69,"mat-datepicker-toggle",26),t.TgZ(70,"mat-datepicker",27,28),t.NdJ("monthSelected",function(r){t.CHM(n);const c=t.MAs(71);return o.closeDatePicker(r,c)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(72,Kf,29,25,"div",29),t.YNc(73,nZ,34,13,"div",30),t.YNc(74,uZ,29,18,"div",31),t.TgZ(75,"div",32),t._UZ(76,"div",33),t.TgZ(77,"div",34),t._UZ(78,"auto-loader",17),t.qZA(),t.TgZ(79,"div",35),t.TgZ(80,"input",36),t.NdJ("click",function(){return o.closeModel()}),t.ALo(81,"translate"),t.qZA(),t.qZA(),t.TgZ(82,"div",34),t._UZ(83,"input",37),t.ALo(84,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(71);t.xp6(1),t.Oqu(t.lcZ(2,31,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(12),t.Oqu(t.lcZ(18,33,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(22,35,"Please_Enter")," ",t.lcZ(23,37,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(28,39,"Project_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(33,41,"Please_Enter")," ",t.lcZ(34,43,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(40,45,"Project_Start_Date")),t.xp6(6),t.Oqu(t.lcZ(46,47,"Project_End_Date")),t.xp6(6),t.Oqu(t.lcZ(52,49,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(56,51,"Select")," ",t.lcZ(57,53,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Oqu(t.lcZ(64,55,"Year_Month")),t.xp6(4),t.hYB("placeholder","",t.lcZ(68,57,"Select")," ","Year_Month",""),t.Q6J("matDatepicker",n)("min",o.minDate)("max",o.maxDate),t.xp6(2),t.Q6J("for",n),t.xp6(3),t.Q6J("ngIf",0!=o.shiftsReport.length),t.xp6(1),t.Q6J("ngIf",0!=o.noOfDays),t.xp6(1),t.Q6J("ngIf",0!=o.RoastersCount()),t.xp6(4),t.Q6J("isLoading",o.isLoading),t.xp6(2),t.s9C("value",t.lcZ(81,59,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(84,61,"Save"))}},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,ht.z,l.EJ,l.YN,l.Kr,f.sg,M.hl,M.nW,gt.R9,M.Mq,f.O5,l.oH],pipes:[Z.X$],encapsulation:2}),i})();function dZ(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArab?e.siteArbName:e.siteName)}}function mZ(i,a){if(1&i&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.vehicleNumber),t.xp6(1),t.hij(" ",e.vehicleNumber," ")}}function _Z(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"div",32),t._UZ(2,"auto-loader",33),t._UZ(3,"input",34),t.ALo(4,"translate"),t.TgZ(5,"mat-autocomplete",35,36),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().onSelectionVehicleNumber(n)}),t.YNc(7,mZ,2,2,"mat-option",21),t.ALo(8,"async"),t.qZA(),t.qZA(),t.TgZ(9,"div",37),t._UZ(10,"input",38),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",39),t.TgZ(13,"a",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().addUpdateVehicle()}),t._UZ(14,"i",41),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(6),o=t.oxw();t.xp6(2),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.s9C("placeholder",t.lcZ(4,6,"Vehicle_Code")),t.Q6J("formControl",o.vehicleNumberControl)("matAutocomplete",e),t.xp6(4),t.Q6J("ngForOf",t.lcZ(8,8,o.filteredVehicleNumbers)),t.xp6(3),t.s9C("placeholder",t.lcZ(11,10,"Qty"))}}function gZ(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.costPerUnit+e.margin)}}function hZ(i,a){1&i&&(t.TgZ(0,"td",45),t._uU(1,"-"),t.qZA())}function fZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",51),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).removeVehicle(n)}),t._UZ(2,"i",52),t.qZA(),t.qZA()}}function ZZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",53),t.TgZ(1,"button",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),s=n.$implicit,r=n.index;return t.oxw(2).getLogisticsSubCostingList(s,r)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit")))}function CZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",53),t.TgZ(1,"button",54),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).cancelEditCosting()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Cancel")))}function AZ(i,a){if(1&i&&(t.TgZ(0,"tr",46),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.YNc(5,gZ,2,1,"td",47),t.YNc(6,hZ,2,0,"td",47),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",48),t.YNc(10,fZ,3,0,"span",49),t.YNc(11,ZZ,4,3,"span",50),t.YNc(12,CZ,4,3,"span",50),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.Oqu(e.vehicleNumber),t.xp6(2),t.hij("",e.qty," "),t.xp6(1),t.Q6J("ngIf",0!=e.costPerUnit),t.xp6(1),t.Q6J("ngIf",0==e.costPerUnit),t.xp6(2),t.hij("",e.qty*(e.costPerUnit+e.margin)," "),t.xp6(2),t.Q6J("ngIf",-1==n.activeLogisticsIndex),t.xp6(1),t.Q6J("ngIf",-1==n.activeLogisticsIndex),t.xp6(1),t.Q6J("ngIf",n.activeLogisticsIndex==o&&(null==n.projectBudgetCosting.logisticsCostingsList[n.activeLogisticsIndex]?null:n.projectBudgetCosting.logisticsCostingsList[n.activeLogisticsIndex].costPerUnit)+(null==n.projectBudgetCosting.logisticsCostingsList[n.activeLogisticsIndex]?null:n.projectBudgetCosting.logisticsCostingsList[n.activeLogisticsIndex].margin)==0)}}function TZ(i,a){if(1&i&&(t.TgZ(0,"table",42),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"th"),t.qZA(),t.qZA(),t.TgZ(16,"tbody"),t.YNc(17,AZ,13,8,"tr",43),t.TgZ(18,"tr"),t.TgZ(19,"th",44),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",45),t._uU(23),t.qZA(),t._UZ(24,"th",45),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,7,"Logistics")," "),t.xp6(3),t.hij(" ",t.lcZ(8,9,"Qty")," "),t.xp6(3),t.Oqu(t.lcZ(11,11,"Cost_Per_Unit")),t.xp6(3),t.hij(" ",t.lcZ(14,13,"Total")," "),t.xp6(4),t.Q6J("ngForOf",e.projectBudgetCosting.logisticsCostingsList),t.xp6(3),t.hij(" ",t.lcZ(21,15,"Total")," "),t.xp6(3),t.hij(" ",e.grandTotal," ")}}function vZ(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.costHead),t.xp6(1),t.Oqu(o.isArab?e.costNameInArabic:e.costNameInEnglish)}}function xZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",65),t._uU(2),t.qZA(),t.TgZ(3,"td",66),t._uU(4),t.qZA(),t.TgZ(5,"td",48),t.TgZ(6,"span"),t.TgZ(7,"a",51),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(3).removeSubCostings(s)}),t._UZ(8,"i",52),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(3);let n;t.xp6(2),t.Oqu(o.isArab?null==(n=o.getCostHead(e.costHead))?null:n.costNameInArabic:null==(n=o.getCostHead(e.costHead))?null:n.costNameInEnglish),t.xp6(2),t.Oqu(e.amount)}}function qZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",54),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).SubCostingOK()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"OK")))}const bZ=function(){return{standalone:!0}};function yZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"table",60),t.TgZ(1,"tbody"),t.TgZ(2,"tr"),t.TgZ(3,"th",61),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",62),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"th"),t.qZA(),t.YNc(10,xZ,9,2,"tr",63),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",45),t._uU(16),t.qZA(),t._UZ(17,"th"),t.qZA(),t.TgZ(18,"tr"),t.TgZ(19,"td",45),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"td"),t.TgZ(23,"input",64),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw(2);return s.projectBudgetCosting.logisticsCostingsList[s.activeLogisticsIndex].margin=n})("keyup",function(){return t.CHM(e),t.oxw(2).changeMargin()}),t.ALo(24,"translate"),t.qZA(),t.qZA(),t._UZ(25,"td"),t.qZA(),t.TgZ(26,"tr"),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th",45),t._uU(31),t.qZA(),t.TgZ(32,"th"),t.YNc(33,qZ,4,3,"span",49),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,12,"Costing_Head")," "),t.xp6(3),t.Oqu(t.lcZ(8,14,"Amount")),t.xp6(3),t.Q6J("ngForOf",e.logisticsSubCostingList),t.xp6(3),t.Oqu(t.lcZ(14,16,"Sub_Total")),t.xp6(3),t.hij(" ",null==e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex]?null:e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex].costPerUnit," "),t.xp6(4),t.Oqu(t.lcZ(21,18,"Margin")),t.xp6(3),t.s9C("placeholder",t.lcZ(24,20,"Margin")),t.Q6J("ngModel",e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex].margin)("ngModelOptions",t.DdM(24,bZ)),t.xp6(5),t.Oqu(t.lcZ(29,22,"Cost_Per_Unit")),t.xp6(3),t.hij(" ",(null==e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex]?null:e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex].costPerUnit)+(null==e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex]?null:e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex].margin)," "),t.xp6(2),t.Q6J("ngIf",(null==e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex]?null:e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex].costPerUnit)+(null==e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex]?null:e.projectBudgetCosting.logisticsCostingsList[e.activeLogisticsIndex].margin)>0)}}function SZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",32),t.TgZ(1,"div",23),t.TgZ(2,"div",3),t.TgZ(3,"div",32),t.TgZ(4,"select",55),t.NdJ("change",function(n){return t.CHM(e),t.oxw().selectCostHead(n)}),t.TgZ(5,"option",20),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA(),t.YNc(9,vZ,2,2,"option",21),t.qZA(),t.qZA(),t.TgZ(10,"div",56),t._UZ(11,"input",57),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",58),t.TgZ(15,"a",40),t.NdJ("click",function(){return t.CHM(e),t.oxw().addUpdateSubCostings()}),t._UZ(16,"i",41),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,yZ,34,25,"table",59),t.qZA()}if(2&i){const e=t.oxw();t.xp6(6),t.AsE("",t.lcZ(7,6,"Select")," ",t.lcZ(8,8,"Costing_Head")," "),t.xp6(3),t.Q6J("ngForOf",e.logisticsExpenceHeadSelectList),t.xp6(2),t.hYB("placeholder","",t.lcZ(12,10,"Enter")," ",t.lcZ(13,12,"Amount"),""),t.xp6(6),t.Q6J("ngIf",-1!=e.activeLogisticsIndex)}}function wZ(i,a){1&i&&t._UZ(0,"input",67)}function UZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",68),t.NdJ("click",function(){return t.CHM(e),t.oxw().skippEstimationType()}),t.qZA()}}let se=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.logisticsSubCostingList=[],this.logisticsCostingList=[],this.grandTotal=0,this.totalForLogisticsUnit=-1,this.logisticsExpenceHeadSelectList=[],this.logisticsCode="",this.activeLogisticsIndex=-1,this.siteCodeSelectList=[],this.logisticsSelectionList=[],this.isDataLoading=!1,this.vehicleNumber="",this.margin=0,this.vehicleNumberControl=new l.NI(""),this.isArab=!1,this.canSave=!1,this.filteredVehicleNumbers=this.vehicleNumberControl.valueChanges.pipe((0,tt.O)(this.vehicleNumber),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterVehicleNumbers(h||""))))}filterVehicleNumbers(e){return this.apiService.getall(`Logisticsandvehicle/getAutoSelectLogisticsandvehicleList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm()}setForm(){var e;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null==(null===(e=this.project)||void 0===e?void 0:e.siteCode)?"":this.project.siteCode,l.kI.required],subCostAmount:[""],subCostCostHead:[""],vehicleNumber:[""],qty:[""]}),this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{var n;this.siteCodeSelectList=null!=o?o:[],null!=(null===(n=this.project)||void 0===n?void 0:n.siteCode)&&(this.loadInitialData(),this.form.controls.siteCode.disable({onlySelf:!0}))})}closeModel(){this.dialogRef.close()}submit(){var e,o;0!=this.projectBudgetCosting.logisticsCostingsList.length&&0!=(null===(o=null===(e=this.projectBudgetCosting)||void 0===e?void 0:e.logisticsCostingsList[0])||void 0===o?void 0:o.logisticsSubCostingList.length)?this.apiService.post("projectBudgetCosting/createProjectLogisticsCostingForSite",this.projectBudgetCosting).subscribe(n=>{n&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},n=>{console.log(n),console.error(n),this.utilService.ShowApiErrorMessage(n)}):this.utilService.FillUpFields()}loadInitialData(){this.apiService.getall(`projectBudgetCosting/getProjectLogisticsCostingForSite/${this.project.customerCode}/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectBudgetCosting=e,0==this.projectBudgetCosting.status?this.createNewProjectBudgetCosting():3!=this.projectBudgetCosting.status&&this.createNewLogisticsBudgetCostingList(),this.findTotalsCosts()}),this.apiService.getall("OperationExpenseHead/getOperationExpenseHeadsForLogistics").subscribe(e=>{this.logisticsExpenceHeadSelectList=e})}createNewProjectBudgetCosting(){this.projectBudgetCosting.customerCode=this.project.customerCode,this.projectBudgetCosting.projectCode=this.project.projectCode,this.projectBudgetCosting.siteCode=this.form.controls.siteCode.value,this.projectBudgetCosting.serviceType="LOGISTICS",this.createNewLogisticsBudgetCostingList()}createNewLogisticsBudgetCostingList(){this.projectBudgetCosting.logisticsCostingsList=[]}getLogisticsSubCostingList(e,o){this.activeLogisticsIndex=o,this.logisticsSubCostingList=e.logisticsSubCostingList.slice(),this.totalForLogisticsUnit=e.costPerUnit,this.findTotalsCosts()}findTotalsCosts(){this.grandTotal=0,0!=this.projectBudgetCosting.logisticsCostingsList.length&&this.projectBudgetCosting.logisticsCostingsList.forEach(e=>{e.costPerUnit=0,e.logisticsSubCostingList.forEach(o=>{e.costPerUnit+=o.amount}),e.totLogisticsCost=(e.costPerUnit+e.margin)*e.qty,this.grandTotal=this.grandTotal+e.totLogisticsCost})}onSelectSiteCode(e){this.totalForLogisticsUnit=0,this.form.controls.siteCode.setValue(e.target.value),this.loadInitialData(),this.activeLogisticsIndex=-1}addUpdateSubCostings(){var e;let o=this.form.controls.subCostAmount.value,n=this.form.controls.subCostCostHead.value;if(""!=o&&""!=n&&null!=this.form.controls.subCostAmount.value){let s={amount:o,costHead:n};if(null==this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex].logisticsSubCostingList.find(c=>c.costHead==n))null===(e=this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex].logisticsSubCostingList)||void 0===e||e.push(s);else{let c=this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex].logisticsSubCostingList.findIndex(p=>p.costHead==n);this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex].logisticsSubCostingList[c].amount=o}this.findTotalsCosts(),this.getLogisticsSubCostingList(this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex],this.activeLogisticsIndex),this.resetSubCosting()}}removeSubCostings(e){this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex].logisticsSubCostingList.splice(e,1),this.findTotalsCosts(),this.getLogisticsSubCostingList(this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex],this.activeLogisticsIndex)}resetSubCosting(){this.form.controls.subCostAmount.setValue(""),this.form.controls.subCostCostHead.setValue("")}selectCostHead(e){let o=e.target.value;if(-1!=this.activeLogisticsIndex){this.form.controls.subCostCostHead.setValue(e.target.value);let n=this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex].logisticsSubCostingList.find(s=>s.costHead==o);this.form.controls.subCostAmount.setValue(null!=n?n.amount:"")}else this.form.controls.subCostCostHead.setValue(""),this.form.controls.subCostAmount.setValue("")}onSelectionVehicleNumber(e){this.form.controls.vehicleNumber.setValue(e.option.value),this.vehicleNumberControl.setValue(e.option.value),this.vehicleNumber=e.option.value}addUpdateVehicle(){if(""!=this.vehicleNumber){let o={costPerUnit:0,projectBudgetCostingId:this.projectBudgetCosting.projectBudgetCostingId,logisticsCostingId:0,logisticsSubCostingList:[].splice(0,1),vehicleNumber:this.vehicleNumber,qty:this.form.controls.qty.value,totLogisticCost:0,siteCode:this.projectBudgetCosting.siteCode,margin:0};this.projectBudgetCosting.logisticsCostingsList.push(o)}else this.notifyService.showError("Incorrect Vehicle Data");this.vehicleNumber="",this.vehicleNumberControl.setValue(""),this.form.controls.qty.setValue(0),this.canSave=!1}removeVehicle(e){this.projectBudgetCosting.logisticsCostingsList.splice(e,1),this.findTotalsCosts(),this.activeLogisticsIndex=-1}changeMargin(){this.getLogisticsSubCostingList(this.projectBudgetCosting.logisticsCostingsList[this.activeLogisticsIndex],this.activeLogisticsIndex),this.findTotalsCosts()}getCostHead(e){return this.logisticsExpenceHeadSelectList.find(o=>o.costHead==e)}SubCostingOK(){console.log(this.projectBudgetCosting.logisticsCostingsList),this.activeLogisticsIndex=-1,this.canSave=!this.projectBudgetCosting.logisticsCostingsList.find(e=>e.totLogisticsCost<=0)}cancelEditCosting(){this.activeLogisticsIndex=-1,this.canSave=!this.projectBudgetCosting.logisticsCostingsList.find(e=>e.totLogisticsCost<=0)}skippEstimationType(){this.apiService.post("projectBudgetCosting/skippEstimationType",{projectCode:this.project.projectCode,siteCode:this.project.siteCode,type:"logistics"}).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.log(o),console.error(o),this.utilService.ShowApiErrorMessage(o)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-logistics-costing"]],features:[t.qOj],decls:62,vars:40,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-6",2,"padding-right","0"],[1,"paddingtop15"],["class","row",4,"ngIf"],["class","table  table-bordered table-borderedcustom no-wrap","id","table",4,"ngIf"],["class","col-md-6 col-lg-6",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button","value","CLOSE",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SAVE",4,"ngIf"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SKIP",3,"click",4,"ngIf"],[3,"value"],[1,"col-md-6","col-lg-6"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],[1,"col-md-4","col-lg-4"],["type","number","formControlName","qty",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-2"],[2,"font-size","30px",3,"click"],[1,"icon-plus"],["id","table",1,"table","table-bordered","table-borderedcustom","no-wrap"],["class","selected",4,"ngFor","ngForOf"],["colspan","3",2,"text-align","right"],[2,"text-align","right"],[1,"selected"],["style","text-align:right",4,"ngIf"],[2,"width","10%","text-align","right"],[4,"ngIf"],["style","font-size:smaller",4,"ngIf"],[1,"tableicons",3,"click"],[1,"icon-trash"],[2,"font-size","smaller"],["type","button",1,"btn","waves-effect","waves-light","btn-outline-primary",3,"click"],["formControlName","subCostCostHead",1,"custom-select","mr-sm-2",3,"change"],[1,"col-md-5","col-lg-4"],["type","number","formControlName","subCostAmount",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-1"],["class","table tablecolor  table-bordered no-wrap",4,"ngIf"],[1,"table","tablecolor","table-bordered","no-wrap"],["width","60%"],["width","40%"],[4,"ngFor","ngForOf"],["type","number",1,"form-control",2,"text-align","right",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup"],[2,"width","60%"],[2,"width","30%","text-align","right"],["type","submit","value","SAVE",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock"],["type","button","value","SKIP",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(1," \xd7"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",3),t.TgZ(9,"div",7),t.TgZ(10,"h4",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(13,"div",9),t.TgZ(14,"div"),t.TgZ(15,"div",4),t.TgZ(16,"div",10),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t.TgZ(19,"label",13),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t._UZ(24,"input",16),t.ALo(25,"translate"),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(28,"div",12),t.TgZ(29,"label",13),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",14),t.TgZ(33,"div",15),t._UZ(34,"input",18),t.ALo(35,"translate"),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(38,"div",12),t.TgZ(39,"div",14),t.TgZ(40,"label",13),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"select",19),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(44,"option",20),t._uU(45),t.ALo(46,"translate"),t.ALo(47,"translate"),t.qZA(),t.YNc(48,dZ,2,2,"option",21),t.qZA(),t._UZ(49,"validation-message",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",3),t.TgZ(51,"div",22),t.TgZ(52,"div",23),t.YNc(53,_Z,15,12,"div",24),t.qZA(),t.YNc(54,TZ,25,17,"table",25),t.qZA(),t.YNc(55,SZ,18,14,"div",26),t.qZA(),t.qZA(),t.TgZ(56,"div",3),t.TgZ(57,"div",27),t.TgZ(58,"input",28),t.NdJ("click",function(){return o.closeModel()}),t.qZA(),t._uU(59," \xa0 "),t.YNc(60,wZ,1,0,"input",29),t.YNc(61,UZ,1,0,"input",30),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(9),t.hij("",t.lcZ(12,20,"Logistics_Costing")," "),t.xp6(9),t.Oqu(t.lcZ(21,22,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(25,24,"Please_Enter")," ",t.lcZ(26,26,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(31,28,"Project_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(35,30,"Please_Enter")," ",t.lcZ(36,32,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(42,34,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(46,36,"Select")," ",t.lcZ(47,38,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeSelectList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(1),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(1),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(5),t.Q6J("ngIf",o.canSave&&o.grandTotal>0&&-1==o.activeLogisticsIndex),t.xp6(1),t.Q6J("ngIf",0==o.grandTotal))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,l.EJ,l.YN,l.Kr,f.sg,f.O5,ht.z,at.ZL,l.oH,at.XC,l.wV,St.ey,l.On],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function LZ(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArab?e.siteArbName:e.siteName)}}function DZ(i,a){if(1&i&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.Q6J("value",e),t.xp6(1),t.hij(" ",o.isArab?e.nameInArabic:e.nameInEnglish," ")}}function NZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"div",32),t._UZ(2,"auto-loader",33),t._UZ(3,"input",34),t.ALo(4,"translate"),t.ALo(5,"translate"),t.TgZ(6,"mat-autocomplete",35,36),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().onSelectionMaterialEquipment(n)}),t.YNc(8,DZ,2,2,"mat-option",21),t.ALo(9,"async"),t.qZA(),t.qZA(),t.TgZ(10,"div",12),t._UZ(11,"input",37),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",38),t.TgZ(15,"a",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().addUpdateMaterialEquipment()}),t._UZ(16,"i",40),t.qZA(),t.qZA(),t._UZ(17,"div",41),t.qZA()}if(2&i){const e=t.MAs(7),o=t.oxw();t.xp6(2),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(4,8,"Please_Enter")," ",t.lcZ(5,10,"Material_Equipment"),""),t.Q6J("formControl",o.materialEquipmentCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(9,12,o.filteredMaterialEquipments)),t.xp6(3),t.hYB("placeholder","",t.lcZ(12,14,"Enter")," ",t.lcZ(13,16,"Quantity"),"")}}function EZ(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.costPerUnit)}}function OZ(i,a){1&i&&(t.TgZ(0,"td",45),t._uU(1,"-"),t.qZA())}function jZ(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.quantity)}}function kZ(i,a){1&i&&(t.TgZ(0,"td"),t._uU(1,"-"),t.qZA())}function MZ(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.quantity*e.costPerUnit)}}function RZ(i,a){1&i&&(t.TgZ(0,"td",45),t._uU(1,"-"),t.qZA())}function PZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",53),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).removeMaterial(n)}),t.TgZ(1,"a",54),t._UZ(2,"i",55),t.qZA(),t.qZA()}}function FZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",56),t.TgZ(1,"button",57),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(),s=n.$implicit,r=n.index;return t.oxw(2).getMaterialEquipmentSubCostingList(s,r)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit")))}function IZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",56),t.TgZ(1,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).cancelEditCosting()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Cancel")))}function YZ(i,a){if(1&i&&(t.TgZ(0,"tr",46),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,EZ,2,1,"td",47),t.YNc(4,OZ,2,0,"td",47),t.YNc(5,jZ,2,1,"td",48),t.YNc(6,kZ,2,0,"td",48),t.YNc(7,MZ,2,1,"td",49),t.YNc(8,RZ,2,0,"td",49),t.TgZ(9,"td",50),t.YNc(10,PZ,3,0,"span",51),t.YNc(11,FZ,4,3,"span",52),t.YNc(12,IZ,4,3,"span",52),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);let s;t.xp6(2),t.Oqu(n.isArab?null==(s=n.getMaterialEquipment(e.materialEquipmentCode))?null:s.textTwo:null==(s=n.getMaterialEquipment(e.materialEquipmentCode))?null:s.text),t.xp6(1),t.Q6J("ngIf",0!=e.costPerUnit),t.xp6(1),t.Q6J("ngIf",0==e.costPerUnit),t.xp6(1),t.Q6J("ngIf",0!=e.quantity),t.xp6(1),t.Q6J("ngIf",0==e.quantity),t.xp6(1),t.Q6J("ngIf",0!=e.quantity),t.xp6(1),t.Q6J("ngIf",0==e.quantity),t.xp6(2),t.Q6J("ngIf",-1==n.activeMaterialEquipmentIndex),t.xp6(1),t.Q6J("ngIf",-1==n.activeMaterialEquipmentIndex),t.xp6(1),t.Q6J("ngIf",n.activeMaterialEquipmentIndex==o&&(null==n.projectBudgetCosting.materialEquipmentCostingsList[n.activeMaterialEquipmentIndex]?null:n.projectBudgetCosting.materialEquipmentCostingsList[n.activeMaterialEquipmentIndex].costPerUnit)+(null==n.projectBudgetCosting.materialEquipmentCostingsList[n.activeMaterialEquipmentIndex]?null:n.projectBudgetCosting.materialEquipmentCostingsList[n.activeMaterialEquipmentIndex].margin)==0)}}function JZ(i,a){if(1&i&&(t.TgZ(0,"table",42),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t._UZ(15,"th"),t.qZA(),t.qZA(),t.TgZ(16,"tbody"),t.YNc(17,YZ,13,10,"tr",43),t.TgZ(18,"tr"),t.TgZ(19,"th",44),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",45),t._uU(23),t.qZA(),t._UZ(24,"th"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,7,"Material_Equipment")," "),t.xp6(3),t.Oqu(t.lcZ(8,9,"Cost_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(11,11,"Count")),t.xp6(3),t.Oqu(t.lcZ(14,13,"Amount")),t.xp6(4),t.Q6J("ngForOf",e.projectBudgetCosting.materialEquipmentCostingsList),t.xp6(3),t.hij(" ",t.lcZ(21,15,"Total")," "),t.xp6(3),t.hij(" ",e.grandTotal," ")}}function QZ(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.costHead),t.xp6(1),t.Oqu(o.isArab?e.costNameInArabic:e.costNameInEnglish)}}function BZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).SubCostingOK()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"OK")))}function HZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",66),t._uU(2),t.qZA(),t.TgZ(3,"td",67),t._uU(4),t.qZA(),t.TgZ(5,"td",68),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(3).removeSubCostings(s)}),t.TgZ(6,"a",54),t._UZ(7,"i",55),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(2),t.Oqu(o.isArab?o.getCostHead(e.costHead).costNameInArabic:o.getCostHead(e.costHead).costNameInEnglish),t.xp6(2),t.Oqu(e.amount)}}function VZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).SubCostingOK()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"OK")))}function $Z(i,a){if(1&i&&(t.TgZ(0,"table",62),t.TgZ(1,"tbody"),t.TgZ(2,"tr"),t.TgZ(3,"th",63),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",64),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t.YNc(10,BZ,4,3,"span",48),t.qZA(),t.qZA(),t.YNc(11,HZ,8,2,"tr",65),t.TgZ(12,"tr"),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",45),t._uU(17),t.qZA(),t.TgZ(18,"th"),t.YNc(19,VZ,4,3,"span",48),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,7,"Costing_Head")," "),t.xp6(3),t.Oqu(t.lcZ(8,9,"Amount")),t.xp6(3),t.Q6J("ngIf",(null==e.projectBudgetCosting.materialEquipmentCostingsList[e.activeMaterialEquipmentIndex]?null:e.projectBudgetCosting.materialEquipmentCostingsList[e.activeMaterialEquipmentIndex].costPerUnit)+(null==e.projectBudgetCosting.materialEquipmentCostingsList[e.activeMaterialEquipmentIndex]?null:e.projectBudgetCosting.materialEquipmentCostingsList[e.activeMaterialEquipmentIndex].margin)>0),t.xp6(1),t.Q6J("ngForOf",e.materialEquipmentSubCostingList),t.xp6(3),t.Oqu(t.lcZ(15,11,"Total")),t.xp6(3),t.hij(" ",e.totalForMaterialEquipmentUnit," "),t.xp6(2),t.Q6J("ngIf",(null==e.projectBudgetCosting.materialEquipmentCostingsList[e.activeMaterialEquipmentIndex]?null:e.projectBudgetCosting.materialEquipmentCostingsList[e.activeMaterialEquipmentIndex].costPerUnit)>0)}}function GZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",32),t.TgZ(1,"div",23),t.TgZ(2,"div",3),t.TgZ(3,"div",32),t.TgZ(4,"select",58),t.NdJ("change",function(n){return t.CHM(e),t.oxw().selectCostHead(n)}),t.TgZ(5,"option",20),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA(),t.YNc(9,QZ,2,2,"option",21),t.qZA(),t.qZA(),t.TgZ(10,"div",59),t._UZ(11,"input",60),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",41),t.TgZ(15,"a",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().addUpdateSubCostings()}),t._UZ(16,"i",40),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(17,$Z,20,13,"table",61),t.qZA()}if(2&i){const e=t.oxw();t.xp6(6),t.AsE("",t.lcZ(7,6,"Select")," ",t.lcZ(8,8,"Costing_Head")," "),t.xp6(3),t.Q6J("ngForOf",e.materialEquipmentExpenceHeadSelectList),t.xp6(2),t.hYB("placeholder","",t.lcZ(12,10,"Enter")," ",t.lcZ(13,12,"Amount"),""),t.xp6(6),t.Q6J("ngIf",-1!=e.activeMaterialEquipmentIndex)}}function WZ(i,a){1&i&&t._UZ(0,"input",69)}function zZ(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",70),t.NdJ("click",function(){return t.CHM(e),t.oxw().skippEstimationType()}),t.qZA()}}let re=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.materialEquipmentSubCostingList=[],this.materialEquipmentCostingList=[],this.grandTotal=0,this.totalForMaterialEquipmentUnit=-1,this.materialEquipmentExpenceHeadSelectList=[],this.materialEquipmentCode="",this.activeMaterialEquipmentIndex=-1,this.siteCodeSelectList=[],this.materialEquipmentSelectionList=[],this.isDataLoading=!1,this.quantity=0,this.isArab=!1,this.canSave=!1,this.materialEquipmentCodeControl=new l.NI(""),this.filteredMaterialEquipments=this.materialEquipmentCodeControl.valueChanges.pipe((0,tt.O)(this.materialEquipmentCode),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterMaterialEquipments(h||""))))}filterMaterialEquipments(e){return this.apiService.getall(`MaterialEquipment/getAutoSelectMaterialEquipmentList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.getAllMaterialEquipmentsList()}getAllMaterialEquipmentsList(){this.apiService.getall("Materialequipment/GetSelectMaterialequipmentList").subscribe(e=>{this.materialEquipmentSelectionList=e})}setForm(){var e;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null==(null===(e=this.project)||void 0===e?void 0:e.siteCode)?"":this.project.siteCode,l.kI.required],subCostAmount:[],subCostCostHead:[""],materialEquipmentCode:[""],quantity:[0]}),this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{var n;null!=o?(this.siteCodeSelectList=o,null!=(null===(n=this.project)||void 0===n?void 0:n.siteCode)&&(this.loadInitialData(),this.form.controls.siteCode.disable({onlySelf:!0}))):this.siteCodeSelectList=[]})}closeModel(){this.dialogRef.close()}submit(){0!=this.projectBudgetCosting.materialEquipmentCostingsList.length&&0!=this.projectBudgetCosting.materialEquipmentCostingsList[0].materialEquipmentSubCostingList.length?this.apiService.post("projectBudgetCosting/createProjectMaterialEquipmentCostingForSite",this.projectBudgetCosting).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.log(e),console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}loadInitialData(){this.apiService.getall(`ProjectBudgetCosting/getProjectMaterialEquipmentCostingForSite/${this.project.customerCode}/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectBudgetCosting=e,0==this.projectBudgetCosting.status?this.createNewProjectBudgetCosting():3!=this.projectBudgetCosting.status&&this.createNewMaterialEquipmentBudgetCostingList(),this.findTotalsCosts()}),this.apiService.getall("OperationExpenseHead/getOperationExpenseHeadsForMaterialEquipment").subscribe(e=>{this.materialEquipmentExpenceHeadSelectList=e})}createNewProjectBudgetCosting(){this.projectBudgetCosting.customerCode=this.project.customerCode,this.projectBudgetCosting.projectCode=this.project.projectCode,this.projectBudgetCosting.siteCode=this.form.controls.siteCode.value,this.projectBudgetCosting.serviceType="MATERIALEQUIPMENT",this.createNewMaterialEquipmentBudgetCostingList()}createNewMaterialEquipmentBudgetCostingList(){this.projectBudgetCosting.materialEquipmentCostingsList=[]}getMaterialEquipmentSubCostingList(e,o){this.activeMaterialEquipmentIndex=o,this.materialEquipmentSubCostingList=e.materialEquipmentSubCostingList.slice(),this.totalForMaterialEquipmentUnit=e.costPerUnit,this.findTotalsCosts()}findTotalsCosts(){this.grandTotal=0,0!=this.projectBudgetCosting.materialEquipmentCostingsList.length&&this.projectBudgetCosting.materialEquipmentCostingsList.forEach(e=>{e.costPerUnit=0,e.materialEquipmentSubCostingList.forEach(o=>{e.costPerUnit+=o.amount}),e.totMaterialEquipmentCost=e.costPerUnit*e.quantity,this.grandTotal=this.grandTotal+e.totMaterialEquipmentCost})}onSelectSiteCode(e){this.totalForMaterialEquipmentUnit=0,this.form.controls.siteCode.setValue(e.target.value),this.loadInitialData(),this.activeMaterialEquipmentIndex=-1}addUpdateSubCostings(){var e;if(-1!=this.activeMaterialEquipmentIndex){let o=this.form.controls.subCostAmount.value,n=this.form.controls.subCostCostHead.value;if(""!=n&&""!=o){let s={amount:o,costHead:n};if(null==this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex].materialEquipmentSubCostingList.find(c=>c.costHead==n))null===(e=this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex].materialEquipmentSubCostingList)||void 0===e||e.push(s);else{let c=this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex].materialEquipmentSubCostingList.findIndex(p=>p.costHead==n);this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex].materialEquipmentSubCostingList[c].amount=o}this.findTotalsCosts(),this.getMaterialEquipmentSubCostingList(this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex],this.activeMaterialEquipmentIndex),this.resetSubCosting()}}else this.notifyService.showError(`${this.translate.instant("Please Select Material Equipment")}`)}removeSubCostings(e){this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex].materialEquipmentSubCostingList.splice(e,1),this.findTotalsCosts(),this.getMaterialEquipmentSubCostingList(this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex],this.activeMaterialEquipmentIndex)}resetSubCosting(){this.form.controls.subCostAmount.setValue(""),this.form.controls.subCostCostHead.setValue("")}selectCostHead(e){let o=e.target.value;if(-1!=this.activeMaterialEquipmentIndex){this.form.controls.subCostCostHead.setValue(e.target.value);let n=this.projectBudgetCosting.materialEquipmentCostingsList[this.activeMaterialEquipmentIndex].materialEquipmentSubCostingList.find(s=>s.costHead==o);this.form.controls.subCostAmount.setValue(null!=n?n.amount:"")}else this.form.controls.subCostCostHead.setValue(""),this.form.controls.subCostAmount.setValue("")}totalPerMaterialEquipment(e){return e.costPerUnit}onSelectionMaterialEquipment(e){let o=this.isArab?e.option.value.nameInArabic:e.option.value.nameInEnglish;this.form.controls.materialEquipmentCode.setValue(o),this.materialEquipmentCodeControl.setValue(o),this.materialEquipmentCode=e.option.value.code}addUpdateMaterialEquipment(){if(""!=this.materialEquipmentCode&&""!=this.form.controls.quantity.value){let o={costPerUnit:0,quantity:this.form.controls.quantity.value,projectBudgetCostingId:this.projectBudgetCosting.projectBudgetCostingId,materialEquipmentCostingId:0,materialEquipmentSubCostingList:[].slice(),materialEquipmentCode:this.materialEquipmentCode,siteCode:this.projectBudgetCosting.siteCode};this.projectBudgetCosting.materialEquipmentCostingsList.push(o)}else this.notifyService.showError(`${this.translate.instant("Incorrect Material Data")}`);this.materialEquipmentCode="",this.materialEquipmentCodeControl.setValue(""),this.quantity=0,this.form.controls.quantity.setValue(""),this.canSave=!1}removeMaterial(e){this.projectBudgetCosting.materialEquipmentCostingsList.splice(e,1),this.findTotalsCosts(),this.activeMaterialEquipmentIndex=-1}getCostHead(e){return this.materialEquipmentExpenceHeadSelectList.find(o=>o.costHead==e)}getMaterialEquipment(e){return this.materialEquipmentSelectionList.find(o=>o.value==e)}SubCostingOK(){console.log(this.projectBudgetCosting.materialEquipmentCostingsList),this.activeMaterialEquipmentIndex=-1,this.canSave=!this.projectBudgetCosting.materialEquipmentCostingsList.find(e=>e.totLogisticsCost<=0)}cancelEditCosting(){this.activeMaterialEquipmentIndex=-1,this.canSave=!this.projectBudgetCosting.materialEquipmentCostingsList.find(e=>e.totLogisticsCost<=0)}skippEstimationType(){this.apiService.post("projectBudgetCosting/skippEstimationType",{projectCode:this.project.projectCode,siteCode:this.project.siteCode,type:"material"}).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.log(o),console.error(o),this.utilService.ShowApiErrorMessage(o)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-material-costing"]],features:[t.qOj],decls:62,vars:40,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-6",2,"padding-right","0"],[1,"paddingtop15"],["class","row",4,"ngIf"],["class","table  table-bordered table-borderedcustom no-wrap","id","table",4,"ngIf"],["class","col-md-6 col-lg-6",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button","value","CANCEL",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SAVE",4,"ngIf"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SKIP",3,"click",4,"ngIf"],[3,"value"],[1,"col-md-6","col-lg-6"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["type","number","formControlName","quantity",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-2"],[2,"font-size","30px",3,"click"],[1,"icon-plus"],[1,"col-md-2","col-lg-1"],["id","table",1,"table","table-bordered","table-borderedcustom","no-wrap"],["class","selected",4,"ngFor","ngForOf"],["colspan","3",2,"text-align","right"],[2,"text-align","right"],[1,"selected"],["style","text-align:right",4,"ngIf"],[4,"ngIf"],["style","text-align: right;",4,"ngIf"],[2,"width","10%","text-align","right"],[3,"click",4,"ngIf"],["style","font-size:smaller",4,"ngIf"],[3,"click"],[1,"tableicons"],[1,"icon-trash"],[2,"font-size","smaller"],["type","button",1,"btn","waves-effect","waves-light","btn-outline-primary",3,"click"],["formControlName","subCostCostHead",1,"custom-select","mr-sm-2",3,"change"],[1,"col-md-5","col-lg-4"],["type","number","formControlName","subCostAmount",1,"form-control",3,"placeholder"],["class","table tablecolor  table-bordered no-wrap",4,"ngIf"],[1,"table","tablecolor","table-bordered","no-wrap"],["width","60%"],["width","40%"],[4,"ngFor","ngForOf"],[2,"width","60%"],[2,"width","30%","text-align","right"],[2,"width","10%","text-align","right",3,"click"],["type","submit","value","SAVE",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock"],["type","button","value","SKIP",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(1," \xd7"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",3),t.TgZ(9,"div",7),t.TgZ(10,"h4",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(13,"div",9),t.TgZ(14,"div"),t.TgZ(15,"div",4),t.TgZ(16,"div",10),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t.TgZ(19,"label",13),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t._UZ(24,"input",16),t.ALo(25,"translate"),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(28,"div",12),t.TgZ(29,"label",13),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",14),t.TgZ(33,"div",15),t._UZ(34,"input",18),t.ALo(35,"translate"),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(38,"div",12),t.TgZ(39,"div",14),t.TgZ(40,"label",13),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"select",19),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(44,"option",20),t._uU(45),t.ALo(46,"translate"),t.ALo(47,"translate"),t.qZA(),t.YNc(48,LZ,2,2,"option",21),t.qZA(),t._UZ(49,"validation-message",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",3),t.TgZ(51,"div",22),t.TgZ(52,"div",23),t.YNc(53,NZ,18,18,"div",24),t.qZA(),t.YNc(54,JZ,25,17,"table",25),t.qZA(),t.YNc(55,GZ,18,14,"div",26),t.qZA(),t.qZA(),t.TgZ(56,"div",3),t.TgZ(57,"div",27),t.TgZ(58,"input",28),t.NdJ("click",function(){return o.closeModel()}),t.qZA(),t._uU(59," \xa0 "),t.YNc(60,WZ,1,0,"input",29),t.YNc(61,zZ,1,0,"input",30),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(9),t.hij("",t.lcZ(12,20,"MaterialEquipment_Costing")," "),t.xp6(9),t.Oqu(t.lcZ(21,22,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(25,24,"Please_Enter")," ",t.lcZ(26,26,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(31,28,"Project_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(35,30,"Please_Enter")," ",t.lcZ(36,32,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(42,34,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(46,36,"Select")," ",t.lcZ(47,38,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeSelectList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(1),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(1),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(5),t.Q6J("ngIf",o.canSave&&o.grandTotal>0&&-1==o.activeMaterialEquipmentIndex),t.xp6(1),t.Q6J("ngIf",0==o.grandTotal))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,l.EJ,l.YN,l.Kr,f.sg,f.O5,ht.z,at.ZL,l.oH,at.XC,l.wV,St.ey],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function XZ(i,a){if(1&i&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArab?e.siteArbName:e.siteName)}}function KZ(i,a){if(1&i&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.Q6J("value",e),t.xp6(1),t.hij(" ",o.isArab?e.costNameInArabic:e.costNameInEnglish," ")}}function t2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.TgZ(1,"div",31),t._UZ(2,"auto-loader",32),t._UZ(3,"input",33),t.ALo(4,"translate"),t.ALo(5,"translate"),t.TgZ(6,"mat-autocomplete",34,35),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().onSelectionFinancialExpense(n)}),t.YNc(8,KZ,2,2,"mat-option",21),t.ALo(9,"async"),t.qZA(),t.qZA(),t.TgZ(10,"div",12),t._UZ(11,"input",36),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",37),t.TgZ(15,"a",38),t.NdJ("click",function(){return t.CHM(e),t.oxw().addUpdateFinancialExpense()}),t._UZ(16,"i",39),t.qZA(),t.qZA(),t._UZ(17,"div",40),t.qZA()}if(2&i){const e=t.MAs(7),o=t.oxw();t.xp6(2),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(4,8,"Please_Enter")," ",t.lcZ(5,10,"Financial_Expense_Overhead"),""),t.Q6J("formControl",o.financialExpenseCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(9,12,o.filteredFinancialExpenses)),t.xp6(3),t.hYB("placeholder","",t.lcZ(12,14,"Enter")," ",t.lcZ(13,16,"Amount"),"")}}function e2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",44),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",43),t._uU(4),t.qZA(),t.TgZ(5,"td",45),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return n.removeFinExpense(n.j)}),t.TgZ(6,"a",46),t._UZ(7,"i",47),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);let n;t.xp6(2),t.Oqu(o.isArab?null==(n=o.getFinExpence(e.financialExpenseCode))?null:n.costNameInArabic:null==(n=o.getFinExpence(e.financialExpenseCode))?null:n.costNameInEnglish),t.xp6(2),t.Oqu(e.costPerUnit)}}function o2(i,a){if(1&i&&(t.TgZ(0,"table",41),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._UZ(9,"th"),t.qZA(),t.qZA(),t.TgZ(10,"tbody"),t.YNc(11,e2,8,2,"tr",42),t.TgZ(12,"tr"),t.TgZ(13,"th",43),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",43),t._uU(17),t.qZA(),t._UZ(18,"th"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,5,"Material_Equipment")," "),t.xp6(3),t.Oqu(t.lcZ(8,7,"Amount")),t.xp6(4),t.Q6J("ngForOf",e.projectBudgetCosting.financialExpenseCostingsList),t.xp6(3),t.hij(" ",t.lcZ(15,9,"Total")," "),t.xp6(3),t.hij(" ",e.grandTotal," ")}}function i2(i,a){1&i&&t._UZ(0,"input",48)}function n2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",49),t.NdJ("click",function(){return t.CHM(e),t.oxw().skippEstimationType()}),t.qZA()}}let le=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.financialExpenseCostingList=[],this.grandTotal=0,this.totalForFinancialExpenseUnit=-1,this.financialExpenseCode="",this.activeFinancialExpenseIndex=-1,this.siteCodeSelectList=[],this.financialExpenseSelectionList=[],this.isDataLoading=!1,this.financialExpenseCodeControl=new l.NI(""),this.isArab=!1,this.filteredFinancialExpenses=this.financialExpenseCodeControl.valueChanges.pipe((0,tt.O)(this.financialExpenseCode),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterFinancialExpenses(h||""))))}filterFinancialExpenses(e){return this.apiService.getall(`OperationExpenseHead/getAutoSelectListForFinancialExpense?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.getFinancialExpenseSelectionList()}getFinancialExpenseSelectionList(){this.apiService.getall("OperationExpenseHead/getOperationExpenseHeadsForFinancialExpence").subscribe(e=>{this.financialExpenseCostingList=e})}setForm(){var e;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null==(null===(e=this.project)||void 0===e?void 0:e.siteCode)?"":this.project.siteCode,l.kI.required],financialExpenseCode:[""],costPerUnit:[""]}),this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{var n;null!=o?(this.siteCodeSelectList=o,null!=(null===(n=this.project)||void 0===n?void 0:n.siteCode)&&(this.loadInitialData(),this.form.controls.siteCode.disable({onlySelf:!0}))):this.siteCodeSelectList=[]})}closeModel(){this.dialogRef.close()}submit(){0!=this.projectBudgetCosting.financialExpenseCostingsList.length?this.apiService.post("projectBudgetCosting/createProjectFinancialExpenseCostingForSite",this.projectBudgetCosting).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.log(e),console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}loadInitialData(){this.apiService.getall(`ProjectBudgetCosting/getProjectFinancialExpenseCostingForSite/${this.project.customerCode}/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectBudgetCosting=e,0==this.projectBudgetCosting.status&&this.createNewProjectBudgetCosting(),this.findTotalsCosts()})}createNewProjectBudgetCosting(){this.projectBudgetCosting.customerCode=this.project.customerCode,this.projectBudgetCosting.projectCode=this.project.projectCode,this.projectBudgetCosting.siteCode=this.form.controls.siteCode.value,this.projectBudgetCosting.serviceType="MATERIALEQUIPMENT",this.createNewFinancialExpenseBudgetCostingList()}createNewFinancialExpenseBudgetCostingList(){this.projectBudgetCosting.financialExpenseCostingsList=[]}findTotalsCosts(){this.grandTotal=0,0!=this.projectBudgetCosting.financialExpenseCostingsList.length&&this.projectBudgetCosting.financialExpenseCostingsList.forEach(e=>{this.grandTotal=this.grandTotal+e.costPerUnit})}onSelectSiteCode(e){this.totalForFinancialExpenseUnit=0,this.form.controls.siteCode.setValue(e.target.value),this.loadInitialData(),this.activeFinancialExpenseIndex=-1}totalPerFinancialExpense(e){return e.costPerUnit}onSelectionFinancialExpense(e){let o=this.isArab?e.option.value.costNameInArabic:e.option.value.costNameInEnglish;this.form.controls.financialExpenseCode.setValue(o),this.financialExpenseCodeControl.setValue(o),this.financialExpenseCode=e.option.value.costHead;let n=this.projectBudgetCosting.financialExpenseCostingsList.findIndex(s=>s.financialExpenseCode==e.option.value.costHead);this.form.controls.costPerUnit.setValue(n>=0?this.projectBudgetCosting.financialExpenseCostingsList[n].costPerUnit:"")}addUpdateFinancialExpense(){if(""!=this.form.controls.financialExpenseCode.value&&""!=this.financialExpenseCodeControl.value&&""!=this.form.controls.costPerUnit.value){let e={costPerUnit:this.form.controls.costPerUnit.value,projectBudgetCostingId:this.projectBudgetCosting.projectBudgetCostingId,financialExpenseCostingId:0,financialExpenseCode:this.financialExpenseCode},o=this.projectBudgetCosting.financialExpenseCostingsList.findIndex(n=>n.financialExpenseCode==this.financialExpenseCode);o>=0?this.projectBudgetCosting.financialExpenseCostingsList[o].costPerUnit=this.form.controls.costPerUnit.value:this.projectBudgetCosting.financialExpenseCostingsList.push(e),this.findTotalsCosts()}else this.notifyService.showError(`${this.translate.instant("Incomplete Data")}`);this.financialExpenseCode="",this.financialExpenseCodeControl.setValue(""),this.form.controls.costPerUnit.setValue("")}removeFinExpense(e){this.projectBudgetCosting.financialExpenseCostingsList.splice(e,1),this.findTotalsCosts()}getFinExpence(e){return this.financialExpenseCostingList.find(o=>o.costHead==e)}skippEstimationType(){this.apiService.post("projectBudgetCosting/skippEstimationType",{projectCode:this.project.projectCode,siteCode:this.project.siteCode,type:"financeExpence"}).subscribe(o=>{o&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},o=>{console.log(o),console.error(o),this.utilService.ShowApiErrorMessage(o)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-financial-expense-costing"]],features:[t.qOj],decls:61,vars:39,consts:[["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"container-fluid"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-7","col-lg-9"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-6",2,"padding-right","0"],[1,"paddingtop15"],["class","row",4,"ngIf"],["class","table  table-bordered table-borderedcustom no-wrap","id","table",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button","value","CANCEL",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SAVE",4,"ngIf"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","value","SKIP",3,"click",4,"ngIf"],[3,"value"],[1,"col-md-6","col-lg-6"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["type","number","formControlName","costPerUnit",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-2"],[2,"font-size","30px",3,"click"],[1,"icon-plus"],[1,"col-md-2","col-lg-1"],["id","table",1,"table","table-bordered","table-borderedcustom","no-wrap"],["class","selected",4,"ngFor","ngForOf"],[2,"text-align","right"],[1,"selected"],[2,"width","10%","text-align","right",3,"click"],[1,"tableicons"],[1,"icon-trash"],["type","submit","value","SAVE",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock"],["type","button","value","SKIP",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(1," \xd7"),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",3),t.TgZ(9,"div",7),t.TgZ(10,"h4",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(13,"div",9),t.TgZ(14,"div"),t.TgZ(15,"div",4),t.TgZ(16,"div",10),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t.TgZ(19,"label",13),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t._UZ(24,"input",16),t.ALo(25,"translate"),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(28,"div",12),t.TgZ(29,"label",13),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",14),t.TgZ(33,"div",15),t._UZ(34,"input",18),t.ALo(35,"translate"),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(38,"div",12),t.TgZ(39,"div",14),t.TgZ(40,"label",13),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"select",19),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(44,"option",20),t._uU(45),t.ALo(46,"translate"),t.ALo(47,"translate"),t.qZA(),t.YNc(48,XZ,2,2,"option",21),t.qZA(),t._UZ(49,"validation-message",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",3),t.TgZ(51,"div",22),t.TgZ(52,"div",23),t.YNc(53,t2,18,18,"div",24),t.qZA(),t.YNc(54,o2,19,11,"table",25),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",3),t.TgZ(56,"div",26),t.TgZ(57,"input",27),t.NdJ("click",function(){return o.closeModel()}),t.qZA(),t._uU(58," \xa0 "),t.YNc(59,i2,1,0,"input",28),t.YNc(60,n2,1,0,"input",29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(9),t.hij("",t.lcZ(12,19,"FinancialExpense_Costing")," "),t.xp6(9),t.Oqu(t.lcZ(21,21,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(25,23,"Please_Enter")," ",t.lcZ(26,25,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(31,27,"Project_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(35,29,"Please_Enter")," ",t.lcZ(36,31,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(42,33,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(46,35,"Select")," ",t.lcZ(47,37,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeSelectList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(1),t.Q6J("ngIf",null!=o.projectBudgetCosting),t.xp6(5),t.Q6J("ngIf",o.grandTotal>0),t.xp6(1),t.Q6J("ngIf",0==o.grandTotal))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,l.EJ,l.YN,l.Kr,f.sg,f.O5,ht.z,at.ZL,l.oH,at.XC,l.wV,St.ey],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function a2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(e.skillsetCode)}}function s2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);let n;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(o.isArab?null==(n=o.getSkillset(e.skillsetCode))?null:n.nameInArabic:null==(n=o.getSkillset(e.skillsetCode))?null:n.nameInEnglish)}}function r2(i,a){if(1&i&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(e.costPerUnit)}}function l2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(e.quantity)}}function c2(i,a){if(1&i&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(e.totResourceCost)}}function p2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,a2,2,2,"td",5),t.YNc(2,s2,2,2,"td",5),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.YNc(7,r2,2,2,"td",12),t.YNc(8,l2,2,2,"td",5),t.YNc(9,c2,2,2,"td",12),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.Oqu(n.isArab?null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.textTwo:null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.text),t.xp6(2),t.Oqu(e.amount),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o)}}function u2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,p2,10,7,"tr",3),t.TgZ(2,"tr"),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.resourceSubCostingList),t.xp6(3),t.Oqu(t.lcZ(5,3,"Margin")),t.xp6(3),t.Oqu(e.margin)}}function d2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(e.materialEquipmentCode)}}function m2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);let n;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(o.isArab?null==(n=o.getMaterialEquipments(e.materialEquipmentCode))?null:n.textTwo:null==(n=o.getMaterialEquipments(e.materialEquipmentCode))?null:n.text)}}function _2(i,a){if(1&i&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(e.costPerUnit)}}function g2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(e.quantity)}}function h2(i,a){if(1&i&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(e.totMaterialEquipmentCost)}}function f2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,d2,2,2,"td",5),t.YNc(2,m2,2,2,"td",5),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.YNc(7,_2,2,2,"td",12),t.YNc(8,g2,2,2,"td",5),t.YNc(9,h2,2,2,"td",12),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.Oqu(n.isArab?null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.textTwo:null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.text),t.xp6(2),t.Oqu(e.amount),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o)}}function Z2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,f2,10,7,"tr",3),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.materialEquipmentSubCostingList)}}function C2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(e.vehicleNumber)}}function A2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(o.isArab?o.getLogisticsVehicle(e.vehicleNumber).textTwo:o.getLogisticsVehicle(e.vehicleNumber).text)}}function T2(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(e.qty)}}function v2(i,a){if(1&i&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(e.costPerUnit)}}function x2(i,a){if(1&i&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(e.totLogisticsCost)}}function q2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,C2,2,2,"td",5),t.YNc(2,A2,2,2,"td",5),t.YNc(3,T2,2,2,"td",5),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.YNc(8,v2,2,2,"td",12),t.YNc(9,x2,2,2,"td",12),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.Oqu(n.isArab?null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.textTwo:null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.text),t.xp6(2),t.Oqu(e.amount),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o)}}function b2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,q2,10,7,"tr",3),t.TgZ(2,"tr"),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.logisticsSubCostingList),t.xp6(3),t.Oqu(t.lcZ(5,3,"Margin")),t.xp6(3),t.Oqu(e.margin)}}function y2(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",10),t._uU(7),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit,o=t.oxw(2);let n;t.xp6(3),t.Oqu(e.financialExpenseCode),t.xp6(2),t.Oqu(o.isArab?null==(n=o.getopeartionsExpenseHead(e.financialExpenseCode))?null:n.textTwo:null==(n=o.getopeartionsExpenseHead(e.financialExpenseCode))?null:n.text),t.xp6(2),t.Oqu(e.costPerUnit)}}function S2(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"h5"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"h5"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"div"),t.TgZ(9,"h5"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"table",7),t.TgZ(13,"tr"),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th",8),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.YNc(29,u2,8,5,"ng-container",3),t.TgZ(30,"tfoot"),t.TgZ(31,"tr"),t.TgZ(32,"th",9),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th",10),t._uU(36),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",6),t.TgZ(38,"div"),t.TgZ(39,"h5"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"table",7),t.TgZ(43,"tr"),t.TgZ(44,"th"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"th",8),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"th"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"th"),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.qZA(),t.YNc(59,Z2,2,1,"ng-container",3),t.TgZ(60,"tfoot"),t.TgZ(61,"tr"),t.TgZ(62,"th",9),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"th",10),t._uU(66),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(67,"div",6),t.TgZ(68,"div"),t.TgZ(69,"h5"),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"table",7),t.TgZ(73,"tr"),t.TgZ(74,"th"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"th"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"th"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t.TgZ(83,"th",8),t._uU(84),t.ALo(85,"translate"),t.qZA(),t.TgZ(86,"th"),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.qZA(),t.YNc(89,b2,8,5,"ng-container",3),t.TgZ(90,"tfoot"),t.TgZ(91,"tr"),t.TgZ(92,"th",9),t._uU(93),t.ALo(94,"translate"),t.qZA(),t.TgZ(95,"th",10),t._uU(96),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(97,"div",6),t.TgZ(98,"div"),t.TgZ(99,"h5"),t._uU(100),t.ALo(101,"translate"),t.qZA(),t.TgZ(102,"table",7),t.TgZ(103,"tr"),t.TgZ(104,"th"),t._uU(105),t.ALo(106,"translate"),t.qZA(),t.TgZ(107,"th"),t._uU(108),t.ALo(109,"translate"),t.qZA(),t.TgZ(110,"th"),t._uU(111),t.ALo(112,"translate"),t.qZA(),t.qZA(),t.YNc(113,y2,8,3,"ng-container",3),t.TgZ(114,"tfoot"),t.TgZ(115,"tr"),t.TgZ(116,"th",11),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.TgZ(119,"th",10),t._uU(120),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(2),t.AsE("",t.lcZ(3,42,"Site_Code"),":",e.siteData.siteCode,""),t.xp6(3),t.AsE("",t.lcZ(6,44,"Site_Name"),":",o.isArab?e.siteData.siteArbName:e.siteData.siteName,""),t.xp6(5),t.Oqu(t.lcZ(11,46,"Resource_Costing_Details")),t.xp6(5),t.Oqu(t.lcZ(16,48,"SkillSet_Code")),t.xp6(3),t.Oqu(t.lcZ(19,50,"Name")),t.xp6(3),t.Oqu(t.lcZ(22,52,"Cost_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(25,54,"Qty")),t.xp6(3),t.Oqu(t.lcZ(28,56,"Amount")),t.xp6(2),t.Q6J("ngForOf",e.prcListForSite),t.xp6(4),t.AsE("",t.lcZ(34,58,"Total_Cost_For_Resources")," ",o.isArab?e.siteData.siteArbName:e.siteData.siteName," "),t.xp6(3),t.hij(" ",e.totRcForSite,""),t.xp6(4),t.hij(" ",t.lcZ(41,60,"Material_Equipment_Costing_Details")," "),t.xp6(5),t.Oqu(t.lcZ(46,62,"Material_Equipment_Code")),t.xp6(3),t.Oqu(t.lcZ(49,64,"Name")),t.xp6(3),t.Oqu(t.lcZ(52,66,"Cost_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(55,68,"Qty")),t.xp6(3),t.Oqu(t.lcZ(58,70,"Amount")),t.xp6(2),t.Q6J("ngForOf",e.pmcListForSite),t.xp6(4),t.AsE("",t.lcZ(64,72,"Total_Material_Cost_For")," ",o.isArab?e.siteData.siteArbName:e.siteData.siteName," "),t.xp6(3),t.hij(" ",e.totMcForSite,""),t.xp6(4),t.hij(" ",t.lcZ(71,74,"Logistics_Vehicle_Costing_Details")," "),t.xp6(5),t.Oqu(t.lcZ(76,76,"Vehicle_Code")),t.xp6(3),t.Oqu(t.lcZ(79,78,"Vehicle_Name")),t.xp6(3),t.Oqu(t.lcZ(82,80,"Qty")),t.xp6(3),t.Oqu(t.lcZ(85,82,"Amount_For_Vehicle")),t.xp6(3),t.Oqu(t.lcZ(88,84,"Amount")),t.xp6(2),t.Q6J("ngForOf",e.plcListForSite),t.xp6(4),t.AsE("",t.lcZ(94,86,"Total_Logistics_Cost_for")," ",o.isArab?e.siteData.siteArbName:e.siteData.siteName," "),t.xp6(3),t.hij(" ",e.totLcForSite,""),t.xp6(4),t.Oqu(t.lcZ(101,88,"Financial_Expense_Costing_Details")),t.xp6(5),t.Oqu(t.lcZ(106,90,"Code")),t.xp6(3),t.Oqu(t.lcZ(109,92,"Name")),t.xp6(3),t.Oqu(t.lcZ(112,94,"Amount")),t.xp6(2),t.Q6J("ngForOf",e.pfcListForSite),t.xp6(4),t.AsE("",t.lcZ(118,96,"Total_Expense_Overheads_Cost_For")," ",o.isArab?e.siteData.siteArbName:e.siteData.siteName," "),t.xp6(3),t.hij(" ",e.totFcForSite,"")}}function w2(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Total_Estimation_For_Project")," : ",null==e.projectBudgetEstimation?null:e.projectBudgetEstimation.grandTotalCostForProject," ")}}function U2(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Total_Estimation_For_Site")," : ",null==e.projectBudgetEstimation?null:e.projectBudgetEstimation.grandTotalCostForProject," ")}}let ce=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.isArab=!1}ngOnInit(){console.log(this.project),this.isArab=this.utilService.isArabic(),this.loadSkillSetsList(),this.loadOperationsExpenseHeads(),this.loadMaterialEquipments(),this.loadLogisticsVehicles(),this.loadInitialData(),this.getCustomerData()}closeModel(){this.dialogRef.close()}submit(){}loadInitialData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1),"Print"==this.modalBtnTitle&&this.printComponent()}):this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1),"Print"==this.modalBtnTitle&&this.printComponent()})}printComponent(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}findTotalCosts(){this.projectBudgetEstimation.grandTotalCostForProject=0,this.projectBudgetEstimation.siteWisePBCListForProject.forEach(e=>{e.totFcForSite=0,e.totLcForSite=0,e.totMcForSite=0,e.totRcForSite=0,e.grandTotalCostForSite=0,0!=e.prcListForSite.length&&e.prcListForSite.forEach(o=>{o.totResourceCost=0,0!=o.resourceSubCostingList.length&&(o.costPerUnit=o.margin,o.resourceSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totResourceCost=o.costPerUnit*o.quantity),e.totRcForSite=e.totRcForSite+o.totResourceCost}),0!=e.plcListForSite.length&&e.plcListForSite.forEach(o=>{o.totLogisticsCost=0,0!=o.logisticsSubCostingList.length&&(o.costPerUnit=o.margin,o.logisticsSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totLogisticsCost=o.costPerUnit*o.qty),e.totLcForSite=e.totLcForSite+o.totLogisticsCost}),0!=e.pmcListForSite.length&&e.pmcListForSite.forEach(o=>{o.totMaterialEquipmentCost=0,0!=o.materialEquipmentSubCostingList.length&&(o.costPerUnit=0,o.materialEquipmentSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totMaterialEquipmentCost=o.costPerUnit*o.quantity),e.totMcForSite=e.totMcForSite+o.totMaterialEquipmentCost}),0!=e.pfcListForSite.length&&e.pfcListForSite.forEach(o=>{e.totFcForSite=e.totFcForSite+o.costPerUnit}),e.grandTotalCostForSite=e.grandTotalCostForSite+e.totFcForSite+e.totLcForSite+e.totMcForSite+e.totRcForSite,this.projectBudgetEstimation.grandTotalCostForProject=this.projectBudgetEstimation.grandTotalCostForProject+e.grandTotalCostForSite})}loadSkillSetsList(){this.apiService.getall("Skillset/getAllSkillsetList").subscribe(e=>{this.skillsetList=e})}getSkillset(e){return this.skillsetList.find(n=>n.skillSetCode==e)}loadOperationsExpenseHeads(){this.apiService.getall("OperationExpenseHead/getSelectOperationExpenseHeadList").subscribe(e=>{this.opeartionsExpenseHeadsList=e})}getopeartionsExpenseHead(e){return this.opeartionsExpenseHeadsList.find(n=>n.value==e)}loadMaterialEquipments(){this.apiService.getall("Materialequipment/getSelectMaterialequipmentList").subscribe(e=>{this.materialEquipmentList=e})}getMaterialEquipments(e){return this.materialEquipmentList.find(n=>n.value==e)}loadLogisticsVehicles(){this.apiService.getall("Logisticsandvehicle/getSelectLogisticsandvehicleList").subscribe(e=>{this.logisticsVehicleList=e})}getLogisticsVehicle(e){return this.logisticsVehicleList.find(n=>n.value==e)}getCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(e=>{null!=e?this.customerData=e:(this.notifyService.showError(this.translate.instant("Error")),console.log("No Customer Found"))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-estimation-consol-report"]],features:[t.qOj],decls:10,vars:6,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["id","printableArea",1,"container-fluid"],[4,"ngFor","ngForOf"],[2,"text-align","right"],[4,"ngIf"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],["colspan","3"],["colspan","6",1,"text-right"],[1,"text-right"],["colspan","2",1,"text-right"],["class","text-right",4,"ngIf"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,S2,121,98,"ng-container",3),t.TgZ(7,"h5",4),t.YNc(8,w2,3,4,"span",5),t.YNc(9,U2,3,4,"span",5),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,4,o.modalTitle)),t.xp6(5),t.Q6J("ngForOf",null==o.projectBudgetEstimation?null:o.projectBudgetEstimation.siteWisePBCListForProject),t.xp6(2),t.Q6J("ngIf",!(null!=o.project&&o.project.isAdendum)),t.xp6(1),t.Q6J("ngIf",null==o.project?null:o.project.isAdendum))},directives:[f.sg,f.O5],pipes:[Z.X$],encapsulation:2}),i})();function L2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",14),t._uU(2),t.qZA(),t.TgZ(3,"td",14),t._uU(4),t.qZA(),t.TgZ(5,"td",14),t._uU(6),t.qZA(),t.TgZ(7,"td",14),t._uU(8),t.qZA(),t.TgZ(9,"td",14),t._uU(10),t.qZA(),t.TgZ(11,"td",14),t._uU(12),t.qZA(),t.TgZ(13,"td",14),t._uU(14),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(2),t.Oqu(e.siteData.siteCode),t.xp6(2),t.Oqu(o.isArab?e.siteData.siteArbName:e.siteData.siteName),t.xp6(2),t.Oqu(e.totRcForSite),t.xp6(2),t.Oqu(e.totMcForSite),t.xp6(2),t.Oqu(e.totLcForSite),t.xp6(2),t.Oqu(e.totFcForSite),t.xp6(2),t.Oqu(e.grandTotalCostForSite)}}function D2(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Total_Estimation_For_Project")," : ",null==e.projectBudgetEstimation?null:e.projectBudgetEstimation.grandTotalCostForProject," ")}}function N2(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Total_Estimation_For_Site")," : ",null==e.projectBudgetEstimation?null:e.projectBudgetEstimation.grandTotalCostForProject," ")}}let pe=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.loadInitialData(),this.getCustomerData(),this.loadProjectData()}closeModel(){this.dialogRef.close()}submit(){}loadInitialData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)}):this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)})}findTotalCosts(){this.projectBudgetEstimation.grandTotalCostForProject=0,this.projectBudgetEstimation.siteWisePBCListForProject.forEach(e=>{e.totFcForSite=0,e.totLcForSite=0,e.totMcForSite=0,e.totRcForSite=0,e.grandTotalCostForSite=0,0!=e.prcListForSite.length&&e.prcListForSite.forEach(o=>{o.totResourceCost=0,0!=o.resourceSubCostingList.length&&(o.costPerUnit=o.margin,o.resourceSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totResourceCost=o.costPerUnit*o.quantity),e.totRcForSite=e.totRcForSite+o.totResourceCost}),0!=e.plcListForSite.length&&e.plcListForSite.forEach(o=>{o.totLogisticsCost=0,0!=o.logisticsSubCostingList.length&&(o.costPerUnit=0,o.logisticsSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totLogisticsCost=o.costPerUnit*o.qty),e.totLcForSite=e.totLcForSite+o.totLogisticsCost}),0!=e.pmcListForSite.length&&e.pmcListForSite.forEach(o=>{o.totMaterialEquipmentCost=0,0!=o.materialEquipmentSubCostingList.length&&(o.costPerUnit=0,o.materialEquipmentSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totMaterialEquipmentCost=o.costPerUnit*o.quantity),e.totMcForSite=e.totMcForSite+o.totMaterialEquipmentCost}),0!=e.pfcListForSite.length&&e.pfcListForSite.forEach(o=>{e.totFcForSite=e.totFcForSite+o.costPerUnit}),e.grandTotalCostForSite=e.grandTotalCostForSite+e.totFcForSite+e.totLcForSite+e.totMcForSite+e.totRcForSite,this.projectBudgetEstimation.grandTotalCostForProject=this.projectBudgetEstimation.grandTotalCostForProject+e.grandTotalCostForSite})}printInvoice(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}getCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(e=>{null!=e?(this.customerData=e,this.getCity(e.custCityCode1),console.log(e)):(this.notifyService.showError(this.translate.instant("Error")),console.log("No Customer Found"))})}getCity(e){this.apiService.getall(`City/getStateCountrybyCityCode/${e}`).subscribe(o=>{this.city=o,console.log(o)})}loadProjectData(){this.apiService.getall(`Project/getProjectByProjectCode/${this.project.projectCode}`).subscribe(e=>{null!=e&&(this.projectData=e)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-estimation-summary-report"]],features:[t.qOj],decls:91,vars:60,consts:[[2,"position","fixed"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],[2,"padding-bottom","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%","text-align","left"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],[4,"ngFor","ngForOf"],[2,"text-align","right"],[4,"ngIf"],[2,"border","2px solid #878787","padding","5px","text-align","left","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.printInvoice()}),t._uU(2,"Print"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," Close"),t.qZA(),t.qZA(),t._UZ(6,"br"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.TgZ(10,"div",4),t.TgZ(11,"table",5),t.TgZ(12,"tr"),t.TgZ(13,"th",6),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th",7),t._uU(17),t.qZA(),t.TgZ(18,"th",6),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th",8),t._uU(22),t.qZA(),t.qZA(),t.TgZ(23,"tr"),t.TgZ(24,"th",8),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th",9),t._uU(28),t.qZA(),t.qZA(),t.TgZ(29,"tr"),t.TgZ(30,"th",8),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"th",8),t._uU(34),t.qZA(),t.TgZ(35,"th",8),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th",8),t._uU(39),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",4),t.TgZ(41,"table",5),t.TgZ(42,"tr"),t.TgZ(43,"th",6),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"th",7),t._uU(47),t.qZA(),t.TgZ(48,"th",6),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"th",8),t._uU(52),t.qZA(),t.qZA(),t.TgZ(53,"tr"),t.TgZ(54,"th",6),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"th",6),t._uU(58),t.qZA(),t.TgZ(59,"th",6),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"th",8),t._uU(63),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(64,"table",10),t.TgZ(65,"tr"),t.TgZ(66,"th",8),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"th",8),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"th",8),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"th",8),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"th",8),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"th",8),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"th",8),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.qZA(),t.YNc(87,L2,15,7,"tr",11),t.qZA(),t.TgZ(88,"h5",12),t.YNc(89,D2,3,4,"span",13),t.YNc(90,N2,3,4,"span",13),t.qZA(),t.qZA()),2&e&&(t.xp6(14),t.hij(" ",t.lcZ(15,28,"Customer_Code")," "),t.xp6(3),t.hij(" #",null==o.project?null:o.project.customerCode," "),t.xp6(2),t.hij(" ",t.lcZ(20,30,"Customer_Name")," "),t.xp6(3),t.hij(" ",o.isArab?null==o.customerData?null:o.customerData.custArbName:null==o.customerData?null:o.customerData.custName," "),t.xp6(3),t.hij(" ",t.lcZ(26,32,"Address")," "),t.xp6(3),t.hij(" #",null==o.customerData?null:o.customerData.custAddress1," "),t.xp6(3),t.hij(" ",t.lcZ(32,34,"City")," "),t.xp6(3),t.hij(" ",o.isArab?null==o.city?null:o.city.cityNameAr:null==o.city?null:o.city.cityName," "),t.xp6(2),t.hij(" ",t.lcZ(37,36,"Phone")," "),t.xp6(3),t.hij(" ",null==o.customerData?null:o.customerData.custPhone1," "),t.xp6(5),t.hij(" ",t.lcZ(45,38,"Project_Code")," "),t.xp6(3),t.hij(" ",null==o.projectData?null:o.projectData.projectCode," "),t.xp6(2),t.hij(" ",t.lcZ(50,40,"Est_Starting_Date")," "),t.xp6(3),t.hij(" ",null==o.projectData?null:o.projectData.startDate.substring(0,10)," "),t.xp6(3),t.hij(" ",t.lcZ(56,42,"Project_Details")," "),t.xp6(3),t.hij(" ",o.isArab?null==o.projectData?null:o.projectData.projectNameArb:null==o.projectData?null:o.projectData.projectNameEng," "),t.xp6(2),t.hij(" ",t.lcZ(61,44,"Est_Closing_Date")," "),t.xp6(3),t.hij(" ",null==o.projectData?null:o.projectData.endDate.substring(0,10)," "),t.xp6(4),t.Oqu(t.lcZ(68,46,"Site_Code")),t.xp6(3),t.Oqu(t.lcZ(71,48,"Site_Name")),t.xp6(3),t.Oqu(t.lcZ(74,50,"Total_SkillSet_Cost")),t.xp6(3),t.Oqu(t.lcZ(77,52,"Total_Material_cost")),t.xp6(3),t.Oqu(t.lcZ(80,54,"Total_Logistics_Cost")),t.xp6(3),t.Oqu(t.lcZ(83,56,"Total_Finacial_Expense_Cost")),t.xp6(3),t.Oqu(t.lcZ(86,58,"Total_Cost")),t.xp6(2),t.Q6J("ngForOf",null==o.projectBudgetEstimation?null:o.projectBudgetEstimation.siteWisePBCListForProject),t.xp6(2),t.Q6J("ngIf",!(null!=o.project&&o.project.isAdendum)),t.xp6(1),t.Q6J("ngIf",null==o.project?null:o.project.isAdendum))},directives:[f.sg,f.O5],pipes:[Z.X$],encapsulation:2}),i})(),Wt=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.readonly=""}ngOnInit(){this.setForm()}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({serviceCode:[this.serviceCode],branchCode:[this.branchCode],serviceType:[this.serviceType],isApproved:[!1],appRemarks:["",l.kI.required]})}submit(){}postApproval(e){console.log(this.form.value),this.form.value.isApproved="True"==e,this.form.valid?this.apiService.post("OpApprovals",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)}):this.utilService.FillUpFields()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-approval-dialog-window"]],features:[t.qOj],decls:25,vars:22,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12","col-lg-12"],[1,"mr-sm-2"],["formControlName","appRemarks",1,"form-control",3,"placeholder"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"label",5),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"textarea",6),t.ALo(12,"translate"),t.ALo(13,"translate"),t._uU(14,'        <validation-message [control]="form.controls.appRemarks"></validation-message>\n'),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",7),t.TgZ(16,"input",8),t.NdJ("click",function(){return o.postApproval("True")}),t.ALo(17,"translate"),t.qZA(),t._uU(18," \xa0 "),t.TgZ(19,"input",8),t.NdJ("click",function(){return o.postApproval("False")}),t.ALo(20,"translate"),t.qZA(),t._uU(21," \xa0 "),t.TgZ(22,"input",9),t.NdJ("click",function(){return o.closeModel()}),t.ALo(23,"translate"),t.qZA(),t._uU(24," \xa0 "),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,8,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(4),t.Oqu(t.lcZ(10,10,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(12,12,"Enter")," ",t.lcZ(13,14,"Remarks"),""),t.xp6(5),t.s9C("value",t.lcZ(17,16,"Approve")),t.xp6(3),t.s9C("value",t.lcZ(20,18,"Not_Approve")),t.xp6(3),t.s9C("value",t.lcZ(23,20,"Cancel")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],pipes:[Z.X$],encapsulation:2}),i})();function E2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",36),t._uU(2),t.qZA(),t.TgZ(3,"td",37),t._uU(4),t.qZA(),t.TgZ(5,"td",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).removeLiabilityAndInsuranceTerm(n)}),t.TgZ(6,"a",39),t._UZ(7,"i",40),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.Oqu(n.contractTerm)}}function O2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,E2,8,2,"tr",28),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isLiabilityAndInsurance)}}function j2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,O2,2,1,"ng-container",35),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.liabilityInsuranceTerms)}}function k2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",36),t._uU(2),t.qZA(),t.TgZ(3,"td",37),t._uU(4),t.qZA(),t.TgZ(5,"td",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).removeTerminationClauseTerm(n)}),t.TgZ(6,"a",39),t._UZ(7,"i",40),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.Oqu(n.contractTerm)}}function M2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,k2,8,2,"tr",28),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isTerminationClause)}}function R2(i,a){if(1&i&&(t.ynx(0),t.YNc(1,M2,2,1,"ng-container",35),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.terminationClauseTerms)}}function P2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",44),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",n.convertDateToString(e.instDate).toString().substring(0,15)," "),t.xp6(2),t.hij(" ",e.particular," "),t.xp6(2),t.hij(" ",e.amount," ")}}function F2(i,a){if(1&i&&(t.TgZ(0,"div",41),t.TgZ(1,"table",42),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",43),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.qZA(),t.ynx(16),t.YNc(17,P2,9,4,"tr",35),t.BQk(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,5,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(9,7,"Payment_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(12,9,"Particular")," "),t.xp6(3),t.hij(" ",t.lcZ(15,11,"Amount")," "),t.xp6(3),t.Q6J("ngForOf",e.paymentTermsList)}}function I2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",18),t.TgZ(1,"div",47),t.TgZ(2,"div",48),t.TgZ(3,"input",49),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(8);return t.oxw(2).openDatePicker(n)}),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",50),t._UZ(6,"mat-datepicker-toggle",51),t._UZ(7,"mat-datepicker",52,53),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",9),t._UZ(10,"input",54),t.ALo(11,"translate"),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",47),t._UZ(14,"input",55),t.ALo(15,"translate"),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"div",56),t.TgZ(18,"a",57),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).addUpdatePaymentTerm()}),t._UZ(19,"i",23),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(8),o=t.oxw(2);t.xp6(3),t.hYB("placeholder","",t.lcZ(4,11,"Select")," ","Payment_Date",""),t.Q6J("matDatepicker",e)("min",o.minDate)("max",o.maxDate),t.xp6(3),t.Q6J("for",e)("matDatepickerFilter",o.myDateFilter),t.xp6(4),t.hYB("placeholder","",t.lcZ(11,13,"Enter")," ",t.lcZ(12,15,"Amount"),""),t.xp6(4),t.hYB("placeholder","",t.lcZ(15,17,"Enter")," ",t.lcZ(16,19,"Particular"),"")}}function Y2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",36),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",44),t._uU(8),t.qZA(),t.TgZ(9,"td",38),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).removPaymentTerm(s)}),t.TgZ(10,"a",39),t._UZ(11,"i",40),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.Oqu(e.instDate.toString().substring(0,15)),t.xp6(2),t.Oqu(e.particular),t.xp6(2),t.Oqu(e.amount)}}function J2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",58),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td",44),t._uU(5),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"Balance_Amount")),t.xp6(3),t.Oqu(e.balance)}}function Q2(i,a){if(1&i&&(t.TgZ(0,"div",45),t.YNc(1,I2,20,21,"div",46),t.TgZ(2,"div",24),t.TgZ(3,"table",25),t.TgZ(4,"tr",26),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",43),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"th"),t.qZA(),t.ynx(18),t.YNc(19,Y2,12,4,"tr",35),t.YNc(20,J2,6,4,"tr",28),t.BQk(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=e.balance),t.xp6(5),t.hij(" ",t.lcZ(7,7,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(10,9,"Payment_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(13,11,"Particular")," "),t.xp6(3),t.hij(" ",t.lcZ(16,13,"Amount")," "),t.xp6(4),t.Q6J("ngForOf",e.paymentTerms),t.xp6(1),t.Q6J("ngIf",0!=e.balance)}}function B2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",34),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeAutoPayment()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Auto_Generate_PaymentTerms"))}function H2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",34),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeAutoPayment()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Manual_Payment Terms"))}let V2=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u){super(c),this.translate=e,this.notifyService=o,this.dialog=n,this.utilService=s,this.apiService=r,this.authService=c,this.fb=p,this.dialogRef=u,this.shiftsForSite=[],this.siteCode="",this.siteCodeList=[],this.tableData=[],this.footerData=[],this.monthsDataList=[],this.skillsetsListForSite=[],this.monthlyRoasterForSite=[],this.isRoasterGenerated=!1,this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.contractTermsList=[],this.paymentTermsList=[],this.paymentTerms=[],this.balance=0,this.autoPayment=!0,this.liabilityInsuranceTerms=[],this.terminationClauseTerms=[]}ngOnInit(){this.calculateDates(),this.loadContractData()}loadContractData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`ProjectContracts/getContractByProjectAndSiteCode/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{this.contractDto=o,this.contractTermsList=o.contractTerms.slice(),this.paymentTermsList=o.paymentTerms.slice(),this.liabilityInsuranceTerms=this.contractTermsList.filter(n=>n.isLiabilityAndInsurance),this.terminationClauseTerms=this.contractTermsList.filter(n=>n.isTerminationClause)}):this.apiService.getall(`ProjectContracts/getContractByProjectCode/${this.project.projectCode}`).subscribe(o=>{this.contractDto=o,this.contractTermsList=o.contractTerms.slice(),this.paymentTermsList=o.paymentTerms.slice(),this.liabilityInsuranceTerms=this.contractTermsList.filter(n=>n.isLiabilityAndInsurance),this.terminationClauseTerms=this.contractTermsList.filter(n=>n.isTerminationClause)})}setForm(){var e;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null===(e=this.project)||void 0===e?void 0:e.siteCode],startDate:[this.project.startDate.toString().substring(0,10)],endDate:[this.project.endDate.toString().substring(0,10)],noOfDays:[this.noOfDays],liabilityAndInsurance:[""],terminationClause:[""],instDate:[""],amount:[""],particular:[""]}),this.loadInitialData()}closeModel(){this.dialogRef.close()}submit(){}calculateDates(){this.monthsDataList=[];let e=new Date(this.project.startDate),o=new Date(this.project.endDate);this.minDate=new Date>e?e:new Date,this.maxDate=o,this.noOfDays=(o.getTime()-e.getTime())/864e5+1;for(let n=e.getFullYear();n<=o.getFullYear();n++){let s=n==e.getFullYear()?e.getMonth():1,r=n==o.getFullYear()?o.getMonth():12;for(let c=s;c<=r;c++){let p=c==s&&n==e.getFullYear()?e.getDate():1,u=c==r&&n==o.getFullYear()?o.getDate():new Date(n,c+1,0).getDate(),d=(new Date(n,c,u).getTime()-new Date(n,c,p).getTime())/864e5+1,m={sd:p,ed:u,mStartDate:new Date(n,c,p).toDateString(),mEndDate:new Date(n,c,u).toDateString(),mNoOfDays:d};this.monthsDataList.push(m)}}this.setForm()}loadInitialData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1),this.loadTableData()}):this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1),this.loadTableData()})}loadTableData(){var e;this.tableData=[];for(let n=0;n<this.monthsDataList.length;n++){let s={sd:this.monthsDataList[n].sd,ed:this.monthsDataList[n].ed,startDate:this.monthsDataList[n].mStartDate,endDate:this.monthsDataList[n].mEndDate,noOfDays:this.monthsDataList[n].mNoOfDays,amount:(this.projectBudgetEstimation.grandTotalCostForProject/this.noOfDays*this.monthsDataList[n].mNoOfDays).toFixed(0)};this.tableData.push(s)}this.paymentTermsList=[];for(var o=0;o<this.tableData.length;o++){let n={customerCode:this.project.customerCode,projectCode:this.project.projectCode,siteCode:(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.project.siteCode:null,branchCode:this.project.branchCode,instDate:this.convertStrToDate(this.tableData[o].startDate),particular:"Payment-"+(o+1),amount:this.tableData[o].amount,noOfDays:this.tableData[o].noOfDays};this.paymentTermsList.push(n)}}findTotalCosts(){this.projectBudgetEstimation.grandTotalCostForProject=0,this.projectBudgetEstimation.siteWisePBCListForProject.forEach(e=>{e.totFcForSite=0,e.totLcForSite=0,e.totMcForSite=0,e.totRcForSite=0,e.grandTotalCostForSite=0,0!=e.prcListForSite.length&&e.prcListForSite.forEach(o=>{o.totResourceCost=0,0!=o.resourceSubCostingList.length&&(o.costPerUnit=0,o.resourceSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totResourceCost=o.costPerUnit*o.quantity),e.totRcForSite=e.totRcForSite+o.totResourceCost}),0!=e.plcListForSite.length&&e.plcListForSite.forEach(o=>{o.totLogisticsCost=0,0!=o.logisticsSubCostingList.length&&(o.costPerUnit=0,o.logisticsSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totLogisticsCost=o.costPerUnit),e.totLcForSite=e.totLcForSite+o.totLogisticsCost}),0!=e.pmcListForSite.length&&e.pmcListForSite.forEach(o=>{o.totMaterialEquipmentCost=0,0!=o.materialEquipmentSubCostingList.length&&(o.costPerUnit=0,o.materialEquipmentSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totMaterialEquipmentCost=o.costPerUnit*o.quantity),e.totMcForSite=e.totMcForSite+o.totMaterialEquipmentCost}),0!=e.pfcListForSite.length&&e.pfcListForSite.forEach(o=>{e.totFcForSite=e.totFcForSite+o.costPerUnit}),e.grandTotalCostForSite=e.grandTotalCostForSite+e.totFcForSite+e.totLcForSite+e.totMcForSite+e.totRcForSite,this.projectBudgetEstimation.grandTotalCostForProject=this.projectBudgetEstimation.grandTotalCostForProject+e.grandTotalCostForSite}),this.balance=this.remainingBalance()}removeContractTerm(e){this.contractTermsList.splice(e,1)}removeLiabilityAndInsuranceTerm(e){this.liabilityInsuranceTerms.splice(e,1)}removeTerminationClauseTerm(e){this.terminationClauseTerms.splice(e,1)}addUpdateContractTerm(){var e;if(""!=this.form.controls.liabilityAndInsurance.value||""!=this.form.controls.terminationClause.value){let o={contractTerm:""!=this.form.controls.liabilityAndInsurance.value?this.form.controls.liabilityAndInsurance.value:this.form.controls.terminationClause.value,customerCode:this.project.customerCode,projectCode:this.project.projectCode,siteCode:(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.project.siteCode:null,branchCode:this.project.branchCode,isLiabilityAndInsurance:""!=this.form.controls.liabilityAndInsurance.value,isTerminationClause:""!=this.form.controls.terminationClause.value};this.contractTermsList.push(o),this.form.controls.liabilityAndInsurance.setValue(""),this.form.controls.terminationClause.setValue("")}else this.notifyService.showWarning(`${this.translate.instant("Enter_Contract_Terms")}`,`${this.translate.instant("Warning")}`)}addUpdateLiabilityAndInsuranceTerm(){var e;if(""!=this.form.controls.liabilityAndInsurance.value){let o={contractTerm:this.form.controls.liabilityAndInsurance.value,customerCode:this.project.customerCode,projectCode:this.project.projectCode,sitCode:(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.project.siteCode:null,branchCode:this.project.branchCode,isLiabilityAndInsurance:!0,isTerminationClause:!1};this.liabilityInsuranceTerms.push(o),this.form.controls.liabilityAndInsurance.setValue(""),this.form.controls.terminationClause.setValue("")}else this.notifyService.showWarning(`${this.translate.instant("Enter_Contract_Terms")}`,`${this.translate.instant("Warning")}`)}addUpdateTerminationClauseTerm(){var e;if(""!=this.form.controls.terminationClause.value){let o={contractTerm:this.form.controls.terminationClause.value,customerCode:this.project.customerCode,projectCode:this.project.projectCode,siteCode:(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.project.siteCode:null,branchCode:this.project.branchCode,isLiabilityAndInsurance:!1,isTerminationClause:!0};this.terminationClauseTerms.push(o),this.form.controls.liabilityAndInsurance.setValue(""),this.form.controls.terminationClause.setValue("")}else this.notifyService.showWarning(`${this.translate.instant("Enter_Contract_Terms")}`,`${this.translate.instant("Warning")}`)}generateContractForProject(){var e,o;if(this.contractTermsList=[],this.contractTermsList=this.liabilityInsuranceTerms.concat(this.terminationClauseTerms).slice(),0==this.contractTermsList.length)this.notifyService.showWarning(`${this.translate.instant("Enter_Contract_Terms")}`,`${this.translate.instant("Warning")}`);else if(this.autoPayment||0!=this.paymentTerms.length){let n={customerCode:this.project.customerCode,projectCode:this.project.projectCode,siteCode:(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.project.siteCode:null,paymentTerms:this.autoPayment?this.paymentTermsList:this.paymentTerms,contractTerms:this.contractTermsList,branchCode:this.project.branchCode};this.contractDto=n,(null===(o=this.project)||void 0===o?void 0:o.isAdendum)?this.apiService.post("ProjectContracts/CreateSiteContract",this.contractDto).subscribe(s=>{s&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},s=>{console.log(s),console.error(s),this.utilService.ShowApiErrorMessage(s)}):this.apiService.post("ProjectContracts",this.contractDto).subscribe(s=>{s&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},s=>{console.log(s),console.error(s),this.utilService.ShowApiErrorMessage(s)})}else this.notifyService.showWarning(`${this.translate.instant("Enter")} ${this.translate.instant("Payment_Terms")}`,`${this.translate.instant("Warning")}`)}convertStrToDate(e){var o=new Date(e),n=("0"+(o.getMonth()+1)).slice(-2),s=("0"+o.getDate()).slice(-2);return[o.getFullYear(),n,s].join("-")}convertDateToString(e){return new Date(e)}openDatePicker(e){e.open()}addUpdatePaymentTerm(){var e;if(""!=this.form.controls.instDate.value&&""!=this.form.controls.amount.value&&""!=this.form.controls.particular.value){if(this.form.controls.amount.value<=this.balance){let o={customerCode:this.project.customerCode,projectCode:this.project.projectCode,siteCode:(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.project.siteCode:null,branchCode:this.project.branchCode,instDate:this.form.controls.instDate.value,particular:this.form.controls.particular.value,amount:this.form.controls.amount.value};this.paymentTerms.push(o),this.balance=this.remainingBalance(),this.form.controls.particular.setValue(""),this.form.controls.amount.setValue("")}else this.notifyService.showWarning(`${this.translate.instant("Payment_Exceeding_Balance")}`,`${this.translate.instant("Warning")}`);this.form.controls.amount.setValue("")}else this.notifyService.showWarning(`${this.translate.instant("Enter_Payment_Terms")}`,`${this.translate.instant("Warning")}`);this.balance=this.remainingBalance()}removPaymentTerm(e){this.paymentTerms.splice(e,1),this.balance=this.remainingBalance()}remainingBalance(){let e=0,o=0;return 0==this.paymentTerms.length?this.projectBudgetEstimation.grandTotalCostForProject:(this.paymentTerms.forEach(n=>{e+=n.amount}),o=this.projectBudgetEstimation.grandTotalCostForProject-e,o)}changeAutoPayment(){return this.autoPayment=!this.autoPayment,this.autoPayment}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.sK),t.Y36(w.g),t.Y36(T.uw),t.Y36(y.t),t.Y36(b.s),t.Y36(x._),t.Y36(l.qu),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-convert-to-contract"]],features:[t.qOj],decls:96,vars:52,consts:[["novalidate","",1,"mt-4",2,"margin-top","0!important",3,"formGroup","ngSubmit"],[1,"modal-body",2,"padding","0"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",2,"position","absolute","right","0","top","-8px","font-size","40px","font-weight","normal",3,"click"],[1,"outer"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["type","text","formControlName","customerCode","readonly","",1,"form-control"],["type","text","formControlName","projectCode","readonly","",1,"form-control"],[1,"col-md-2","col-lg-2"],["type","text","formControlName","startDate","readonly","",1,"form-control"],["type","text","formControlName","endDate","readonly","",1,"form-control"],["type","text","formControlName","noOfDays","readonly","",1,"form-control"],[1,"col-md-6","col-lg-6"],[1,"row"],[1,"col-md-10","col-lg-11"],["formControlName","liabilityAndInsurance",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-1"],[2,"font-size","24px","margin-left","-18px","position","relative","margin-top","18px","display","block",3,"click"],[1,"icon-plus"],[1,"col-md-12","col-lg-12","mt-2"],[1,"table","tablecolor","table-bordered",2,"font-size","12px"],[2,"font-size","14px"],[2,"width","10%"],[4,"ngIf"],["formControlName","terminationClause",1,"form-control",3,"placeholder"],["class","col-md-7 col-lg-7","style","padding-right:0",4,"ngIf"],["class","col-md-7 col-lg-7",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value","click",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"],[4,"ngFor","ngForOf"],[2,"width","5%"],[2,"width","85%"],[2,"width","10%","text-align","right",3,"click"],[1,"tableicons"],[1,"icon-trash"],[1,"col-md-7","col-lg-7",2,"padding-right","0"],["id","zero_config1",1,"table","table-bordered",2,"font-size","14px"],[2,"width","45%"],[2,"text-align","right"],[1,"col-md-7","col-lg-7"],["class","row",4,"ngIf"],[1,"col-md-4","col-lg-4"],[1,"input-group","mb-2"],["formControlName","instDate",1,"form-control","datapickerinput",3,"matDatepicker","min","max","placeholder","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for","matDatepickerFilter"],["startView","month"],["dp",""],["type","number","formControlName","amount",1,"form-control",3,"placeholder"],["type","text","formControlName","particular",1,"form-control",3,"placeholder"],[1,"col-md-1","col-lg-1"],[2,"font-size","24px","margin-left","-18px","position","relative","margin-top","5px","display","block",3,"click"],["colspan","3",2,"text-align","right"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," \xd7"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",9),t.TgZ(13,"div",10),t.TgZ(14,"label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t._UZ(17,"input",11),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",10),t.TgZ(20,"label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"input",12),t.qZA(),t.qZA(),t.TgZ(24,"div",13),t.TgZ(25,"div",10),t.TgZ(26,"label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"input",14),t.qZA(),t.qZA(),t.TgZ(30,"div",13),t.TgZ(31,"div",10),t.TgZ(32,"label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"input",15),t.qZA(),t.qZA(),t.TgZ(36,"div",13),t.TgZ(37,"div",10),t.TgZ(38,"label"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t._UZ(41,"input",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div",5),t.TgZ(43,"div",17),t.TgZ(44,"div",18),t.TgZ(45,"div",19),t._UZ(46,"textarea",20),t.ALo(47,"translate"),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",21),t.TgZ(50,"a",22),t.NdJ("click",function(){return o.addUpdateLiabilityAndInsuranceTerm()}),t._UZ(51,"i",23),t.qZA(),t.qZA(),t.TgZ(52,"div",24),t.TgZ(53,"table",25),t.TgZ(54,"tr",26),t.TgZ(55,"th",27),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"th"),t._uU(59),t.ALo(60,"translate"),t.qZA(),t._UZ(61,"th"),t.qZA(),t.YNc(62,j2,2,1,"ng-container",28),t.qZA(),t._UZ(63,"div"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(64,"div",17),t.TgZ(65,"div",18),t.TgZ(66,"div",19),t._UZ(67,"textarea",29),t.ALo(68,"translate"),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"div",21),t.TgZ(71,"a",22),t.NdJ("click",function(){return o.addUpdateTerminationClauseTerm()}),t._UZ(72,"i",23),t.qZA(),t.qZA(),t.TgZ(73,"div",24),t.TgZ(74,"table",25),t.TgZ(75,"tr",26),t.TgZ(76,"th",27),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.TgZ(79,"th"),t._uU(80),t.ALo(81,"translate"),t.qZA(),t._UZ(82,"th"),t.qZA(),t.YNc(83,R2,2,1,"ng-container",28),t.qZA(),t._UZ(84,"div"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(85,"div",5),t.YNc(86,F2,18,13,"div",30),t.YNc(87,Q2,21,15,"div",31),t.qZA(),t.TgZ(88,"div",5),t.TgZ(89,"div",32),t.YNc(90,B2,2,3,"input",33),t._uU(91," \xa0 "),t.YNc(92,H2,2,3,"input",33),t._uU(93," \xa0 "),t.TgZ(94,"input",34),t.NdJ("click",function(){return o.generateContractForProject()}),t.ALo(95,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,22,o.modalTitle)),t.xp6(12),t.Oqu(t.lcZ(16,24,"Customer_Code")),t.xp6(6),t.Oqu(t.lcZ(22,26,"Project_Code")),t.xp6(6),t.Oqu(t.lcZ(28,28,"Project_Start_Date")),t.xp6(6),t.Oqu(t.lcZ(34,30,"Project_End_Date")),t.xp6(6),t.Oqu(t.lcZ(40,32,"No_Of_Days")),t.xp6(7),t.hYB("placeholder","",t.lcZ(47,34,"Enter")," ",t.lcZ(48,36,"Contract_Term"),""),t.xp6(10),t.hij(" ",t.lcZ(57,38,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(60,40,"Liability_and_Insurances")," "),t.xp6(3),t.Q6J("ngIf",0!=o.liabilityInsuranceTerms.length),t.xp6(5),t.hYB("placeholder","",t.lcZ(68,42,"Enter")," ",t.lcZ(69,44,"Contract_Term"),""),t.xp6(10),t.hij(" ",t.lcZ(78,46,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(81,48,"Termination_Clause")," "),t.xp6(3),t.Q6J("ngIf",0!=o.terminationClauseTerms.length),t.xp6(3),t.Q6J("ngIf",o.autoPayment),t.xp6(1),t.Q6J("ngIf",!o.autoPayment),t.xp6(3),t.Q6J("ngIf",!o.autoPayment),t.xp6(2),t.Q6J("ngIf",o.autoPayment),t.xp6(2),t.s9C("value",t.lcZ(95,50,"Generate_Contract")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,f.O5,f.sg,M.hl,M.nW,gt.R9,M.Mq,l.wV],pipes:[Z.X$],encapsulation:2}),i})();function $2(i,a){if(1&i&&(t.TgZ(0,"option",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.AsE("",e.siteCode,"-",o.isArab?e.siteArbName:e.siteName,"")}}function G2(i,a){if(1&i&&(t.TgZ(0,"option",34),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function W2(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"i",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw().removeElement(n)}),t.qZA(),t.qZA()}}function z2(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t.YNc(8,W2,2,0,"span",35),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.shiftCode),t.xp6(2),t.Oqu(e.shiftName_EN),t.xp6(2),t.Oqu(e.shiftName_AR),t.xp6(2),t.Q6J("ngIf",0==e.shiftId||e.canDelete)}}const je=function(){return{standalone:!0}};let ue=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfShifts=[],this.sequence=1,this.editsequence=0,this.remarks="",this.shiftCode="",this.shiftName_EN="",this.shiftName_AR="",this.shiftId=0,this.siteCodeList=[],this.listOfShiftCodes=[],this.isArab=!1,this.isRoasterGenerated=!1}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getSelectShiftMasterListForProjectSite/${this.project.projectCode}/${this.project.siteCode}`).subscribe(e=>{this.listOfShiftCodes=e})}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.loadSiteCodes(this.project.customerCode),this.readonly="readonly"}setForm(){this.form=this.fb.group({shiftCode:[""],projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null!=this.project.siteCode?this.project.siteCode:"",l.kI.required],shiftId:[0]}),null!=this.project.siteCode&&(this.form.controls.siteCode.disable({onlySelf:!0}),this.onSelectSiteCode({target:{value:this.project.siteCode}})),this.setToDefault()}submit(){this.form.valid&&this.listOfShifts.length>0?(this.id>0&&(this.form.value.id=this.id),this.form.value.shiftsList=this.listOfShifts,this.form.value.projectCode=this.project.projectCode,this.form.value.siteCode=this.project.siteCode,this.apiService.post("ShiftMaster/CreateUpdateShiftsPlanForProject",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}addShift(){if(""!=this.shiftCode){let e={sequence:this.getSequence(),shiftCode:this.shiftCode,shiftName_AR:this.shiftName_AR,shiftName_EN:this.shiftName_EN,shiftId:0};this.listOfShifts.find(o=>o.shiftCode==this.shiftCode)||this.listOfShifts.push(e)}this.setToDefault()}removeElement(e){this.listOfShifts.splice(e,1),this.downSequence()}setToDefault(){this.shiftCode="",this.shiftName_AR="",this.shiftName_EN="",this.shiftId=0}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.shiftName_AR.setValue(""),this.form.controls.shiftName_EN.setValue(""),this.form.controls.shiftCode.setValue(""),this.form.controls.shiftId.setValue(0)}getShiftDetails(e){this.apiService.getall("ShiftMaster/getShiftMasterByShiftMasterCode/"+e.target.value).subscribe(n=>{this.shiftName_AR=n.shiftName_AR,this.shiftName_EN=n.shiftName_EN})}onSelectSiteCode(e){let o=e.target.value;this.project.siteCode=o,this.form.value.siteCode=o,""!=o?(this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.project.projectCode}/${o}`).subscribe(n=>{this.listOfShifts=n,console.log(n),this.sequence=this.listOfShifts.length+1,this.apiService.getall(`MonthlyRoaster/isExistMonthlyRoasterForProjectSite/${this.project.projectCode}/${o}`).subscribe(s=>{this.isRoasterGenerated=s})}),this.loadShiftCodes()):(this.listOfShifts=[],this.listOfShiftCodes=[],this.isRoasterGenerated=!1)}loadSiteCodes(e){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{this.siteCodeList=o})}closeModel(){this.dialogRef.close()}GetFirstChar(e){return e.substring(0,1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-shiftplan-for-project"]],features:[t.qOj],decls:104,vars:84,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","readonly",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"text-center"],[1,"fas","fa-plus-circle",3,"click"],["colspan","10"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],[4,"ngIf"],[1,"fas","fa-minus-circle",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," \xd7"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"auto-loader",15),t._UZ(22,"input",16),t.ALo(23,"translate"),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(26,"div",11),t.TgZ(27,"label",12),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"div",13),t.TgZ(31,"div",14),t._UZ(32,"auto-loader",15),t._UZ(33,"input",18),t.ALo(34,"translate"),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"validation-message",17),t.qZA(),t.qZA(),t.TgZ(37,"div",11),t.TgZ(38,"div",13),t.TgZ(39,"label",12),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"select",19),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(43,"option",20),t._uU(44),t.ALo(45,"translate"),t.ALo(46,"translate"),t.qZA(),t.YNc(47,$2,2,3,"option",21),t.qZA(),t._UZ(48,"validation-message",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",22),t.TgZ(50,"table",23),t.TgZ(51,"thead"),t.TgZ(52,"tr"),t.TgZ(53,"th"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"th"),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.TgZ(59,"th"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t._UZ(62,"th"),t.qZA(),t.qZA(),t.TgZ(63,"tbody"),t.TgZ(64,"tr"),t.TgZ(65,"td"),t.TgZ(66,"select",24),t.NdJ("ngModelChange",function(s){return o.shiftCode=s})("change",function(s){return o.getShiftDetails(s)}),t.TgZ(67,"option",20),t._uU(68),t.ALo(69,"translate"),t.ALo(70,"translate"),t.qZA(),t.YNc(71,G2,2,2,"option",21),t.qZA(),t.qZA(),t.TgZ(72,"td"),t.TgZ(73,"input",25),t.NdJ("ngModelChange",function(s){return o.shiftName_EN=s}),t.ALo(74,"translate"),t.qZA(),t.qZA(),t.TgZ(75,"td"),t.TgZ(76,"input",25),t.NdJ("ngModelChange",function(s){return o.shiftName_AR=s}),t.ALo(77,"translate"),t.qZA(),t.qZA(),t.TgZ(78,"td",26),t.TgZ(79,"i",27),t.NdJ("click",function(){return o.addShift()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(80,"tr"),t._UZ(81,"td",28),t.qZA(),t.TgZ(82,"thead"),t.TgZ(83,"tr"),t.TgZ(84,"th"),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.TgZ(87,"th"),t._uU(88),t.ALo(89,"translate"),t.qZA(),t.TgZ(90,"th"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t._UZ(93,"th"),t.qZA(),t.qZA(),t.TgZ(94,"tbody"),t.YNc(95,z2,9,4,"tr",29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(96,"div",30),t.TgZ(97,"div",8),t.TgZ(98,"div",31),t.TgZ(99,"input",32),t.NdJ("click",function(){return o.closeModel()}),t.ALo(100,"translate"),t.qZA(),t._uU(101," \xa0 "),t._UZ(102,"input",33),t.ALo(103,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,37,o.modalTitle)),t.xp6(14),t.Oqu(t.lcZ(18,39,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(23,41,"Please_Enter")," ",t.lcZ(24,43,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(29,45,"Project_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(34,47,"Please_Enter")," ",t.lcZ(35,49,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(4),t.Oqu(t.lcZ(41,51,"Site")),t.xp6(4),t.AsE("",t.lcZ(45,53,"Select")," ",t.lcZ(46,55,"Site")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(6),t.Oqu(t.lcZ(55,57,"Shift_Code")),t.xp6(3),t.Oqu(t.lcZ(58,59,"Shift_Name_English")),t.xp6(3),t.Oqu(t.lcZ(61,61,"Shift_Name_Arab")),t.xp6(6),t.Q6J("ngModel",o.shiftCode)("ngModelOptions",t.DdM(81,je)),t.xp6(2),t.AsE("",t.lcZ(69,63,"Select")," ",t.lcZ(70,65,"Shift_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.listOfShiftCodes),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(74,67,"Shift_Name_English"),""),t.Q6J("ngModel",o.shiftName_EN)("ngModelOptions",t.DdM(82,je)),t.xp6(3),t.MGl("placeholder","  ",t.lcZ(77,69,"Shift_Name_Arab"),""),t.Q6J("ngModel",o.shiftName_AR)("ngModelOptions",t.DdM(83,je)),t.xp6(9),t.Oqu(t.lcZ(86,71,"Shift_Code")),t.xp6(3),t.Oqu(t.lcZ(89,73,"Shift_Name_English")),t.xp6(3),t.Oqu(t.lcZ(92,75,"Shift_Name_Arab")),t.xp6(4),t.Q6J("ngForOf",o.listOfShifts),t.xp6(4),t.s9C("value",t.lcZ(100,77,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(103,79,"Save")))},directives:[l._Y,l.JL,l.sg,ht.z,l.Fj,l.JJ,l.u,G.s,l.EJ,l.YN,l.Kr,f.sg,l.On,f.O5],pipes:[Z.X$],encapsulation:2}),i})();function X2(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.AsE("",e.siteCode,"-",o.isArab?e.siteArbName:e.siteName,"")}}function K2(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.value),t.xp6(1),t.Oqu(o.isArab?e.textTwo:e.text)}}function t6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"span",34),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().removeElement(s)}),t._UZ(7,"i",35),t.qZA(),t._uU(8,"\xa0 "),t.TgZ(9,"span",34),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().editElement(s)}),t._UZ(10,"i",36),t.qZA(),t._uU(11,"\xa0 "),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(2),t.Oqu(o.isArab?e.nameInArabic:e.nameInEnglish),t.xp6(2),t.Oqu(e.quantity)}}const to=function(){return{standalone:!0}};let de=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfSkillsets=[],this.sequence=1,this.editsequence=0,this.remarks="",this.skillSetCode="",this.nameInEnglish="",this.nameInArabic="",this.quantity=0,this.siteCodeList=[],this.listOfSkillsetCodes=[],this.isArab=!1}loadSkillsetCodes(){this.apiService.getall("Skillset/getSelectSkillsetList").subscribe(e=>{this.listOfSkillsetCodes=e})}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.loadSiteCodes(this.project.customerCode),this.readonly="readonly"}setForm(){this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null!=this.project.siteCode?this.project.siteCode:"",l.kI.required]}),null!=this.project.siteCode&&(this.form.controls.siteCode.disable({onlySelf:!0}),this.onSelectSiteCode({target:{value:this.project.siteCode}})),this.setToDefault()}submit(){this.form.valid&&this.listOfSkillsets.length>0?(this.id>0&&(this.form.value.id=this.id),this.form.value.siteCode=this.project.siteCode,this.form.value.skillsetList=this.listOfSkillsets,this.apiService.post("Skillset/CreateUpdateSkillsetPlanForProject",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}addSkillset(){if(""!=this.skillSetCode&&0!=this.quantity){let e={sequence:this.getSequence(),skillSetCode:this.skillSetCode,nameInEnglish:this.nameInEnglish,nameInArabic:this.nameInArabic,quantity:this.quantity},o=this.listOfSkillsets.findIndex(n=>n.skillSetCode==this.skillSetCode);o>=0&&this.listOfSkillsets.splice(o,1),this.listOfSkillsets.push(e),this.setToDefault()}}editElement(e){this.skillSetCode=this.listOfSkillsets[e].skillSetCode,this.nameInEnglish=this.listOfSkillsets[e].nameInEnglish,this.nameInArabic=this.listOfSkillsets[e].nameInArabic,this.quantity=this.listOfSkillsets[e].quantity}removeElement(e){this.listOfSkillsets.splice(e,1),this.downSequence()}setToDefault(){this.skillSetCode="",this.quantity=0,this.nameInEnglish="",this.nameInArabic=""}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.nameInEnglish.setValue(""),this.form.controls.nameInArabic.setValue(""),this.form.controls.skillSetCode.setValue(""),this.form.controls.quantity.setValue("")}getSkillsetDetails(e){const o=e.target.value;let n=this.listOfSkillsets.findIndex(s=>s.skillSetCode==o);n>=0?(this.nameInArabic=this.listOfSkillsets[n].nameInArabic,this.nameInEnglish=this.listOfSkillsets[n].nameInEnglish,this.quantity=this.listOfSkillsets[n].quantity):this.apiService.getall("Skillset/getSkillsetBySkillsetCode/"+o).subscribe(s=>{this.nameInArabic=s.nameInArabic,this.nameInEnglish=s.nameInEnglish,this.quantity=0})}onSelectSiteCode(e){let o=e.target.value;this.form.value.siteCode=o,""!=o?(this.project.siteCode=o,this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${o}`).subscribe(n=>{this.listOfSkillsets=n,this.sequence=this.listOfSkillsets.length+1}),this.loadSkillsetCodes()):(this.listOfSkillsets=[],this.listOfSkillsetCodes=[]),this.setToDefault()}loadSiteCodes(e){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{this.siteCodeList=o})}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-skillset-plan-for-project"]],features:[t.qOj],decls:93,vars:70,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","number",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"text-center"],[1,"fas","fa-plus-circle",3,"click"],["colspan","10"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],[3,"click"],[1,"fas","fa-minus-circle"],[1,"fas","fa-edit"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," \xd7"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"input",15),t.ALo(22,"translate"),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(25,"div",11),t.TgZ(26,"label",12),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div",13),t.TgZ(30,"div",14),t._UZ(31,"input",17),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(35,"div",11),t.TgZ(36,"div",13),t.TgZ(37,"label",12),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"select",18),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(41,"option",19),t._uU(42),t.ALo(43,"translate"),t.ALo(44,"translate"),t.qZA(),t.YNc(45,X2,2,3,"option",20),t.qZA(),t._UZ(46,"validation-message",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",21),t.TgZ(48,"table",22),t.TgZ(49,"thead"),t.TgZ(50,"tr"),t.TgZ(51,"th"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"th"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"th"),t.qZA(),t.qZA(),t.TgZ(58,"tbody"),t.TgZ(59,"tr"),t.TgZ(60,"td"),t.TgZ(61,"select",23),t.NdJ("ngModelChange",function(s){return o.skillSetCode=s})("change",function(s){return o.getSkillsetDetails(s)}),t.TgZ(62,"option",19),t._uU(63),t.ALo(64,"translate"),t.ALo(65,"translate"),t.qZA(),t.YNc(66,K2,2,2,"option",20),t.qZA(),t.qZA(),t.TgZ(67,"td"),t.TgZ(68,"input",24),t.NdJ("ngModelChange",function(s){return o.quantity=s}),t.ALo(69,"translate"),t.qZA(),t.qZA(),t.TgZ(70,"td",25),t.TgZ(71,"i",26),t.NdJ("click",function(){return o.addSkillset()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(72,"tr"),t._UZ(73,"td",27),t.qZA(),t.TgZ(74,"thead"),t.TgZ(75,"tr"),t.TgZ(76,"th"),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.TgZ(79,"th"),t._uU(80),t.ALo(81,"translate"),t.qZA(),t._UZ(82,"th"),t.qZA(),t.qZA(),t.TgZ(83,"tbody"),t.YNc(84,t6,12,2,"tr",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(85,"div",29),t.TgZ(86,"div",8),t.TgZ(87,"div",30),t.TgZ(88,"input",31),t.NdJ("click",function(){return o.closeModel()}),t.ALo(89,"translate"),t.qZA(),t._uU(90," \xa0 "),t._UZ(91,"input",32),t.ALo(92,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,30,o.modalTitle)),t.xp6(14),t.Oqu(t.lcZ(18,32,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(22,34,"Please_Enter")," ",t.lcZ(23,36,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(28,38,"Project_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(32,40,"Please_Enter")," ",t.lcZ(33,42,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(39,44,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(43,46,"Select")," ",t.lcZ(44,48,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(6),t.Oqu(t.lcZ(53,50,"SkillSet")),t.xp6(3),t.Oqu(t.lcZ(56,52,"Quantity")),t.xp6(6),t.Q6J("ngModel",o.skillSetCode)("ngModelOptions",t.DdM(68,to)),t.xp6(2),t.AsE("",t.lcZ(64,54,"Select")," ",t.lcZ(65,56,"SkillSet")," "),t.xp6(3),t.Q6J("ngForOf",o.listOfSkillsetCodes),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(69,58,"Quantity"),""),t.Q6J("ngModel",o.quantity)("ngModelOptions",t.DdM(69,to)),t.xp6(9),t.Oqu(t.lcZ(78,60,"Name")),t.xp6(3),t.Oqu(t.lcZ(81,62,"Quantity")),t.xp6(4),t.Q6J("ngForOf",o.listOfSkillsets),t.xp6(4),t.s9C("value",t.lcZ(89,64,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(92,66,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,l.EJ,l.YN,l.Kr,f.sg,l.On,l.wV],pipes:[Z.X$],encapsulation:2}),i})();function e6(i,a){if(1&i&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArab?e.siteArbName:e.siteName)}}function o6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"div",11),t.TgZ(2,"div",12),t.TgZ(3,"label",27),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"select",28),t.NdJ("change",function(n){return t.CHM(e),t.oxw().onSelectSiteCode(n)}),t.TgZ(7,"option",29),t._uU(8),t.ALo(9,"translate"),t.ALo(10,"translate"),t.qZA(),t.YNc(11,e6,2,2,"option",30),t.qZA(),t._UZ(12,"validation-message",31),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,5,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(9,7,"Select")," ",t.lcZ(10,9,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",e.siteCodeList),t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function i6(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(3);t.uIk("rowspan",o.skillsetsListForSite.length),t.xp6(1),t.hij(" ",e.startDate," ")}}function n6(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(3);t.uIk("rowspan",o.skillsetsListForSite.length),t.xp6(1),t.hij(" ",e.endDate," ")}}function a6(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(3);t.uIk("rowspan",o.skillsetsListForSite.length),t.xp6(1),t.hij(" ",e.noOfDays," ")}}function s6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,i6,2,2,"td",34),t.YNc(2,n6,2,2,"td",34),t.YNc(3,a6,2,2,"td",34),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===n.getJvalue(o)),t.xp6(1),t.Q6J("ngIf",0===n.getJvalue(o)),t.xp6(1),t.Q6J("ngIf",0===n.getJvalue(o)),t.xp6(2),t.hij(" ",e.skillSet," "),t.xp6(2),t.hij(" ",n.isArab?null==(s=n.getSkillSet(e.skillSet))?null:s.nameInArabic:null==(s=n.getSkillSet(e.skillSet))?null:s.nameInEnglish," "),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",e.totShifts," ")}}function r6(i,a){if(1&i&&(t.ynx(0),t.YNc(1,s6,12,7,"tr",35),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.tableData)}}function l6(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(4);t.uIk("rowspan",e.skillsetsListForSite.length),t.xp6(1),t.Oqu(t.lcZ(2,2,"Total"))}}function c6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,l6,3,4,"td",36),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.hij(" ",n.noOfDays,""),t.xp6(2),t.hij(" ",e.skillSet,""),t.xp6(2),t.hij(" ",n.isArab?null==(s=n.getSkillSet(e.skillSet))?null:s.nameInArabic:null==(s=n.getSkillSet(e.skillSet))?null:s.nameInEnglish,""),t.xp6(2),t.hij(" ",e.quantity,""),t.xp6(2),t.hij(" ",e.quantity*n.noOfDays,"")}}function p6(i,a){if(1&i&&(t.TgZ(0,"tfoot"),t.YNc(1,c6,12,6,"tr",35),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.footerData)}}function u6(i,a){if(1&i&&(t.TgZ(0,"table",33),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"th"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(25,r6,2,1,"ng-container",34),t.YNc(26,p6,2,1,"tfoot",34),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,10,"Month_Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(8,12,"Month_End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(11,14,"No_Of_Days")," "),t.xp6(3),t.hij(" ",t.lcZ(14,16,"SkillSet_Code")," "),t.xp6(3),t.AsE(" ",t.lcZ(17,18,"SkillSet")," ",t.lcZ(18,20,"Name")," "),t.xp6(4),t.hij(" ",t.lcZ(21,22,"Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(24,24,"Total_Shifts")," "),t.xp6(2),t.Q6J("ngIf",e.tableData.length>0),t.xp6(1),t.Q6J("ngIf",e.footerData.length>0&&e.skillsetsListForSite.length>0)}}function d6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1,""),t.xp6(2),t.hij(" ",null==e?null:e.skillSet,""),t.xp6(2),t.hij(" ",n.isArab?null==e?null:e.skillSetNameArb:null==e?null:e.skillSetNameEng,""),t.xp6(2),t.Oqu(null==e?null:e.empNumber),t.xp6(2),t.hij(" ",n.isArab?null==e?null:e.empNameAr:null==e?null:e.empName,"")}}function m6(i,a){if(1&i&&(t.TgZ(0,"div",20),t.TgZ(1,"table",33),t.TgZ(2,"tr"),t.TgZ(3,"th",38),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",39),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",40),t._uU(10),t.ALo(11,"translate"),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",39),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.YNc(19,d6,11,5,"tr",35),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,7,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(8,9,"SkillSet")," "),t.xp6(3),t.AsE(" ",t.lcZ(11,11,"SkillSet")," ",t.lcZ(12,13,"Name")," "),t.xp6(4),t.hij(" ",t.lcZ(15,15,"Employee_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(18,17,"Name")," "),t.xp6(2),t.Q6J("ngForOf",e.empToResMapData)}}function _6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",41),t.NdJ("click",function(){return t.CHM(e),t.oxw().generateRoasterForSite()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Generate_Roaster"))}let me=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u){super(c),this.translate=e,this.notifyService=o,this.dialog=n,this.utilService=s,this.apiService=r,this.authService=c,this.fb=p,this.dialogRef=u,this.noOfDays=0,this.shiftsForSite=[],this.siteCodeList=[],this.tableData=[],this.footerData=[],this.monthsDataList=[],this.skillsetsListForSite=[],this.monthlyRoasterForSite=[],this.monthlyRoasterForSiteMonth=[],this.isRoasterGenerated=!0,this.isMonthlyRoasterGenerated=[],this.empToResMapData=[],this.employeeList=[],this.isLoading=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.isLoading=!0,this.setForm();var e=0;this.interval=setInterval(()=>{1==++e?this.calculateDates():2==e?this.getSitesList():3==e?this.loadEmployees():4==e?this.loadTableData():5==e?this.loadFooterData():6==e&&this.getSkillsetsForSite(this.project.siteCode)},e>6?0:1e3)}setForm(){var e;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null!=(null===(e=this.project)||void 0===e?void 0:e.siteCode)?this.project.siteCode:"",l.kI.required],startDate:[this.project.startDate.toString().substring(0,10)],endDate:[this.project.endDate.toString().substring(0,10)],noOfDays:[this.noOfDays],dto:[this.monthlyRoasterForSite.slice()]}),null!=this.project.siteCode&&(this.form.controls.siteCode.disable({onlySelf:!0}),this.getSkillsetsForSite(this.project.siteCode))}closeModel(){this.dialogRef.close()}submit(){}calculateDates(){this.monthsDataList=[],this.isMonthlyRoasterGenerated=[];let e=new Date(this.project.startDate),o=new Date(this.project.endDate);this.noOfDays=(o.getTime()-e.getTime())/864e5+1;for(let n=e.getFullYear();n<=o.getFullYear();n++){let s=n==e.getFullYear()?e.getMonth():1,r=n==o.getFullYear()?o.getMonth():12;for(let c=s;c<=r;c++){let p=c==s&&n==e.getFullYear()?e.getDate():1,u=c==r&&n==o.getFullYear()?o.getDate():new Date(n,c+1,0).getDate(),d=(new Date(n,c,u).getTime()-new Date(n,c,p).getTime())/864e5+1,m={sd:p,ed:u,mStartDate:new Date(n,c,p).toDateString(),mEndDate:new Date(n,c,u).toDateString(),mNoOfDays:d,month:c+1,year:n};this.monthsDataList.push(m),this.isMonthlyRoasterGenerated.push(!0)}}}getSitesList(){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(e=>{this.siteCodeList=e})}getSkillsetsForSite(e){""!=e?this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${e}`).subscribe(o=>{this.skillsetsListForSite=o,console.log(o),this.getShiftsForSite(e)}):(this.shiftsForSite=[],this.skillsetsListForSite=[],this.loadTableData())}getShiftsForSite(e){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.project.projectCode}/${e}`).subscribe(o=>{this.shiftsForSite=o,this.loadEmpToResourceMap(e)})}onSelectSiteCode(e){this.getSkillsetsForSite(e.target.value)}loadTableData(){var e;this.tableData=[],this.footerData=[];for(let o=0;o<this.monthsDataList.length;o++){let n=this.monthsDataList[o];for(let s=0;s<this.skillsetsListForSite.length;s++){let r={sd:this.monthsDataList[o].sd,ed:this.monthsDataList[o].ed,startDate:this.monthsDataList[o].mStartDate,endDate:this.monthsDataList[o].mEndDate,noOfDays:this.monthsDataList[o].mNoOfDays,noOfShifts:null===(e=this.shiftsForSite)||void 0===e?void 0:e.length,skillSet:this.skillsetsListForSite[s].skillSetCode,quantity:this.skillsetsListForSite[s].quantity,totShifts:n.mNoOfDays*this.skillsetsListForSite[s].quantity};this.tableData.push(r)}}this.loadFooterData(),this.checkRoasterForSite()}loadFooterData(){for(let e=0;e<this.skillsetsListForSite.length;e++)this.footerData.push({skillSet:this.skillsetsListForSite[e].skillSetCode,quantity:this.skillsetsListForSite[e].quantity})}checkRoasterForSite(){this.apiService.getall(`MonthlyRoaster/isExistMonthlyRoasterForProjectSite/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.isRoasterGenerated=e})}checkMonthlyRoasterForSite(e){this.apiService.getall(`MonthlyRoaster/isExistMonthlyRoasterForProjectSiteMonth/${this.project.projectCode}/${this.form.controls.siteCode.value}/${this.monthsDataList[e].month}/${this.monthsDataList[e].year}`).subscribe(s=>{this.isMonthlyRoasterGenerated[e]=s})}generateRoasterForSite(){if(this.isLoading)this.notifyService.showInfo(this.translate.instant("Please_Wait"));else{this.isLoading=!0,this.monthlyRoasterForSite=[];for(let n=0;n<this.tableData.length;n++){let s=[],r=new Date(new Date(this.tableData[n].startDate).toISOString().slice(0,10)),c=new Date(new Date(this.tableData[n].endDate).toISOString().slice(0,10)),p=new Date(r.getFullYear(),r.getMonth(),r.getDate()+2).toISOString().slice(8,10),u=new Date(r.getFullYear(),c.getMonth(),c.getDate()+2).toISOString().slice(8,10);for(var e=1;e<=31;e++)e<parseInt(p)||e>parseInt(u)?s.push("x"):s.push("");for(let d=1;d<=this.tableData[n].quantity;d++){let m=new Date(this.tableData[n].startDate);m.setMinutes(m.getMinutes()-m.getTimezoneOffset());let h=new Date(this.tableData[n].endDate);h.setMinutes(h.getMinutes()-h.getTimezoneOffset());let C={id:0,customerCode:this.project.customerCode,siteCode:this.form.controls.siteCode.value,projectCode:this.project.projectCode,month:new Date(this.tableData[n].startDate).getMonth()+1,year:new Date(this.tableData[n].endDate).getFullYear(),skillsetName:this.skillsetsListForSite.find(A=>A.skillSetCode==this.tableData[n].skillSet).nameInEnglish,monthStartDate:m,monthEndDate:h,shiftCodesForMonth:s.slice(),employeeID:0,employeeNumber:"",mapId:0,skillsetCode:""};this.monthlyRoasterForSite.push(C)}}let o=0;for(let n=0;n<this.monthsDataList.length;n++)for(let s=0;s<this.empToResMapData.length;s++)this.monthlyRoasterForSite[o].employeeID=this.empToResMapData[s].employeeID,this.monthlyRoasterForSite[o].employeeNumber=this.empToResMapData[s].empNumber,this.monthlyRoasterForSite[o].mapId=this.empToResMapData[s].mapId,this.monthlyRoasterForSite[o].skillsetCode=this.empToResMapData[s].skillSet,o++;this.apiService.post("MonthlyRoaster/generateMonthlyRoastersForSite",this.monthlyRoasterForSite.slice()).subscribe(n=>{this.utilService.OkMessage(),this.checkRoasterForSite(),this.dialogRef.close(!0),this.isLoading=!1},n=>{console.log(n),console.error(n),this.utilService.ShowApiErrorMessage(n),this.isLoading=!1})}}getSkillSet(e){return this.skillsetsListForSite.find(o=>o.skillSetCode==e)}generateMonthlyRoasterForSite(e){if(this.isLoading)this.notifyService.showInfo(this.translate.instant("Please_Wait"));else{this.isLoading=!0,this.monthlyRoasterForSite=[];for(let s=e*this.skillsetsListForSite.length;s<(e+1)*this.skillsetsListForSite.length;s++){let r=[],c=new Date(new Date(this.tableData[s].startDate).toISOString().slice(0,10)),p=new Date(new Date(this.tableData[s].endDate).toISOString().slice(0,10)),u=new Date(c.getFullYear(),c.getMonth(),c.getDate()+2).toISOString().slice(8,10),d=new Date(c.getFullYear(),p.getMonth(),p.getDate()+2).toISOString().slice(8,10);for(var o=1;o<=31;o++)o<parseInt(u)||o>parseInt(d)?r.push("x"):r.push("");for(let m=1;m<=this.tableData[s].quantity;m++){let h={id:0,customerCode:this.project.customerCode,siteCode:this.form.controls.siteCode.value,projectCode:this.project.projectCode,month:new Date(this.tableData[s].startDate).getMonth()+1,year:new Date(this.tableData[s].endDate).getFullYear(),skillsetName:this.skillsetsListForSite.find(C=>C.skillSetCode==this.tableData[s].skillSet).nameInEnglish,monthStartDate:new Date(c.getFullYear(),c.getMonth(),c.getDate()+2),monthEndDate:new Date(c.getFullYear(),p.getMonth(),p.getDate()+2),shiftCodesForMonth:r.slice(),employeeID:0,employeeNumber:"",mapId:0,skillsetCode:""};this.monthlyRoasterForSite.push(h)}}let n=0;for(let s=0;s<this.empToResMapData.length;s++)this.monthlyRoasterForSite[n].employeeID=this.empToResMapData[s].employeeID,this.monthlyRoasterForSite[n].employeeNumber=this.empToResMapData[s].empNumber,this.monthlyRoasterForSite[n].mapId=this.empToResMapData[s].mapId,this.monthlyRoasterForSite[n].skillsetCode=this.empToResMapData[s].skillSet,n++;this.isLoading=!0,this.apiService.post("MonthlyRoaster/generateMonthlyRoastersForSite",this.monthlyRoasterForSite.slice()).subscribe(s=>{this.utilService.OkMessage(),this.checkRoasterForSite(),this.dialogRef.close(!0),this.isLoading=!1},s=>{console.log(s),console.error(s),this.utilService.ShowApiErrorMessage(s),this.isLoading=!1})}}getJvalue(e){return e%this.skillsetsListForSite.length}loadEmpToResourceMap(e){this.isLoading=!0,this.apiService.getall(`EmployeesToResorceMap/getEmployeesToResourcesMapForProjectSite/${this.project.projectCode}/${e}`).subscribe(o=>{this.empToResMapData=o,this.isLoading=!1;for(var n=0;n<this.empToResMapData.length;n++){let s=this.empToResMapData[n];s.empNumber=this.employeeList.find(r=>r.value==s.employeeNumber).value,s.empName=this.employeeList.find(r=>r.value==s.employeeNumber).text,s.empNameAr=this.employeeList.find(r=>r.value==s.employeeNumber).textAr,s.skillSetNameEng=this.skillsetsListForSite.find(r=>r.skillSetCode==s.skillSet).nameInEnglish,s.skillSetNameArb=this.skillsetsListForSite.find(r=>r.skillSetCode==s.skillSet).nameInArabic}0==this.empToResMapData.length?this.notifyService.showError(this.translate.instant("Employees_Not_Mapped")):this.loadTableData()})}loadEmployees(){this.isLoading=!0,this.apiService.getall("Employee/getSelectEmployeeList").subscribe(e=>{this.isLoading=!1,this.employeeList=e},e=>{this.utilService.ShowApiErrorMessage(e),this.isLoading=!1})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.sK),t.Y36(w.g),t.Y36(T.uw),t.Y36(y.t),t.Y36(b.s),t.Y36(x._),t.Y36(l.qu),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-calendar-days"]],features:[t.qOj],decls:56,vars:25,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["type","text","formControlName","customerCode","readonly","",1,"form-control"],["type","text","formControlName","projectCode","readonly","",1,"form-control"],[1,"col-md-2","col-lg-2"],["type","text","formControlName","startDate","readonly","",1,"form-control"],["type","text","formControlName","endDate","readonly","",1,"form-control"],["type","text","formControlName","noOfDays","readonly","",1,"form-control",3,"value"],["class","row  mt-2",4,"ngIf"],[1,"table-responsive"],["id","zero_config1","class","table  table-bordered no-wrap",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value","click",4,"ngIf"],[3,"isLoading"],[1,"mr-sm-2"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"control"],[3,"value"],["id","zero_config1",1,"table","table-bordered","no-wrap"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","2","class","text-right",4,"ngIf"],["colspan","2",1,"text-right"],[2,"width","5%"],[2,"width","10%"],[2,"width","35%"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," \xd7"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"div",12),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",13),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",14),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t.TgZ(28,"div",12),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"input",16),t.qZA(),t.qZA(),t.TgZ(33,"div",15),t.TgZ(34,"div",12),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",17),t.qZA(),t.qZA(),t.TgZ(39,"div",15),t.TgZ(40,"div",12),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",18),t.qZA(),t.qZA(),t.qZA(),t.YNc(45,o6,13,11,"div",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",20),t.YNc(47,u6,27,26,"table",21),t.qZA(),t.qZA(),t.YNc(48,m6,20,19,"div",22),t.TgZ(49,"div",23),t.TgZ(50,"div",8),t.TgZ(51,"div",24),t.YNc(52,_6,2,3,"input",25),t.qZA(),t.qZA(),t.TgZ(53,"div",8),t.TgZ(54,"div",24),t._UZ(55,"spinner-loader",26),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,13,o.modalTitle)),t.xp6(15),t.Oqu(t.lcZ(19,15,"Customer_Code")),t.xp6(6),t.Oqu(t.lcZ(25,17,"Project_Code")),t.xp6(6),t.Oqu(t.lcZ(31,19,"Project_Start_Date")),t.xp6(6),t.Oqu(t.lcZ(37,21,"Project_End_Date")),t.xp6(6),t.Oqu(t.lcZ(43,23,"No_Of_Days")),t.xp6(2),t.s9C("value",o.noOfDays),t.xp6(1),t.Q6J("ngIf",(null==o.siteCodeList?null:o.siteCodeList.length)>0),t.xp6(2),t.Q6J("ngIf",o.tableData.length>0&&o.skillsetsListForSite.length>0),t.xp6(1),t.Q6J("ngIf",o.empToResMapData.length>0&&o.tableData.length>0),t.xp6(4),t.Q6J("ngIf",!o.isRoasterGenerated&&0!=o.empToResMapData.length),t.xp6(3),t.Q6J("isLoading",o.isLoading))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,f.O5,_t.r,l.EJ,l.YN,l.Kr,f.sg,G.s],pipes:[Z.X$],encapsulation:2}),i})();function g6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",15),t._uU(2),t.qZA(),t.TgZ(3,"td",15),t._uU(4),t.qZA(),t.qZA()),2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.Oqu(n.contractTerm)}}function h6(i,a){if(1&i&&(t.ynx(0),t.YNc(1,g6,5,2,"tr",21),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isLiabilityAndInsurance)}}function f6(i,a){if(1&i&&(t.ynx(0),t.YNc(1,h6,2,1,"ng-container",22),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.liabilityInsuranceTerms)}}function Z6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",15),t._uU(2),t.qZA(),t.TgZ(3,"td",15),t._uU(4),t.qZA(),t.qZA()),2&i){const e=t.oxw(),o=e.index,n=e.$implicit;t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.Oqu(n.contractTerm)}}function C6(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Z6,5,2,"tr",21),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isTerminationClause)}}function A6(i,a){if(1&i&&(t.ynx(0),t.YNc(1,C6,2,1,"ng-container",22),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.terminationClauseTerms)}}function T6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",15),t._uU(2),t.qZA(),t.TgZ(3,"td",15),t._uU(4),t.qZA(),t.TgZ(5,"td",23),t._uU(6),t.qZA(),t.TgZ(7,"td",23),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw();t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",n.dateFormat(e.instDate)," "),t.xp6(2),t.hij(" ",e.particular," "),t.xp6(2),t.hij(" ",e.amount," ")}}let v6=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u){super(c),this.translate=e,this.notifyService=o,this.dialog=n,this.utilService=s,this.apiService=r,this.authService=c,this.fb=p,this.dialogRef=u,this.contractTermsList=[],this.paymentTermsList=[],this.liabilityInsuranceTerms=[],this.terminationClauseTerms=[],this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.getCustomerData(),this.loadProjectData()}setForm(){this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],branchCode:[this.project.branchCode],startDate:[this.project.startDate.toString().substring(0,10)],endDate:[this.project.endDate.toString().substring(0,10)]}),this.loadContractData()}getCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(e=>{null!=e?(this.customerData=e,this.getCity(e.custCityCode1),console.log(e)):(this.notifyService.showError(this.translate.instant("Error")),console.log("No Customer Found"))})}getCity(e){this.apiService.getall(`City/getStateCountrybyCityCode/${e}`).subscribe(o=>{this.city=o})}loadProjectData(){this.apiService.getall(`Project/getProjectByProjectCode/${this.project.projectCode}`).subscribe(e=>{null!=e&&(this.projectData=e)})}loadContractData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`ProjectContracts/getContractByProjectAndSiteCode/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{this.contractDto=o,this.contractTermsList=o.contractTerms.slice(),this.paymentTermsList=o.paymentTerms.slice(),this.liabilityInsuranceTerms=this.contractTermsList.filter(n=>n.isLiabilityAndInsurance),this.terminationClauseTerms=this.contractTermsList.filter(n=>n.isTerminationClause)}):this.apiService.getall(`ProjectContracts/getContractByProjectCode/${this.project.projectCode}`).subscribe(o=>{this.contractDto=o,this.contractTermsList=o.contractTerms.slice(),this.paymentTermsList=o.paymentTerms.slice(),this.liabilityInsuranceTerms=this.contractTermsList.filter(n=>n.isLiabilityAndInsurance),this.terminationClauseTerms=this.contractTermsList.filter(n=>n.isTerminationClause)})}closeModel(){this.dialogRef.close()}submit(){}noOfdays(e){return(Date.parse(e.monthEndDate)-Date.parse(e.monthStartDate))/864e5+1}dateFormat(e){return e.slice(0,10)}printInvoice(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.sK),t.Y36(w.g),t.Y36(T.uw),t.Y36(y.t),t.Y36(b.s),t.Y36(x._),t.Y36(l.qu),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-project-contract"]],features:[t.qOj],decls:122,vars:66,consts:[[2,"position","fixed"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],[2,"padding-bottom","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],[2,"text-align","left","width","60%"],[2,"font-size","1rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"font-size","1.2rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"text-align","right","vertical-align","middle"],["id","logo","src","assets/images/LOGOPRINT.png","title","Project_Estimation","alt","Terms_And_Conditions",2,"width","120px"],["colspan","3",2,"text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%","text-align","left"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],["colspan","3",2,"border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","5%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"text-align","left","border","2px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.printInvoice()}),t._uU(2,"Print"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," Close"),t.qZA(),t.qZA(),t._UZ(6,"br"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.TgZ(10,"div",4),t.TgZ(11,"table",5),t.TgZ(12,"tr"),t.TgZ(13,"td",6),t.TgZ(14,"h4",7),t._uU(15," International Ideal Development Gen. Cont. Est. "),t.qZA(),t.TgZ(16,"h4",8),t._uU(17," .\u0627\u0644\u0645\u0624\u0633\u0633\u0629 \u0627\u0644\u0639\u0627\u0644\u0645\u064a\u0629 \u0644\u0644\u062a\u0646\u0645\u064a\u0629 \u0627\u0644\u0645\u062b\u0627\u0644\u064a\u0629 \u0644\u0644\u0645\u0642\u0627\u0648\u0644\u0627\u062a \u0627\u0644\u0639\u0627\u0645\u0629 , "),t.qZA(),t.TgZ(18,"h4",7),t._uU(19," Al Khobar "),t.qZA(),t.TgZ(20,"h4",7),t._uU(21," Saudi Arabia "),t.qZA(),t.qZA(),t.TgZ(22,"td",9),t._UZ(23,"img",10),t.qZA(),t.qZA(),t.TgZ(24,"tr"),t.TgZ(25,"td",11),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",4),t.TgZ(29,"table",12),t.TgZ(30,"tr"),t.TgZ(31,"th",13),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"td",14),t._uU(35),t.qZA(),t.TgZ(36,"th",13),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"td",15),t._uU(40),t.qZA(),t.qZA(),t.TgZ(41,"tr"),t.TgZ(42,"th",16),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"td",17),t._uU(46),t.qZA(),t.qZA(),t.TgZ(47,"tr"),t.TgZ(48,"th",18),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"th",15),t._uU(52),t.qZA(),t.TgZ(53,"th",18),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"th",15),t._uU(57),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",4),t.TgZ(59,"table",12),t.TgZ(60,"tr"),t.TgZ(61,"th",13),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"td",14),t._uU(65),t.qZA(),t.TgZ(66,"th",13),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"td",15),t._uU(70),t.qZA(),t.qZA(),t.TgZ(71,"tr"),t.TgZ(72,"th",13),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"td",19),t._uU(76),t.qZA(),t.TgZ(77,"th",13),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"td",15),t._uU(81),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(82,"div",4),t.TgZ(83,"table",12),t.TgZ(84,"thead"),t.TgZ(85,"tr"),t.TgZ(86,"th",20),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.TgZ(89,"th",18),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(92,f6,2,1,"ng-container",21),t.qZA(),t.qZA(),t.TgZ(93,"div",4),t.TgZ(94,"table",12),t.TgZ(95,"thead"),t.TgZ(96,"tr"),t.TgZ(97,"th",20),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"th",18),t._uU(101),t.ALo(102,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(103,A6,2,1,"ng-container",21),t.qZA(),t.qZA(),t.TgZ(104,"div",4),t.TgZ(105,"table",12),t.TgZ(106,"thead"),t.TgZ(107,"tr"),t.TgZ(108,"th",20),t._uU(109),t.ALo(110,"translate"),t.qZA(),t.TgZ(111,"th",13),t._uU(112),t.ALo(113,"translate"),t.qZA(),t.TgZ(114,"th",18),t._uU(115),t.ALo(116,"translate"),t.qZA(),t.TgZ(117,"th",13),t._uU(118),t.ALo(119,"translate"),t.qZA(),t.qZA(),t.qZA(),t.ynx(120),t.YNc(121,T6,9,4,"tr",22),t.BQk(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(26),t.Oqu(t.lcZ(27,30,"Terms_And_Conditions")),t.xp6(6),t.hij(" ",t.lcZ(33,32,"Customer_Code")," "),t.xp6(3),t.hij(" #",null==o.project?null:o.project.customerCode," "),t.xp6(2),t.hij(" ",t.lcZ(38,34,"Customer_Name")," "),t.xp6(3),t.hij(" ",o.isArab?null==o.customerData?null:o.customerData.custArbName:null==o.customerData?null:o.customerData.custName," "),t.xp6(3),t.hij(" ",t.lcZ(44,36,"Address")," "),t.xp6(3),t.hij(" #",null==o.customerData?null:o.customerData.custAddress1," "),t.xp6(3),t.hij(" ",t.lcZ(50,38,"City")," "),t.xp6(3),t.hij(" ",o.isArab?null==o.city?null:o.city.cityNameAr:null==o.city?null:o.city.cityName," "),t.xp6(2),t.hij(" ",t.lcZ(55,40,"Phone")," "),t.xp6(3),t.hij(" ",null==o.customerData?null:o.customerData.custPhone1," "),t.xp6(5),t.hij(" ",t.lcZ(63,42,"Project_Code")," "),t.xp6(3),t.hij(" ",null==o.projectData?null:o.projectData.projectCode," "),t.xp6(2),t.hij(" ",t.lcZ(68,44,"Est_Starting_Date")," "),t.xp6(3),t.hij(" ",null==o.projectData?null:o.projectData.startDate.substring(0,10)," "),t.xp6(3),t.hij(" ",t.lcZ(74,46,"Project_Details")," "),t.xp6(3),t.hij(" ",o.isArab?o.projectData.projectNameArb:null==o.projectData?null:o.projectData.projectNameEng," "),t.xp6(2),t.hij(" ",t.lcZ(79,48,"Est_Closing_Date")," "),t.xp6(3),t.hij(" ",null==o.projectData?null:o.projectData.endDate.substring(0,10)," "),t.xp6(6),t.hij(" ",t.lcZ(88,50,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(91,52,"Liability_and_Insurances")," "),t.xp6(2),t.Q6J("ngIf",0!=o.liabilityInsuranceTerms.length),t.xp6(6),t.hij(" ",t.lcZ(99,54,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(102,56,"Termination_Clause")," "),t.xp6(2),t.Q6J("ngIf",0!=o.terminationClauseTerms.length),t.xp6(6),t.hij(" ",t.lcZ(110,58,"S.N")," "),t.xp6(3),t.hij(" ",t.lcZ(113,60,"Payment_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(116,62,"Perticular")," "),t.xp6(3),t.hij(" ",t.lcZ(119,64,"Amount")," "),t.xp6(3),t.Q6J("ngForOf",o.paymentTermsList))},directives:[f.O5,f.sg],pipes:[Z.X$],encapsulation:2}),i})(),x6=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0}ngOnInit(){var e;this.setForm(),this.id=null===(e=this.inputData)||void 0===e?void 0:e.id,this.id>0&&this.setEditForm()}setEditForm(){this.apiService.get("proposalTemplates/getProposalTemplateById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:e.id}))})}setForm(){this.form=this.fb.group({titleOfService:["",l.kI.required],coveringLetter:["",l.kI.required],commercial:["",l.kI.required],notes:["",l.kI.required],issuingAuthority:["",l.kI.required],titleOfServiceArb:["",l.kI.required],coveringLetterArb:["",l.kI.required],commercialArb:["",l.kI.required],notesArb:["",l.kI.required],issuingAuthorityArb:["",l.kI.required]})}submit(){this.form.value.id=this.id,this.form.value.projectCode=this.inputData.projectCode,this.form.value.siteCode=this.inputData.siteCode,this.form.value.customerCode=this.inputData.customerCode,this.form.valid?this.apiService.post("proposalTemplates",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.notifyService.showError(this.translate.instant("Incomplete_Data"))}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-proposal-template"]],features:[t.qOj],decls:104,vars:100,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"outer"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","titleOfService",1,"form-control",3,"placeholder"],["type","text","formControlName","titleOfServiceArb",1,"form-control",3,"placeholder"],[1,"form-group",2,"padding-right","5px"],["name","text","cols","75","rows","5","formControlName","coveringLetter",3,"placeholder"],["name","text","cols","75","rows","5","formControlName","coveringLetterArb",3,"placeholder"],[1,"form-group",2,"padding-left","5px","width","100%"],["name","text","cols","75","rows","5","formControlName","commercial",3,"placeholder"],["name","text","cols","75","rows","5","formControlName","commercialArb",3,"placeholder"],["name","text","cols","75","rows","5","formControlName","notes",3,"placeholder"],["name","text","cols","75","rows","5","formControlName","notesArb",3,"placeholder"],["name","text","cols","75","rows","5","formControlName","issuingAuthority",3,"placeholder"],["name","text","cols","75","rows","5","formControlName","issuingAuthorityArb",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2,3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"input",8),t.ALo(15,"translate"),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.TgZ(17,"div",6),t.TgZ(18,"div",7),t.TgZ(19,"label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",9),t.ALo(23,"translate"),t.ALo(24,"translate"),t.qZA(),t.qZA(),t.TgZ(25,"div",6),t.TgZ(26,"div",10),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"br"),t._UZ(31,"textarea",11),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.TgZ(34,"div",6),t.TgZ(35,"div",10),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"br"),t._UZ(40,"textarea",12),t.ALo(41,"translate"),t.ALo(42,"translate"),t.qZA(),t.qZA(),t.TgZ(43,"div",6),t.TgZ(44,"div",13),t.TgZ(45,"label"),t._uU(46),t.ALo(47,"translate"),t.qZA(),t._UZ(48,"br"),t._UZ(49,"textarea",14),t.ALo(50,"translate"),t.ALo(51,"translate"),t.qZA(),t.qZA(),t.TgZ(52,"div",6),t.TgZ(53,"div",10),t.TgZ(54,"label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"br"),t._UZ(58,"textarea",15),t.ALo(59,"translate"),t.ALo(60,"translate"),t.qZA(),t.qZA(),t.TgZ(61,"div",6),t.TgZ(62,"div",13),t.TgZ(63,"label"),t._uU(64),t.ALo(65,"translate"),t.qZA(),t._UZ(66,"br"),t._UZ(67,"textarea",16),t.ALo(68,"translate"),t.ALo(69,"translate"),t.qZA(),t.qZA(),t.TgZ(70,"div",6),t.TgZ(71,"div",10),t.TgZ(72,"label"),t._uU(73),t.ALo(74,"translate"),t.qZA(),t._UZ(75,"br"),t._UZ(76,"textarea",17),t.ALo(77,"translate"),t.ALo(78,"translate"),t.qZA(),t.qZA(),t.TgZ(79,"div",6),t.TgZ(80,"div",13),t.TgZ(81,"label"),t._uU(82),t.ALo(83,"translate"),t.qZA(),t._UZ(84,"br"),t._UZ(85,"textarea",18),t.ALo(86,"translate"),t.ALo(87,"translate"),t.qZA(),t.qZA(),t.TgZ(88,"div",6),t.TgZ(89,"div",13),t.TgZ(90,"label"),t._uU(91),t.ALo(92,"translate"),t.qZA(),t._UZ(93,"br"),t._UZ(94,"textarea",19),t.ALo(95,"translate"),t.ALo(96,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(97,"div",20),t.TgZ(98,"div",21),t.TgZ(99,"input",22),t.NdJ("click",function(){return o.closeModel()}),t.ALo(100,"translate"),t.qZA(),t._uU(101," \xa0 "),t._UZ(102,"input",23),t.ALo(103,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,34,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(7),t.Oqu(t.lcZ(13,36,"Title Of Service")),t.xp6(2),t.hYB("placeholder","",t.lcZ(15,38,"Please_Enter")," ",t.lcZ(16,40,"Title Of Service"),""),t.xp6(6),t.Oqu(t.lcZ(21,42,"Title_Of_Service")),t.xp6(2),t.hYB("placeholder","",t.lcZ(23,44,"Please_Enter")," ",t.lcZ(24,46,"Title_Of_Service"),""),t.xp6(6),t.hij("",t.lcZ(29,48,"Covering Letter")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(32,50,"Please_Enter")," ",t.lcZ(33,52,"Covering Letter"),""),t.xp6(6),t.hij("",t.lcZ(38,54,"Covering_Letter")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(41,56,"Please_Enter")," ",t.lcZ(42,58,"Covering Letter"),""),t.xp6(6),t.hij("",t.lcZ(47,60,"Commercial Terms")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(50,62,"Please_Enter")," ",t.lcZ(51,64,"Commercial Terms"),""),t.xp6(6),t.hij("",t.lcZ(56,66,"Commercial_Terms")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(59,68,"Please_Enter")," ",t.lcZ(60,70,"Commercial_Terms"),""),t.xp6(6),t.hij("",t.lcZ(65,72,"Notes")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(68,74,"Please_Enter")," ",t.lcZ(69,76,"Notes"),""),t.xp6(6),t.hij("",t.lcZ(74,78,"Notes")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(77,80,"Please_Enter")," ",t.lcZ(78,82,"Notes"),""),t.xp6(6),t.hij("",t.lcZ(83,84,"Issuing Authority")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(86,86,"Please_Enter")," ",t.lcZ(87,88,"Issuing_Authority"),""),t.xp6(6),t.hij("",t.lcZ(92,90,"Issuing_Authority")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(95,92,"Please_Enter")," ",t.lcZ(96,94,"Issuing_Authority"),""),t.xp6(5),t.s9C("value",t.lcZ(100,96,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(103,98,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],pipes:[Z.X$],encapsulation:2}),i})();function q6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).index;return t.oxw().edit(n)}),t._UZ(1,"i",18),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function b6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).index;return t.oxw().delete(n)}),t._UZ(1,"i",19),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Delete"))}}function y6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",17),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).add_new()}),t._UZ(1,"i",20),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Add_New"))}}function S6(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",10),t._uU(8),t.qZA(),t.TgZ(9,"td",10),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.YNc(12,q6,3,1,"span",16),t.YNc(13,b6,3,1,"span",16),t.YNc(14,y6,3,1,"span",16),t.qZA(),t.BQk()),2&i){const e=t.oxw(),o=e.$implicit,n=e.index,s=t.oxw();t.xp6(2),t.hij(" ",o.qty," "),t.xp6(2),t.hij(" ",o.itemEng," "),t.xp6(2),t.hij(" ",o.itemArab," "),t.xp6(2),t.hij(" ",o.price," "),t.xp6(2),t.hij(" ",o.total," "),t.xp6(2),t.Q6J("ngIf",-1==s.editRowNumber),t.xp6(1),t.Q6J("ngIf",-1==s.editRowNumber),t.xp6(1),t.Q6J("ngIf",n==s.inputData.proposalCosting.length-1&&-1==s.editRowNumber)}}const ye=function(){return{standalone:!0}};function w6(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"td"),t.TgZ(2,"input",21),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editRowItem.qty=n})("keyup",function(){return t.CHM(e),t.oxw(2).updateTotal()}),t.qZA(),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"input",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editRowItem.itemEng=n}),t.qZA(),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"input",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editRowItem.itemArab=n}),t.qZA(),t.qZA(),t.TgZ(7,"td",10),t.TgZ(8,"input",21),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).editRowItem.price=n})("keyup",function(){return t.CHM(e),t.oxw(2).updateTotal()}),t.qZA(),t.qZA(),t.TgZ(9,"td",10),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.TgZ(12,"span",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw().save(n)}),t._UZ(13,"i",23),t._uU(14,"\xa0"),t.qZA(),t.TgZ(15,"span",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw().delete(n)}),t._UZ(16,"i",19),t._uU(17,"\xa0"),t.qZA(),t.TgZ(18,"span",17),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).cancelEdit()}),t._UZ(19,"i",24),t._uU(20,"\xa0"),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("ngModel",e.editRowItem.qty)("ngModelOptions",t.DdM(12,ye)),t.xp6(2),t.Q6J("ngModel",e.editRowItem.itemEng)("ngModelOptions",t.DdM(13,ye)),t.xp6(2),t.Q6J("ngModel",e.editRowItem.itemArab)("ngModelOptions",t.DdM(14,ye)),t.xp6(2),t.Q6J("ngModel",e.editRowItem.price)("ngModelOptions",t.DdM(15,ye)),t.xp6(2),t.hij(" ",e.editRowItem.total," "),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Save")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Delete")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Cancel"))}}function U6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,S6,15,8,"ng-container",15),t.YNc(2,w6,21,16,"ng-container",15),t.qZA()),2&i){const e=a.index,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.editRowNumber!=e),t.xp6(1),t.Q6J("ngIf",o.editRowNumber==e)}}function L6(i,a){1&i&&(t._UZ(0,"input",25),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let eo=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.total=0,this.editRowNumber=-1,this.editRowItem={id:0,qty:0,itemEng:"",itemArab:"",price:0,total:0,projectBudgetEstimationId:0}}ngOnInit(){this.form=this.fb.group({}),0==this.inputData.proposalCosting.length&&(this.notifyService.showError(this.translate.instant("No_Costings_Found")),this.closeModel()),this.getTotal()}submit(){this.apiService.post("proposalCosting",this.inputData.proposalCosting).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}closeModel(){this.dialogRef.close()}edit(e){this.editRowNumber=e,this.editRowItem=this.inputData.proposalCosting[e]}delete(e){this.inputData.proposalCosting.length>1&&(this.inputData.proposalCosting.splice(e,1),this.editRowNumber=-1,this.getTotal())}translateToolTip(e){return this.translate.instant(e)}getTotal(){this.total=0,this.inputData.proposalCosting.forEach(e=>{e.total=e.price*e.qty,this.total+=e.total})}add_new(){let e={id:0,qty:0,itemEng:"",itemArab:"",price:0,total:0,projectBudgetEstimationId:this.inputData.proposalCosting[0].projectBudgetEstimationId};this.inputData.proposalCosting.push(e),this.editRowItem=e,this.editRowNumber=this.inputData.proposalCosting.length-1}save(e){this.editRowItem.qty>0&&""!=this.editRowItem.itemEng&&""!=this.editRowItem.itemArab&&this.editRowItem.price>=0&&(this.inputData.proposalCosting[e]=this.editRowItem,this.editRowNumber=-1,this.getTotal(),this.editRowItem={id:0,qty:0,itemEng:"",itemArab:"",price:0,total:0,projectBudgetEstimationId:this.inputData.proposalCosting[0].projectBudgetEstimationId})}cancelEdit(){console.log(this.inputData.proposalCosting),this.editRowNumber=-1}updateTotal(){this.editRowItem.total=this.editRowItem.price*this.editRowItem.qty}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-proposal-costings"]],features:[t.qOj],decls:40,vars:28,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"outer"],[1,"row"],["id","zero_config",1,"table","table-bordered","no-wrap"],["colspan","2",2,"text-align","center"],[4,"ngFor","ngForOf"],["colspan","4",2,"text-align","right"],[2,"text-align","right"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"fas","fa-plus"],["type","number",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","keyup"],["type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"fas","fa-save"],[1,"fas","fa-window-close"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"form",2,3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(8,"div",4),t.TgZ(9,"div",5),t.TgZ(10,"table",6),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",7),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.qZA(),t.YNc(27,U6,3,2,"tr",8),t.TgZ(28,"tr"),t.TgZ(29,"td",9),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"td",10),t._uU(33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",11),t.TgZ(35,"div",12),t.TgZ(36,"input",13),t.NdJ("click",function(){return o.closeModel()}),t.ALo(37,"translate"),t.qZA(),t._uU(38," \xa0 "),t.YNc(39,L6,2,3,"input",14),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,12,o.modalTitle)),t.xp6(5),t.Q6J("formGroup",o.form),t.xp6(7),t.hij(" ",t.lcZ(14,14,"Qty")," "),t.xp6(3),t.hij(" ",t.lcZ(17,16,"Position")," "),t.xp6(3),t.hij(" ",t.lcZ(20,18,"Unit_Rate")," "),t.xp6(3),t.hij(" ",t.lcZ(23,20,"Total")," "),t.xp6(3),t.hij(" ",t.lcZ(26,22,"Action")," "),t.xp6(2),t.Q6J("ngForOf",o.inputData.proposalCosting),t.xp6(3),t.hij(" ",t.lcZ(31,24,"Total")," "),t.xp6(3),t.hij(" ",o.total," "),t.xp6(3),t.s9C("value",t.lcZ(37,26,"Cancel")),t.xp6(3),t.Q6J("ngIf",-1==o.editRowNumber))},directives:[l._Y,l.JL,l.sg,f.sg,f.O5,rt.gM,l.wV,l.Fj,l.JJ,l.On],pipes:[Z.X$],encapsulation:2}),i})();function D6(i,a){if(1&i&&(t.TgZ(0,"option",7),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text,"")}}function N6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"select",4),t.NdJ("change",function(n){return t.CHM(e),t.oxw().OnTemplateSelection(n)}),t.TgZ(2,"option",5),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.YNc(6,D6,2,2,"option",6),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(3),t.AsE("",t.lcZ(4,3,"Select")," ",t.lcZ(5,5,"SelectTemplate")," "),t.xp6(3),t.Q6J("ngForOf",e.templatesSelectionList)}}function E6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().printInvoice()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Print")))}function O6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().editProposalTemplate()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Edit_Proposal_Template")))}function j6(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().editProposalCosting()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Edit_Proposal_Costing")))}function k6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",32),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td",34),t._uU(9),t.ALo(10,"number"),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.qty," "),t.xp6(2),t.hij(" ",e.itemEng," "),t.xp6(2),t.hij(" ",t.xi3(7,4,e.price,"3.2-5")," "),t.xp6(3),t.hij(" ",t.xi3(10,7,e.total,"3.2-5")," ")}}function M6(i,a){if(1&i&&(t.TgZ(0,"div",9),t.TgZ(1,"div",10),t._UZ(2,"br"),t.TgZ(3,"table",11),t.TgZ(4,"tr"),t.TgZ(5,"td",12),t.TgZ(6,"h5",13),t.TgZ(7,"strong"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"td",14),t._UZ(10,"img",15),t.qZA(),t.TgZ(11,"td",12),t.TgZ(12,"h5",16),t.TgZ(13,"strong"),t._uU(14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"tr"),t.TgZ(16,"td"),t._UZ(17,"br"),t._UZ(18,"br"),t._UZ(19,"br"),t._UZ(20,"br"),t._UZ(21,"br"),t._UZ(22,"br"),t._UZ(23,"br"),t._UZ(24,"br"),t._UZ(25,"br"),t._UZ(26,"br"),t._UZ(27,"br"),t.qZA(),t.qZA(),t.TgZ(28,"tr"),t.TgZ(29,"td",17),t.TgZ(30,"h4"),t._uU(31),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"tr"),t.TgZ(33,"td",17),t.TgZ(34,"h4"),t._uU(35,"For"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"tr"),t.TgZ(37,"td",17),t.TgZ(38,"h4"),t._uU(39),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"tr"),t.TgZ(41,"td"),t._UZ(42,"br"),t._UZ(43,"br"),t._UZ(44,"br"),t._UZ(45,"br"),t._UZ(46,"br"),t._UZ(47,"br"),t.qZA(),t.qZA(),t.TgZ(48,"tr"),t.TgZ(49,"td",17),t.TgZ(50,"h5"),t._uU(51,"By"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"tr"),t.TgZ(53,"td",17),t.TgZ(54,"h5"),t._uU(55),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"tr"),t.TgZ(57,"td",18),t.TgZ(58,"h5"),t._uU(59),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"div",19),t.TgZ(61,"table",20),t.TgZ(62,"tr"),t._UZ(63,"td"),t.qZA(),t.TgZ(64,"tr"),t.TgZ(65,"td",12),t.TgZ(66,"h5",13),t.TgZ(67,"strong"),t._uU(68),t.qZA(),t.qZA(),t.qZA(),t.TgZ(69,"td"),t._UZ(70,"img",15),t.qZA(),t.TgZ(71,"td",12),t.TgZ(72,"h5",16),t.TgZ(73,"strong"),t._uU(74),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(75,"br"),t._UZ(76,"br"),t._UZ(77,"br"),t._UZ(78,"br"),t._UZ(79,"br"),t._UZ(80,"br"),t._UZ(81,"br"),t._UZ(82,"br"),t._UZ(83,"br"),t._UZ(84,"br"),t.TgZ(85,"table",20),t.TgZ(86,"tr"),t.TgZ(87,"td"),t.TgZ(88,"h5",13),t.TgZ(89,"strong"),t._uU(90),t.qZA(),t.qZA(),t.qZA(),t.TgZ(91,"td"),t.TgZ(92,"h5",16),t.TgZ(93,"strong"),t._uU(94),t.ALo(95,"date"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(96,"tr"),t.TgZ(97,"td",21),t.TgZ(98,"h5"),t._uU(99," Attention : "),t._uU(100),t.qZA(),t.qZA(),t.qZA(),t.TgZ(101,"tr"),t.TgZ(102,"td",21),t.TgZ(103,"h5"),t._uU(104," Email : "),t._uU(105),t.qZA(),t.qZA(),t.qZA(),t.TgZ(106,"tr"),t.TgZ(107,"td"),t._UZ(108,"br"),t._UZ(109,"br"),t._UZ(110,"br"),t._UZ(111,"br"),t.qZA(),t.qZA(),t.TgZ(112,"tr"),t.TgZ(113,"td",21),t.TgZ(114,"h5"),t._uU(115,"Respected Sir / Madam"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(116,"tr"),t.TgZ(117,"td"),t._UZ(118,"br"),t._UZ(119,"br"),t._UZ(120,"br"),t.qZA(),t.qZA(),t.TgZ(121,"tr"),t.TgZ(122,"td",22),t.TgZ(123,"h5"),t._uU(124),t.qZA(),t.qZA(),t.qZA(),t.TgZ(125,"tr"),t.TgZ(126,"td"),t._UZ(127,"br"),t._UZ(128,"br"),t._UZ(129,"br"),t.qZA(),t.qZA(),t.TgZ(130,"tr"),t.TgZ(131,"td",23),t.TgZ(132,"h5"),t._uU(133),t.qZA(),t.qZA(),t.qZA(),t.TgZ(134,"tr"),t.TgZ(135,"td"),t._UZ(136,"br"),t.qZA(),t.qZA(),t.TgZ(137,"tr"),t.TgZ(138,"td",24),t.TgZ(139,"h5"),t._uU(140," Your's Sincerely "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(141,"tr"),t.TgZ(142,"td"),t._UZ(143,"br"),t.qZA(),t.qZA(),t.TgZ(144,"tr"),t.TgZ(145,"td",25),t.TgZ(146,"h5"),t._uU(147),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(148,"div",26),t.TgZ(149,"table",20),t.TgZ(150,"tr"),t.TgZ(151,"td"),t._UZ(152,"br"),t._UZ(153,"br"),t._UZ(154,"br"),t._UZ(155,"br"),t._UZ(156,"br"),t._UZ(157,"br"),t.qZA(),t.qZA(),t.TgZ(158,"tr"),t.TgZ(159,"td",12),t.TgZ(160,"h5",13),t.TgZ(161,"strong"),t._uU(162),t.qZA(),t.qZA(),t.qZA(),t.TgZ(163,"td"),t._UZ(164,"img",15),t.qZA(),t.TgZ(165,"td",12),t.TgZ(166,"h5",16),t.TgZ(167,"strong"),t._uU(168),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(169,"table",20),t.TgZ(170,"tr"),t.TgZ(171,"td"),t.TgZ(172,"h5"),t._uU(173),t.qZA(),t.qZA(),t.qZA(),t.TgZ(174,"tr"),t.TgZ(175,"td"),t.TgZ(176,"p",27),t._uU(177),t.qZA(),t.qZA(),t.qZA(),t.TgZ(178,"tr"),t.TgZ(179,"td"),t._UZ(180,"br"),t.TgZ(181,"h5"),t._uU(182),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.ynx(183,28),t.TgZ(184,"table",20),t.TgZ(185,"tr"),t.TgZ(186,"th",29),t._uU(187),t.ALo(188,"translate"),t.qZA(),t.TgZ(189,"th",29),t._uU(190),t.ALo(191,"translate"),t.qZA(),t.TgZ(192,"th",29),t._uU(193),t.ALo(194,"translate"),t.qZA(),t.TgZ(195,"th",29),t._uU(196),t.ALo(197,"translate"),t.qZA(),t.qZA(),t.YNc(198,k6,11,10,"tr",30),t.qZA(),t.BQk(),t.TgZ(199,"table",20),t._UZ(200,"tr"),t.TgZ(201,"tr"),t.TgZ(202,"td"),t._UZ(203,"br"),t.qZA(),t.qZA(),t.TgZ(204,"tr"),t.TgZ(205,"td"),t.TgZ(206,"h5"),t._uU(207," NOTES: "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(208,"tr"),t.TgZ(209,"td",31),t._uU(210),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(8),t.hij(" ",e.companyData.companyName," "),t.xp6(2),t.s9C("src",e.companyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(17),t.hij("Provision Of Manned ",e.templateData.titleOfService," "),t.xp6(8),t.Oqu(e.customerData.custName),t.xp6(16),t.hij(" ",e.companyData.companyName," "),t.xp6(4),t.hij("",e.companyData.companyAddress," "),t.xp6(9),t.hij(" ",e.companyData.companyName," "),t.xp6(2),t.s9C("src",e.companyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(16),t.hij(" Reference Number: ",e.referenceNumber," "),t.xp6(4),t.hij(" Date:",t.xi3(95,29,e.date,"dd/MM/YYYY")," "),t.xp6(6),t.hij(" ",e.customerData.custContact1," "),t.xp6(5),t.hij(" ",e.customerData.custEmail1," "),t.xp6(19),t.hij(" Proposal to Provide Security Services to ",e.customerData.custName,""),t.xp6(9),t.hij(" ",e.templateData.coveringLetter," "),t.xp6(14),t.hij(" ",e.templateData.issuingAuthority," "),t.xp6(15),t.hij(" ",e.companyData.companyName," "),t.xp6(2),t.s9C("src",e.companyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(5),t.hij(" ",e.templateData.titleOfService," "),t.xp6(4),t.hij(" ",e.templateData.commercial," "),t.xp6(5),t.hij(" ",e.templateData.titleOfService,""),t.xp6(5),t.hij(" ",t.lcZ(188,32,"Qty")," "),t.xp6(3),t.hij(" ",t.lcZ(191,34,"Position")," "),t.xp6(3),t.hij(" ",t.lcZ(194,36,"Unit_Rate")," "),t.xp6(3),t.hij(" ",t.lcZ(197,38,"Total")," "),t.xp6(2),t.Q6J("ngForOf",e.proposalCosting),t.xp6(12),t.hij(" ",e.templateData.notes," ")}}function R6(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,M6,211,40,"div",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=e.templatesSelectionList.length&&null!=e.templateData)}}function P6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",32),t._uU(2),t.qZA(),t.TgZ(3,"td",33),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.qty," "),t.xp6(2),t.hij(" ",e.itemArab," "),t.xp6(2),t.hij(" ",e.price," "),t.xp6(2),t.hij(" ",e.total," ")}}function F6(i,a){if(1&i&&(t.TgZ(0,"div",9),t.TgZ(1,"div",10),t._UZ(2,"br"),t.TgZ(3,"table",20),t.TgZ(4,"tr"),t.TgZ(5,"td",12),t.TgZ(6,"h5",13),t.TgZ(7,"strong"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"td",14),t._UZ(10,"img",15),t.qZA(),t.TgZ(11,"td",12),t.TgZ(12,"h5",16),t.TgZ(13,"strong"),t._uU(14),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"tr"),t.TgZ(16,"td"),t._UZ(17,"br"),t._UZ(18,"br"),t._UZ(19,"br"),t._UZ(20,"br"),t._UZ(21,"br"),t._UZ(22,"br"),t._UZ(23,"br"),t._UZ(24,"br"),t._UZ(25,"br"),t._UZ(26,"br"),t._UZ(27,"br"),t.qZA(),t.qZA(),t.TgZ(28,"tr"),t.TgZ(29,"td",35),t.TgZ(30,"h4",14),t._uU(31),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"tr"),t.TgZ(33,"td",17),t.TgZ(34,"h4",14),t._uU(35,"\u0645\u0646 \u0623\u062c\u0644"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"tr"),t.TgZ(37,"td",17),t.TgZ(38,"h4",14),t._uU(39),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"tr"),t.TgZ(41,"td"),t._UZ(42,"br"),t._UZ(43,"br"),t._UZ(44,"br"),t._UZ(45,"br"),t._UZ(46,"br"),t._UZ(47,"br"),t.qZA(),t.qZA(),t.TgZ(48,"tr"),t.TgZ(49,"td",17),t.TgZ(50,"h5"),t._uU(51," \u0628"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"tr"),t.TgZ(53,"td",17),t.TgZ(54,"h5"),t._uU(55),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"tr"),t.TgZ(57,"td",18),t.TgZ(58,"h5"),t._uU(59),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"div",19),t.TgZ(61,"table",20),t.TgZ(62,"tr"),t._UZ(63,"td"),t.qZA(),t.TgZ(64,"tr"),t.TgZ(65,"td",12),t.TgZ(66,"h5",13),t.TgZ(67,"strong"),t._uU(68),t.qZA(),t.qZA(),t.qZA(),t.TgZ(69,"td"),t._UZ(70,"img",15),t.qZA(),t.TgZ(71,"td",12),t.TgZ(72,"h5",16),t.TgZ(73,"strong"),t._uU(74),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(75,"br"),t._UZ(76,"br"),t._UZ(77,"br"),t._UZ(78,"br"),t._UZ(79,"br"),t._UZ(80,"br"),t._UZ(81,"br"),t._UZ(82,"br"),t._UZ(83,"br"),t._UZ(84,"br"),t.TgZ(85,"table",20),t.TgZ(86,"tr"),t.TgZ(87,"td"),t.TgZ(88,"h5",16),t.TgZ(89,"strong"),t._uU(90),t.ALo(91,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(92,"td"),t.TgZ(93,"h5",13),t.TgZ(94,"strong"),t._uU(95),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(96,"tr"),t.TgZ(97,"td",36),t.TgZ(98,"h5"),t._uU(99),t.qZA(),t.qZA(),t.qZA(),t.TgZ(100,"tr"),t.TgZ(101,"td",36),t.TgZ(102,"h5"),t._uU(103),t.qZA(),t.qZA(),t.qZA(),t.TgZ(104,"tr"),t.TgZ(105,"td"),t._UZ(106,"br"),t._UZ(107,"br"),t._UZ(108,"br"),t._UZ(109,"br"),t.qZA(),t.qZA(),t.TgZ(110,"tr"),t.TgZ(111,"td",36),t.TgZ(112,"h5"),t._uU(113," \u0633\u064a\u062f\u064a \u0627\u0644\u0645\u062d\u062a\u0631\u0645 / \u0633\u064a\u062f\u062a\u064a"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(114,"tr"),t.TgZ(115,"td"),t._UZ(116,"br"),t._UZ(117,"br"),t._UZ(118,"br"),t.qZA(),t.qZA(),t.TgZ(119,"tr"),t.TgZ(120,"td",22),t.TgZ(121,"h5"),t._uU(122),t.qZA(),t.qZA(),t.qZA(),t.TgZ(123,"tr"),t.TgZ(124,"td"),t._UZ(125,"br"),t._UZ(126,"br"),t._UZ(127,"br"),t.qZA(),t.qZA(),t.TgZ(128,"tr"),t.TgZ(129,"td",23),t.TgZ(130,"h5"),t._uU(131),t.qZA(),t.qZA(),t.qZA(),t.TgZ(132,"tr"),t.TgZ(133,"td"),t._UZ(134,"br"),t.qZA(),t.qZA(),t.TgZ(135,"tr"),t.TgZ(136,"td",36),t.TgZ(137,"h5"),t._uU(138,"\u0645\u0639 \u062e\u0627\u0644\u0635 \u0627\u0644\u062a\u0642\u062f\u064a\u0631 \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(139,"tr"),t.TgZ(140,"td"),t._UZ(141,"br"),t.qZA(),t.qZA(),t.TgZ(142,"tr"),t.TgZ(143,"td",37),t.TgZ(144,"h5"),t._uU(145),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(146,"div",26),t.TgZ(147,"table",20),t.TgZ(148,"tr"),t.TgZ(149,"td"),t._UZ(150,"br"),t._UZ(151,"br"),t._UZ(152,"br"),t._UZ(153,"br"),t._UZ(154,"br"),t._UZ(155,"br"),t.qZA(),t.qZA(),t.TgZ(156,"tr"),t.TgZ(157,"td",12),t.TgZ(158,"h5",13),t.TgZ(159,"strong"),t._uU(160),t.qZA(),t.qZA(),t.qZA(),t.TgZ(161,"td"),t._UZ(162,"img",15),t.qZA(),t.TgZ(163,"td",12),t.TgZ(164,"h5",16),t.TgZ(165,"strong"),t._uU(166),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(167,"table",20),t.TgZ(168,"tr"),t.TgZ(169,"td"),t.TgZ(170,"h5"),t._uU(171),t.qZA(),t.qZA(),t.qZA(),t.TgZ(172,"tr"),t.TgZ(173,"td"),t.TgZ(174,"p",27),t._uU(175),t.qZA(),t.qZA(),t.qZA(),t.TgZ(176,"tr"),t.TgZ(177,"td"),t._UZ(178,"br"),t.TgZ(179,"h5"),t._uU(180),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.ynx(181,28),t.TgZ(182,"table",38),t.TgZ(183,"tr"),t.TgZ(184,"th",29),t._uU(185),t.ALo(186,"translate"),t.qZA(),t.TgZ(187,"th",29),t._uU(188),t.ALo(189,"translate"),t.qZA(),t.TgZ(190,"th",29),t._uU(191),t.ALo(192,"translate"),t.qZA(),t.TgZ(193,"th",29),t._uU(194),t.ALo(195,"translate"),t.qZA(),t.qZA(),t.YNc(196,P6,9,4,"tr",30),t.qZA(),t.BQk(),t.TgZ(197,"table",20),t._UZ(198,"tr"),t.TgZ(199,"tr"),t.TgZ(200,"td"),t._UZ(201,"br"),t.qZA(),t.qZA(),t.TgZ(202,"tr"),t.TgZ(203,"td",16),t.TgZ(204,"h5"),t._uU(205,": \u062a\u0644\u0627\u062d\u0638"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(206,"tr"),t.TgZ(207,"td",31),t._uU(208),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(8),t.hij(" ",e.companyData.companyName," "),t.xp6(2),t.s9C("src",e.companyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(17),t.hij(" ",e.templateData.titleOfService," \u062a\u0648\u0641\u064a\u0631 \u0627\u0644\u0645\u0623\u0647\u0648\u0644\u0629 "),t.xp6(8),t.Oqu(e.customerData.custName),t.xp6(16),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(4),t.hij("",e.companyData.companyAddressAr," "),t.xp6(9),t.hij(" ",e.companyData.companyName," "),t.xp6(2),t.s9C("src",e.companyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(16),t.hij("",t.xi3(91,29,e.date,"dd/MM/YYYY"),":\u062a\u0627\u0631\u064a\u062e "),t.xp6(5),t.hij(" ",e.referenceNumber,": \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639\u064a "),t.xp6(4),t.hij(" ",e.customerData.custContact1," : \u0627\u0644\u0634\u062e\u0635 \u0627\u0644\u0630\u064a \u064a\u0645\u0643\u0646 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0647 "),t.xp6(4),t.hij(" ",e.customerData.custEmail1,": \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a "),t.xp6(19),t.hij(" ",e.customerData.custName," \u0645\u0642\u062a\u0631\u062d \u062a\u0642\u062f\u064a\u0645 \u062e\u062f\u0645\u0627\u062a \u0623\u0645\u0646\u064a\u0629 \u0644"),t.xp6(9),t.hij(" ",e.templateData.coveringLetter," "),t.xp6(14),t.hij(" ",e.templateData.issuingAuthority," "),t.xp6(15),t.hij(" ",e.companyData.companyName," "),t.xp6(2),t.s9C("src",e.companyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.companyData.companyNameAr," "),t.xp6(5),t.hij(" ",e.templateData.titleOfServiceAr," "),t.xp6(4),t.hij(" ",e.templateData.commercialAr," "),t.xp6(5),t.hij(" ",e.templateData.titleOfServiceAr,""),t.xp6(5),t.hij(" ",t.lcZ(186,32,"Qty")," "),t.xp6(3),t.hij(" ",t.lcZ(189,34,"Position")," "),t.xp6(3),t.hij(" ",t.lcZ(192,36,"Unit_Rate")," "),t.xp6(3),t.hij(" ",t.lcZ(195,38,"Total")," "),t.xp6(2),t.Q6J("ngForOf",e.proposalCosting),t.xp6(12),t.hij(" ",e.templateData.notesArb," ")}}function I6(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,F6,209,40,"div",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=e.templatesSelectionList.length&&null!=e.templateData)}}let _e=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h){super(c),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.dialog=r,this.authService=c,this.utilService=p,this.translate=u,this.notifyService=d,this.validationService=m,this.dialogRef=h,this.referenceNumber="000/0000",this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.templatesSelectionList=[],this.isArabic=!1,this.date=new Date}ngOnInit(){this.loadData()}loadData(){this.templateData=null,this.isArabic=this.utilService.isArabic(),this.loadProjectData(),this.loadCustomerData(),this.loadSkillSetsList(),this.loadOperationsExpenseHeads(),this.loadMaterialEquipments(),this.loadLogisticsVehicles(),this.loadProposalCostingData(),this.loadProposalTemplates()}loadProposalTemplates(){this.apiService.post("ProposalTemplates/getSelectionProposalTemplates",{projectCode:this.project.projectCode,siteCode:this.project.siteCode,customerCode:this.project.customerCode}).subscribe(o=>{null!=o&&(this.templatesSelectionList=o)})}OnTemplateSelection(e){if(""!=e.target.value){let o=Number(e.target.value);this.apiService.get("proposalTemplates/getProposalTemplateById",o).subscribe(n=>{null!=n&&(n.coveringLetter=n.coveringLetter.replace(/<<customer>>/gi,this.customerData.custName),this.templateData=n,console.log(this.templateData.coveringLetter))})}}submit(){}loadProjectData(){this.apiService.getall(`Project/getProjectByProjectCode/${this.project.projectCode}`).subscribe(e=>{null!=e&&(this.projectData=e)})}loadCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(e=>{null!=e&&(this.customerData=e,this.apiService.getall(`Company/getCompanyByCityCode/${e.custCityCode1}`).subscribe(o=>{null!=o&&(this.companyData=o)}),this.getCity(e.custCityCode1))})}loadInitialData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)}):this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)})}loadProposalCostingData(){var e,o;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)||(this.project.siteCode=null);let n={customerCode:this.project.customerCode,siteCode:this.project.siteCode,projectCode:this.project.projectCode,isAdendum:null===(o=this.project)||void 0===o?void 0:o.isAdendum};this.apiService.post("proposalCosting/getProposalCosting",n).subscribe(s=>{this.proposalCosting=s,console.log(s),this.getReferenceNumber()})}getCity(e){this.apiService.getall(`City/getStateCountrybyCityCode/${e}`).subscribe(o=>{this.city=o})}printComponent(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}findTotalCosts(){this.projectBudgetEstimation.grandTotalCostForProject=0,this.projectBudgetEstimation.siteWisePBCListForProject.forEach(e=>{e.totFcForSite=0,e.totLcForSite=0,e.totMcForSite=0,e.totRcForSite=0,e.grandTotalCostForSite=0,0!=e.prcListForSite.length&&e.prcListForSite.forEach(o=>{o.totResourceCost=0,0!=o.resourceSubCostingList.length&&(o.costPerUnit=o.margin,o.resourceSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totResourceCost=o.costPerUnit*o.quantity),e.totRcForSite=e.totRcForSite+o.totResourceCost}),0!=e.plcListForSite.length&&e.plcListForSite.forEach(o=>{o.totLogisticsCost=0,0!=o.logisticsSubCostingList.length&&(o.costPerUnit=o.margin,o.logisticsSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totLogisticsCost=o.costPerUnit*o.qty),e.totLcForSite=e.totLcForSite+o.totLogisticsCost}),0!=e.pmcListForSite.length&&e.pmcListForSite.forEach(o=>{o.totMaterialEquipmentCost=0,0!=o.materialEquipmentSubCostingList.length&&(o.costPerUnit=0,o.materialEquipmentSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totMaterialEquipmentCost=o.costPerUnit*o.quantity),e.totMcForSite=e.totMcForSite+o.totMaterialEquipmentCost}),0!=e.pfcListForSite.length&&e.pfcListForSite.forEach(o=>{e.totFcForSite=e.totFcForSite+o.costPerUnit}),e.grandTotalCostForSite=e.grandTotalCostForSite+e.totFcForSite+e.totLcForSite+e.totMcForSite+e.totRcForSite,this.projectBudgetEstimation.grandTotalCostForProject=this.projectBudgetEstimation.grandTotalCostForProject+e.grandTotalCostForSite})}openDialogManage(e,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,x6);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.inputData=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.loadData()})}openDialogManage2(e,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,eo);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.inputData=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.loadData()})}loadSkillSetsList(){this.apiService.getall("Skillset/getAllSkillsetList").subscribe(e=>{this.skillsetList=e})}getSkillset(e){return this.skillsetList.find(n=>n.skillSetCode==e)}loadOperationsExpenseHeads(){this.apiService.getall("OperationExpenseHead/getSelectOperationExpenseHeadList").subscribe(e=>{this.opeartionsExpenseHeadsList=e})}getopeartionsExpenseHead(e){return this.opeartionsExpenseHeadsList.find(n=>n.value==e)}loadMaterialEquipments(){this.apiService.getall("Materialequipment/getSelectMaterialequipmentList").subscribe(e=>{this.materialEquipmentList=e})}getMaterialEquipments(e){return this.materialEquipmentList.find(n=>n.value==e)}loadLogisticsVehicles(){this.apiService.getall("Logisticsandvehicle/getSelectLogisticsandvehicleList").subscribe(e=>{this.logisticsVehicleList=e})}getLogisticsVehicle(e){return this.logisticsVehicleList.find(n=>n.value==e)}printInvoice(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}closeModel(){this.dialogRef.close(!0)}createProposalTemplate(){this.openDialogManage({projectCode:this.project.projectCode,customerCode:this.project.customerCode,siteCode:null==this.project.siteCode?"":this.project.siteCode,id:0},g.O.create,"Create_New_Proposal_Template","Add")}editProposalCosting(){this.openDialogManage2({projectCode:this.project.projectCode,customerCode:this.project.customerCode,siteCode:null==this.project.siteCode?"":this.project.siteCode,proposalCosting:this.proposalCosting},g.O.create,"Edit_Proposal_Costing","Edit")}editProposalTemplate(){this.openDialogManage({projectCode:this.project.projectCode,customerCode:this.project.customerCode,siteCode:this.project.siteCode,id:this.templateData.id},g.O.create,"Update_Proposal_Template","Update")}getReferenceNumber(){this.proposalCosting.length>0&&(this.referenceNumber=this.project.customerCode+"/"+this.proposalCosting[0].projectBudgetEstimationId.toString(),0==this.proposalCosting[0].id&&this.editProposalCosting())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(T.uw),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-print-proposal"]],features:[t.qOj],decls:21,vars:9,consts:[[4,"ngIf"],[3,"click"],[3,"click",4,"ngIf"],["type","button","aria-hidden","true",1,"",3,"click"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","container-fluid invoice-container print-container","style"," width:850px; padding-top:5px;","id","printcontainer",4,"ngIf"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],["id","ProposalPage1",2,"page-break-after","always"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],[2,"width","35%"],[2,"text-align","left"],[2,"text-align","center"],[1,"float-center",2,"width","200px","height","150px",3,"src"],[2,"text-align","right"],["colspan","3",2,"text-align","center"],["colspan","3",2,"text-align","center","white-space","pre-wrap"],["id","ProposalPage2",2,"page-break-after","always"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],["colspan","2",2,"text-align","Left"],["colspan","2",2,"text-align","center"],["colspan","2",2,"text-align","justify"],["colspan","2",2,"text-align","left"],["colspan","2",2,"text-align","Left","white-space","pre-wrap"],["id","ProposalPage3",1,"p-3",2,"page-break-after","always"],[2,"text-align","justify"],[2,"padding-bottom","5px","padding-top","5px"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[4,"ngFor","ngForOf"],[2,"text-align","justify","white-space","pre-line"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","1px solid #878787","padding","5px","text-align","left","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","1px solid #878787","padding","5px","text-align","right","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],["colspan","3"],["colspan","2",2,"text-align","right"],["colspan","2",2,"text-align","right","white-space","pre-wrap"],["border","0","cellpadding","0","cellspacing","0","width","100%",1,"arabicright",2,"width","100%"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.YNc(1,N6,7,7,"span",0),t._uU(2,"\xa0 "),t._UZ(3,"br"),t.TgZ(4,"button",1),t.NdJ("click",function(){return o.createProposalTemplate()}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._uU(7," \xa0 "),t.YNc(8,E6,3,3,"button",2),t._uU(9," \xa0 "),t.YNc(10,O6,3,3,"button",2),t._uU(11," \xa0 "),t.YNc(12,j6,3,3,"button",2),t._uU(13," \xa0 "),t.TgZ(14,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(15," Close"),t.qZA(),t.qZA(),t._UZ(16,"br"),t._UZ(17,"br"),t._UZ(18,"br"),t.YNc(19,R6,2,1,"div",0),t.YNc(20,I6,2,1,"div",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",0!=o.templatesSelectionList.length),t.xp6(4),t.Oqu(t.lcZ(6,7,"Create_Template")),t.xp6(3),t.Q6J("ngIf",o.templatesSelectionList.length>0&&null!=o.templateData),t.xp6(2),t.Q6J("ngIf",o.templatesSelectionList.length>0&&null!=o.templateData),t.xp6(2),t.Q6J("ngIf",o.templatesSelectionList.length>0&&null!=o.templateData),t.xp6(7),t.Q6J("ngIf",!o.isArabic),t.xp6(1),t.Q6J("ngIf",o.isArabic))},directives:[f.O5,l.YN,l.Kr,f.sg],pipes:[Z.X$,f.uU,f.JJ],encapsulation:2}),i})();function Y6(i,a){if(1&i&&(t.TgZ(0,"div",15),t.TgZ(1,"table",16),t.TgZ(2,"tr"),t.TgZ(3,"th",17),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",40),t._uU(7),t.qZA(),t.TgZ(8,"th",17),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",18),t._uU(12),t.qZA(),t.qZA(),t.TgZ(13,"tr"),t.TgZ(14,"th",18),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th",41),t._uU(18),t.qZA(),t.qZA(),t.TgZ(19,"tr"),t.TgZ(20,"th",18),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th",18),t._uU(24),t.qZA(),t.TgZ(25,"th",18),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"th",18),t._uU(29),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,10,"Customer_Code")," "),t.xp6(3),t.hij(" #",e.project.customerCode," "),t.xp6(2),t.hij(" ",t.lcZ(10,12,"Customer_Name")," "),t.xp6(3),t.hij(" ",e.isArab?e.customerData.custArbName:e.customerData.custName," "),t.xp6(3),t.hij(" ",t.lcZ(16,14,"Address")," "),t.xp6(3),t.hij(" #",e.customerData.custAddress1," "),t.xp6(3),t.hij(" ",t.lcZ(22,16,"City")," "),t.xp6(3),t.hij(" ",e.isArab?null==e.city?null:e.city.cityNameAr:null==e.city?null:e.city.cityName," "),t.xp6(2),t.hij(" ",t.lcZ(27,18,"Phone")," "),t.xp6(3),t.hij(" ",e.customerData.custPhone1," ")}}function J6(i,a){if(1&i&&(t.TgZ(0,"div",15),t.TgZ(1,"table",42),t.TgZ(2,"tr"),t.TgZ(3,"th",17),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",40),t._uU(7),t.qZA(),t.TgZ(8,"th",17),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",18),t._uU(12),t.qZA(),t.qZA(),t.TgZ(13,"tr"),t.TgZ(14,"th",17),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th",17),t._uU(18),t.qZA(),t.TgZ(19,"th",17),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"th",18),t._uU(23),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,8,"Project_Code")," "),t.xp6(3),t.hij(" ",null==e.projectData?null:e.projectData.projectCode," "),t.xp6(2),t.hij(" ",t.lcZ(10,10,"Est_Starting_Date")," "),t.xp6(3),t.hij(" ",null==e.projectData?null:e.projectData.startDate.substring(0,10)," "),t.xp6(3),t.hij(" ",t.lcZ(16,12,"Project_Details")," "),t.xp6(3),t.hij(" ",e.isArab?e.projectData.projectNameArb:null==e.projectData?null:e.projectData.projectNameEng," "),t.xp6(2),t.hij(" ",t.lcZ(21,14,"Est_Closing_Date")," "),t.xp6(3),t.hij(" ",null==e.projectData?null:e.projectData.endDate.substring(0,10)," ")}}function Q6(i,a){1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",43),t._uU(3,"-Nil-"),t.qZA(),t.qZA(),t.BQk())}function B6(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(e.skillsetCode)}}function H6(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);let n;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(o.isArab?null==(n=o.getSkillset(e.skillsetCode))?null:n.nameInArabic:null==(n=o.getSkillset(e.skillsetCode))?null:n.nameInEnglish)}}function V6(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(t.xi3(2,2,e.costPerUnit,"3.2-5"))}}function $6(i,a){if(1&i&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(e.quantity)}}function G6(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.resourceSubCostingList.length+1),t.xp6(1),t.Oqu(t.xi3(2,2,e.totResourceCost,"3.2-5"))}}function W6(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,B6,2,2,"td",46),t.YNc(2,H6,2,2,"td",46),t.TgZ(3,"td",47),t._uU(4),t.qZA(),t.TgZ(5,"td",48),t._uU(6),t.ALo(7,"number"),t.qZA(),t.YNc(8,V6,3,5,"td",49),t.YNc(9,$6,2,2,"td",50),t.YNc(10,G6,3,5,"td",49),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.Oqu(n.isArab?null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.textTwo:null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.text),t.xp6(2),t.Oqu(t.xi3(7,7,e.amount,"3.2-5")),t.xp6(2),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o)}}function z6(i,a){if(1&i&&(t.ynx(0),t.YNc(1,W6,11,10,"tr",25),t.TgZ(2,"tr"),t.TgZ(3,"td",44),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"td",45),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.resourceSubCostingList),t.xp6(3),t.Oqu(t.lcZ(5,3,"Margin")),t.xp6(3),t.Oqu(t.xi3(8,5,e.margin,"3.2-5"))}}function X6(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",52),t._uU(2,"-Nil-"),t.qZA(),t.qZA())}function K6(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(e.vehicleNumber)}}function tC(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(o.isArab?o.getLogisticsVehicle(e.vehicleNumber).textTwo:o.getLogisticsVehicle(e.vehicleNumber).text)}}function eC(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(t.xi3(2,2,e.costPerUnit,"3.2-5"))}}function oC(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.logisticsSubCostingList.length+1),t.xp6(1),t.Oqu(t.xi3(2,2,e.totLogisticsCost,"3.2-5"))}}function iC(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,K6,2,2,"td",46),t.YNc(2,tC,2,2,"td",46),t.TgZ(3,"td",47),t._uU(4),t.qZA(),t.TgZ(5,"td",48),t._uU(6),t.ALo(7,"number"),t.qZA(),t.YNc(8,eC,3,5,"td",49),t.YNc(9,oC,3,5,"td",49),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.Oqu(n.isArab?null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.textTwo:null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.text),t.xp6(2),t.Oqu(t.xi3(7,6,e.amount,"3.2-5")),t.xp6(2),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o)}}function nC(i,a){if(1&i&&(t.ynx(0),t.YNc(1,iC,10,9,"tr",25),t.TgZ(2,"tr"),t.TgZ(3,"td",47),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"td",47),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.logisticsSubCostingList),t.xp6(3),t.hij("",t.lcZ(5,3,"Margin")," "),t.xp6(3),t.Oqu(t.xi3(8,5,e.margin,"3.2-5"))}}function aC(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",43),t._uU(2,"-Nil-"),t.qZA(),t.qZA())}function sC(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(e.materialEquipmentCode)}}function rC(i,a){if(1&i&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit,o=t.oxw(2);let n;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(o.isArab?null==(n=o.getMaterialEquipments(e.materialEquipmentCode))?null:n.textTwo:null==(n=o.getMaterialEquipments(e.materialEquipmentCode))?null:n.text)}}function lC(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(t.xi3(2,2,e.costPerUnit,"3.2-5"))}}function cC(i,a){if(1&i&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(e.quantity)}}function pC(i,a){if(1&i&&(t.TgZ(0,"td",45),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.uIk("rowspan",e.materialEquipmentSubCostingList.length),t.xp6(1),t.Oqu(t.xi3(2,2,e.totMaterialEquipmentCost,"3.2-5"))}}function uC(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,sC,2,2,"td",46),t.YNc(2,rC,2,2,"td",46),t.TgZ(3,"td",47),t._uU(4),t.qZA(),t.TgZ(5,"td",48),t._uU(6),t.ALo(7,"number"),t.qZA(),t.YNc(8,lC,3,5,"td",49),t.YNc(9,cC,2,2,"td",50),t.YNc(10,pC,3,5,"td",49),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(3);let s;t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.Oqu(n.isArab?null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.textTwo:null==(s=n.getopeartionsExpenseHead(e.costHead))?null:s.text),t.xp6(2),t.Oqu(t.xi3(7,7,e.amount,"3.2-5")),t.xp6(2),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(1),t.Q6J("ngIf",0===o)}}function dC(i,a){if(1&i&&(t.ynx(0),t.YNc(1,uC,11,10,"tr",25),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e.materialEquipmentSubCostingList)}}function mC(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",53),t._uU(2,"-Nil-"),t.qZA(),t.qZA())}function _C(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",47),t._uU(3),t.qZA(),t.TgZ(4,"td",47),t._uU(5),t.qZA(),t.TgZ(6,"td",48),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.$implicit,o=t.oxw(2);let n;t.xp6(3),t.Oqu(e.financialExpenseCode),t.xp6(2),t.Oqu(o.isArab?null==(n=o.getopeartionsExpenseHead(e.financialExpenseCode))?null:n.textTwo:null==(n=o.getopeartionsExpenseHead(e.financialExpenseCode))?null:n.text),t.xp6(2),t.Oqu(t.xi3(8,3,e.costPerUnit,"3.2-5"))}}function gC(i,a){if(1&i&&(t.ynx(0,12),t.YNc(1,Y6,30,20,"div",13),t.YNc(2,J6,24,16,"div",14),t.TgZ(3,"div",15),t.TgZ(4,"table",16),t.TgZ(5,"tr"),t.TgZ(6,"th",17),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",18),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"th",18),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",18),t._uU(16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"table",4),t.TgZ(18,"tr"),t.TgZ(19,"td",19),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",15),t.TgZ(23,"table",4),t.TgZ(24,"tr"),t.TgZ(25,"th",20),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"th",21),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"th",22),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"th",23),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"th",20),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.qZA(),t.YNc(40,Q6,4,0,"ng-container",24),t.YNc(41,z6,9,8,"ng-container",25),t.TgZ(42,"tfoot"),t.TgZ(43,"tr"),t.TgZ(44,"th",26),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th",27),t._uU(48),t.ALo(49,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"table",4),t.TgZ(51,"tr"),t.TgZ(52,"td",19),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",15),t.TgZ(56,"table",4),t.TgZ(57,"tr"),t.TgZ(58,"th",20),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"th",28),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"th",29),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.TgZ(67,"th",30),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.qZA(),t.YNc(70,X6,3,0,"tr",24),t.YNc(71,nC,9,8,"ng-container",25),t.TgZ(72,"tfoot"),t.TgZ(73,"tr"),t.TgZ(74,"th",31),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"th",27),t._uU(78),t.ALo(79,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(80,"table",4),t.TgZ(81,"tr"),t.TgZ(82,"td",19),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(85,"div",15),t.TgZ(86,"table",4),t.TgZ(87,"tr"),t.TgZ(88,"th",32),t._uU(89),t.ALo(90,"translate"),t.qZA(),t.TgZ(91,"th",28),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.TgZ(94,"th",22),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"th",33),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"th",32),t._uU(101),t.ALo(102,"translate"),t.qZA(),t.qZA(),t.YNc(103,aC,3,0,"tr",24),t.YNc(104,dC,2,1,"ng-container",25),t.TgZ(105,"tfoot"),t.TgZ(106,"tr"),t.TgZ(107,"th",26),t._uU(108),t.ALo(109,"translate"),t.qZA(),t.TgZ(110,"th",34),t._uU(111),t.ALo(112,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(113,"table",4),t.TgZ(114,"tr"),t.TgZ(115,"td",19),t._uU(116),t.ALo(117,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(118,"div",15),t.TgZ(119,"table",4),t.TgZ(120,"tr"),t.TgZ(121,"th",21),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"th",21),t._uU(125),t.ALo(126,"translate"),t.qZA(),t.TgZ(127,"th",21),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.qZA(),t.YNc(130,mC,3,0,"tr",24),t.YNc(131,_C,9,6,"ng-container",25),t.TgZ(132,"tfoot"),t.TgZ(133,"tr"),t.TgZ(134,"th",35),t._uU(135),t.ALo(136,"translate"),t.qZA(),t.TgZ(137,"th",36),t._uU(138),t.ALo(139,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(140,"div",37),t.TgZ(141,"table",4),t.TgZ(142,"tr"),t.TgZ(143,"td",38),t._uU(144),t.ALo(145,"translate"),t.qZA(),t.TgZ(146,"td",39),t._uU(147),t.ALo(148,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(149,"br"),t.BQk()),2&i){const e=a.$implicit,o=a.index,n=t.oxw();t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(5),t.hij(" ",t.lcZ(8,45,"Site_Code")," "),t.xp6(3),t.hij(" ",e.siteData.siteCode," "),t.xp6(3),t.hij(" ",t.lcZ(14,47,"Site_Details")," "),t.xp6(3),t.hij(" ",n.isArab?n.isArab?e.siteData.siteAddress:e.siteData.siteArbName:e.siteData.siteName," "),t.xp6(4),t.hij(" ",t.lcZ(21,49,"Resource_Costing")," "),t.xp6(6),t.Oqu(t.lcZ(27,51,"SkillSet_Code")),t.xp6(3),t.Oqu(t.lcZ(30,53,"Name")),t.xp6(3),t.Oqu(t.lcZ(33,55,"Cost_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(36,57,"Qty")),t.xp6(3),t.Oqu(t.lcZ(39,59,"Total")),t.xp6(2),t.Q6J("ngIf",0==e.prcListForSite.length),t.xp6(1),t.Q6J("ngForOf",e.prcListForSite),t.xp6(4),t.hij("",t.lcZ(46,61,"Total")," "),t.xp6(3),t.hij(" ",t.xi3(49,63,e.totRcForSite,"3.2-5"),""),t.xp6(5),t.hij(" ",t.lcZ(54,66,"Vehicle_Costing")," "),t.xp6(6),t.Oqu(t.lcZ(60,68,"Vehicle_Number")),t.xp6(3),t.Oqu(t.lcZ(63,70,"Vehicle_Name")),t.xp6(3),t.Oqu(t.lcZ(66,72,"Amount_For_Vehicle")),t.xp6(3),t.Oqu(t.lcZ(69,74,"Total")),t.xp6(2),t.Q6J("ngIf",0==e.plcListForSite.length),t.xp6(1),t.Q6J("ngForOf",e.plcListForSite),t.xp6(4),t.hij("",t.lcZ(76,76,"Total")," "),t.xp6(3),t.hij(" ",t.xi3(79,78,e.totLcForSite,"3.2-5"),""),t.xp6(5),t.hij(" ",t.lcZ(84,81,"Material_Costing")," "),t.xp6(6),t.Oqu(t.lcZ(90,83,"Material_Equipment_Code")),t.xp6(3),t.Oqu(t.lcZ(93,85,"Material_Equipment_Name")),t.xp6(3),t.Oqu(t.lcZ(96,87,"Cost_Per_Unit")),t.xp6(3),t.Oqu(t.lcZ(99,89,"Qty")),t.xp6(3),t.Oqu(t.lcZ(102,91,"Total")),t.xp6(2),t.Q6J("ngIf",0==e.pmcListForSite.length),t.xp6(1),t.Q6J("ngForOf",e.pmcListForSite),t.xp6(4),t.hij("",t.lcZ(109,93,"Total")," "),t.xp6(3),t.hij(" ",t.xi3(112,95,e.totMcForSite,"3.2-5"),""),t.xp6(5),t.hij(" ",t.lcZ(117,98,"Financial_Costing")," "),t.xp6(6),t.Oqu(t.lcZ(123,100,"Code")),t.xp6(3),t.Oqu(t.lcZ(126,102,"Name")),t.xp6(3),t.Oqu(t.lcZ(129,104,"Amount")),t.xp6(2),t.Q6J("ngIf",0==e.pfcListForSite.length),t.xp6(1),t.Q6J("ngForOf",e.pfcListForSite),t.xp6(4),t.hij("",t.lcZ(136,106,"Total")," "),t.xp6(3),t.hij(" ",t.xi3(139,108,e.totFcForSite,"3.2-5"),""),t.xp6(6),t.hij(" ",t.lcZ(145,111,"Total_Costof_the_site"),": "),t.xp6(3),t.hij(" ",t.xi3(148,113,e.grandTotalCostForSite,"3.2-5")," ")}}function hC(i,a){if(1&i&&(t.TgZ(0,"div",54),t.TgZ(1,"table",4),t.TgZ(2,"tr"),t.TgZ(3,"td",38),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"td",39),t._uU(7),t.ALo(8,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,2,"Total_Cost_Of_The_Project"),": "),t.xp6(3),t.hij(" ",t.xi3(8,4,null==e.projectBudgetEstimation?null:e.projectBudgetEstimation.grandTotalCostForProject,"3.2-5")," ")}}let ge=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.loadProjectData(),this.loadCustomerData(),this.loadSkillSetsList(),this.loadOperationsExpenseHeads(),this.loadMaterialEquipments(),this.loadLogisticsVehicles(),this.loadInitialData()}submit(){}loadProjectData(){this.apiService.getall(`Project/getProjectByProjectCode/${this.project.projectCode}`).subscribe(e=>{null!=e&&(this.projectData=e)})}loadCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(e=>{null!=e&&(this.customerData=e,this.getCity(e.custCityCode1))})}loadInitialData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)}):this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)})}getCity(e){this.apiService.getall(`City/getStateCountrybyCityCode/${e}`).subscribe(o=>{this.city=o})}printComponent(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}findTotalCosts(){this.projectBudgetEstimation.grandTotalCostForProject=0,this.projectBudgetEstimation.siteWisePBCListForProject.forEach(e=>{e.totFcForSite=0,e.totLcForSite=0,e.totMcForSite=0,e.totRcForSite=0,e.grandTotalCostForSite=0,0!=e.prcListForSite.length&&e.prcListForSite.forEach(o=>{o.totResourceCost=0,0!=o.resourceSubCostingList.length&&(o.costPerUnit=o.margin,o.resourceSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totResourceCost=o.costPerUnit*o.quantity),e.totRcForSite=e.totRcForSite+o.totResourceCost}),0!=e.plcListForSite.length&&e.plcListForSite.forEach(o=>{o.totLogisticsCost=0,0!=o.logisticsSubCostingList.length&&(o.costPerUnit=o.margin,o.logisticsSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totLogisticsCost=o.costPerUnit*o.qty),e.totLcForSite=e.totLcForSite+o.totLogisticsCost}),0!=e.pmcListForSite.length&&e.pmcListForSite.forEach(o=>{o.totMaterialEquipmentCost=0,0!=o.materialEquipmentSubCostingList.length&&(o.costPerUnit=0,o.materialEquipmentSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totMaterialEquipmentCost=o.costPerUnit*o.quantity),e.totMcForSite=e.totMcForSite+o.totMaterialEquipmentCost}),0!=e.pfcListForSite.length&&e.pfcListForSite.forEach(o=>{e.totFcForSite=e.totFcForSite+o.costPerUnit}),e.grandTotalCostForSite=e.grandTotalCostForSite+e.totFcForSite+e.totLcForSite+e.totMcForSite+e.totRcForSite,this.projectBudgetEstimation.grandTotalCostForProject=this.projectBudgetEstimation.grandTotalCostForProject+e.grandTotalCostForSite})}loadSkillSetsList(){this.apiService.getall("Skillset/getAllSkillsetList").subscribe(e=>{this.skillsetList=e})}getSkillset(e){return this.skillsetList.find(n=>n.skillSetCode==e)}loadOperationsExpenseHeads(){this.apiService.getall("OperationExpenseHead/getSelectOperationExpenseHeadList").subscribe(e=>{this.opeartionsExpenseHeadsList=e})}getopeartionsExpenseHead(e){return this.opeartionsExpenseHeadsList.find(n=>n.value==e)}loadMaterialEquipments(){this.apiService.getall("Materialequipment/getSelectMaterialequipmentList").subscribe(e=>{this.materialEquipmentList=e})}getMaterialEquipments(e){return this.materialEquipmentList.find(n=>n.value==e)}loadLogisticsVehicles(){this.apiService.getall("Logisticsandvehicle/getSelectLogisticsandvehicleList").subscribe(e=>{this.logisticsVehicleList=e})}getLogisticsVehicle(e){return this.logisticsVehicleList.find(n=>n.value==e)}printInvoice(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-print-estimation"]],features:[t.qOj],decls:25,vars:2,consts:[[2,"position","fixed"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%"],[2,"text-align","left","width","60%"],[2,"font-size","1rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"font-size","1.2rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"text-align","right","vertical-align","middle"],["id","logo","src","assets/images/LOGOPRINT.png","title","Project_Estimation","alt","Project_Estimation_Report",2,"width","120px"],["style","padding-bottom: 5px; padding-top: 5px",4,"ngFor","ngForOf"],["style","padding-top: 5px; padding-bottom:5px",4,"ngIf"],[2,"padding-bottom","5px","padding-top","5px"],["style","padding-bottom:5px",4,"ngIf"],["style","padding-bottom:5px;",4,"ngIf"],[2,"padding-bottom","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"background-color","lightgray","width","100%","text-align","left"],[2,"width","20%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"font-size","1.5rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","15px","text-align","center"],[2,"width","15%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"width","30%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","7%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","6",1,"text-right",2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[1,"text-right",2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","40%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"width","25%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","20%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","5",1,"text-right",2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","10%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","5%","border","2px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[1,"text-right",2,"border","2px solid #878787","padding","5px","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","2",2,"border","2px solid #878787","padding","5px","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","2px solid #878787","padding","5px","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"padding-top","5px"],[2,"text-align","right","vertical-align","top","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","20%","text-align","right","vertical-align","top","border","2px solid #878787","border-left","0","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"border","2px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"background-color","lightgrey","width","100%","text-align","left"],["colspan","7",2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[1,"text-left",2,"border","2px solid #878787","padding","5px","text-align","left","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[1,"text-right",2,"border","2px solid #878787","padding","5px","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],["style"," border:2px solid #878787;padding:5px;text-align: left;font-size:0.675rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight: 500;",4,"ngIf"],[2,"border","2px solid #878787","padding","5px","text-align","left","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","2px solid #878787","padding","5px","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],["style"," border:2px solid #878787;padding:5px;text-align: right;font-size:0.675rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight: 500;","class","text-right",4,"ngIf"],["style"," border:2px solid #878787;padding:5px;text-align: center;font-size:0.675rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight: 500;",4,"ngIf"],[2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],["colspan","6",2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],["colspan","3",2,"border","2px solid #878787","padding","5px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"padding-top","5px","padding-bottom","5px"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.printInvoice()}),t._uU(2,"Print"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," Close"),t.qZA(),t.qZA(),t._UZ(6,"br"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.TgZ(10,"table",4),t.TgZ(11,"tr"),t.TgZ(12,"td",5),t.TgZ(13,"h4",6),t._uU(14," International Ideal Development Gen. Cont. Est. "),t.qZA(),t.TgZ(15,"h4",7),t._uU(16," .\u0627\u0644\u0645\u0624\u0633\u0633\u0629 \u0627\u0644\u0639\u0627\u0644\u0645\u064a\u0629 \u0644\u0644\u062a\u0646\u0645\u064a\u0629 \u0627\u0644\u0645\u062b\u0627\u0644\u064a\u0629 \u0644\u0644\u0645\u0642\u0627\u0648\u0644\u0627\u062a \u0627\u0644\u0639\u0627\u0645\u0629 , "),t.qZA(),t.TgZ(17,"h4",6),t._uU(18," Al Khobar "),t.qZA(),t.TgZ(19,"h4",6),t._uU(20," Saudi Arabia "),t.qZA(),t.qZA(),t.TgZ(21,"td",8),t._UZ(22,"img",9),t.qZA(),t.qZA(),t.qZA(),t.YNc(23,gC,150,116,"ng-container",10),t.YNc(24,hC,9,7,"div",11),t.qZA()),2&e&&(t.xp6(23),t.Q6J("ngForOf",null==o.projectBudgetEstimation?null:o.projectBudgetEstimation.siteWisePBCListForProject),t.xp6(1),t.Q6J("ngIf",!(null!=o.project&&o.project.isAdendum)))},directives:[f.sg,f.O5],pipes:[Z.X$,f.JJ],encapsulation:2}),i})();function fC(i,a){if(1&i&&(t.TgZ(0,"option",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.AsE("",e.siteCode,"(",o.isArab?e.siteArbName:e.siteName,")")}}function ZC(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.uIk("rowspan",o.skillsetsListForSite.length),t.xp6(1),t.hij(" ",e.startDate," ")}}function CC(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.uIk("rowspan",o.skillsetsListForSite.length),t.xp6(1),t.hij(" ",e.endDate," ")}}function AC(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.uIk("rowspan",o.skillsetsListForSite.length),t.xp6(1),t.hij(" ",e.noOfDays," ")}}function TC(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,ZC,2,2,"td",26),t.YNc(2,CC,2,2,"td",26),t.YNc(3,AC,2,2,"td",26),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0===n.getJvalue(o)),t.xp6(1),t.Q6J("ngIf",0===n.getJvalue(o)),t.xp6(1),t.Q6J("ngIf",0===n.getJvalue(o)),t.xp6(2),t.hij(" ",n.isArab?e.skillSetNameArb:e.skillSetNameEng," "),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(2),t.hij(" ",e.totShifts," ")}}function vC(i,a){if(1&i&&(t.ynx(0),t.YNc(1,TC,10,6,"tr",32),t.BQk()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.tableData)}}function xC(i,a){if(1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(3);t.uIk("rowspan",e.skillsetsListForSite.length),t.xp6(1),t.Oqu(t.lcZ(2,2,"Total"))}}function qC(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,xC,3,4,"th",33),t.TgZ(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0===o),t.xp6(2),t.hij(" ",n.noOfDays,""),t.xp6(2),t.hij(" ",n.isArab?e.skillSetNameArb:e.skillSetNameEng," "),t.xp6(2),t.hij(" ",e.quantity,""),t.xp6(2),t.hij(" ",e.quantity*n.noOfDays,"")}}function bC(i,a){if(1&i&&(t.TgZ(0,"tfoot"),t.YNc(1,qC,10,5,"tr",32),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.footerData)}}function yC(i,a){1&i&&(t.TgZ(0,"th",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Code")," "))}function SC(i,a){if(1&i&&(t.TgZ(0,"td",62),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.employeeNumber)}}function wC(i,a){1&i&&(t.TgZ(0,"th",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Employee_Name")," "))}function UC(i,a){if(1&i&&(t.TgZ(0,"td",62),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(1),t.Oqu(o.isArab?e.employeeName_AR:e.employeeName)}}function LC(i,a){1&i&&(t.TgZ(0,"th",63),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function DC(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw(2).addEmployee(n)}),t._UZ(1,"i",66),t.qZA()}}function NC(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw(2).removeEmployee(n)}),t._UZ(1,"i",67),t.qZA()}}function EC(i,a){if(1&i&&(t.TgZ(0,"td",62),t.YNc(1,DC,2,0,"a",64),t.YNc(2,NC,2,0,"a",64),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!o.isSelected(e)),t.xp6(1),t.Q6J("ngIf",o.isSelected(e))}}function OC(i,a){1&i&&t._UZ(0,"tr",68)}function jC(i,a){1&i&&t._UZ(0,"tr",69)}function kC(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"a",65),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).removeEmployee(s)}),t._UZ(7,"i",67),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw(2);let n;t.xp6(2),t.hij(" ",e.employeeNumber," "),t.xp6(2),t.hij(" ",o.isArab?null==(n=o.getEmployeeData(e.employeeNumber))?null:n.textAr:null==(n=o.getEmployeeData(e.employeeNumber))?null:n.text," ")}}const MC=function(){return{standalone:!0}};function RC(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",35),t.TgZ(2,"div",36),t.TgZ(3,"div",6),t.TgZ(4,"div",37),t.TgZ(5,"div",38),t.TgZ(6,"div",36),t.TgZ(7,"div",39),t.TgZ(8,"h4",40),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(11,"div",41),t.TgZ(12,"div",42),t.TgZ(13,"div",43),t.TgZ(14,"input",44),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().searchValue=n})("keyup",function(){t.CHM(e);const n=t.oxw();return n.applyFilter(n.searchValue)})("keydown",function(){t.CHM(e);const n=t.oxw();return n.applyFilter(n.searchValue)}),t.qZA(),t.qZA(),t.TgZ(15,"div",45),t.TgZ(16,"div",46),t.ynx(17),t.TgZ(18,"table",47),t.NdJ("matSortChange",function(n){return t.CHM(e),t.oxw().onSortOrder(n)}),t.ynx(19,48),t.YNc(20,yC,3,3,"th",49),t.YNc(21,SC,2,1,"td",50),t.BQk(),t.ynx(22,51),t.YNc(23,wC,3,3,"th",49),t.YNc(24,UC,2,1,"td",50),t.BQk(),t.ynx(25,52),t.YNc(26,LC,3,3,"th",53),t.YNc(27,EC,3,2,"td",50),t.BQk(),t.YNc(28,OC,1,0,"tr",54),t.YNc(29,jC,1,0,"tr",55),t.qZA(),t.ynx(30,56),t.TgZ(31,"mat-paginator",57),t.NdJ("page",function(n){return t.CHM(e),t.oxw().onPageSwitch(n)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.TgZ(32,"div",58),t.TgZ(33,"div",59),t.TgZ(34,"table",42),t.TgZ(35,"tr"),t.TgZ(36,"th"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"th"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"th"),t.qZA(),t.YNc(43,kC,8,2,"tr",32),t.TgZ(44,"tr"),t.TgZ(45,"th",60),t._uU(46),t.ALo(47,"translate"),t._UZ(48,"br"),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"th"),t._uU(52),t._UZ(53,"br"),t._uU(54),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(9),t.hij("",t.lcZ(10,17,"Employee_List")," "),t.xp6(5),t.Q6J("ngModel",e.searchValue)("ngModelOptions",t.DdM(27,MC)),t.xp6(4),t.Q6J("dataSource",e.data),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("length",e.totalItemsCount)("pageSize",e.pageService.pageCount)("pageSizeOptions",e.pageService.selectItemsPerPage),t.xp6(6),t.hij(" ",t.lcZ(38,19,"Employee_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(41,21,"Employee_Name")," "),t.xp6(3),t.Q6J("ngForOf",e.selectedEmployeesList),t.xp6(3),t.hij(" ",t.lcZ(47,23,"Total_Employees")," :"),t.xp6(3),t.hij(" ",t.lcZ(50,25,"Selected_Employees")," : "),t.xp6(3),t.hij(" ",e.employeesList.length,""),t.xp6(2),t.hij(" ",e.selectedEmployeesList.length," ")}}function PC(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",70),t.NdJ("click",function(){return t.CHM(e),t.oxw().assignEmployees()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"SAVE"))}let he=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.dialogRef=h,this.displayedColumns=["employeeNumber","employeeName","Actions"],this.searchValue="",this.sortingOrder="employeeID desc",this.isLoading=!1,this.employeesList=[],this.selectedEmployeesList=[],this.skillsetsListForSite=[],this.shiftsForSite=[],this.siteCodeList=[],this.tableData=[],this.footerData=[],this.monthsDataList=[],this.monthlyRoasterForSite=[],this.isRoasterGenerated=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.initialLoading(),this.calculateDates(),this.setForm(),this.getSitesList()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){var e;this.loadList(0,this.pageService.pageCount,"",this.sortingOrder),this.loadEmployees(),null!=(null===(e=this.project)||void 0===e?void 0:e.siteCode)&&(this.getSkillsetsForSite(this.project.siteCode),this.getEmployeesOfProjectSite(this.project.siteCode))}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){console.log(e),this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Employee/getEmployeesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,this.data.paginator=this.paginator,this.data.sort=this.sort,setTimeout(()=>this.data.sort=this.sort,2e3),this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}loadEmployees(){this.apiService.getall("Employee/getSelectEmployeeList").subscribe(e=>{this.employeesList=e},e=>this.utilService.ShowApiErrorMessage(e))}addEmployee(e){this.selectedEmployeesList.findIndex(o=>o.employeeID==e.employeeID)<0&&(e.id=0,this.selectedEmployeesList.push(e))}removeEmployee(e){let o=this.selectedEmployeesList.findIndex(n=>n.employeeID==e.employeeID);this.selectedEmployeesList.splice(o,1)}isSelected(e){return this.selectedEmployeesList.findIndex(o=>o.employeeNumber==e.employeeNumber)>=0}setForm(){var e,o;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null!=(null===(e=this.project)||void 0===e?void 0:e.siteCode)?this.project.siteCode:"",l.kI.required],startDate:[this.project.startDate.toString().substring(0,10)],endDate:[this.project.endDate.toString().substring(0,10)],noOfDays:[this.noOfDays]}),null!=(null===(o=this.project)||void 0===o?void 0:o.siteCode)&&this.form.controls.siteCode.disable({onlySelf:!0})}closeModel(){this.dialogRef.close()}submit(){}calculateDates(){this.monthsDataList=[];let e=new Date(this.project.startDate),o=new Date(this.project.endDate);this.noOfDays=(o.getTime()-e.getTime())/864e5+1;for(let n=e.getFullYear();n<=o.getFullYear();n++){let s=n==e.getFullYear()?e.getMonth():1,r=n==o.getFullYear()?o.getMonth():12;for(let c=s;c<=r;c++){let p=c==s&&n==e.getFullYear()?e.getDate():1,u=c==r&&n==o.getFullYear()?o.getDate():new Date(n,c+1,0).getDate(),d=(new Date(n,c,u).getTime()-new Date(n,c,p).getTime())/864e5+1,m={sd:p,ed:u,mStartDate:new Date(n,c,p).toDateString(),mEndDate:new Date(n,c,u).toDateString(),mNoOfDays:d};this.monthsDataList.push(m)}}}getSitesList(){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(e=>{this.siteCodeList=e})}getSkillsetsForSite(e){""!=e?this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${e}`).subscribe(o=>{this.skillsetsListForSite=o,this.getShiftsForSite(e)}):(this.shiftsForSite=[],this.skillsetsListForSite=[],this.loadTableData())}getShiftsForSite(e){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.project.projectCode}/${e}`).subscribe(o=>{this.shiftsForSite=o,console.log(o),this.loadTableData()})}onSelectSiteCode(e){this.getSkillsetsForSite(e.target.value),this.getEmployeesOfProjectSite(e.target.value)}loadTableData(){var e,o,n,s,r,c,p,u;this.tableData=[],this.footerData=[];for(let d=0;d<this.monthsDataList.length;d++){let m=this.monthsDataList[d];for(let h=0;h<this.skillsetsListForSite.length;h++){let C={sd:null===(e=this.monthsDataList[d])||void 0===e?void 0:e.sd,ed:null===(o=this.monthsDataList[d])||void 0===o?void 0:o.ed,startDate:null===(n=this.monthsDataList[d])||void 0===n?void 0:n.mStartDate,endDate:null===(s=this.monthsDataList[d])||void 0===s?void 0:s.mEndDate,noOfDays:this.monthsDataList[d].mNoOfDays,noOfShifts:this.shiftsForSite.length,skillSet:null===(r=this.skillsetsListForSite[h])||void 0===r?void 0:r.skillSetCode,skillSetNameEng:null===(c=this.skillsetsListForSite[h])||void 0===c?void 0:c.nameInEnglish,skillSetNameArb:null===(p=this.skillsetsListForSite[h])||void 0===p?void 0:p.nameInArabic,quantity:this.skillsetsListForSite[h].quantity,totShifts:m.mNoOfDays*(null===(u=this.skillsetsListForSite[h])||void 0===u?void 0:u.quantity)};this.tableData.push(C)}}this.loadFooterData(),this.checkRoasterForSite()}loadFooterData(){var e,o,n,s;for(let r=0;r<this.skillsetsListForSite.length;r++){let c={skillSet:null===(e=this.skillsetsListForSite[r])||void 0===e?void 0:e.skillSetCode,skillSetNameEng:null===(o=this.skillsetsListForSite[r])||void 0===o?void 0:o.nameInEnglish,skillSetNameArb:null===(n=this.skillsetsListForSite[r])||void 0===n?void 0:n.nameInArabic,quantity:null===(s=this.skillsetsListForSite[r])||void 0===s?void 0:s.quantity};this.footerData.push(c)}}checkRoasterForSite(){this.apiService.getall(`MonthlyRoaster/isExistMonthlyRoasterForProjectSite/${this.project.projectCode}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.isRoasterGenerated=e})}getJvalue(e){return e%this.skillsetsListForSite.length}assignEmployees(){let e=[];this.selectedEmployeesList.forEach(o=>{e.push({id:o.id,employeeNumber:o.employeeNumber,employeeID:o.employeeID,employeeName:o.employeeName,employeeNameAr:o.employeeName_AR,projectCode:this.project.projectCode,siteCode:this.form.controls.siteCode.value})}),0!=this.selectedEmployeesList.length&&this.apiService.post("EmployeesToProjectSite/assignEmployeesToProjectSite",e).subscribe(o=>{this.utilService.OkMessage(),this.checkRoasterForSite(),this.dialogRef.close(!0)},o=>{console.log(o),console.error(o),this.utilService.ShowApiErrorMessage(o)})}getEmployeesOfProjectSite(e){""!=e?this.apiService.getall(`EmployeesToProjectSite/getEmployeesOfProjectSite/${this.project.projectCode}/${e}`).subscribe(o=>{this.selectedEmployeesList=o,this.getShiftsForSite(e)}):(this.shiftsForSite=[],this.skillsetsListForSite=[],this.loadTableData())}getEmployeeData(e){return this.employeesList.find(o=>o.value==e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-assign-employees-to-project-site"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:90,vars:55,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["type","text","formControlName","customerCode","readonly","",1,"form-control"],["type","text","formControlName","projectCode","readonly","",1,"form-control"],[1,"col-md-2","col-lg-2"],["type","text","formControlName","startDate","readonly","",1,"form-control"],["type","text","formControlName","endDate","readonly","",1,"form-control"],["type","text","formControlName","noOfDays","readonly","",1,"form-control"],[1,"mr-sm-2"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"control"],[1,"table-responsive"],["id","zero_config1",1,"table","table-bordered","no-wrap"],[4,"ngIf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value","click",4,"ngIf"],[3,"value"],[4,"ngFor","ngForOf"],["colspan","2","class","text-right",4,"ngIf"],["colspan","2",1,"text-right"],[1,"container-fluid"],[1,"row"],[1,"card"],[1,"card-body"],[1,"col-md-6","col-lg-6"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"table","table-bordered","no-wrap"],[1,"input-group","mb-3",2,"width","25%","padding-top","5px","padding-left","5px"],["type","text","placeholder","Search",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"input-group","mb-3",2,"width","100%"],[1,"input-group","mb-3",2,"width","50%","padding-right","5px","height","fit-content"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",2,"height","fit-content",3,"dataSource","matSortChange"],["matColumnDef","employeeNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","employeeName"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"height","fit-content"],[3,"length","pageSize","pageSizeOptions","page"],[1,"input-group","mb-3",2,"width","50%","padding-right","5px"],[2,"width","100%"],["colspan","2",2,"text-align","right"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"click",4,"ngIf"],[3,"click"],[1,"fas","fa-plus-circle",2,"color","green"],[1,"fas","fa-minus-circle",2,"color","red"],["mat-header-row",""],["mat-row",""],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," \xd7"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"div",12),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",13),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",14),t.qZA(),t.qZA(),t.TgZ(27,"div",15),t.TgZ(28,"div",12),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"input",16),t.qZA(),t.qZA(),t.TgZ(33,"div",15),t.TgZ(34,"div",12),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",17),t.qZA(),t.qZA(),t.TgZ(39,"div",15),t.TgZ(40,"div",12),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",10),t.TgZ(46,"div",11),t.TgZ(47,"div",12),t.TgZ(48,"label",19),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"select",20),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(52,"option",21),t._uU(53),t.ALo(54,"translate"),t.ALo(55,"translate"),t.qZA(),t.YNc(56,fC,2,3,"option",22),t.qZA(),t._UZ(57,"validation-message",23),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(58,"div",24),t.TgZ(59,"table",25),t.TgZ(60,"thead"),t.TgZ(61,"tr"),t.TgZ(62,"th"),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"th"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"th"),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"th"),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"th"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"th"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(80,vC,2,1,"ng-container",26),t.YNc(81,bC,2,1,"tfoot",26),t.qZA(),t.qZA(),t.qZA(),t.YNc(82,RC,55,28,"div",26),t.TgZ(83,"div",27),t.TgZ(84,"div",8),t.TgZ(85,"div",28),t.TgZ(86,"input",29),t.NdJ("click",function(){return o.closeModel()}),t.ALo(87,"translate"),t.qZA(),t._uU(88," \xa0 "),t.YNc(89,PC,2,3,"input",30),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,23,o.modalTitle)),t.xp6(15),t.Oqu(t.lcZ(19,25,"Customer_Code")),t.xp6(6),t.Oqu(t.lcZ(25,27,"Project_Code")),t.xp6(6),t.Oqu(t.lcZ(31,29,"Project_Start_Date")),t.xp6(6),t.Oqu(t.lcZ(37,31,"Project_End_Date")),t.xp6(6),t.Oqu(t.lcZ(43,33,"No_Of_Days")),t.xp6(7),t.Oqu(t.lcZ(50,35,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(54,37,"Select")," ",t.lcZ(55,39,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(6),t.hij(" ",t.lcZ(64,41,"Month_Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(67,43,"Month_End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(70,45,"No_Of_Days")," "),t.xp6(3),t.hij(" ",t.lcZ(73,47,"SkillSet")," "),t.xp6(3),t.hij(" ",t.lcZ(76,49,"Quantity")," "),t.xp6(3),t.hij(" ",t.lcZ(79,51,"Total_Shifts")," "),t.xp6(2),t.Q6J("ngIf",(null==o.tableData?null:o.tableData.length)>0),t.xp6(1),t.Q6J("ngIf",(null==o.footerData?null:o.footerData.length)>0),t.xp6(1),t.Q6J("ngIf",0!=o.tableData.length),t.xp6(4),t.s9C("value",t.lcZ(87,53,"Cancel")),t.xp6(3),t.Q6J("ngIf",0!=o.selectedEmployeesList.length))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,f.sg,G.s,f.O5,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();var FC=X(1289);function IC(i,a){if(1&i&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.siteCode),t.xp6(1),t.AsE("",e.siteCode,"(",o.isArab?e.siteArbName:e.siteName,")")}}function YC(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",10),t.TgZ(1,"div",11),t.TgZ(2,"div",12),t.TgZ(3,"label",23),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"select",24),t.NdJ("change",function(n){return t.CHM(e),t.oxw().onSelectSiteCode(n)}),t.TgZ(7,"option",25),t._uU(8),t.ALo(9,"translate"),t.ALo(10,"translate"),t.qZA(),t.YNc(11,IC,2,3,"option",26),t.qZA(),t._UZ(12,"validation-message",27),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,5,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(9,7,"Select")," ",t.lcZ(10,9,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",e.siteCodeList),t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function JC(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.employeeNumber,"")}}function QC(i,a){if(1&i&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(4);t.Q6J("value",e),t.xp6(1),t.AsE(" ",e.text,"-",o.isArab?e.textAr:e.textTwo," ")}}function BC(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",36),t._UZ(1,"auto-loader",37),t._UZ(2,"input",38),t.ALo(3,"translate"),t.ALo(4,"translate"),t.TgZ(5,"mat-autocomplete",39,40),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw(3).autoSelectionEmployeeNumber(n)}),t.YNc(7,QC,2,3,"mat-option",26),t.ALo(8,"async"),t.qZA(),t._UZ(9,"validation-message",27),t.qZA()}if(2&i){const e=t.MAs(6),o=t.oxw(3);t.xp6(1),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(3,7,"Enter")," ",t.lcZ(4,9,"Employee"),""),t.Q6J("formControl",o.empCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(8,11,o.filteredEmployeeNumbers)),t.xp6(2),t.Q6J("control",o.empCodeControl)}}function HC(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.YNc(7,JC,2,1,"td",33),t.YNc(8,BC,10,13,"td",34),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.TgZ(12,"i",35),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw(2).editMap(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1,""),t.xp6(2),t.hij(" ",e.skillSet,""),t.xp6(2),t.hij(" ",n.isArab?e.skillSetNameArb:e.skillSetNameEng,""),t.xp6(1),t.Q6J("ngIf",n.editRow!=o),t.xp6(1),t.Q6J("ngIf",n.editRow==o),t.xp6(2),t.hij(" ",n.isArab?e.empNameAr:e.empName,"")}}function VC(i,a){if(1&i&&(t.TgZ(0,"div",29),t.TgZ(1,"table",30),t.TgZ(2,"tr"),t.TgZ(3,"th",31),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.YNc(23,HC,13,6,"tr",32),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,9,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(8,11,"SkillSet")," "),t.xp6(3),t.AsE(" ",t.lcZ(11,13,"SkillSet")," ",t.lcZ(12,15,"Name")," "),t.xp6(4),t.hij(" ",t.lcZ(15,17,"Employee_Code")," "),t.xp6(3),t.AsE(" ",t.lcZ(18,19,"Employee")," ",t.lcZ(19,21,"Name")," "),t.xp6(4),t.hij(" ",t.lcZ(22,23,"Edit")," "),t.xp6(2),t.Q6J("ngForOf",e.empToResMapData)}}function $C(i,a){1&i&&(t._UZ(0,"input",41),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let fe=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.skillsetData=[],this.empToResMapData=[],this.skillsetsListForSite=[],this.monthsDataList=[],this.shiftsForSite=[],this.siteCodeList=[],this.editRow=-1,this.empCodeControl=new l.NI(""),this.employeeList=[],this.employeesForProjectSite=[],this.employeeNumber="",this.isDataLoading=!1,this.isArab=!1,this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,tt.O)(""),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(h=>(""!==h.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(h||""))))}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm();var e=0;this.interval=setInterval(()=>{1==++e?this.calculateDates():2==e?this.loadEmployees():3==e?this.getSitesList():4==e&&this.getSkillsetsForSite(this.project.siteCode)},e>4?0:1e3)}closeModel(){this.dialogRef.close()}setForm(){var e,o;this.form=this.fb.group({projectCode:[this.project.projectCode],customerCode:[this.project.customerCode],siteCode:[null!=(null===(e=this.project)||void 0===e?void 0:e.siteCode)?this.project.siteCode:"",l.kI.required],startDate:[this.project.startDate.toString().substring(0,10)],endDate:[this.project.endDate.toString().substring(0,10)],noOfDays:[this.noOfDays]}),null!=(null===(o=this.project)||void 0===o?void 0:o.siteCode)&&(this.form.controls.siteCode.disable({onlySelf:!0}),this.loadEmployeesForProjectSite(this.project.siteCode),this.getSkillsetsForSite(this.project.siteCode),this.loadEmpToResourceMap(this.project.siteCode))}getSitesList(){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(e=>{this.siteCodeList=e})}loadEmployees(){this.apiService.getall("Employee/getSelectEmployeeList").subscribe(e=>{this.employeeList=e},e=>this.utilService.ShowApiErrorMessage(e))}loadEmployeesForProjectSite(e){this.apiService.getall(`EmployeesToProjectSite/getEmployeesOfProjectSite/${this.project.projectCode}/${e}`).subscribe(o=>{this.employeesForProjectSite=o,0==this.employeesForProjectSite.length?this.notifyService.showError(this.translate.instant("Employees_Not_Assigned_To_Site")):this.loadEmpToResourceMap(e)},o=>this.utilService.ShowApiErrorMessage(o))}calculateDates(){this.monthsDataList=[];let e=new Date(this.project.startDate),o=new Date(this.project.endDate);this.noOfDays=(o.getTime()-e.getTime())/864e5+1;for(let n=e.getFullYear();n<=o.getFullYear();n++){let s=n==e.getFullYear()?e.getMonth():1,r=n==o.getFullYear()?o.getMonth():12;for(let c=s;c<=r;c++){let p=c==s&&n==e.getFullYear()?e.getDate():1,u=c==r&&n==o.getFullYear()?o.getDate():new Date(n,c+1,0).getDate(),d=(new Date(n,c,u).getTime()-new Date(n,c,p).getTime())/864e5+1,m={sd:p,ed:u,mStartDate:new Date(n,c,p).toDateString(),mEndDate:new Date(n,c,u).toDateString(),mNoOfDays:d};this.monthsDataList.push(m)}}}loadskillsetData(){this.skillsetData=[],this.empToResMapData=[];for(let e=0;e<this.skillsetsListForSite.length;e++)this.skillsetData.push({skillSet:this.skillsetsListForSite[e].skillSetCode,skillSetNameEng:this.skillsetsListForSite[e].nameInEnglish,skillSetNameArb:this.skillsetsListForSite[e].nameInArabic,quantity:this.skillsetsListForSite[e].quantity})}loadEmpToResourceMap(e){this.isDataLoading=!0,this.apiService.getall(`EmployeesToResorceMap/getEmployeesToResourcesMapForProjectSite/${this.project.projectCode}/${e}`).subscribe(o=>{var n,s,r,c,p,u,d;this.empToResMapData=o,console.log(o),this.isDataLoading=!1,console.log(this.skillsetsListForSite);for(var m=0;m<this.empToResMapData.length;m++){let h=this.empToResMapData[m];h.empNumber=null===(n=this.employeeList.find(C=>(null==C?void 0:C.value)==(null==h?void 0:h.employeeNumber)))||void 0===n?void 0:n.value,h.empName=null===(s=this.employeeList.find(C=>(null==C?void 0:C.value)==(null==h?void 0:h.employeeNumber)))||void 0===s?void 0:s.text,h.empNameAr=null===(r=this.employeeList.find(C=>(null==C?void 0:C.value)==(null==h?void 0:h.employeeNumber)))||void 0===r?void 0:r.textAr,h.skillSetNameEng=null===(c=this.skillsetsListForSite.find(C=>C.skillSetCode==(null==h?void 0:h.skillSet)))||void 0===c?void 0:c.nameInEnglish,h.skillSetNameArb=null===(p=this.skillsetsListForSite.find(C=>C.skillSetCode==(null==h?void 0:h.skillSet)))||void 0===p?void 0:p.nameInArabic}if(0==this.empToResMapData.length)for(let h=0;h<this.skillsetsListForSite.length;h++)for(let C=1;C<=this.skillsetsListForSite[h].quantity;C++){let A={projectCode:this.project.projectCode,siteCode:this.form.controls.siteCode.value,skillSet:this.skillsetsListForSite[h].skillSetCode,skillSetNameEng:null===(u=this.skillsetsListForSite[h])||void 0===u?void 0:u.nameInEnglish,skillSetNameArb:null===(d=this.skillsetsListForSite[h])||void 0===d?void 0:d.nameInArabic,employeeNumber:"",employeeID:0,mapId:0};this.empToResMapData.push(A)}},o=>{this.isDataLoading=!1})}getJvalue(e){return e%this.skillsetsListForSite.length}getSkillsetsForSite(e){this.isDataLoading=!0,""!=e?this.apiService.getall(`Skillset/getSkillsetsByProjectCodeAndSiteCode/${this.project.projectCode}/${e}`).subscribe(o=>{this.skillsetsListForSite=o,this.loadEmployeesForProjectSite(e),this.isDataLoading=!1},o=>{this.isDataLoading=!1}):(this.isDataLoading=!1,this.shiftsForSite=[],this.skillsetsListForSite=[])}getShiftsForSite(e){this.isDataLoading=!0,this.apiService.getall(`ShiftMaster/getShiftsToSiteBySiteCode/${e}`).subscribe(o=>{this.shiftsForSite=o,this.isDataLoading=!1})}onSelectSiteCode(e){this.loadEmployeesForProjectSite(e.target.value),(0,FC.g)(1e3),this.getSkillsetsForSite(e.target.value)}filterEmployeeNumbers(e){return this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.project.projectCode}/${this.form.controls.siteCode.value}/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}editMap(e){-1==this.editRow?(this.editRow=e,this.empCodeControl.setValue(this.empToResMapData[this.editRow].employeeNumber)):this.editRow=-1}autoSelectionEmployeeNumber(e){this.empToResMapData.findIndex(o=>o.employeeNumber==e.option.value.text)<0&&(this.empToResMapData[this.editRow].employeeID=e.option.value.value,this.empToResMapData[this.editRow].employeeNumber=e.option.value.text,this.empToResMapData[this.editRow].empName=e.option.value.textTwo,this.empToResMapData[this.editRow].empNameAr=e.option.value.textAr),this.editRow=-1}submit(){0==this.empToResMapData.length||this.isDataLoading?this.isDataLoading?this.notifyService.showInfo("Please Wait..."):this.notifyService.showWarning("No_mapping_Data_Founds"):(this.isDataLoading=!0,this.apiService.post("EmployeesToResorceMap/mapEmployeesToResources",this.empToResMapData).subscribe(e=>{this.utilService.OkMessage(),this.isDataLoading=!1,this.dialogRef.close(!0)},e=>{console.log(e),console.error(e),this.utilService.ShowApiErrorMessage(e),this.isDataLoading=!1}))}canSave(){return this.empToResMapData.findIndex(e=>""==e.employeeNumber)<0}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-mapping-emp-to-resource-for-project-site"]],features:[t.qOj],decls:48,vars:22,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["type","text","formControlName","customerCode","readonly","",1,"form-control"],["type","text","formControlName","projectCode","readonly","",1,"form-control"],["type","text","formControlName","startDate","readonly","",1,"form-control"],["type","text","formControlName","endDate","readonly","",1,"form-control"],["class","row  mt-2",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[1,"mr-sm-2"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"control"],[3,"value"],[1,"table-responsive"],["id","zero_config1",1,"table","table-bordered","no-wrap"],[2,"width","3%"],[4,"ngFor","ngForOf"],[4,"ngIf"],["width","100%",4,"ngIf"],[1,"icon-note",3,"click"],["width","100%"],[3,"isLoading"],["type","text","matInput","",1,"form-control",2,"width","inherit",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto_emp","matAutocomplete"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"h3",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," \xd7"),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"div",12),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",13),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",14),t.qZA(),t.qZA(),t.TgZ(27,"div",11),t.TgZ(28,"div",12),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"input",15),t.qZA(),t.qZA(),t.TgZ(33,"div",11),t.TgZ(34,"div",12),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",16),t.qZA(),t.qZA(),t.qZA(),t.YNc(39,YC,13,11,"div",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(40,VC,24,25,"div",18),t.qZA(),t.TgZ(41,"div",19),t.TgZ(42,"div",8),t.TgZ(43,"div",20),t.TgZ(44,"input",21),t.NdJ("click",function(){return o.closeModel()}),t.ALo(45,"translate"),t.qZA(),t._uU(46," \xa0 "),t.YNc(47,$C,2,3,"input",22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(t.lcZ(4,10,o.modalTitle)),t.xp6(15),t.Oqu(t.lcZ(19,12,"Customer_Code")),t.xp6(6),t.Oqu(t.lcZ(25,14,"Project_Code")),t.xp6(6),t.Oqu(t.lcZ(31,16,"Project_Start_Date")),t.xp6(6),t.Oqu(t.lcZ(37,18,"Project_End_Date")),t.xp6(3),t.Q6J("ngIf",o.siteCodeList.length>0),t.xp6(1),t.Q6J("ngIf",o.empToResMapData.length>0),t.xp6(4),t.s9C("value",t.lcZ(45,20,"Cancel")),t.xp6(3),t.Q6J("ngIf",o.canSave()&&0!=o.empToResMapData.length))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,f.O5,l.EJ,l.YN,l.Kr,f.sg,G.s,ht.z,at.ZL,l.oH,at.XC,St.ey],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function GC(i,a){if(1&i&&(t.TgZ(0,"option",13),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.shiftCode),t.xp6(1),t.AsE("",e.shiftCode,"(",o.isArabic?e.shiftName_AR:e.shiftName_EN,")")}}function WC(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().save()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}const zC=function(){return{standalone:!0}};let XC=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d){super(p),this.translate=e,this.notifyService=o,this.utilService=n,this.dialog=s,this.apiService=r,this.dialogRef=c,this.authService=p,this.fb=u,this.oprService=d,this.inputShift="",this.updatedShift="",this.isArabic=!1}ngOnInit(){var e,o;this.isArabic=this.utilService.isArabic(),this.inputShift=null===(e=this.inputData)||void 0===e?void 0:e.shiftCode,this.updatedShift=null===(o=this.inputData)||void 0===o?void 0:o.shiftCode,this.getEmployee(this.inputData.roasterData.employeeNumber),console.log(this.inputData)}getEmployee(e){this.apiService.getall(`Employee/getEmployeeByEmployeeNumber/${e}`).subscribe(o=>{o.name=this.isArabic?o.employeeName_AR:o.employeeName,this.employeeData=o})}closeModel(){this.dialogRef.close(!1)}save(){""!=this.updatedShift&&this.updatedShift!=this.inputShift&&this.apiService.post("monthlyRoaster/updateShiftCodeForDay",{day:this.inputData.c,roasterId:this.inputData.roasterData.id,shiftCode:this.updatedShift}).subscribe(o=>{this.dialogRef.close(o>0?{result:o,res:!0,r:this.inputData.r,c:this.inputData.c,isShiftUpdated:!0,updatedShift:this.updatedShift}:{result:o,res:!1})},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o),this.dialogRef.close({result:-4,res:!1})})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.sK),t.Y36(w.g),t.Y36(y.t),t.Y36(T.uw),t.Y36(b.s),t.Y36(T.so),t.Y36(x._),t.Y36(l.qu),t.Y36(W.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-update-employee-shift"]],features:[t.qOj],decls:43,vars:34,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["id","zero_config",1,"table","table-bordered","no-wrap"],["colspan","8"],[1,"row",2,"align-content","center"],[1,"col-md-3","col-lg-3"],[1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row"],[1,"col2-md-12","col-lg-12"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","button","class","btn waves-effect waves-light btn-rounded btn-success   btn-secondary btn-midblock",3,"value","click",4,"ngIf"],[3,"value"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-success","btn-secondary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.qZA(),t.TgZ(2,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(3," \xd7"),t.qZA(),t.TgZ(4,"table",2),t.TgZ(5,"tr"),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"td"),t._uU(15),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"date"),t.qZA(),t.TgZ(22,"th"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"tr"),t.TgZ(28,"td",3),t.TgZ(29,"div",4),t.TgZ(30,"div",5),t.TgZ(31,"select",6),t.NdJ("ngModelChange",function(s){return o.updatedShift=s}),t.TgZ(32,"option",7),t._uU(33),t.ALo(34,"translate"),t.ALo(35,"translate"),t.qZA(),t.YNc(36,GC,2,3,"option",8),t.qZA(),t.qZA(),t.TgZ(37,"div",9),t.TgZ(38,"div",10),t.TgZ(39,"input",11),t.NdJ("click",function(){return o.closeModel()}),t.ALo(40,"translate"),t.qZA(),t._uU(41," \xa0 "),t.YNc(42,WC,2,3,"input",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Update_Shift"),t.xp6(6),t.Oqu(t.lcZ(8,16,"Employee_ID")),t.xp6(3),t.Oqu(null==o.employeeData?null:o.employeeData.employeeID),t.xp6(2),t.Oqu(t.lcZ(13,18,"Name")),t.xp6(3),t.Oqu(null==o.employeeData?null:o.employeeData.name),t.xp6(2),t.Oqu(t.lcZ(18,20,"Date")),t.xp6(3),t.Oqu(t.xi3(21,22,null==o.inputData?null:o.inputData.attnDate,"dd-MM-YYYY")),t.xp6(3),t.Oqu(t.lcZ(24,25,"Actual_Shift")),t.xp6(3),t.Oqu(null==o.inputData?null:o.inputData.shiftCode),t.xp6(5),t.Q6J("ngModel",o.updatedShift)("ngModelOptions",t.DdM(33,zC)),t.xp6(2),t.AsE("",t.lcZ(34,27,"Select")," ",t.lcZ(35,29,"Shift")," "),t.xp6(3),t.Q6J("ngForOf",o.inputData.shiftCodesSelectionList),t.xp6(3),t.s9C("value",t.lcZ(40,31,"Cancel")),t.xp6(3),t.Q6J("ngIf",o.updatedShift!=o.inputShift&&""!=o.updatedShift))},directives:[l.EJ,l.JJ,l.On,l.YN,l.Kr,f.sg,f.O5],pipes:[Z.X$,f.uU],encapsulation:2}),i})();function KC(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.employee?null:e.employee.employeeNumber," ")}}function t0(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.altEmployee?null:e.altEmployee.employeeNumber," ")}}function e0(i,a){if(1&i&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.AsE(" ",e.text,"-",e.textTwo," ")}}const Se=function(){return{standalone:!0}};function o0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"span"),t._UZ(2,"auto-loader",14),t._UZ(3,"input",15),t.ALo(4,"translate"),t.ALo(5,"translate"),t.TgZ(6,"mat-autocomplete",16,17),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().autoSelectionEmployeeNumber(n)}),t.YNc(8,e0,2,3,"mat-option",18),t.ALo(9,"async"),t.qZA(),t.qZA(),t.TgZ(10,"span"),t.TgZ(11,"input",19),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().canShowAllEmployees=n})("change",function(){return t.CHM(e),t.oxw().changeEmployeeFilter()}),t.qZA(),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(7),o=t.oxw();t.xp6(2),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(4,9,"Enter")," ",t.lcZ(5,11,"Employee"),""),t.Q6J("formControl",o.empCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(9,13,o.filteredEmployeeNumbers)),t.xp6(3),t.Q6J("ngModel",o.canShowAllEmployees)("ngModelOptions",t.DdM(17,Se)),t.xp6(1),t.hij(" ",t.lcZ(13,15,"Show_All_Employees")," ")}}function i0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().editEmployee()}),t._UZ(1,"i",22),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("matTooltip",e.translateToolTip("edit_employee"))}}function n0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().editEmployee()}),t._UZ(1,"i",24),t.qZA()}}function a0(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.employee?null:e.employee.employeeName," ")}}function s0(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.altEmployee?null:e.altEmployee.employeeName," ")}}function r0(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.shift?null:e.shift.shiftCode," ")}}function l0(i,a){if(1&i&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.shiftCode),t.xp6(1),t.Oqu(e.shiftCode)}}function c0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",25),t.TgZ(1,"select",26),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().altShift.shiftCode=n})("change",function(n){return t.CHM(e),t.oxw().onSelectShift(n)}),t.TgZ(2,"option",27),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.YNc(6,l0,2,2,"option",18),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.altShift.shiftCode)("ngModelOptions",t.DdM(9,Se)),t.xp6(2),t.AsE("",t.lcZ(4,5,"Select")," ",t.lcZ(5,7,"Shift_Code")," "),t.xp6(3),t.Q6J("ngForOf",e.listOfShiftCodes)}}function p0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().updateShift()}),t._UZ(1,"i",22),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("matTooltip",e.translateToolTip("Change_Shift"))}}function u0(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.inputData.altShiftCode," ")}}function d0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",32),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).enterAttendance()}),t.TgZ(2,"i"),t._uU(3,"P-"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._uU(6," \xa0 "),t.qZA()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Present")))}function m0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",33),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).enterAbsent()}),t.TgZ(2,"i"),t._uU(3,"A-"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._uU(6,"\xa0 "),t.qZA()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Absent")))}function _0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",34),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).enterEmployeeLeave("AL")}),t._uU(2,"AL"),t.qZA(),t._uU(3,"\xa0 "),t.TgZ(4,"button",35),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).enterEmployeeLeave("EL")}),t._uU(5,"EL"),t.qZA(),t._uU(6,"\xa0 "),t.TgZ(7,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).enterEmployeeLeave("SL")}),t._uU(8,"SL"),t.qZA(),t._uU(9,"\xa0 "),t.TgZ(10,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).enterEmployeeLeave("UL")}),t._uU(11,"UL"),t.qZA(),t._uU(12,"\xa0 "),t.TgZ(13,"button",36),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).enterEmployeeLeave("STL")}),t._uU(14,"STL"),t.qZA(),t._uU(15,"\xa0 "),t.qZA()}}function g0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return n.cancelEmployeeLeave(n.inputData.leavesData.id)}),t.TgZ(2,"i"),t._uU(3,"CL-"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._uU(6,"\xa0 "),t.qZA()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Cancel_Leave")))}function h0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return n.cancelEmployeeLeave(n.inputData.leavesData.id)}),t.TgZ(2,"i"),t._uU(3,"CW-"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._uU(6,"\xa0 "),t.qZA()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Cancel_Withdrawal")))}function f0(i,a){if(1&i&&(t.TgZ(0,"td",28),t.YNc(1,_0,16,0,"span",6),t.YNc(2,g0,7,3,"span",6),t.YNc(3,h0,7,3,"span",6),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!(e.inputData.isWithDrawn||e.inputData.isTransfered||e.inputData.isResigned||e.inputData.isTerminated||e.inputData.isOnLeave)),t.xp6(1),t.Q6J("ngIf",e.inputData.isOnLeave),t.xp6(1),t.Q6J("ngIf",e.inputData.isWithDrawn)}}function Z0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",38),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).enterEmployeeLeave("W")}),t.TgZ(2,"i"),t._uU(3,"W-"),t.qZA(),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._uU(6,"\xa0 "),t.qZA()}2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"Withdraw")))}function C0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td",28),t.YNc(2,Z0,7,3,"span",6),t.TgZ(3,"span"),t.TgZ(4,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).enterEmployeeTransResign("TR")}),t.TgZ(5,"i"),t._uU(6,"TR-"),t.qZA(),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._uU(9,"\xa0 "),t.qZA(),t.TgZ(10,"span"),t.TgZ(11,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).enterEmployeeTransResign("R")}),t.TgZ(12,"i"),t._uU(13,"R-"),t.qZA(),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._uU(16,"\xa0 "),t.qZA(),t.TgZ(17,"span"),t.TgZ(18,"button",37),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).enterEmployeeTransResign("X")}),t.TgZ(19,"i"),t._uU(20,"X-"),t.qZA(),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._uU(23,"\xa0 "),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!e.inputData.isDefShiftOff),t.xp6(5),t.Oqu(t.lcZ(8,4,"Transfer")),t.xp6(7),t.Oqu(t.lcZ(15,6,"Resigned")),t.xp6(7),t.Oqu(t.lcZ(22,8,"Terminated"))}}function A0(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",39),t._uU(2),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.hij(" ",null==e.inputData||null==e.inputData.transORresignData?null:e.inputData.transORresignData.remarks," ")}}function T0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"table",4),t.TgZ(1,"tr"),t.TgZ(2,"td",28),t.YNc(3,d0,7,3,"span",6),t.YNc(4,m0,7,3,"span",6),t.TgZ(5,"span"),t.TgZ(6,"button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._UZ(7,"i",30),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._uU(10," \xa0 "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.YNc(12,f0,4,3,"td",31),t.qZA(),t.YNc(13,C0,24,10,"tr",6),t.YNc(14,A0,3,1,"tr",6),t.TgZ(15,"tr"),t.TgZ(16,"td"),t._uU(17," AL = Anuual Leave \u0627\u0644\u0639\u0637\u0644\u0629 \u0627\u0644\u0633\u0646\u0648\u064a\u0629 SL = Sick Leave \u0625\u062c\u0627\u0632\u0629 \u0645\u0631\u0636\u064a\u0629 EL = Emergrncy Leave \u0625\u062c\u0627\u0632\u0629 \u062e\u0627\u0635\u0629/\u0637\u0627\u0631\u0626\u0629 UL= Unpaid Leave \u0625\u062c\u0627\u0632\u0629 \u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0629 W = Withdraw \u0627\u0646\u0633\u062d\u0627\u0628 "),t.qZA(),t.qZA(),t.TgZ(18,"tr"),t.TgZ(19,"td"),t._uU(20," TR = Transferred \u0646\u0642\u0644 R = Resigned \u0645\u0633\u062a\u0642\u064a\u0644 X = Terminated \u0625\u0646\u0647\u0627\u0621 \u062e\u062f\u0645\u0627\u062a \u0627\u0644\u0645\u0648\u0638\u0641/\u0625\u0646\u0647\u0627\u0621 \u0641\u062a\u0631\u0629 \u062a\u062c\u0631\u0628\u0629/\u0641\u0635\u0644 "),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",!((0!=e.inputData.id||(null!=e.inputData&&e.inputData.isOnLeave||null!=e.inputData&&e.inputData.isWithDrawn||null!=e.inputData&&e.inputData.isTransfered||null!=e.inputData&&e.inputData.isResigned||null!=e.inputData&&e.inputData.isTerminated)&&(e.inputData.isDefShiftOff||e.inputData.isDefaultEmployee))&&(null==e.employee?null:e.employee.employeeNumber)==(null==e.altEmployee?null:e.altEmployee.employeeNumber))),t.xp6(1),t.Q6J("ngIf",!(!(e.inputData.id>0||0==e.inputData.id&&!e.inputData.isDefShiftOff&&!e.inputData.isPosted)||null!=e.inputData&&e.inputData.isOnLeave||null!=e.inputData&&e.inputData.isWithDrawn||null!=e.inputData&&e.inputData.isTransfered||null!=e.inputData&&e.inputData.isTerminated||null!=e.inputData&&e.inputData.isResigned||null!=e.inputData&&e.inputData.isDefShiftOff)),t.xp6(4),t.hij(" ",t.lcZ(9,6,"Cancel")," "),t.xp6(4),t.Q6J("ngIf",!e.inputData.isDefShiftOff),t.xp6(1),t.Q6J("ngIf",!(e.inputData.isWithDrawn||e.inputData.isTransfered||e.inputData.isResigned||e.inputData.isTerminated||e.inputData.isOnLeave)),t.xp6(1),t.Q6J("ngIf",(e.inputData.isTransfered||e.inputData.isResigned||e.inputData.isTerminated)&&e.inputData.isDefaultEmployee)}}let ke=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d){super(p),this.translate=e,this.notifyService=o,this.utilService=n,this.dialog=s,this.apiService=r,this.dialogRef=c,this.authService=p,this.fb=u,this.oprService=d,this.editEmp=!0,this.shift={shiftCode:""},this.altShift={shiftCode:""},this.listOfShiftCodes=[],this.editInTime=0,this.editOutTime=0,this.empCodeControl=new l.NI(""),this.employeeList=[],this.employeesForProjectSite=[],this.employeeNumber="",this.isDataLoading=!1,this.inTime="11:00",this.canShowAllEmployees=!1,this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,tt.O)(this.employeeNumber),(0,et.b)(n.autoDelay()),(0,ot.x)(),(0,it.w)(m=>(""!==m.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(m||""))))}ngOnInit(){console.log(this.inputData),this.inputData.isPrimarySite||(this.inputData.isDefaultEmployee=!0),this.loadShiftCodes(),this.getEmployee(this.inputData.employeeNumber),""!=this.inputData.altEmployeeNumber&&this.getAltEmployee(this.inputData.altEmployeeNumber),this.getShift(this.inputData.shiftCode),""!=this.inputData.altShiftCode&&this.getAltShift(this.inputData.altShiftCode),this.setForm()}setForm(){this.form=this.fb.group({})}closeModel(){this.dialogRef.close()}submit(){}editEmployee(){this.editEmp=!this.editEmp}getEmployee(e){this.apiService.get("Employee/getEmployeeByEmployeeNumber/",e).subscribe(o=>{o&&(this.employee=o)})}getAltEmployee(e){this.apiService.get("Employee/getEmployeeByEmployeeNumber/",e).subscribe(o=>{o&&(this.altEmployee=o)})}getShift(e){""!=e&&this.apiService.getall("ShiftMaster/getShiftMasterByShiftMasterCode/"+e).subscribe(o=>{o&&(this.shift=o,this.inputData.id>0&&(this.shift.inTime=o.inTime.toString().substring(0,5),this.shift.outTime=o.outTime.toString().substring(0,5)))})}getAltShift(e){""!=e&&this.apiService.getall("ShiftMaster/getShiftMasterByShiftMasterCode/"+e).subscribe(o=>{o&&(this.altShift=o,this.altShift.isOff&&(this.altShift.shiftCode=""))})}changeTime(e,o){let n=Number(this.shift.inTime.split(":")[0]),s=Number(this.shift.outTime.split(":")[0]),r=Number(this.shift.inTime.split(":")[1]),c=Number(this.shift.outTime.split(":")[1]);"intime"==e?this.shift.inTime=this.minsToTimeString(60*n+this.editInTime+r):this.shift.outTime=this.minsToTimeString(60*s+c+this.editOutTime),this.editOutTime=0,this.editInTime=0}minsToTimeString(e){let o=e>0?Math.floor(e/60)%24:Math.floor((e+1440)/60)%24,n=e>0?Math.floor(e%60):e+60;return this.padLeft(o.toString(),"0",2)+":"+this.padLeft(n.toString(),"0",2)}padLeft(e,o,n){return(String(o).repeat(n)+e).substr(-1*n,n)}onSelectShift(e){this.getAltShift(e.target.value),this.getShift(e.target.value)}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.inputData.projectCode}/${this.inputData.siteCode}`).subscribe(e=>{this.listOfShiftCodes=e})}enterAttendance(){if(this.inputData.altShiftCode=this.inputData.isDefShiftOff?this.altShift.shiftCode:"",this.inputData.isDefShiftOff||this.inputData.isDefaultEmployee?this.inputData.isDefShiftOff?(this.inputData.attendance="P",this.inputData.altEmployeeNumber=this.altEmployee.employeeNumber):this.inputData.altEmployeeNumber="":(this.inputData.attendance="S",this.inputData.altEmployeeNumber=this.altEmployee.employeeNumber),(this.inputData.altEmployeeNumber==this.inputData.employeeNumber||""==this.inputData.altEmployeeNumber)&&(this.inputData.isDefaultEmployee=!0),this.inputData.inTime=this.shift.inTime,this.inputData.outTime=this.shift.outTime,this.inputData.isDefShiftOff&&""!=this.inputData.altShiftCode||!this.inputData.isDefShiftOff&&this.inputData.altShiftCode!=this.inputData.shiftCode){let e=Number(this.inputData.inTime.substr(0,2)),o=Number(this.inputData.inTime.substr(3,2)),c=60*Number(this.inputData.outTime.substr(0,2))+Number(this.inputData.outTime.substr(3,2))-60*e-o;c<0&&(c+=1440),60*this.inputData.daywiseConsolidateData.tch+this.inputData.daywiseConsolidateData.tch_min-this.inputData.daywiseConsolidateData.mins-60*this.inputData.daywiseConsolidateData.hours<c?this.notifyService.showError(this.translate.instant("Daily_Shift_Hours_Exceeding")):this.apiService.post("EmployeesAttendance/enterEmployeeAttendance",this.inputData).subscribe(p=>{this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData})},p=>{console.error(p),this.utilService.ShowApiErrorMessage(p)})}else this.notifyService.showError(this.translate.instant("Please")+" "+this.translate.instant("Select")+" "+this.translate.instant("Shift_Code"))}filterEmployeeNumbers(e){return this.canShowAllEmployees?this.apiService.getall(`Employee/getAutoSelectEmployeeList/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n})):this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.inputData.projectCode}/${this.inputData.siteCode}/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}autoSelectionEmployeeNumber(e){this.inputData.employeeNumber!=e.option.value.text||this.inputData.isDefShiftOff?(this.altEmployee.employeeNumber=e.option.value.text,this.altEmployee.employeeID=e.option.value.value,this.altEmployee.employeeName=e.option.value.textTwo,this.inputData.isDefaultEmployee=!1):(this.altEmployee.employeeNumber="",this.altEmployee.employeeName="",this.inputData.isDefaultEmployee=!0),this.empCodeControl.setValue(""),this.editEmp=!0}enterAbsent(){!this.inputData.isDefShiftOff&&this.inputData.isDefaultEmployee&&(this.inputData.attendance="A",this.inputData.isDefaultEmployee=!0,this.inputData.inTime=this.shift.inTime,this.inputData.outTime=this.shift.outTime,this.apiService.post("EmployeesAttendance/enterEmployeeAbsent",this.inputData).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData})},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}))}enterEmployeeLeave(e){let o={employeeNumber:this.inputData.employeeNumber,attnDate:this.inputData.attnDate,al:!1,el:!1,ul:!1,sl:!1,stl:!1,w:!1,projectCode:this.inputData.projectCode,siteCode:this.inputData.siteCode,shiftCode:this.inputData.shiftCode};switch(e){case"AL":o.al=!0;break;case"EL":o.el=!0;break;case"UL":o.ul=!0;break;case"SL":o.sl=!0;break;case"STL":o.stl=!0;break;case"W":o.w=!0;break;default:console.log("Default")}this.openConfirmationDialog(g.O.create,"Are_You_Sure?",e,xt,this.inputCellData,this.inputData,o,"leave")}openConfirmationDialog(e,o,n,s,r,c,p,u){let d=this.oprService.confirmationDialog(this.dialog,s);d.componentInstance.dbops=e,d.componentInstance.modalTitle=o,d.componentInstance.leaveType=n,d.componentInstance.cellData=r,d.componentInstance.outputData=c,d.componentInstance.leaveData=p,d.componentInstance.confirmType=u,d.afterClosed().subscribe(m=>{(m&&1==m||m.res)&&("leave"==u?this.apiService.post("EmployeeLeaves/enterEmployeeLeave",p).subscribe(h=>{console.log(h),this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData,leaveData:p,isConfirmedLeave:!0})},h=>{console.error(h),this.utilService.ShowApiErrorMessage(h)}):"transResign"==u?(p.remarks=m.remarks,this.apiService.post("EmployeeTransResign/enterEmployeeTransResign",p).subscribe(h=>{this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData,leaveData:p,confirmType:u})},h=>{console.error(h),this.utilService.ShowApiErrorMessage(h)})):"cancelLeave"==u&&(console.log(p),this.apiService.get("EmployeeLeaves/cancelLeave",p.id).subscribe(h=>{this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData,leaveData:p,confirmType:u})},h=>{console.error(h),this.utilService.ShowApiErrorMessage(h)})))})}openUpdateShiftWindow(e,o){let n=this.oprService.openAutoWidthDialog(this.dialog,o);n.componentInstance.inputData=e,n.afterClosed().subscribe(s=>{(null==s?void 0:s.result)>0?(this.dialogRef.close({res:!0,isUpdatedShift:!0,r:this.inputData.r,c:this.inputData.c,updatedShift:s.updatedShift}),this.notifyService.showSuccess("Success")):0==s||(this.notifyService.showError("Failed"),this.dialogRef.close(!1))})}enterEmployeeTransResign(e){let o={employeeNumber:this.inputData.employeeNumber,attnDate:this.inputData.attnDate,projectCode:this.inputData.projectCode,siteCode:this.inputData.siteCode,r:!1,tr:!1};switch(e){case"R":o.r=!0;break;case"TR":o.tr=!0;break;case"X":o.r=!1,o.tr=!1;break;default:console.log("Default")}this.openConfirmationDialog(g.O.create,"Are_You_Sure?",e,xt,this.inputCellData,this.inputData,o,"transResign")}cancelEmployeeLeave(e){this.openConfirmationDialog(g.O.create,"Are_You_Sure?","",xt,this.inputCellData,this.inputData,{id:e},"cancelLeave")}updateShift(){this.inputData.c=this.inputData.attnDate.toString().split("-")[2]-1,this.openUpdateShiftWindow(this.inputData,XC)}translateToolTip(e){return`${this.translate.instant(e)}`}changeEmployeeFilter(){this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,tt.O)(this.employeeNumber),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(e||""))))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.sK),t.Y36(w.g),t.Y36(y.t),t.Y36(T.uw),t.Y36(b.s),t.Y36(T.so),t.Y36(x._),t.Y36(l.qu),t.Y36(W.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-manual-attendance-popup"]],features:[t.qOj],decls:53,vars:41,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"col-md-12","col-lg-12"],[2,"width","100%"],[2,"padding-right","5px","width","auto"],[4,"ngIf"],["class","clickaction clickicons",3,"matTooltip","click",4,"ngIf"],["class","clickaction clickicons",3,"click",4,"ngIf"],[2,"padding-right","5px"],["style","width:80%",4,"ngIf"],["type","time","id","inTimeNew",3,"ngModel","ngModelOptions","ngModelChange"],["type","time","id","outTimeNew",3,"ngModel","ngModelOptions","ngModelChange"],["style","width:100%",4,"ngIf"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto_emp","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","ngModelOptions","ngModelChange","change"],[3,"value"],[1,"clickaction","clickicons",3,"matTooltip","click"],[1,"fas","fa-pencil-alt"],[1,"clickaction","clickicons",3,"click"],[1,"far","fa-times-circle"],[2,"width","80%"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["value",""],["align","center",2,"padding-bottom","10px"],["type","button",1,"btn","btn-dark",3,"click"],[1,"icon-close"],["align","center","style","padding-bottom:10px",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-light","btn-success",3,"click"],["type","button",1,"btn","waves-effect","btn-danger",3,"click"],["type","button",1,"btn","waves-effect","waves-light","btn-warning",3,"click"],["type","button",1,"btn","waves-effect","btn-warning",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","waves-effect","waves-light","btn-info",3,"click"],["type","button",1,"btn","waves-effect","waves-light","btn-dark",3,"click"],["align","center",2,"padding-bottom","10px","color","red"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"table",4),t.TgZ(8,"tr"),t.TgZ(9,"td",5),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"td"),t.YNc(13,KC,2,1,"span",6),t.YNc(14,t0,2,1,"span",6),t.qZA(),t.YNc(15,o0,14,18,"td",6),t.TgZ(16,"td"),t.YNc(17,i0,2,1,"span",7),t.YNc(18,n0,2,0,"span",8),t.qZA(),t.qZA(),t.TgZ(19,"tr"),t._UZ(20,"td"),t.TgZ(21,"td",9),t.YNc(22,a0,2,1,"span",6),t.YNc(23,s0,2,1,"span",6),t.qZA(),t.qZA(),t.TgZ(24,"tr"),t.TgZ(25,"td",9),t._uU(26),t.ALo(27,"translate"),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"td"),t._uU(30),t.qZA(),t.qZA(),t.TgZ(31,"tr"),t.TgZ(32,"td"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.YNc(35,r0,2,1,"td",6),t.YNc(36,c0,7,10,"td",10),t.TgZ(37,"td"),t.YNc(38,p0,2,1,"span",7),t.qZA(),t.YNc(39,u0,2,1,"td",6),t.qZA(),t.TgZ(40,"tr"),t.TgZ(41,"td",9),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"td"),t.TgZ(45,"input",11),t.NdJ("ngModelChange",function(s){return o.shift.inTime=s}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"tr"),t.TgZ(47,"td",9),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"td"),t.TgZ(51,"input",12),t.NdJ("ngModelChange",function(s){return o.shift.outTime=s}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(52,T0,21,8,"table",13),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,25,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.hij(" ",t.lcZ(11,27,"Employee")," "),t.xp6(3),t.Q6J("ngIf",o.inputData.isDefaultEmployee),t.xp6(1),t.Q6J("ngIf",!o.inputData.isDefaultEmployee),t.xp6(1),t.Q6J("ngIf",!o.editEmp),t.xp6(2),t.Q6J("ngIf",o.editEmp&&0==o.inputData.id),t.xp6(1),t.Q6J("ngIf",!o.editEmp),t.xp6(4),t.Q6J("ngIf",null==o.inputData?null:o.inputData.isDefaultEmployee),t.xp6(1),t.Q6J("ngIf",!o.inputData.isDefaultEmployee),t.xp6(3),t.AsE("",t.lcZ(27,29,"Attendance")," ",t.lcZ(28,31,"Date"),""),t.xp6(4),t.Oqu(null==o.inputData?null:o.inputData.attnDate.toString().substring(0,10)),t.xp6(3),t.hij(" ",t.lcZ(34,33,"Shift")," "),t.xp6(2),t.Q6J("ngIf",!(null!=o.inputData&&o.inputData.isDefShiftOff)),t.xp6(1),t.Q6J("ngIf",(null==o.inputData?null:o.inputData.isDefShiftOff)&&0==(null==o.inputData?null:o.inputData.id)&&o.inputData.isPrimarySite),t.xp6(2),t.Q6J("ngIf",!(0!=(null==o.inputData?null:o.inputData.id)||null!=o.inputData&&o.inputData.isOnLeave||null!=o.inputData&&o.inputData.isWithDrawn)),t.xp6(1),t.Q6J("ngIf",(null==o.inputData?null:o.inputData.isDefShiftOff)&&(null==o.inputData?null:o.inputData.id)>0),t.xp6(3),t.Oqu(t.lcZ(43,35,"IN_Time")),t.xp6(3),t.Q6J("ngModel",o.shift.inTime)("ngModelOptions",t.DdM(39,Se)),t.xp6(3),t.Oqu(t.lcZ(49,37,"OUT_Time")),t.xp6(3),t.Q6J("ngModel",o.shift.outTime)("ngModelOptions",t.DdM(40,Se)),t.xp6(1),t.Q6J("ngIf",o.inputData.isPrimarySite&&!(null!=o.inputData&&o.inputData.isPosted)))},directives:[l._Y,l.JL,l.sg,f.O5,l.Fj,l.JJ,l.On,ht.z,at.ZL,l.oH,at.XC,f.sg,l.Wl,St.ey,rt.gM,l.EJ,l.YN,l.Kr],pipes:[Z.X$,f.Ov],encapsulation:2}),i})();function v0(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.employee?null:e.employee.employeeNumber," ")}}function x0(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.altEmployee?null:e.altEmployee.employeeNumber," ")}}function q0(i,a){if(1&i&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.AsE(" ",e.text,"-",e.textTwo," ")}}const Me=function(){return{standalone:!0}};function b0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"span"),t._UZ(2,"auto-loader",13),t._UZ(3,"input",14),t.ALo(4,"translate"),t.ALo(5,"translate"),t.TgZ(6,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().autoSelectionEmployeeNumber(n)}),t.YNc(8,q0,2,3,"mat-option",17),t.ALo(9,"async"),t.qZA(),t.qZA(),t.TgZ(10,"span"),t.TgZ(11,"input",18),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().canShowAllEmployees=n})("change",function(){return t.CHM(e),t.oxw().changeEmployeeFilter()}),t.qZA(),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(7),o=t.oxw();t.xp6(2),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(4,9,"Enter")," ",t.lcZ(5,11,"Employee"),""),t.Q6J("formControl",o.empCodeControl)("matAutocomplete",e),t.xp6(5),t.Q6J("ngForOf",t.lcZ(9,13,o.filteredEmployeeNumbers)),t.xp6(3),t.Q6J("ngModel",o.canShowAllEmployees)("ngModelOptions",t.DdM(17,Me)),t.xp6(1),t.hij(" ",t.lcZ(13,15,"Show_All_Employees")," ")}}function y0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().editEmployee()}),t._UZ(1,"i",21),t.qZA()}}function S0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().editEmployee()}),t._UZ(1,"i",22),t.qZA()}}function w0(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.employee?null:e.employee.employeeName," ")}}function U0(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.altEmployee?null:e.altEmployee.employeeName," ")}}function L0(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.shift?null:e.shift.shiftCode," ")}}function D0(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.inputData.altShiftCode," ")}}function N0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).enterAttendance()}),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(1),t.AsE("",t.lcZ(2,2,"Update")," ",t.lcZ(3,4,"Attendance"),""))}function E0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr",23),t.TgZ(1,"td"),t.YNc(2,N0,4,6,"button",24),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelAttendance()}),t._uU(5),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._UZ(10,"i",27),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!e.inputData.isAbsent),t.xp6(3),t.AsE("",t.lcZ(6,4,"Cancel")," ",t.lcZ(7,6,"Attendance"),""),t.xp6(6),t.hij(" ",t.lcZ(12,8,"Close")," ")}}function O0(i,a){1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",29),t._uU(2,"Attendance Already Posted, You Can't Update"),t.qZA(),t.qZA())}let Re=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u){super(c),this.translate=e,this.notifyService=o,this.utilService=n,this.apiService=s,this.dialogRef=r,this.authService=c,this.fb=p,this.dialog=u,this.editEmp=!0,this.shift={shiftCode:""},this.altShift={shiftCode:""},this.listOfShiftCodes=[],this.editInTime=0,this.editOutTime=0,this.empCodeControl=new l.NI(""),this.employeeList=[],this.employeesForProjectSite=[],this.employeeNumber="",this.isDataLoading=!1,this.canShowAllEmployees=!1,this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,tt.O)(this.employeeNumber),(0,et.b)(n.autoDelay()),(0,ot.x)(),(0,it.w)(d=>(""!==d.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(d||""))))}ngOnInit(){console.log(this.inputData),""==this.inputData.altEmployeeNumber?(this.inputData.altEmployeeNumber=this.inputData.employeeNumber,this.inputData.isDefaultEmployee=!0):this.inputData.isDefaultEmployee=!1,this.loadShiftCodes(),this.getEmployee(this.inputData.employeeNumber),""!=this.inputData.altEmployeeNumber&&this.getAltEmployee(this.inputData.altEmployeeNumber),this.getShift(this.inputData.shiftCode),""!=this.inputData.altShiftCode&&this.getAltShift(this.inputData.altShiftCode),this.setForm()}setForm(){this.form=this.fb.group({})}closeModel(){this.dialogRef.close()}submit(){}editEmployee(){this.editEmp=!this.editEmp}getEmployee(e){this.apiService.get("Employee/getEmployeeByEmployeeNumber/",e).subscribe(o=>{o&&(this.employee=o)})}getAltEmployee(e){this.apiService.get("Employee/getEmployeeByEmployeeNumber/",e).subscribe(o=>{o&&(this.altEmployee=o)})}getShift(e){""!=e&&this.apiService.getall("ShiftMaster/getShiftMasterByShiftMasterCode/"+e).subscribe(o=>{o&&(this.shift=o,this.inputData.id>0&&(this.shift.inTime=this.inputData.inTime.toString().substring(0,5),this.shift.outTime=this.inputData.outTime.toString().substring(0,5)))})}getAltShift(e){""!=e&&this.apiService.getall("ShiftMaster/getShiftMasterByShiftMasterCode/"+e).subscribe(o=>{o&&(this.altShift=o,this.altShift.isOff&&(this.altShift.shiftCode=""))})}changeTime(e,o){let n=Number(this.shift.inTime.split(":")[0]),s=Number(this.shift.outTime.split(":")[0]),r=Number(this.shift.inTime.split(":")[1]),c=Number(this.shift.outTime.split(":")[1]);"intime"==e?this.shift.inTime=this.minsToTimeString(60*n+this.editInTime+r):this.shift.outTime=this.minsToTimeString(60*s+c+this.editOutTime),this.editOutTime=0,this.editInTime=0}minsToTimeString(e){let o=e>0?Math.floor(e/60)%24:Math.floor((e+1440)/60)%24,n=e>0?Math.floor(e%60):e+60;return n>=60&&(o++,n-=60),this.padLeft(o.toString(),"0",2)+":"+this.padLeft(n.toString(),"0",2)}padLeft(e,o,n){return(String(o).repeat(n)+e).substr(-1*n,n)}onSelectShift(e){this.getAltShift(e.target.value),this.getShift(e.target.value)}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode/${this.inputData.projectCode}/${this.inputData.siteCode}`).subscribe(e=>{this.listOfShiftCodes=e})}enterAttendance(){if(this.inputData.altShiftCode=this.inputData.isDefShiftOff?this.altShift.shiftCode:"",this.inputData.isDefShiftOff||this.inputData.isDefaultEmployee?this.inputData.isDefShiftOff?(this.inputData.attendance="P",this.inputData.altEmployeeNumber=this.altEmployee.employeeNumber):this.inputData.altEmployeeNumber="":(this.inputData.attendance="A",this.inputData.altEmployeeNumber=this.altEmployee.employeeNumber),(this.inputData.altEmployeeNumber==this.inputData.employeeNumber||""==this.inputData.altEmployeeNumber)&&(this.inputData.isDefaultEmployee=!0),this.inputData.inTime=this.shift.inTime,this.inputData.outTime=this.shift.outTime,this.inputData.isDefShiftOff&&""!=this.inputData.altShiftCode||!this.inputData.isDefShiftOff&&this.inputData.altShiftCode!=this.inputData.shiftCode){let e=Number(this.inputData.inTime.substr(0,2)),o=Number(this.inputData.inTime.substr(3,2)),c=60*Number(this.inputData.outTime.substr(0,2))+Number(this.inputData.outTime.substr(3,2))-60*e-o;c<0&&(c+=1440),this.inputData.nwTime.totalMinutes+60*this.inputData.daywiseConsolidateData.tch+this.inputData.daywiseConsolidateData.tch_min-this.inputData.daywiseConsolidateData.mins-60*this.inputData.daywiseConsolidateData.hours<c?this.notifyService.showError(this.translate.instant("Daily_Shift_Hours_Exceeding")):this.apiService.post("EmployeesAttendance/enterEmployeeAttendance",this.inputData).subscribe(p=>{this.utilService.OkMessage(),this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData})},p=>{console.error(p),this.utilService.ShowApiErrorMessage(p)})}else this.notifyService.showError(this.translate.instant("Please")+" "+this.translate.instant("Select")+" "+this.translate.instant("Shift_Code"))}filterEmployeeNumbers(e){return this.canShowAllEmployees?this.apiService.getall(`Employee/getAutoSelectEmployeeList/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n})):this.apiService.getall(`EmployeesToProjectSite/getAutoFillEmployeeListForProjectSite/${this.inputData.projectCode}/${this.inputData.siteCode}/?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}autoSelectionEmployeeNumber(e){this.inputData.employeeNumber!=e.option.value.text?(this.altEmployee.employeeNumber=e.option.value.text,this.altEmployee.employeeID=e.option.value.value,this.altEmployee.employeeName=e.option.value.textTwo,this.inputData.isDefaultEmployee=!1):(this.altEmployee.employeeNumber="",this.altEmployee.employeeName="",this.inputData.isDefaultEmployee=!0),this.empCodeControl.setValue(""),this.editEmp=!0}cancelAttendance(){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(o=>{o&&this.inputData.id>0&&this.apiService.get("EmployeesAttendance/CancelAttendance",this.inputData.id).subscribe(n=>{0==n.id?this.notifyService.showError(this.translate.instant("something went wrong")):-1==n.id?this.notifyService.showError(this.translate.instant("Attendance_Already_Posted")):-100==n.id?(this.inputData.primaryEmployee=n,this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData,isRoasterRemoved:!0}),this.utilService.OkMessage()):-101==n.id?(this.inputData.primaryEmployee=n,this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData,r:this.inputCellData.r,c:this.inputCellData.c,isNotPrimaryAtt:!0}),this.utilService.OkMessage()):(this.inputData.primaryEmployee=n,this.dialogRef.close({res:!0,cellData:this.inputCellData,outputData:this.inputData}),this.utilService.OkMessage())})})}changeEmployeeFilter(){this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,tt.O)(this.employeeNumber),(0,et.b)(this.utilService.autoDelay()),(0,ot.x)(),(0,it.w)(e=>(""!==e.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(e||""))))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.sK),t.Y36(w.g),t.Y36(y.t),t.Y36(b.s),t.Y36(T.so),t.Y36(x._),t.Y36(l.qu),t.Y36(T.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-update-manual-attendance-popup"]],features:[t.qOj],decls:53,vars:40,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"col-md-12","col-lg-12"],[2,"width","100%"],[2,"padding-right","5px","width","auto"],[4,"ngIf"],["class","clickaction clickicons",3,"click",4,"ngIf"],[2,"padding-right","5px"],["type","time","id","inTimeNew",3,"ngModel","ngModelOptions","ngModelChange"],["type","time","id","outTimeNew",3,"ngModel","ngModelOptions","ngModelChange"],[2,"padding-top","10px"],["style","text-align:center",4,"ngIf"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto_emp","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","ngModelOptions","ngModelChange","change"],[3,"value"],[1,"clickaction","clickicons",3,"click"],[1,"fas","fa-pencil-alt"],[1,"far","fa-times-circle"],[2,"text-align","center"],["type","button","class","btn waves-effect waves-light btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"icon-close"],["type","button",1,"btn","waves-effect","waves-light","btn-success",3,"click"],["width","100%",2,"color","red","text-align","center"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"table",4),t.TgZ(8,"tr"),t.TgZ(9,"td",5),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"td"),t.YNc(13,v0,2,1,"span",6),t.YNc(14,x0,2,1,"span",6),t.qZA(),t.YNc(15,b0,14,18,"td",6),t.TgZ(16,"td"),t.YNc(17,y0,2,0,"span",7),t.YNc(18,S0,2,0,"span",7),t.qZA(),t.qZA(),t.TgZ(19,"tr"),t._UZ(20,"td"),t.TgZ(21,"td",8),t.YNc(22,w0,2,1,"span",6),t.YNc(23,U0,2,1,"span",6),t.qZA(),t.qZA(),t.TgZ(24,"tr"),t.TgZ(25,"td",8),t._uU(26),t.ALo(27,"translate"),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"td"),t._uU(30),t.qZA(),t.qZA(),t.TgZ(31,"tr"),t.TgZ(32,"td"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.YNc(35,L0,2,1,"td",6),t.YNc(36,D0,2,1,"td",6),t.qZA(),t.TgZ(37,"tr"),t.TgZ(38,"td",8),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"td"),t.TgZ(42,"input",9),t.NdJ("ngModelChange",function(s){return o.shift.inTime=s}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"tr"),t.TgZ(44,"td",8),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"td"),t.TgZ(48,"input",10),t.NdJ("ngModelChange",function(s){return o.shift.outTime=s}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",11),t.TgZ(50,"table",4),t.YNc(51,E0,13,10,"tr",12),t.YNc(52,O0,3,0,"tr",6),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,24,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.hij(" ",t.lcZ(11,26,"Employee")," "),t.xp6(3),t.Q6J("ngIf",o.inputData.isDefaultEmployee),t.xp6(1),t.Q6J("ngIf",!o.inputData.isDefaultEmployee),t.xp6(1),t.Q6J("ngIf",!o.editEmp),t.xp6(2),t.Q6J("ngIf",o.editEmp&&o.inputData.isPrimarySite),t.xp6(1),t.Q6J("ngIf",!o.editEmp),t.xp6(4),t.Q6J("ngIf",o.inputData.isDefaultEmployee),t.xp6(1),t.Q6J("ngIf",!o.inputData.isDefaultEmployee),t.xp6(3),t.AsE("",t.lcZ(27,28,"Attendance")," ",t.lcZ(28,30,"Date"),""),t.xp6(4),t.Oqu(null==o.inputData?null:o.inputData.attnDate.toString().substring(0,10)),t.xp6(3),t.hij(" ",t.lcZ(34,32,"Shift")," "),t.xp6(2),t.Q6J("ngIf",!(null!=o.inputData&&o.inputData.isDefShiftOff)),t.xp6(1),t.Q6J("ngIf",null==o.inputData?null:o.inputData.isDefShiftOff),t.xp6(3),t.Oqu(t.lcZ(40,34,"IN_Time")),t.xp6(3),t.Q6J("ngModel",o.shift.inTime)("ngModelOptions",t.DdM(38,Me)),t.xp6(3),t.Oqu(t.lcZ(46,36,"OUT_Time")),t.xp6(3),t.Q6J("ngModel",o.shift.outTime)("ngModelOptions",t.DdM(39,Me)),t.xp6(3),t.Q6J("ngIf",!o.inputData.isPosted),t.xp6(1),t.Q6J("ngIf",o.inputData.isPosted))},directives:[l._Y,l.JL,l.sg,f.O5,l.Fj,l.JJ,l.On,ht.z,at.ZL,l.oH,at.XC,f.sg,l.Wl,St.ey],pipes:[Z.X$,f.Ov],encapsulation:2}),i})(),Pe=(()=>{class i extends q{constructor(e,o,n,s,r,c,p){super(r),this.apiService=e,this.notifyService=o,this.utilService=n,this.translate=s,this.authService=r,this.fb=c,this.dialogRef=p,this.curDate=Date.now,this.isLoading=!1}ngOnInit(){console.log(this.inputAttendanceData),this.setForm()}setForm(){this.form=this.fb.group({date:["",l.kI.required]})}submit(){}closeModel(){this.dialogRef.close()}postAttendance(){if(!this.isLoading&&this.form.valid){this.isLoading=!0;let e=new Date(this.form.controls.date.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.apiService.post("PostingMonthlyAttendance/postEmployeeAttendanceWithDate",{projectCode:this.projectCode,siteCode:this.siteCode,todate:e,fromdate:this.minPostDate}).subscribe(n=>{this.utilService.OkMessage(),this.isLoading=!1,this.dialogRef.close(!0)},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n),this.isLoading=!1})}else this.notifyService.showWarning(this.form.valid?this.translate.instant("Please_wait")+"...":this.translate.instant("Enter_Date")+"...")}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(w.g),t.Y36(y.t),t.Y36(Z.sK),t.Y36(x._),t.Y36(l.qu),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-postattendancewithdate"]],features:[t.qOj],decls:34,vars:23,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-auto",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"col-md-12","col-lg-12"],[1,"row"],[1,"col-md-5","col-lg-5"],[1,"form-group"],[1,"input-group","mb-2"],[1,"mr-sm-2"],["formControlName","date",1,"form-control","datapickerinput",3,"matDatepicker","min","max","placeholder","click"],["matSuffix","",3,"for"],["data-date-format","yyyy/mm/dd"],["picker1",""],[3,"control"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",9),t.TgZ(13,"label",10),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._uU(16,"\xa0 "),t.TgZ(17,"input",11),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(21);return o.openDatePicker(r)}),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"mat-datepicker-toggle",12),t._UZ(20,"mat-datepicker",13,14),t.qZA(),t._UZ(22,"validation-message",15),t.qZA(),t.qZA(),t.TgZ(23,"div",7),t.TgZ(24,"div",8),t.TgZ(25,"div",9),t.TgZ(26,"input",16),t.NdJ("click",function(){return o.postAttendance()}),t.ALo(27,"translate"),t.qZA(),t._uU(28," \xa0 "),t.TgZ(29,"input",16),t.NdJ("click",function(){return o.closeModel()}),t.ALo(30,"translate"),t.qZA(),t._uU(31," \xa0 "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",17),t._UZ(33,"spinner-loader",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(21);t.xp6(1),t.Oqu(t.lcZ(2,13,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(9),t.Oqu(t.lcZ(15,15,"To_Date")),t.xp6(3),t.hYB("placeholder","",t.lcZ(18,17,"Select")," ","To_Date",""),t.Q6J("matDatepicker",n)("min",o.minPostDate)("max",o.maxPostDate),t.xp6(2),t.Q6J("for",n),t.xp6(3),t.Q6J("control",o.form.controls.date),t.xp6(4),t.s9C("value",t.lcZ(27,19,"Post")),t.xp6(3),t.s9C("value",t.lcZ(30,21,"Cancel")),t.xp6(4),t.Q6J("isLoading",o.isLoading)}},directives:[l._Y,l.JL,l.sg,l.Fj,M.hl,l.JJ,l.u,M.nW,gt.R9,M.Mq,G.s,_t.r],pipes:[Z.X$],encapsulation:2}),i})();const oo=function(){return{standalone:!0}};let Fe=(()=>{class i extends q{constructor(e,o,n,s,r,c,p){super(r),this.apiService=e,this.notifyService=o,this.utilService=n,this.translate=s,this.authService=r,this.fb=c,this.dialogRef=p,this.curDate=Date.now,this.isLoading=!1,this.clearAttnFor="selectedDay"}ngOnInit(){console.log(this.clearAttnFor),this.setForm()}setForm(){this.form=this.fb.group({date:["",l.kI.required]})}submit(){}closeModel(){this.dialogRef.close()}claerAttendance(){if(!this.isLoading&&this.form.valid){this.isLoading=!0;let e=new Date(this.form.controls.date.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.apiService.post("EmployeesAttendance/clearMonthlyAttendanceWithDate",{projectCode:this.projectCode,siteCode:this.siteCode,fromdate:e,todate:"selectedDay"==this.clearAttnFor?e:this.maxDate}).subscribe(n=>{this.utilService.OkMessage(),this.isLoading=!1,this.dialogRef.close(!0)},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n),this.isLoading=!1})}else this.notifyService.showWarning(this.form.valid?this.translate.instant("Please_wait")+"...":this.translate.instant("Enter_Date")+"...")}openDatePicker(e){e.open()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(w.g),t.Y36(y.t),t.Y36(Z.sK),t.Y36(x._),t.Y36(l.qu),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-clearattendancewithdate"]],features:[t.qOj],decls:36,vars:28,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-auto",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row"],[1,"col-md-3","col-lg-3"],[1,"form-group"],[1,"input-group","mb-2"],["formControlName","date",1,"form-control","datapickerinput",3,"matDatepicker","min","max","placeholder","click"],["matSuffix","",3,"for"],["data-date-format","yyyy/mm/dd"],["picker1",""],[3,"control"],[1,"col-md-6","col-lg-6"],[1,"col-md-12","col-lg-12"],["type","radio","name","clearAttnFor",3,"value","ngModel","ngModelOptions","ngModelChange"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"],[1,"col-md-1","col-lg-1","text-center"],[3,"isLoading"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"input",9),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(16);return o.openDatePicker(r)}),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"mat-datepicker-toggle",10),t._UZ(15,"mat-datepicker",11,12),t.qZA(),t._UZ(17,"validation-message",13),t.qZA(),t.qZA(),t.TgZ(18,"div",14),t.TgZ(19,"div",15),t.TgZ(20,"input",16),t.NdJ("ngModelChange",function(r){return o.clearAttnFor=r}),t.qZA(),t._uU(21,"\xa0 For Only Selected Day\xa0 "),t.qZA(),t.TgZ(22,"div",15),t.TgZ(23,"input",16),t.NdJ("ngModelChange",function(r){return o.clearAttnFor=r}),t.qZA(),t._uU(24,"\xa0Clear The Attendance Till End Of Pay Roll Date "),t.qZA(),t.qZA(),t.TgZ(25,"div",6),t.TgZ(26,"div",7),t.TgZ(27,"div",8),t.TgZ(28,"input",17),t.NdJ("click",function(){return o.claerAttendance()}),t.ALo(29,"translate"),t.qZA(),t._uU(30," \xa0 "),t.TgZ(31,"input",17),t.NdJ("click",function(){return o.closeModel()}),t.ALo(32,"translate"),t.qZA(),t._uU(33," \xa0 "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",18),t._UZ(35,"spinner-loader",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(16);t.xp6(1),t.Oqu(t.lcZ(2,18,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(7),t.hYB("placeholder","",t.lcZ(13,20,"Select")," ","From_Date",""),t.Q6J("matDatepicker",n)("min",o.minDate)("max",o.maxDate),t.xp6(2),t.Q6J("for",n),t.xp6(3),t.Q6J("control",o.form.controls.date),t.xp6(3),t.Q6J("value","selectedDay")("ngModel",o.clearAttnFor)("ngModelOptions",t.DdM(26,oo)),t.xp6(3),t.Q6J("value","tillDate")("ngModel",o.clearAttnFor)("ngModelOptions",t.DdM(27,oo)),t.xp6(5),t.s9C("value",t.lcZ(29,22,"Clear")),t.xp6(3),t.s9C("value",t.lcZ(32,24,"Cancel")),t.xp6(4),t.Q6J("isLoading",o.isLoading)}},directives:[l._Y,l.JL,l.sg,l.Fj,M.hl,l.JJ,l.u,M.nW,gt.R9,M.Mq,G.s,l._,l.On,_t.r],pipes:[Z.X$],encapsulation:2}),i})();function j0(i,a){if(1&i&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.s9C("value",e.siteCode),t.xp6(1),t.AsE("",e.siteCode,"(",o.isArab?e.siteArbName:e.siteName,")")}}function k0(i,a){if(1&i&&(t.TgZ(0,"span"),t._UZ(1,"auto-loader",37),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("isLoading",e.isLoading)}}function M0(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",34),t._uU(2),t.qZA(),t.TgZ(3,"td",34),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.qZA(),t.TgZ(9,"td",34),t._uU(10),t.qZA(),t.TgZ(11,"td",34),t._uU(12),t.qZA(),t.TgZ(13,"td",34),t._uU(14),t.qZA(),t.TgZ(15,"td",34),t._uU(16),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",n.isArab?n.getSkillset(e.skillsetCode).textTwo:n.getSkillset(e.skillsetCode).text," "),t.xp6(2),t.hij(" ",e.qty," "),t.xp6(2),t.hij(" ",e.qty*n.workingHoursInSite," "),t.xp6(2),t.hij(" ",(e.contractualShifts+e.offs)*n.workingHoursInSite," "),t.xp6(2),t.hij(" ",e.contractualShifts+e.offs," "),t.xp6(2),t.hij(" ",e.contractualShifts," "),t.xp6(2),t.hij(" ",e.offs," ")}}function R0(i,a){if(1&i&&(t.TgZ(0,"div",31),t.YNc(1,k0,2,1,"span",28),t.TgZ(2,"table",32),t.TgZ(3,"tr"),t.TgZ(4,"td",33),t._uU(5),t._UZ(6,"br"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"tr"),t.TgZ(9,"th",34),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",34),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",34),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th",34),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th",34),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th",34),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th",34),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th",34),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.YNc(33,M0,17,8,"tr",35),t.TgZ(34,"tr"),t.TgZ(35,"td",36),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"td",34),t._uU(39),t.qZA(),t.TgZ(40,"td",34),t._uU(41),t.qZA(),t.TgZ(42,"td",34),t._uU(43),t.qZA(),t.TgZ(44,"td",34),t._uU(45),t.qZA(),t.TgZ(46,"td",34),t._uU(47),t.qZA(),t.TgZ(48,"td",34),t._uU(49),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",0!=e.roasterReport.length),t.xp6(4),t.hij(" ",e.isArab?e.project.projectNameArb:e.project.projectNameEng," "),t.xp6(2),t.hij(" ",e.isArab?null==(o=e.getSiteData(e.siteCode))?null:o.siteArbName:null==(o=e.getSiteData(e.siteCode))?null:o.siteName," "),t.xp6(3),t.hij(" ",t.lcZ(11,19,"S.N")," "),t.xp6(3),t.hij(" ",t.lcZ(14,21,"Position")," "),t.xp6(3),t.hij(" ",t.lcZ(17,23,"Qty_Of_Manpower")," "),t.xp6(3),t.hij(" ",t.lcZ(20,25,"Daily_Hrs")," "),t.xp6(3),t.hij(" ",t.lcZ(23,27,"Monthly_Hrs")," "),t.xp6(3),t.hij(" ",t.lcZ(26,29,"Monthly_Shifts_Schedulled")," "),t.xp6(3),t.hij(" ",t.lcZ(29,31,"Monthly_Shifts_Assigned")," "),t.xp6(3),t.hij(" ",t.lcZ(32,33,"Offs")," "),t.xp6(2),t.Q6J("ngForOf",e.roasterReport),t.xp6(3),t.hij(" ",t.lcZ(37,35,"Total")," "),t.xp6(3),t.hij(" ",null==e.totRoastersReport?null:e.totRoastersReport.qty," "),t.xp6(2),t.hij(" ",(null==e.totRoastersReport?null:e.totRoastersReport.qty)*e.workingHoursInSite," "),t.xp6(2),t.hij(" ",((null==e.totRoastersReport?null:e.totRoastersReport.contractualShifts)+(null==e.totRoastersReport?null:e.totRoastersReport.offs))*e.workingHoursInSite," "),t.xp6(2),t.hij(" ",e.totRoastersReport.contractualShifts+e.totRoastersReport.offs," "),t.xp6(2),t.hij(" ",e.totRoastersReport.contractualShifts," "),t.xp6(2),t.hij(" ",e.totRoastersReport.offs," ")}}function P0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).confirmAutoAttendancePerDay(n)}),t._UZ(1,"i",66),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Auto_Attendance"))}}function F0(i,a){if(1&i&&(t.TgZ(0,"td",63),t.YNc(1,P0,2,1,"span",64),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e==o.activeColumn)}}function I0(i,a){if(1&i&&(t.TgZ(0,"th",67),t._uU(1),t.qZA()),2&i){const e=a.index;t.xp6(1),t.Oqu(e+1)}}function Y0(i,a){if(1&i&&(t.TgZ(0,"th",67),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.dayText," ")}}function J0(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);let n;t.xp6(1),t.hij(" ",o.isArab?null==(n=o.getDefShiftTypeName(e))?null:n.nameAr:null==(n=o.getDefShiftTypeName(e))?null:n.nameEn," ")}}function Q0(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,J0,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function B0(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",71),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw().index;return t.oxw(2).manualAttendance(r,s)})("contextmenu",function(){const s=t.CHM(e).index,r=t.oxw().index;return t.oxw(2).onRightClick(r,s)}),t._uU(1),t.qZA()}if(2&i){const e=a.index,o=t.oxw().index,n=t.oxw(2);t.s9C("id",n.getCellBackGroud(o,e)),t.xp6(1),t.hij(" ",n.getAttendanceCellData(o,e)," ")}}function H0(i,a){if(1&i&&(t.TgZ(0,"span"),t.TgZ(1,"span",72),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(2),t.hij(" ",o.showTime(o.EmployeeWiseShiftCount(e).total,null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].totMins),""),t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].nwd," ")}}function V0(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,H0,4,2,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function $0(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",(null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].nwd)*o.workingHoursInSite," ")}}function G0(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,$0,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function W0(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].off," ")}}function z0(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,W0,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function X0(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].al_count," ")}}function K0(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,X0,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function tA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].el_count," ")}}function eA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,tA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function oA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].ul_count," ")}}function iA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,oA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function nA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].sl_count," ")}}function aA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,nA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function sA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].stl_count," ")}}function rA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,sA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function lA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].a," ")}}function cA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,lA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function pA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].w_count," ")}}function uA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,pA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function dA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].penalty," ")}}function mA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,dA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function _A(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",o.showTime(null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].lateHrs,null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].lateMins)," ")}}function gA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,_A,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function hA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.hij(" ",o.showTime(null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].overTime,null==o.employeeConsolidateData[e]?null:o.employeeConsolidateData[e].overTimeMins)," ")}}function fA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,hA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function ZA(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",68),t._uU(2),t.qZA(),t.TgZ(3,"td",68),t._uU(4),t.qZA(),t.TgZ(5,"td",68),t._uU(6),t.qZA(),t.TgZ(7,"td",69),t.YNc(8,Q0,2,1,"span",28),t.qZA(),t.YNc(9,B0,2,2,"td",70),t.TgZ(10,"td",57),t.YNc(11,V0,2,1,"span",28),t.qZA(),t.TgZ(12,"td",57),t.YNc(13,G0,2,1,"span",28),t.qZA(),t.TgZ(14,"td",57),t.YNc(15,z0,2,1,"span",28),t.qZA(),t.TgZ(16,"td",57),t.YNc(17,K0,2,1,"span",28),t.qZA(),t.TgZ(18,"td",57),t.YNc(19,eA,2,1,"span",28),t.qZA(),t.TgZ(20,"td",57),t.YNc(21,iA,2,1,"span",28),t.qZA(),t.TgZ(22,"td",57),t.YNc(23,aA,2,1,"span",28),t.qZA(),t.TgZ(24,"td",57),t.YNc(25,rA,2,1,"span",28),t.qZA(),t.TgZ(26,"td",57),t.YNc(27,cA,2,1,"span",28),t.qZA(),t.TgZ(28,"td",57),t.YNc(29,uA,2,1,"span",28),t.qZA(),t.TgZ(30,"td",57),t.YNc(31,mA,2,1,"span",28),t.qZA(),t.TgZ(32,"td",57),t.YNc(33,gA,2,1,"span",28),t.qZA(),t.TgZ(34,"td",57),t.YNc(35,fA,2,1,"span",28),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);let s,r;t.xp6(2),t.hij(" ",e.employeeNumber," "),t.xp6(2),t.hij(" ",n.isArab?null==(s=n.getEmployee(e.employeeNumber))?null:s.textTwo:null==(s=n.getEmployee(e.employeeNumber))?null:s.text," "),t.xp6(2),t.hij(" ",n.isArab?n.getSkillset(e.skillsetCode).textTwo:null==(r=n.getSkillset(e.skillsetCode))?null:r.text," "),t.xp6(1),t.s9C("id",n.getDefShiftBackGround(o)),t.xp6(1),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(1),t.Q6J("ngForOf",n.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==n.attendanceData?null:n.attendanceData.length)==n.listOfRoasters.length&&0!=n.listOfRoasters.length)}}function CA(i,a){1&i&&t._UZ(0,"td",73)}function AA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.nwd," ")}}function TA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,AA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function vA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",(null==(o=e.Totals())?null:o.nwd)*e.workingHoursInSite," ")}}function xA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,vA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function qA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.offs," ")}}function bA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,qA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function yA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.al_count," ")}}function SA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,yA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function wA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.el_count," ")}}function UA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,wA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function LA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.ul_count," ")}}function DA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,LA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function NA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.sl_count," ")}}function EA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,NA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function OA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.stl_count," ")}}function jA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,OA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function kA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.a," ")}}function MA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,kA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function RA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.w_count," ")}}function PA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,RA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function FA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.penalty," ")}}function IA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,FA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function YA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.showTime(null==(o=e.Totals())?null:o.lateHrs,null==(o=e.Totals())?null:o.lateMins)," ")}}function JA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,YA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function QA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.showTime(null==(o=e.Totals())?null:o.overTime,null==(o=e.Totals())?null:o.overTimeMins)," ")}}function BA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,QA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function HA(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.hij(" ",o.DayWiseShiftCount(e).tch," ")}}function VA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",(null==(o=e.Totals())?null:o.contractualShifts)*e.workingHoursInSite," ")}}function $A(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,VA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function GA(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.daywiseConsolidateData[e]?null:o.daywiseConsolidateData[e].tcs," ")}}function WA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.contractualShifts," ")}}function zA(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,WA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function XA(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);let n;t.xp6(1),t.hij(" ",o.showTime(null==(n=o.DayWiseShiftCount(e))?null:n.hours,null==(n=o.DayWiseShiftCount(e))?null:n.mins)," ")}}function KA(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.showTime(null==(o=e.Totals())?null:o.total,null==(o=e.Totals())?null:o.totMins)," ")}}function tT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,KA,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.attendanceData[e.listOfRoasters.length-1].length==e.noOfDays)}}function eT(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.daywiseConsolidateData[e]?null:o.daywiseConsolidateData[e].taws," ")}}function oT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.actualShifts," ")}}function iT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,oT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function nT(i,a){if(1&i&&(t.TgZ(0,"td",62),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(2);t.xp6(1),t.hij(" ",null==o.daywiseConsolidateData[e]?null:o.daywiseConsolidateData[e].varInShift," ")}}function aT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.varInShifts," ")}}function sT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,aT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function rT(i,a){if(1&i&&(t.TgZ(0,"div",31),t.TgZ(1,"table",38),t.TgZ(2,"tr"),t._UZ(3,"td",39),t.YNc(4,F0,2,1,"td",40),t.qZA(),t.TgZ(5,"tr"),t.TgZ(6,"th",41),t._uU(7),t.qZA(),t.YNc(8,I0,2,1,"th",42),t.TgZ(9,"th",43),t._uU(10," \u0639\u062f\u062f \u0623\u064a\u0627\u0645 \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(11,"th",44),t._uU(12," \u0639\u062f\u062f \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(13,"th",43),t._uU(14," \u0623\u064a\u0627\u0645 \u0627\u0644\u0639\u0637\u0644\u0629 \u0627\u0644\u0623\u0633\u0628\u0648\u0639\u064a\u0629 "),t.qZA(),t.TgZ(15,"th",43),t._uU(16," \u0627\u062c\u0627\u0632\u0629 \u0633\u0646\u0648\u064a\u0629 "),t.qZA(),t.TgZ(17,"th",43),t._uU(18," \u0625\u062c\u0627\u0632\u0629 \u062e\u0627\u0635\u0629/\u0637\u0627\u0631\u0626\u0629 "),t.qZA(),t.TgZ(19,"th",43),t._uU(20," \u0627\u062c\u0627\u0632\u0629 \u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0647 "),t.qZA(),t.TgZ(21,"th",43),t._uU(22," \u0627\u062c\u0627\u0632\u0629 \u0645\u0631\u0636\u064a\u0629 "),t.qZA(),t.TgZ(23,"th",43),t._uU(24," \u0625\u062c\u0627\u0632\u0629 \u0627\u062e\u062a\u0628\u0627\u0631\u0627\u062a "),t.qZA(),t.TgZ(25,"th",43),t._uU(26," \u063a\u064a\u0627\u0628 "),t.qZA(),t.TgZ(27,"th",43),t._uU(28," \u0627\u0646\u0633\u062d\u0627\u0628 "),t.qZA(),t.TgZ(29,"th",45),t._uU(30," \u062c\u0632\u0627\u0621\u0627\u062a "),t.qZA(),t.TgZ(31,"th",45),t._uU(32," \u0639\u062f\u062f \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u062a\u0627\u062e\u064a\u0631 "),t.qZA(),t.TgZ(33,"th",46),t._uU(34," \u0648\u0642\u062a \u0627\u0636\u0627\u0641\u0649 "),t.qZA(),t.qZA(),t.TgZ(35,"tr"),t.TgZ(36,"th",47),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"th",47),t._uU(40),t.ALo(41,"translate"),t.ALo(42,"translate"),t.qZA(),t.YNc(43,Y0,2,1,"th",42),t.TgZ(44,"th",43),t._uU(45," W D C "),t.qZA(),t.TgZ(46,"th",43),t._uU(47," Nor. Hrs "),t.qZA(),t.TgZ(48,"th",43),t._uU(49," OF "),t.qZA(),t.TgZ(50,"th",43),t._uU(51," AL "),t.qZA(),t.TgZ(52,"th",43),t._uU(53," EL "),t.qZA(),t.TgZ(54,"th",43),t._uU(55," UL "),t.qZA(),t.TgZ(56,"th",43),t._uU(57," SL "),t.qZA(),t.TgZ(58,"th",43),t._uU(59," STL "),t.qZA(),t.TgZ(60,"th",43),t._uU(61," A "),t.qZA(),t.TgZ(62,"th",43),t._uU(63," W "),t.qZA(),t.TgZ(64,"th",45),t._uU(65," Penalty "),t.qZA(),t.TgZ(66,"th",45),t._uU(67," Late Hours "),t.qZA(),t.TgZ(68,"th",46),t._uU(69," OT "),t.qZA(),t.qZA(),t.TgZ(70,"tbody",48),t.YNc(71,ZA,36,19,"tr",35),t.TgZ(72,"tr"),t.TgZ(73,"td",49),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.YNc(76,CA,1,0,"td",50),t.TgZ(77,"td",51),t.YNc(78,TA,2,1,"span",28),t.qZA(),t.TgZ(79,"td",51),t.YNc(80,xA,2,1,"span",28),t.qZA(),t.TgZ(81,"td",51),t.YNc(82,bA,2,1,"span",28),t.qZA(),t.TgZ(83,"td",51),t.YNc(84,SA,2,1,"span",28),t.qZA(),t.TgZ(85,"td",51),t.YNc(86,UA,2,1,"span",28),t.qZA(),t.TgZ(87,"td",51),t.YNc(88,DA,2,1,"span",28),t.qZA(),t.TgZ(89,"td",51),t.YNc(90,EA,2,1,"span",28),t.qZA(),t.TgZ(91,"td",51),t.YNc(92,jA,2,1,"span",28),t.qZA(),t.TgZ(93,"td",51),t.YNc(94,MA,2,1,"span",28),t.qZA(),t.TgZ(95,"td",51),t.YNc(96,PA,2,1,"span",28),t.qZA(),t.TgZ(97,"td",51),t.YNc(98,IA,2,1,"span",28),t.qZA(),t.TgZ(99,"td",51),t.YNc(100,JA,2,1,"span",28),t.qZA(),t.TgZ(101,"td",51),t.YNc(102,BA,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(103,"tr"),t.TgZ(104,"td",52),t._uU(105),t.ALo(106,"translate"),t.qZA(),t.YNc(107,HA,2,1,"td",53),t.TgZ(108,"td",54),t.YNc(109,$A,2,1,"span",28),t.qZA(),t._UZ(110,"td",55),t._UZ(111,"td",55),t._UZ(112,"td",55),t._UZ(113,"td",55),t._UZ(114,"td",55),t._UZ(115,"td",55),t._UZ(116,"td",55),t._UZ(117,"td",55),t._UZ(118,"td",55),t._UZ(119,"td",55),t._UZ(120,"td",55),t._UZ(121,"td",55),t.qZA(),t.TgZ(122,"tr"),t.TgZ(123,"td",49),t._uU(124),t.ALo(125,"translate"),t.qZA(),t.YNc(126,GA,2,1,"td",56),t.TgZ(127,"td",57),t.YNc(128,zA,2,1,"span",28),t.qZA(),t._UZ(129,"td",55),t._UZ(130,"td",55),t._UZ(131,"td",55),t._UZ(132,"td",55),t._UZ(133,"td",55),t._UZ(134,"td",55),t._UZ(135,"td",55),t._UZ(136,"td",55),t._UZ(137,"td",55),t._UZ(138,"td",55),t._UZ(139,"td",55),t._UZ(140,"td",55),t.qZA(),t.TgZ(141,"tr"),t.TgZ(142,"td",58),t._uU(143),t.ALo(144,"translate"),t.qZA(),t.YNc(145,XA,2,1,"td",59),t.TgZ(146,"td",54),t.YNc(147,tT,2,1,"span",28),t.qZA(),t._UZ(148,"td",55),t._UZ(149,"td",55),t._UZ(150,"td",55),t._UZ(151,"td",55),t._UZ(152,"td",55),t._UZ(153,"td",55),t._UZ(154,"td",55),t._UZ(155,"td",55),t._UZ(156,"td",55),t._UZ(157,"td",55),t._UZ(158,"td",55),t._UZ(159,"td",55),t.qZA(),t.TgZ(160,"tr"),t.TgZ(161,"td",49),t._uU(162),t.ALo(163,"translate"),t.qZA(),t.YNc(164,eT,2,1,"td",56),t.TgZ(165,"td",57),t.YNc(166,iT,2,1,"span",28),t.qZA(),t._UZ(167,"td",55),t._UZ(168,"td",55),t._UZ(169,"td",55),t._UZ(170,"td",55),t._UZ(171,"td",55),t._UZ(172,"td",55),t._UZ(173,"td",55),t._UZ(174,"td",55),t._UZ(175,"td",55),t._UZ(176,"td",55),t._UZ(177,"td",55),t._UZ(178,"td",55),t.qZA(),t.TgZ(179,"tr"),t.TgZ(180,"td",60),t._uU(181),t.ALo(182,"translate"),t.qZA(),t.YNc(183,nT,2,1,"td",61),t.TgZ(184,"td",62),t.YNc(185,sT,2,1,"span",28),t.qZA(),t._UZ(186,"td",55),t._UZ(187,"td",55),t._UZ(188,"td",55),t._UZ(189,"td",55),t._UZ(190,"td",55),t._UZ(191,"td",55),t._UZ(192,"td",55),t._UZ(193,"td",55),t._UZ(194,"td",55),t._UZ(195,"td",55),t._UZ(196,"td",55),t._UZ(197,"td",55),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.listOfDays),t.xp6(3),t.hij(" ",e.selectedMonth,""),t.xp6(1),t.Q6J("ngForOf",e.listOfDays),t.xp6(29),t.hij(" ",t.lcZ(38,38,"Employee")," "),t.xp6(3),t.AsE(" ",t.lcZ(41,40,"Position")," & ",t.lcZ(42,42,"Default_Shift")," "),t.xp6(3),t.Q6J("ngForOf",e.listOfDays),t.xp6(28),t.Q6J("ngForOf",e.listOfRoasters),t.xp6(3),t.hij(" ",t.lcZ(75,44,"Total")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.hij(" ",t.lcZ(106,46,"Total_Contracted_Hours")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(15),t.hij(" ",t.lcZ(125,48,"Total_Contracted_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(15),t.hij(" ",t.lcZ(144,50,"Actual_Hours")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(15),t.hij(" ",t.lcZ(163,52,"Actual_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length),t.xp6(15),t.hij(" ",t.lcZ(182,54,"Variance_of_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",e.listOfDays),t.xp6(2),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length)}}function lT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",null==(o=e.Totals())?null:o.contractualShifts," ")}}function cT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,lT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function pT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",(null==(o=e.Totals())?null:o.contractualShifts)*e.workingHoursInSite," ")}}function uT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,pT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function dT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.convertTimeToShifts(null==(o=e.Totals())?null:o.tAWOt.hrs,null==(o=e.Totals())?null:o.tAWOt.mins,e.workingHoursInSite)," ")}}function mT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,dT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function _T(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.showTime(null==(o=e.Totals())?null:o.tAWOt.hrs,null==(o=e.Totals())?null:o.tAWOt.mins)," ")}}function gT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,_T,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function hT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.convertTimeToShifts(null==(o=e.Totals())?null:o.total,null==(o=e.Totals())?null:o.totMins,e.workingHoursInSite)," ")}}function fT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,hT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function ZT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.showTime(null==(o=e.Totals())?null:o.total,null==(o=e.Totals())?null:o.totMins)," ")}}function CT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,ZT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function AT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.showTime(null==(o=e.Totals())?null:o.overTime,null==(o=e.Totals())?null:o.overTimeMins)," ")}}function TT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,AT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function vT(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);let o;t.xp6(1),t.hij(" ",e.convertTimeToShifts(null==(o=e.Totals())||null==o.spl_ot?null:o.spl_ot.hrs,null==(o=e.Totals())||null==o.spl_ot?null:o.spl_ot.mins,e.workingHoursInSite)," ")}}function xT(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,vT,2,1,"span",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.attendanceData[e.attendanceData.length-1]?null:e.attendanceData[e.attendanceData.length-1].length)==e.noOfDays)}}function qT(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",82),t._uU(2),t.qZA(),t.TgZ(3,"td",83),t._uU(4),t.qZA(),t.TgZ(5,"td",82),t._uU(6," = "),t.qZA(),t.TgZ(7,"td",84),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);let s;t.xp6(2),t.hij(" ",e.shiftCode," "),t.xp6(1),t.s9C("id",n.getShiftColour(o)),t.xp6(1),t.AsE(" ",e.shiftName_EN,"/",e.shiftName_AR," "),t.xp6(3),t.s9C("id",n.getShiftColour(o)),t.xp6(1),t.hij(" ",n.isArab?null==(s=n.getShiftTypeNumber(o))?null:s.nameAr:null==(s=n.getShiftTypeNumber(o))?null:s.nameEn," ")}}function bT(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"div",74),t.TgZ(2,"div",75),t.TgZ(3,"div",76),t.TgZ(4,"table",77),t.TgZ(5,"tr"),t.TgZ(6,"td",78),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"td",79),t.YNc(10,cT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"td",78),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"td",79),t.YNc(16,uT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(17,"tr"),t.TgZ(18,"td",78),t._uU(19),t.ALo(20,"translate"),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"td",79),t.YNc(23,mT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(24,"tr"),t.TgZ(25,"td",78),t._uU(26),t.ALo(27,"translate"),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"td",79),t.YNc(30,gT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(31,"tr"),t.TgZ(32,"td",78),t._uU(33),t.ALo(34,"translate"),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"td",79),t.YNc(37,fT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(38,"tr"),t.TgZ(39,"td",78),t._uU(40),t.ALo(41,"translate"),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"td",79),t.YNc(44,CT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(45,"tr"),t.TgZ(46,"td",78),t._uU(47),t.ALo(48,"translate"),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"td",79),t.YNc(51,TT,2,1,"span",28),t.qZA(),t.qZA(),t.TgZ(52,"tr"),t.TgZ(53,"td",78),t._uU(54),t.ALo(55,"translate"),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"td",79),t.YNc(58,xT,2,1,"span",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",80),t.TgZ(60,"table",81),t.YNc(61,qT,9,6,"tr",35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(7),t.hij(" ",t.lcZ(8,23,"Contracted_Shifts")," "),t.xp6(3),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.hij(" ",t.lcZ(14,25,"Contracted_Hours")," "),t.xp6(3),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.AsE(" ",t.lcZ(20,27,"Actual_Shifts"),"(",t.lcZ(21,29,"With_Overtime"),") "),t.xp6(4),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.AsE(" ",t.lcZ(27,31,"Actual_Hours"),"(",t.lcZ(28,33,"With_Overtime"),") "),t.xp6(4),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.AsE(" ",t.lcZ(34,35,"Actual_Shifts"),"(",t.lcZ(35,37,"Without_Overtime"),") "),t.xp6(4),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.AsE(" ",t.lcZ(41,39,"Actual_Hours"),"(",t.lcZ(42,41,"Without_Overtime"),") "),t.xp6(4),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.AsE(" ",t.lcZ(48,43,"Overtime")," ",t.lcZ(49,45,"Hours")," "),t.xp6(4),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.AsE(" ",t.lcZ(55,47,"Overtime")," ",t.lcZ(56,49,"Shifts")," "),t.xp6(4),t.Q6J("ngIf",(null==e.attendanceData?null:e.attendanceData.length)==e.listOfRoasters.length&&0!=e.listOfRoasters.length),t.xp6(3),t.Q6J("ngForOf",e.listOfShiftCodes2)}}function yT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",91),t.TgZ(1,"div",89),t.TgZ(2,"input",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).exportexcel()}),t.ALo(3,"translate"),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.s9C("value",t.lcZ(3,1,"Download_Exel")))}function ST(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",88),t.TgZ(1,"div",93),t.TgZ(2,"input",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).confirmAutoAttendanceForMonth()}),t.ALo(3,"translate"),t.qZA(),t.qZA(),t.TgZ(4,"div",93),t.TgZ(5,"input",94),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).confirmClearAttendance()}),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.s9C("value",t.lcZ(3,2,"Enter_Default_Attendance")),t.xp6(3),t.s9C("value",t.lcZ(6,4,"Clear_Attendance")))}function wT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",88),t.TgZ(1,"div",89),t.TgZ(2,"input",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).loadData()}),t.ALo(3,"translate"),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.s9C("value",t.lcZ(3,1,"Refresh")))}function UT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",88),t.TgZ(1,"div",89),t.TgZ(2,"input",92),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).confirmPostAttendance()}),t.ALo(3,"translate"),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.s9C("value",t.lcZ(3,1,"Post_Attendance")))}function LT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",85),t.YNc(1,yT,4,3,"div",86),t.YNc(2,ST,7,6,"div",87),t.YNc(3,wT,4,3,"div",87),t.YNc(4,UT,4,3,"div",87),t.TgZ(5,"div",88),t.TgZ(6,"div",89),t.TgZ(7,"input",90),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t.ALo(8,"translate"),t.qZA(),t._uU(9," \xa0 "),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=e.listOfRoasters.length),t.xp6(1),t.Q6J("ngIf",0!=e.listOfRoasters.length),t.xp6(1),t.Q6J("ngIf",0!=e.listOfRoasters.length),t.xp6(1),t.Q6J("ngIf",0!=e.updatedAttendance.length&&0!=e.listOfRoasters.length),t.xp6(3),t.s9C("value",t.lcZ(8,5,"Cancel"))}}let Ze=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(u),this.dialog=e,this.oprService=o,this.dialogRef=n,this.fb=s,this.http=r,this.router=c,this.apiService=p,this.authService=u,this.utilService=d,this.translate=m,this.notifyService=h,this.validationService=C,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfRoasters=[],this.listOfDays=[],this.sequence=1,this.editsequence=0,this.remarks="",this.noOfDays=0,this.saveEnable=!1,this.editEnable=!1,this.monthYear="",this.skillsetCode="",this.skillsetName="",this.shiftCodesForMonth=[],this.inActiveDays=0,this.siteCodeList=[],this.customerCode="",this.listOfShiftCodes=[],this.listOfShiftCodes2=[],this.siteCode="",this.month=0,this.year=0,this.shiftCode="",this.totalShiftsRow=[],this.totalShiftsCol=[],this.grandTotalShifts=0,this.newTotalShifts=0,this.shiftsReport=[],this.roasterReport=[],this.empCodeControl=new l.NI(""),this.employeeList=[],this.employeeNumber="",this.workingHoursInSite=0,this.autoAttendanceData=[],this.activeColumn=-1,this.updatedAttendance=[],this.updatedAttendance2=[],this.notPostedAtndncExist=!1,this.isLoading=!1,this.employeeConsolidateData=[],this.daywiseConsolidateData=[],this.colours=["bg_Shift0","bg_Shift1","bg_Shift2","bg_Shift3","bg_Shift4"],this.shiftTypeNames=[{number:0,nameEn:"-",nameAr:"-"},{number:1,nameEn:"Shift 1",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u0623\u0648\u0644\u0649"},{number:2,nameEn:"Shift 2",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0646\u064a\u0629"},{number:3,nameEn:"Shift 3",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629"},{number:4,nameEn:"Shift 4",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629"}],this.showMins=!0,this.totalData={total:0,offs:0,totMins:0,nwd:0,wd:0,wh:0,lateHrs:0,lateMins:0,overTime:0,overTimeMins:0,notAssigned:0,actualShifts:0,al_count:0,ul_count:0,el_count:0,sl_count:0,stl_count:0,w_count:0,penalty:0},this.totShiftReport={dailyShifts:0,dailyHrs:0,monthlyHrs:0,monthlyOffs:0,monthlyReplacements:0,monthlyShiftsSchedulled:0,monthlyShiftsAssigned:0},this.totRoastersReport={contractualShifts:0,offs:0,qty:0},this.inputArray=[],this.inputListForDay=[],this.isArab=!1,this.filteredEmployeeNumbers=this.empCodeControl.valueChanges.pipe((0,tt.O)(this.employeeNumber),(0,et.b)(d.autoDelay()),(0,ot.x)(),(0,it.w)(A=>(""!==A.trim()&&(this.isDataLoading=!0),this.filterEmployeeNumbers(A||""))))}filterEmployeeNumbers(e){return this.apiService.getall(`Employee/getAutoFillEmployeeList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode2/${this.project.projectCode}/${this.siteCode}`).subscribe(e=>{this.listOfShiftCodes2=e})}ngOnInit(){this.isArab=this.utilService.isArabic(),this.setForm(),this.readonly="readonly",this.loadSiteCodes(this.project.customerCode),this.loadSkillsetSelectionList()}setForm(){var e,o;this.form=this.fb.group({startDate:[""],endDate:[""],customerCode:[this.project.customerCode],monthYear:[""],siteCode:[null!=(null===(e=this.project)||void 0===e?void 0:e.siteCode)?this.project.siteCode:""],projectCode:[this.project.projectCode],month:[0],year:[this.year],skillsetCode:[""],shiftCode:[""]}),null!=(null===(o=this.project)||void 0===o?void 0:o.siteCode)&&(this.form.controls.siteCode.disable({onlySelf:!0}),this.siteCode=this.project.siteCode,this.minDate=this.project.oldestRoasterStartDate,this.maxDate=this.project.endDate,this.form.controls.startDate.setValue(this.project.startDate.toString().substring(0,10)),this.form.controls.endDate.setValue(this.project.endDate.toString().substring(0,10)),this.onSelectSiteCode({target:{value:this.project.siteCode}}))}getMaxPostDate(){this.minPostDate=new Date(this.year,this.month-1,1);let e=new Date(this.year,this.month,1);e.setMinutes(e.getMinutes()-e.getTimezoneOffset());let o=new Date(e.getFullYear(),e.getMonth(),0,23,59,59,999);this.maxPostDate=o>this.maxDate?this.maxDate:o}submit(){}getSkillset(e){return this.skillsetSelectionList.find(o=>o.value==e)}loadSkillsetSelectionList(){this.apiService.getall("Skillset/getSelectSkillsetList").subscribe(e=>{this.skillsetSelectionList=e})}getEmployee(e){return this.employeeList.find(o=>o.value==e)}onSelectSiteCode(e){if(""!=e.target.value){let o=e.target.value;this.form.controls.monthYear.setValue(""),this.month=0,this.year=0,this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.project.projectCode}/${o}`).subscribe(n=>{var s;this.project=n,this.workingHoursInSite=null!==(s=n.siteWorkingHours)&&void 0!==s?s:0,this.loadEmployees();let r=new Date(Date.now());this.year=r.getFullYear(),this.form.value.siteCode=o,this.form.controls.siteCode.setValue(o),this.siteCode=o,this.loadData()})}else this.listOfRoasters=[]}loadData(){if(""!=this.project.customerCode&&""!=this.siteCode&&0!=this.month&&0!=this.year){let e=new Date(this.year,this.month-1,1),o=new Date(this.year,this.month,0);this.listOfDays=[],this.noOfDays=o.getDate()-e.getDate()+1,this.apiService.getall(`MonthlyRoaster/getMonthlyRoasterForSite/${this.project.customerCode}/${this.project.projectCode}/${this.siteCode}/${this.month}/${this.year}`).subscribe(n=>{this.listOfRoasters=n,0!=n.length?(0==this.listOfRoasters.length?this.notifyService.showError(this.translate.instant("Roaster_Not_Generated")):(this.isLoading=!0,this.getAllAttendance(),this.getActiveColumn()),this.sequence=this.listOfRoasters.length+1):(this.notifyService.showError(this.translate.instant("Roaster_Not_Generated")),this.isLoading=!1)}),this.loadWeekDays(),this.loadShiftCodes()}else this.listOfRoasters=[],this.listOfShiftCodes=[]}loadWeekDays(){this.form.controls.monthYear.setValue(new Date(this.year,this.month-1,1));for(var e=1;e<=this.noOfDays;e++){let o=new Date(this.year,this.month-1,e),s={dayText:o.toDateString().substring(0,1),dayNumber:e,dayFullName:o.toDateString()};this.listOfDays.push(s)}}loadSiteCodes(e){this.apiService.getall(`customerSite/getSelectSiteListByProjectCode/${this.project.projectCode}`).subscribe(o=>{this.siteCodeList=o})}openDatePicker(e){e.open()}closeDatePicker(e,o){let s=Ae(e).format("YYYY-MM");this.selectedMonth=e.toString().substring(4,7)+"-"+e.toString().substring(11,15),this.month=parseInt(s.toString().substring(5,7)),this.year=Number(s.toString().substring(0,4)),this.getMaxPostDate(),""!=this.project.customerCode&&""!=this.siteCode&&(this.isLoading=!0,this.loadData(),this.RefreshOffs(),this.utilService.autoDelay()),o.close()}RefreshOffs(){this.apiService.post("OpUtils/RefreshOffs",{siteCode:this.project.siteCode,month:this.month,year:this.year}).subscribe(o=>{})}RoastersCount(){return this.listOfRoasters.length}getShiftInfo(e,o){var n;return`Shift Name: ${null===(n=this.listOfRoasters[e])||void 0===n?void 0:n.shiftCodesForMonth[o]}`}closeModel(){this.dialogRef.close()}groupBy(e,o){const n=new Map;return e.forEach(s=>{const r=o(s),c=n.get(r);c?c.push(s):n.set(r,[s])}),n}loadEmployees(){this.apiService.getall("Employee/getSelectEmployeeList2").subscribe(e=>{this.employeeList=e})}openDialogWindow(e,o,n,s,r,c){if(!this.isLoading){let p=this.oprService.openAutoWidthDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.inputData=o,p.componentInstance.inputCellData=e,p.afterClosed().subscribe(u=>{var d,m,h,C,A;if(1==(null==u?void 0:u.res)&&1==(null==u?void 0:u.isNotPrimaryAtt)){let S=u.c;this.apiService.getall(`MonthlyRoaster/getMonthlyRoasterForSite/${this.project.customerCode}/${this.project.projectCode}/${this.siteCode}/${this.month}/${this.year}`).subscribe(D=>{var U,R;this.listOfRoasters=D;for(let O=0;O<this.listOfRoasters.length;O++){let J=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(S+1).toString().padStart(2,"0");this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${null===(U=this.listOfRoasters[O])||void 0===U?void 0:U.employeeNumber}/${J}/${null===(R=this.listOfRoasters[O])||void 0===R?void 0:R.shiftCodesForMonth[S]}`).subscribe(F=>{this.attendanceData[O][S]=F})}})}else if(1==(null==u?void 0:u.res)&&1==(null==u?void 0:u.isRoasterRemoved))this.loadData();else if(1==(null==u?void 0:u.res)&&1==(null==u?void 0:u.isUpdatedShift)){let S=u.r,D=u.c,U=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(D+1).toString().padStart(2,"0");this.listOfRoasters[S].shiftCodesForMonth[D]=u.updatedShift,this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${null===(d=this.listOfRoasters[S])||void 0===d?void 0:d.employeeNumber}/${U}/${null===(m=this.listOfRoasters[S])||void 0===m?void 0:m.shiftCodesForMonth[D]}`).subscribe(R=>{this.attendanceData[S][D]=R})}else if(u&&1==u.res){let S=null===(h=u.cellData)||void 0===h?void 0:h.r,D=null===(C=u.cellData)||void 0===C?void 0:C.c,U=null===(A=u.cellData)||void 0===A?void 0:A.r;this.apiService.getall(`MonthlyRoaster/getMonthlyRoasterForSite/${this.project.customerCode}/${this.project.projectCode}/${this.siteCode}/${this.month}/${this.year}`).subscribe(R=>{var O,J,F,nt,$,z,K,mt,st,Y,k,At,bt,Tt;this.listOfRoasters=R,0==R.length&&(this.isLoading=!1);let Ct=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(D+1).toString().padStart(2,"0");this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${null===(O=this.listOfRoasters[S])||void 0===O?void 0:O.employeeNumber}/${Ct}/${null===(J=this.listOfRoasters[S])||void 0===J?void 0:J.shiftCodesForMonth[D]}`).subscribe(Q=>{var B,qt,vt,yt,Zt,Ut,P,I,jt,kt,pt,Qt,Bt;this.attendanceData[S][D]=Q,Q.isPosted||!(Q.id>0)||Q.employeeNumber!=Q.altEmployeeNumber&&""!=Q.altEmployeeNumber&&null!=Q.altEmployeeNumber||"P"!=Q.attendance&&"OT"!=Q.attendance?""!=Q.altEmployeeNumber&&Q.id>0&&this.apiService.get("EmployeesAttendance/getAltAttendanceById",Q.id).subscribe(H=>{H&&!H.isPosted&&H.id>0&&(H.employeeNumber==H.altEmployeeNumber||""==H.altEmployeeNumber||null==H.altEmployeeNumber)&&("P"==H.attendance||"OT"==H.attendance)&&(this.notPostedAtndncExist=!1,this.updatedAttendance.push(H))}):(this.notPostedAtndncExist=!1,this.updatedAttendance.push(Q));let $t=-1;if(U=this.listOfRoasters.findIndex(H=>H.employeeNumber==u.outputData.altEmployeeNumber),S=this.listOfRoasters.findIndex(H=>H.employeeNumber==u.outputData.employeeNumber),null!=u.outputData.primaryEmployee&&($t=this.listOfRoasters.findIndex(H=>H.employeeNumber==u.outputData.primaryEmployee.employeeNumber)),this.listOfRoasters.length>(null===(B=u.cellData)||void 0===B?void 0:B.totRows)){this.attendanceData[U]=[];for(let H=0;H<this.noOfDays;H++)this.attendanceData[U].push({id:-1});this.loadData()}else if($t>=0){let H=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(D+1).toString().padStart(2,"0");this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${this.listOfRoasters[$t].employeeNumber}/${H}/${this.listOfRoasters[$t].shiftCodesForMonth[D]}`).subscribe(wt=>{this.attendanceData[$t][D]=wt})}let Ce=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(D+1).toString().padStart(2,"0");this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${this.listOfRoasters[U].employeeNumber}/${Ce}/${this.listOfRoasters[U].shiftCodesForMonth[D]}`).subscribe(H=>{this.attendanceData[U][D]=H}),this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${this.listOfRoasters[S].employeeNumber}/${Ce}/${this.listOfRoasters[S].shiftCodesForMonth[D]}`).subscribe(H=>{this.attendanceData[S][D]=H});for(let H=0;H<this.attendanceData.length;H++)for(let wt=0;wt<this.attendanceData[H].length;wt++){if(!(-1!=this.activeColumn||0!=this.attendanceData[H][wt].id||this.attendanceData[H][wt].isDefShiftOff||(null===(qt=this.attendanceData[H][wt])||void 0===qt?void 0:qt.isOnLeave)||(null===(vt=this.attendanceData[H][wt])||void 0===vt?void 0:vt.isWithDrawn)||(null===(yt=this.attendanceData[H][wt])||void 0===yt?void 0:yt.isTransfered)||(null===(Zt=this.attendanceData[H][wt])||void 0===Zt?void 0:Zt.isResigned))){this.activeColumn=wt;break}if(this.activeColumn>wt&&0==this.attendanceData[H][wt].id&&!this.attendanceData[H][wt].isDefShiftOff&&!(null===(Ut=this.attendanceData[H][wt])||void 0===Ut?void 0:Ut.isOnLeave)&&!(null===(P=this.attendanceData[H][wt])||void 0===P?void 0:P.isWithDrawn)&&!(null===(I=this.attendanceData[H][wt])||void 0===I?void 0:I.isTransfered)&&!(null===(jt=this.attendanceData[H][wt])||void 0===jt?void 0:jt.isResigned)){this.activeColumn=wt;break}}let Le=-1;for(let H=0;H<this.attendanceData.length;H++)0==this.attendanceData[H][this.activeColumn].id&&!this.attendanceData[H][this.activeColumn].isDefShiftOff&&!(null===(kt=this.attendanceData[H][this.activeColumn])||void 0===kt?void 0:kt.isOnLeave)&&!(null===(pt=this.attendanceData[H][this.activeColumn])||void 0===pt?void 0:pt.isWithDrawn)&&!(null===(Qt=this.attendanceData[H][this.activeColumn])||void 0===Qt?void 0:Qt.isTransfered)&&!(null===(Bt=this.attendanceData[H][this.activeColumn])||void 0===Bt?void 0:Bt.isResigned)&&(Le=H);-1==Le&&this.activeColumn++});for(let Q=0;Q<this.attendanceData.length;Q++)for(let B=0;B<this.attendanceData[Q].length;B++){if(!(-1!=this.activeColumn||0!=this.attendanceData[Q][B].id||this.attendanceData[Q][B].isDefShiftOff||(null===(F=this.attendanceData[Q][B])||void 0===F?void 0:F.isOnLeave)||(null===(nt=this.attendanceData[Q][B])||void 0===nt?void 0:nt.isWithDrawn)||(null===($=this.attendanceData[Q][B])||void 0===$?void 0:$.isTransfered)||(null===(z=this.attendanceData[Q][B])||void 0===z?void 0:z.isResigned))){this.activeColumn=B;break}if(this.activeColumn>B&&0==this.attendanceData[Q][B].id&&!this.attendanceData[Q][B].isDefShiftOff&&!(null===(K=this.attendanceData[Q][B])||void 0===K?void 0:K.isOnLeave)&&!(null===(mt=this.attendanceData[Q][B])||void 0===mt?void 0:mt.isWithDrawn)&&!(null===(st=this.attendanceData[Q][B])||void 0===st?void 0:st.isTransfered)&&!(null===(Y=this.attendanceData[Q][B])||void 0===Y?void 0:Y.isResigned)){this.activeColumn=B;break}}let ft=-1;for(let Q=0;Q<this.attendanceData.length;Q++)0==this.attendanceData[Q][this.activeColumn].id&&!this.attendanceData[Q][this.activeColumn].isDefShiftOff&&!(null===(k=this.attendanceData[Q][D])||void 0===k?void 0:k.isOnLeave)&&!(null===(At=this.attendanceData[Q][D])||void 0===At?void 0:At.isWithDrawn)&&!(null===(bt=this.attendanceData[Q][D])||void 0===bt?void 0:bt.isTransfered)&&!(null===(Tt=this.attendanceData[Q][D])||void 0===Tt?void 0:Tt.isResigned)&&(ft=Q);-1==ft&&this.activeColumn++})}"transResign"==(null==u?void 0:u.confirmType)&&this.loadData()})}}openPostAttendanceWindow(e,o,n,s,r){if(!this.isLoading){let c=this.oprService.openAutoWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.inputAttendanceData=e.slice(),c.componentInstance.maxPostDate=this.maxPostDate,c.componentInstance.minPostDate=this.minPostDate,c.componentInstance.projectCode=this.project.projectCode,c.componentInstance.siteCode=this.project.siteCode,c.afterClosed().subscribe(p=>{1==p.res?(this.notifyService.showSuccess(this.translate.instant("Success")),this.loadData()):this.loadData()})}}openClearAttendanceWindow(e,o,n,s,r){if(!this.isLoading){let c=this.oprService.openAutoWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.inputAttendanceData=e.slice(),c.componentInstance.maxDate=this.maxPostDate,c.componentInstance.minDate=this.minPostDate,c.componentInstance.projectCode=this.project.projectCode,c.componentInstance.siteCode=this.project.siteCode,c.afterClosed().subscribe(p=>{1==p.res?(this.notifyService.showSuccess(this.translate.instant("Success")),this.loadData()):this.loadData()})}}getAttendance(){var e,o,n;this.isLoading=!0,this.notPostedAtndncExist=!0,this.attendanceData=[],this.employeeConsolidateData=[],this.daywiseConsolidateData=[],this.updatedAttendance=[];for(let s=0;s<this.listOfRoasters.length;s++){this.attendanceData[s]=[],this.employeeConsolidateData.push({total:0,totMins:0,off:0,wd:0,a:0,nwd:0,wh:0,lateDays:0,lateHrs:0,lateMins:0,overTime:0,overTimeMins:0,notAssigned:0,actualShifts:0,contractualShifts:0,al_count:0,ul_count:0,el_count:0,sl_count:0,w_count:0,ot_count:0});for(let c=0;c<this.noOfDays;c++){this.daywiseConsolidateData.push({tch:0,tch_min:0,tcs:0,ot_count:0});let u=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(c+1).toString().padStart(2,"0");""!=(null===(e=this.listOfRoasters[s])||void 0===e?void 0:e.shiftCodesForMonth[c])&&this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.project.projectCode}/${this.siteCode}/${null===(o=this.listOfRoasters[s])||void 0===o?void 0:o.employeeNumber}/${u}/${null===(n=this.listOfRoasters[s])||void 0===n?void 0:n.shiftCodesForMonth[c]}`).subscribe(d=>{this.attendanceData[s][c]=d,d.isPosted||!(d.id>0)||d.employeeNumber!=d.altEmployeeNumber&&""!=d.altEmployeeNumber&&null!=d.altEmployeeNumber||"P"!=d.attendance&&"OT"!=d.attendance?""!=d.altEmployeeNumber&&d.id>0&&this.apiService.get("EmployeesAttendance/getAltAttendanceById",d.id).subscribe(m=>{m&&!m.isPosted&&(null==m?void 0:m.id)>0&&((null==m?void 0:m.employeeNumber)==(null==m?void 0:m.altEmployeeNumber)||""==(null==m?void 0:m.altEmployeeNumber)||null==(null==m?void 0:m.altEmployeeNumber))&&("P"==(null==m?void 0:m.attendance)||"OT"==m.attendance)&&(this.notPostedAtndncExist=!1,this.updatedAttendance.findIndex(h=>h.id==m.id)<0&&this.updatedAttendance.push(m))}):(this.notPostedAtndncExist=!1,this.updatedAttendance.push(d)),this.attendanceData.length==this.listOfRoasters.length&&0!=this.attendanceData.length&&this.attendanceData[this.listOfRoasters.length-1].length==this.noOfDays&&(this.getActiveColumn(),this.isLoading=!1)})}}}confirmPostAttendance(){0==this.updatedAttendance.length?this.notifyService.showInfo(this.translate.instant("No_Updates")):this.openPostAttendanceWindow(this.updatedAttendance.slice(),g.O.create,"Post_Attendance","Save",Pe)}postAttendance(){this.isLoading||(this.isLoading=!0,this.apiService.post("PostingMonthlyAttendance/postEmployeeAttendance",this.updatedAttendance).subscribe(e=>{this.utilService.OkMessage(),this.isLoading=!1,this.getAllAttendance()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e),this.isLoading=!1}))}getCellBackGroud(e,o){var n,s,r,c,p,u,d,m,h,C,A,S,D,U;let R=this.listOfShiftCodes2.findIndex(nt=>{var $;return nt.shiftCode==(null===($=this.listOfRoasters[e])||void 0===$?void 0:$.shiftCodesForMonth[o])}),O=this.listOfShiftCodes2.findIndex(nt=>{var $;return nt.shiftCode==(null===($=this.listOfRoasters[e])||void 0===$?void 0:$.shiftCodesForMonth[o])&&nt.isOff})>=0,J=new Date(this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(o+1).toString().padStart(2,"0")),F=new Date;return F>=J&&"x"!=(null===(n=this.listOfRoasters[e])||void 0===n?void 0:n.shiftCodesForMonth[o])&&this.activeColumn==o?null!=this.attendanceData[e][o]&&((null===(s=this.attendanceData[e][o])||void 0===s?void 0:s.isAbsent)||null!=(null===(r=this.attendanceData[e][o])||void 0===r?void 0:r.nwTime)&&0==(null===(c=this.attendanceData[e][o])||void 0===c?void 0:c.nwTime.hours)&&0==(null===(p=this.attendanceData[e][o])||void 0===p?void 0:p.nwTime.minutes)&&this.attendanceData[e][o].id>0)?"bg_red":-1==R||!this.attendanceData[e][o].isPosted||"P"!=this.attendanceData[e][o].attendance&&"OT"!=this.attendanceData[e][o].attendance?0==this.attendanceData[e][o].id?"bg_Active":"bg_white":"bg_Posted":F>=J&&"x"!=(null===(u=this.listOfRoasters[e])||void 0===u?void 0:u.shiftCodesForMonth[o])?-1==R||!(null===(d=this.attendanceData[e][o])||void 0===d?void 0:d.isPosted)||"P"!=(null===(m=this.attendanceData[e][o])||void 0===m?void 0:m.attendance)&&"OT"!=(null===(h=this.attendanceData[e][o])||void 0===h?void 0:h.attendance)?-1==R||O?O?"bg_offShift":"bg_white":(null===(C=this.attendanceData[e][o])||void 0===C?void 0:C.isAbsent)||null!=(null===(A=this.attendanceData[e][o])||void 0===A?void 0:A.nwTime)&&0==(null===(S=this.attendanceData[e][o])||void 0===S?void 0:S.nwTime.hours)&&0==(null===(D=this.attendanceData[e][o])||void 0===D?void 0:D.nwTime.minutes)&&this.attendanceData[e][o].id>0?"bg_red":"bg_white":"bg_Posted":"x"!=(null===(U=this.listOfRoasters[e])||void 0===U?void 0:U.shiftCodesForMonth[o])?"bg_gray":"bg_black"}getDefShiftBackGround(e){var o,n,s;let r=0;for(;r<this.noOfDays;){let c=this.listOfShiftCodes2.findIndex(p=>{var u;return p.shiftCode==(null===(u=this.listOfRoasters[e])||void 0===u?void 0:u.shiftCodesForMonth[r])&&p.isOff})>=0;if("x"!=(null===(o=this.listOfRoasters[e])||void 0===o?void 0:o.shiftCodesForMonth[r])&&""!=(null===(n=this.listOfRoasters[e])||void 0===n?void 0:n.shiftCodesForMonth[r])&&!c)break;r++}if(r<this.noOfDays){let c=this.listOfShiftCodes2.findIndex(p=>{var u;return p.shiftCode==(null===(u=this.listOfRoasters[e])||void 0===u?void 0:u.shiftCodesForMonth[r])});return(null===(s=this.attendanceData[e][r])||void 0===s?void 0:s.isPrimarySite)?this.getShiftColour(c):"bg_black"}return"bg_black"}getDefShiftTypeName(e){let n=this.getDefShiftCode(e),s=this.listOfShiftCodes2.findIndex(r=>r.shiftCode==n);return this.getShiftTypeNumber(s)}getDefShiftCode(e){var o,n,s;let r=0,c=!0;for(;c&&r<this.noOfDays;){let p=null===(o=this.listOfRoasters[e])||void 0===o?void 0:o.shiftCodesForMonth[r],u=this.listOfShiftCodes2.findIndex(m=>m.shiftCode==p&&m.isOff)>=0,d=this.listOfShiftCodes2.findIndex(m=>m.shiftCode==p)>=0;if(!u&&d){c=!1;break}r++}return r<this.noOfDays&&(null===(n=this.attendanceData[e][r])||void 0===n?void 0:n.isPrimarySite)?null===(s=this.listOfRoasters[e])||void 0===s?void 0:s.shiftCodesForMonth[r]:"-"}getShiftColour(e){return this.listOfShiftCodes2.findIndex(n=>n.shiftCode==this.listOfShiftCodes2[e].shiftCode&&n.isOff)>=0?"bg_offShift":this.colours[e]}manualAttendance(e,o){var n,s,r,c,p,u,d,m,h,C;let A=new Date(this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(o+1).toString().padStart(2,"0"));if(new Date<=A)this.notifyService.showError(this.translate.instant("Can_not_Enter_Attendance_For_Future_Date"));else if("x"==(null===(n=this.listOfRoasters[e])||void 0===n?void 0:n.shiftCodesForMonth[o]))if(new Date(this.listOfRoasters[e].monthStartDate)<=A&&new Date(this.listOfRoasters[e].monthEndDate)>=A){let D={projectCode:this.listOfRoasters[e].projectCode,siteCode:this.listOfRoasters[e].siteCode,employeeNumber:this.listOfRoasters[e].employeeNumber,date:this.year.toString()+"-"+this.month.toString().padStart(2,"0")+"-"+(o+1).toString().padStart(2,"0")};this.apiService.post("PvAllRequests/getRecentApprovedPvRequestData",D).subscribe(U=>{0==(null==U?void 0:U.reqId)||null==U?this.notifyService.showInfo("Employee Not Available"):1==(null==U?void 0:U.requestType)?this.openDialogManage(null==U?void 0:U.reqId,g.O.create,"Request_For_Add_Resource","View",Jt):2==(null==U?void 0:U.requestType)?this.openDialogManage(null==U?void 0:U.reqId,g.O.create,"Request_For_Remove_Resource","View",Rt):3==(null==U?void 0:U.requestType)?this.openDialogManage(null==U?void 0:U.reqId,g.O.create,"Request_For_Transfer_Employee","View",Pt):4==(null==U?void 0:U.requestType)?this.openDialogManage(null==U?void 0:U.reqId,g.O.create,"Request_For_Transfer_With_Replacement","View",Ft):5==(null==U?void 0:U.requestType)?this.openDialogManage(null==U?void 0:U.reqId,g.O.create,"Request_For_Swap_Employees","View",te):6==(null==U?void 0:U.requestType)&&this.openDialogManage(null==U?void 0:U.reqId,g.O.create,"Request_For_Replace_Resource","View",Mt)})}else this.notifyService.showError(this.translate.instant("Invalid_Date_Selection"));else if(""==(null===(s=this.listOfRoasters[e])||void 0===s?void 0:s.shiftCodesForMonth[o])||-2==this.attendanceData[e][o].id)this.notifyService.showError(this.translate.instant("Shifts_Not_Assigned"));else if(0!=this.attendanceData.length)if(this.attendanceData[e][o].id>=0){let D={r:e,c:o,totRows:this.listOfRoasters.length},U=this.listOfShiftCodes2.findIndex(O=>{var J;return O.shiftCode==(null===(J=this.listOfRoasters[e])||void 0===J?void 0:J.shiftCodesForMonth[o])&&O.isOff})>=0,R={id:this.attendanceData[e][o].id,projectCode:this.project.projectCode,siteCode:this.siteCode,attnDate:this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(o+1).toString().padStart(2,"0"),shiftCode:null===(r=this.listOfRoasters[e])||void 0===r?void 0:r.shiftCodesForMonth[o],employeeNumber:this.listOfRoasters[e].employeeNumber,employeeID:this.listOfRoasters[e].employeeID,isDefShiftOff:U,isActive:!0,inTime:null===(c=this.listOfShiftCodes2.find(O=>{var J;return O.shiftCode==(null===(J=this.listOfRoasters[e])||void 0===J?void 0:J.shiftCodesForMonth[o])}))||void 0===c?void 0:c.inTime,outTime:null===(p=this.listOfShiftCodes2.find(O=>{var J;return O.shiftCode==(null===(J=this.listOfRoasters[e])||void 0===J?void 0:J.shiftCodesForMonth[o])}))||void 0===p?void 0:p.outTime,isDefaultEmployee:!(null===(u=this.listOfShiftCodes2.find(O=>{var J;return O.shiftCode==(null===(J=this.listOfRoasters[e])||void 0===J?void 0:J.shiftCodesForMonth[o])}))||void 0===u?void 0:u.isOff),isPrimarySite:null===(d=this.listOfRoasters[e])||void 0===d?void 0:d.isPrimaryResource,isPosted:null===(m=this.attendanceData[e][o])||void 0===m?void 0:m.isPosted,altEmployeeNumber:this.listOfRoasters[e].employeeNumber,altShiftCode:null===(h=this.listOfRoasters[e])||void 0===h?void 0:h.shiftCodesForMonth[o],attendance:(null===(C=this.attendanceData[e][o-1])||void 0===C?void 0:C.id)>0?this.attendanceData[e][o-1].attendance:"P",refIdForAlt:0,leavesData:this.attendanceData[e][o].leavesData,transORresignData:this.attendanceData[e][o].transORresignData,isOnLeave:this.attendanceData[e][o].isOnLeave,isWithDrawn:this.attendanceData[e][o].isWithDrawn,isResigned:this.attendanceData[e][o].isResigned,isTransfered:this.attendanceData[e][o].isTransfered,daywiseConsolidateData:this.daywiseConsolidateData[o],roasterData:this.listOfRoasters[e],r:e,c:o,shiftCodesSelectionList:this.listOfShiftCodes2};this.openDialogWindow(D,R,g.O.create,"Manual_Attendance","Save",ke)}else 0==this.attendanceData[e][o-1].id&&this.notifyService.showError(this.translate.instant("Enter_Previous_Day_Attendance_First"))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{})}getActiveColumn(){var e,o,n,s,r,c,p,u,d,m,h,C;for(let A=0;A<this.attendanceData.length;A++)for(let S=0;S<this.attendanceData[A].length;S++){if(!(-1!=this.activeColumn||0!=(null===(e=this.attendanceData[A][S])||void 0===e?void 0:e.id)||this.attendanceData[A][S].isDefShiftOff||(null===(o=this.attendanceData[A][S])||void 0===o?void 0:o.isOnLeave)||(null===(n=this.attendanceData[A][S])||void 0===n?void 0:n.isWithDrawn)||(null===(s=this.attendanceData[A][S])||void 0===s?void 0:s.isTransfered)||(null===(r=this.attendanceData[A][S])||void 0===r?void 0:r.isResigned)||"x"==(null===(c=this.listOfRoasters[A])||void 0===c?void 0:c.shiftCodesForMonth[S]))){this.activeColumn=S;break}if(this.activeColumn>S&&0==(null===(p=this.attendanceData[A][S])||void 0===p?void 0:p.id)&&!this.attendanceData[A][S].isDefShiftOff&&!(null===(u=this.attendanceData[A][S])||void 0===u?void 0:u.isOnLeave)&&!(null===(d=this.attendanceData[A][S])||void 0===d?void 0:d.isWithDrawn)&&!(null===(m=this.attendanceData[A][S])||void 0===m?void 0:m.isTransfered)&&!(null===(h=this.attendanceData[A][S])||void 0===h?void 0:h.isResigned)&&"x"!=(null===(C=this.listOfRoasters[A])||void 0===C?void 0:C.shiftCodesForMonth[S])){this.activeColumn=S;break}}}updateManualAttendance(e,o){var n;if(this.listOfRoasters.length>0){let s=new Date(this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(o+1).toString().padStart(2,"0"));if(new Date<=s)this.notifyService.showError(this.translate.instant("Can_not_Enter_Attendance_For_Future_Date"));else if(this.attendanceData.length>0&&(null===(n=this.attendanceData[e][o])||void 0===n?void 0:n.id)>0){let c={r:e,c:o,totRows:this.listOfRoasters.length};this.attendanceData[e][o].daywiseConsolidateData=this.daywiseConsolidateData[o],this.openDialogWindow(c,this.attendanceData[e][o],g.O.create,"Update_Manual_Attendance","Save",Re)}}}onRightClick(e,o){return this.updateManualAttendance(e,o),!1}translateToolTip(e){return`${this.translate.instant(e)}`}confirmAutoAttendancePerDay(e){this.openConfirmationDialog(g.O.create,"Are_You_Sure?",xt,"general","AutoAttendancePerDay",e)}AutoAttendancePerDay(e){var o,n,s,r,c,p,u,d,m,h,C,A,S,D,U,R,O,J;let F=[];if(null==this.workingHoursInSite||this.workingHoursInSite<=0)return void this.notifyService.showInfo("No.Of_Working_Hours_For_Site_Not_Defined");let nt=0;if(0!=this.listOfRoasters.length){let $=new Date(this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(e+1).toString().padStart(2,"0"));if(new Date>=$)for(let K=0;K<this.listOfRoasters.length;K++)if(0==this.attendanceData[K][e].id&&!this.attendanceData[K][e].isDefShiftOff&&!(null===(o=this.attendanceData[K][e])||void 0===o?void 0:o.isOnLeave)&&!(null===(n=this.attendanceData[K][e])||void 0===n?void 0:n.isWithDrawn)&&!(null===(s=this.attendanceData[K][e])||void 0===s?void 0:s.isTransfered)&&!(null===(r=this.attendanceData[K][e])||void 0===r?void 0:r.isResigned)&&this.listOfRoasters[K].isPrimaryResource){let mt={id:0,projectCode:this.project.projectCode,siteCode:this.siteCode,attnDate:this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(e+1).toString().padStart(2,"0"),shiftCode:null===(c=this.listOfRoasters[K])||void 0===c?void 0:c.shiftCodesForMonth[e],employeeNumber:this.listOfRoasters[K].employeeNumber,isDefShiftOff:!1,isActive:!0,inTime:null===(p=this.listOfShiftCodes2.find(Y=>{var k;return Y.shiftCode==(null===(k=this.listOfRoasters[K])||void 0===k?void 0:k.shiftCodesForMonth[e])}))||void 0===p?void 0:p.inTime,outTime:null===(u=this.listOfShiftCodes2.find(Y=>{var k;return Y.shiftCode==(null===(k=this.listOfRoasters[K])||void 0===k?void 0:k.shiftCodesForMonth[e])}))||void 0===u?void 0:u.outTime,workingTime:null===(d=this.listOfShiftCodes2.find(Y=>{var k;return Y.shiftCode==(null===(k=this.listOfRoasters[K])||void 0===k?void 0:k.shiftCodesForMonth[e])}))||void 0===d?void 0:d.workingTime,isDefaultEmployee:!0,isPrimarySite:null===(m=this.listOfRoasters[K])||void 0===m?void 0:m.isPrimaryResource,isPosted:!1,altEmployeeNumber:"",altShiftCode:"",attendance:"P",refIdForAlt:0,shiftNumber:1};nt+=+mt.workingTime.substring(0,2),F.push(mt)}}if(F.length>0){let $=(null===(h=this.daywiseConsolidateData[e])||void 0===h?void 0:h.tch)-(null===(C=this.daywiseConsolidateData[e])||void 0===C?void 0:C.hours);$<nt||nt==$&&this.daywiseConsolidateData[e].mins>0?this.notifyService.showError(this.translate.instant("Daily_Shift_Hours_Exceeding")):(null===(A=this.daywiseConsolidateData[e])||void 0===A?void 0:A.varInShift)<F.length?this.notifyService.showError(this.translate.instant("Daily_Contract_Shifts_Exceeding")):this.apiService.post("EmployeesAttendance/enterAutoAttendance",F).subscribe(z=>{this.getSelectedColumnAttendance(e),this.utilService.OkMessage(),this.activeColumn++},z=>{console.error(z),this.utilService.ShowApiErrorMessage(z)})}else{let $=-1;for(;-1==$;){for(let z=0;z<this.attendanceData.length;z++)0==(null===(S=this.attendanceData[z][this.activeColumn])||void 0===S?void 0:S.id)&&!(null===(D=this.attendanceData[z][this.activeColumn])||void 0===D?void 0:D.isDefShiftOff)&&!(null===(U=this.attendanceData[z][this.activeColumn])||void 0===U?void 0:U.isOnLeave)&&!(null===(R=this.attendanceData[z][this.activeColumn])||void 0===R?void 0:R.isWithDrawn)&&!(null===(O=this.attendanceData[z][this.activeColumn])||void 0===O?void 0:O.isTransfered)&&!(null===(J=this.attendanceData[z][this.activeColumn])||void 0===J?void 0:J.isResigned)&&($=z);if(-1==$&&this.activeColumn++,this.listOfDays.length<this.activeColumn){$=this.activeColumn;break}}this.getSelectedColumnAttendance(e)}}getSelectedColumnAttendance(e){var o,n;this.isLoading=!0,this.inputListForDay=[];for(let r=0;r<this.listOfRoasters.length;r++){let c=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(e+1).toString().padStart(2,"0"),p={projectCode:this.project.projectCode,siteCode:this.siteCode,employeeNumber:null===(o=this.listOfRoasters[r])||void 0===o?void 0:o.employeeNumber,attnDate:c,shiftCode:null===(n=this.listOfRoasters[r])||void 0===n?void 0:n.shiftCodesForMonth[e]};this.inputListForDay.push(p)}let s={inputList:this.inputListForDay.splice(0)};this.apiService.post("EmployeesAttendance/getAllEmployeeAttendance",s).subscribe(r=>{let c=r;for(let p=0;p<c.length;p++)this.attendanceData[p][e]=c[p];this.isLoading=!1}),this.getActiveColumn()}openConfirmationDialog(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,n);p.componentInstance.dbops=e,p.componentInstance.modalTitle=o,p.componentInstance.confirmType=s,p.componentInstance.noOfUpdates=this.updatedAttendance.length,p.afterClosed().subscribe(u=>{(u&&1==u||u.res)&&("AutoAttendanceForMonth"==r?this.AutoAttendanceForMonth():"AutoAttendancePerDay"==r?this.AutoAttendancePerDay(c):"postAttendance"==r&&this.postAttendance())})}confirmAutoAttendanceForMonth(){this.openConfirmationDialog(g.O.create,"Are_You_Sure?",xt,"general","AutoAttendanceForMonth",0)}AutoAttendanceForMonth(){var e,o,n,s,r,c,p,u,d,m,h,C;let A=[];for(let S=0;S<this.listOfRoasters.length;S++)for(let D=0;D<this.noOfDays;D++){let U=!1;for(let O=0;O<this.listOfRoasters.length;O++)if(this.attendanceData[O][D].id>0){U=!0;break}let R=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(D+1).toString().padStart(2,"0");if(0==this.attendanceData[S][D].id&&!this.attendanceData[S][D].isDefShiftOff&&!(null===(e=this.attendanceData[S][D])||void 0===e?void 0:e.isOnLeave)&&!(null===(o=this.attendanceData[S][D])||void 0===o?void 0:o.isWithDrawn)&&!(null===(n=this.attendanceData[S][D])||void 0===n?void 0:n.isTransfered)&&!(null===(s=this.attendanceData[S][D])||void 0===s?void 0:s.isResigned)&&this.listOfRoasters[S].isPrimaryResource&&!U){let O={id:0,projectCode:this.project.projectCode,siteCode:this.siteCode,attnDate:R,shiftCode:null===(r=this.listOfRoasters[S])||void 0===r?void 0:r.shiftCodesForMonth[D],employeeNumber:this.listOfRoasters[S].employeeNumber,isDefShiftOff:!1,isActive:!0,inTime:null===(c=this.listOfShiftCodes2.find(J=>{var F;return J.shiftCode==(null===(F=this.listOfRoasters[S])||void 0===F?void 0:F.shiftCodesForMonth[D])}))||void 0===c?void 0:c.inTime,outTime:null===(p=this.listOfShiftCodes2.find(J=>{var F;return J.shiftCode==(null===(F=this.listOfRoasters[S])||void 0===F?void 0:F.shiftCodesForMonth[D])}))||void 0===p?void 0:p.outTime,isDefaultEmployee:!0,isPrimarySite:null===(u=this.listOfRoasters[S])||void 0===u?void 0:u.isPrimaryResource,isPosted:!1,altEmployeeNumber:"",altShiftCode:"",attendance:"P",refIdForAlt:0,shiftNumber:1};A.push(O)}}if(A.length>0){let S=(null===(d=this.Totals())||void 0===d?void 0:d.wh)-(null===(m=this.Totals())||void 0===m?void 0:m.total);S<A.length*this.workingHoursInSite||A.length*this.workingHoursInSite==S&&(null===(h=this.Totals())||void 0===h?void 0:h.totMins)>0?this.notifyService.showError(this.translate.instant("Monthly_Shift_Hours_Exceeding")):(null===(C=this.Totals())||void 0===C?void 0:C.varInShift)<A.length?this.notifyService.showError(this.translate.instant("Monthly_Contract_Shifts_Exceeding")):(this.isLoading=!0,this.apiService.post("EmployeesAttendance/enterAutoAttendance",A).subscribe(D=>{this.utilService.OkMessage(),this.loadData()},D=>{console.error(D),this.utilService.ShowApiErrorMessage(D)}))}else{let S=-1;for(;-1!=S;){for(let D=0;D<this.attendanceData.length;D++)0==this.attendanceData[D][this.activeColumn].id&&(S=D);-1==S&&this.activeColumn++}this.notifyService.showError(this.translate.instant("Default_Attedance_Already_Marked")),this.isLoading=!1}}DayWiseShiftCount(e){var o,n,s,r,c,p,u,d,m;let h=0,C=0,A=0,S=0,D=0,U=0;for(let O=0;O<this.attendanceData.length;O++)h=null==(null===(o=this.attendanceData[O][e])||void 0===o?void 0:o.nwTime)?h:h+(null===(n=this.attendanceData[O][e])||void 0===n?void 0:n.nwTime.hours),C=null==(null===(s=this.attendanceData[O][e])||void 0===s?void 0:s.nwTime)?C:C+(null===(r=this.attendanceData[O][e])||void 0===r?void 0:r.nwTime.minutes),S=(null===(c=this.attendanceData[O][e])||void 0===c?void 0:c.isPrimarySite)&&"x"!=(null===(p=this.listOfRoasters[O])||void 0===p?void 0:p.shiftCodesForMonth[e])?S+1:S,A=S*this.workingHoursInSite,D=null==(null===(u=this.attendanceData[O][e])||void 0===u?void 0:u.nwTime)?D:D+(null===(d=this.attendanceData[O][e])||void 0===d?void 0:d.shiftsCount),U+=null===(m=this.attendanceData[O][e])||void 0===m?void 0:m.otCount;return h+=(C-C%60)/60,C%=60,this.daywiseConsolidateData[e].tch=A,this.daywiseConsolidateData[e].tcs=S,this.daywiseConsolidateData[e].taws=D,this.daywiseConsolidateData[e].varInShift=S-D,this.daywiseConsolidateData[e].hours=h,this.daywiseConsolidateData[e].mins=C,this.daywiseConsolidateData[e].ot_count=U,this.daywiseConsolidateData[e]}EmployeeWiseShiftCount(e){var o,n,s,r,c,p,u,d,m,h,C,A,S,D,U,R,O,J,F,nt,$,z,K;let mt=0,st=0,Y=0,k=0,At=0,bt=0,Tt=0,Ct=0,ft=0,Q=0,B=0,qt=0,vt=0,yt=0,Zt=0,Ut=0,P=0,I=0,jt=0,kt=0;for(let pt=0;pt<this.attendanceData[e].length;pt++)mt+=null===(o=this.attendanceData[e][pt])||void 0===o?void 0:o.nwTime.hours,st+=null===(n=this.attendanceData[e][pt])||void 0===n?void 0:n.nwTime.minutes,Y=(null===(s=this.attendanceData[e][pt])||void 0===s?void 0:s.isDefShiftOff)?Y+1:Y,k="A"!=(null===(r=this.attendanceData[e][pt])||void 0===r?void 0:r.attendance)&&"S"!=(null===(c=this.attendanceData[e][pt])||void 0===c?void 0:c.attendance)||(null===(p=this.attendanceData[e][pt])||void 0===p?void 0:p.isOnLeave)||(null===(u=this.attendanceData[e][pt])||void 0===u?void 0:u.isDefShiftOff)?k:k+1,At=(null===(d=this.attendanceData[e][pt])||void 0===d?void 0:d.isWorkedOnday)?At+1:At,bt+=null===(m=this.attendanceData[e][pt])||void 0===m?void 0:m.lateDays,Tt+=null===(h=this.attendanceData[e][pt])||void 0===h?void 0:h.lateHrs.hours,Ct+=null===(C=this.attendanceData[e][pt])||void 0===C?void 0:C.lateHrs.minutes,ft+=null===(A=this.attendanceData[e][pt])||void 0===A?void 0:A.overTime.hours,Q+=null===(S=this.attendanceData[e][pt])||void 0===S?void 0:S.overTime.minutes,B=(null===(D=this.attendanceData[e][pt])||void 0===D?void 0:D.isAbsent)?B+1:B,qt+=null===(U=this.attendanceData[e][pt])||void 0===U?void 0:U.shiftsCount,vt+=null===(R=this.attendanceData[e][pt])||void 0===R?void 0:R.contractualShifts,yt=(null===(O=this.attendanceData[e][pt])||void 0===O?void 0:O.leavesData.al)?yt+1:yt,Zt=(null===(J=this.attendanceData[e][pt])||void 0===J?void 0:J.leavesData.ul)?Zt+1:Zt,Ut=(null===(F=this.attendanceData[e][pt])||void 0===F?void 0:F.leavesData.el)?Ut+1:Ut,P=(null===(nt=this.attendanceData[e][pt])||void 0===nt?void 0:nt.leavesData.sl)?P+1:P,I=(null===($=this.attendanceData[e][pt])||void 0===$?void 0:$.leavesData.stl)?I+1:I,jt=(null===(z=this.attendanceData[e][pt])||void 0===z?void 0:z.leavesData.w)?jt+1:jt,kt+=null===(K=this.attendanceData[e][pt])||void 0===K?void 0:K.otCount;return this.employeeConsolidateData[e].total=mt+(st-st%60)/60,this.employeeConsolidateData[e].totMins=st%60,this.employeeConsolidateData[e].off=Y,this.employeeConsolidateData[e].wd=this.noOfDays,this.employeeConsolidateData[e].nwd=At,this.employeeConsolidateData[e].a=k,this.employeeConsolidateData[e].wh=this.noOfDays*this.workingHoursInSite,this.employeeConsolidateData[e].lateDays=bt,this.employeeConsolidateData[e].lateHrs=Tt+(Ct-Ct%60)/60,this.employeeConsolidateData[e].lateMins=Ct%60,this.employeeConsolidateData[e].overTime=ft+(Q-Q%60)/60,this.employeeConsolidateData[e].overTimeMins=Q%60,this.employeeConsolidateData[e].notAssigned=B,this.employeeConsolidateData[e].actualShifts=qt,this.employeeConsolidateData[e].contractualShifts=vt,this.employeeConsolidateData[e].al_count=yt,this.employeeConsolidateData[e].ul_count=Zt,this.employeeConsolidateData[e].el_count=Ut,this.employeeConsolidateData[e].sl_count=P,this.employeeConsolidateData[e].stl_count=I,this.employeeConsolidateData[e].w_count=jt,this.employeeConsolidateData[e].penalty=2*k,this.employeeConsolidateData[e].ot_count=kt,this.employeeConsolidateData[e]}Totals(){var e,o,n,s,r,c,p,u,d,m,h,C,A,S,D,U,R,O,J,F,nt,$,z,K,mt;let st=0,Y=0,k=0,At=0,bt=0,Tt=0,Ct=0,ft=0,Q=0,B=0,qt=0,vt=0,yt=0,Zt=0,Ut=0,P=0,I=0,jt=0,kt=0,pt=0,Qt=0,Bt=0;for(let dt=0;dt<this.attendanceData.length;dt++){let Qe=0;for(let De=0;null===(e=this.listOfRoasters[dt])||void 0===e?void 0:e.shiftCodesForMonth.length;De++)if(""!=(null===(o=this.listOfRoasters[dt])||void 0===o?void 0:o.shiftCodesForMonth[De])&&"x"!=(null===(n=this.listOfRoasters[dt])||void 0===n?void 0:n.shiftCodesForMonth[De])){Qe=De;break}bt=null==this.attendanceData[dt][Qe]?bt:bt+(null===(s=this.employeeConsolidateData[dt])||void 0===s?void 0:s.wd),Tt=null==this.attendanceData[dt][Qe]?Tt:Tt+(null===(r=this.employeeConsolidateData[dt])||void 0===r?void 0:r.wh),null==this.employeeConsolidateData[dt]?(st=st,k=k,Y=Y,At=At,Ct=Ct,ft=ft,Q=Q,B=B,qt=qt,vt=vt,Zt=Zt,Ut=Ut,P=P,I=I,jt=jt,kt=kt,pt=pt,Bt=Bt,Qt=Qt):(st+=null===(c=this.employeeConsolidateData[dt])||void 0===c?void 0:c.total,k+=null===(p=this.employeeConsolidateData[dt])||void 0===p?void 0:p.off,Y+=null===(u=this.employeeConsolidateData[dt])||void 0===u?void 0:u.totMins,At+=null===(d=this.employeeConsolidateData[dt])||void 0===d?void 0:d.nwd,Ct+=null===(m=this.employeeConsolidateData[dt])||void 0===m?void 0:m.lateHrs,ft+=null===(h=this.employeeConsolidateData[dt])||void 0===h?void 0:h.lateMins,Q+=null===(C=this.employeeConsolidateData[dt])||void 0===C?void 0:C.overTime,B+=null===(A=this.employeeConsolidateData[dt])||void 0===A?void 0:A.overTimeMins,qt+=null===(S=this.employeeConsolidateData[dt])||void 0===S?void 0:S.notAssigned,vt+=null===(D=this.employeeConsolidateData[dt])||void 0===D?void 0:D.actualShifts,Zt+=null===(U=this.employeeConsolidateData[dt])||void 0===U?void 0:U.al_count,Ut+=null===(R=this.employeeConsolidateData[dt])||void 0===R?void 0:R.ul_count,P+=null===(O=this.employeeConsolidateData[dt])||void 0===O?void 0:O.el_count,I+=null===(J=this.employeeConsolidateData[dt])||void 0===J?void 0:J.sl_count,jt+=null===(F=this.employeeConsolidateData[dt])||void 0===F?void 0:F.stl_count,kt+=null===(nt=this.employeeConsolidateData[dt])||void 0===nt?void 0:nt.w_count,pt+=null===($=this.employeeConsolidateData[dt])||void 0===$?void 0:$.penalty,Bt+=null===(z=this.employeeConsolidateData[dt])||void 0===z?void 0:z.a,Qt+=null===(K=this.employeeConsolidateData[dt])||void 0===K?void 0:K.ot_count)}let $t=this.diffTime(st,Y,Q+(B-B%60)/60,B%60).hrs,Ce=this.diffTime(st,Y,Q+(B-B%60)/60,B%60).mins,Le=this.sumTime($t,Ce,Ct,ft).hrs,H=this.sumTime($t,Ce,Ct,ft).mins,wt=this.multiplyTime(Q+(B-B%60)/60,B%60,1.5),To=this.multiplyTime(Q+(B-B%60)/60,B%60,.5),K8=this.sumTime(st+(Y-Y%60)/60,Y%60,To.hrs,To.mins);for(let dt=0;dt<this.daywiseConsolidateData.length;dt++)yt+=this.daywiseConsolidateData[dt].tcs;let t9={total:st+(Y-Y%60)/60,offs:k,totMins:Y%60,nwd:At,wd:bt,wh:Tt,lateHrs:Ct+(ft-ft%60)/60,lateMins:ft%60,overTime:Q+(B-B%60)/60,overTimeMins:B%60,notAssigned:qt,actualShifts:vt,contractualShifts:yt,al_count:Zt,ul_count:Ut,el_count:P,sl_count:I,stl_count:jt,w_count:kt,penalty:pt,a:Bt,varInShifts:yt-vt,ot_count:Qt,tawhWoOt:Le,tawmWoOt:H,diffHrs:this.diffTime(Tt,0,st+(Y-Y%60)/60,Y%60).hrs,diffMins:this.diffTime(Tt,0,st+(Y-Y%60)/60,Y%60).mins,spl_ot:wt,tAWOt:K8};return this.attendanceData.length==this.listOfRoasters.length&&0!=this.listOfRoasters.length&&(null===(mt=this.attendanceData[this.attendanceData.length-1])||void 0===mt?void 0:mt.length)>=this.noOfDays-1&&(this.isDataLoading=!1),t9}showTime(e,o){return this.showMins?e.toString()+"."+o.toString():e.toString()}diffTime(e,o,n,s){return{hrs:o-s<0?e-n-1:e-n,mins:o-s<0?o-s+60:o-s}}sumTime(e,o,n,s){let r=e+n,c=o+s;return c>=60&&(r+=c%60,c%=60),{hrs:r,mins:c}}getSiteData(e){return this.siteCodeList.find(o=>o.siteCode==e)}getAttendanceCellData(e,o){var n,s,r,c,p,u,d,m,h,C,A,S,D,U,R,O,J,F,nt,$,z,K,mt,st,Y,k,At,bt,Tt,Ct,ft,Q,B,qt,vt,yt,Zt;if((null===(n=this.attendanceData[e][o])||void 0===n?void 0:n.isOnLeave)&&!(null===(s=this.attendanceData[e][o])||void 0===s?void 0:s.isWithDrawn)){if(this.attendanceData[e][o].leavesData.al)return"AL";if(this.attendanceData[e][o].leavesData.ul)return"UL";if(this.attendanceData[e][o].leavesData.sl)return"SL";if(this.attendanceData[e][o].leavesData.el)return"EL";if(this.attendanceData[e][o].leavesData.stl)return"STL"}else{if((null===(r=this.attendanceData[e][o])||void 0===r?void 0:r.isOnLeave)&&!(null===(c=this.attendanceData[e][o])||void 0===c?void 0:c.isWithDrawn))return"W";if(null===(p=this.attendanceData[e][o])||void 0===p?void 0:p.isTransfered)return"TR";if(null===(u=this.attendanceData[e][o])||void 0===u?void 0:u.isResigned)return"R";if(-1==(null===(d=this.attendanceData[e][o])||void 0===d?void 0:d.id))return"";if(null===(m=this.attendanceData[e][o])||void 0===m?void 0:m.isAbsent)return"A";if((null===(h=this.attendanceData[e][o])||void 0===h?void 0:h.isOnLeave)||(null===(C=this.attendanceData[e][o])||void 0===C?void 0:C.isWithDrawn)){if(null===(Zt=this.attendanceData[e][o])||void 0===Zt?void 0:Zt.isWithDrawn)return"W"}else{if(null===(A=this.attendanceData[e][o])||void 0===A?void 0:A.isWorkedOnday)return this.showTime(null===(S=this.attendanceData[e][o])||void 0===S?void 0:S.nwTime.hours,null===(D=this.attendanceData[e][o])||void 0===D?void 0:D.nwTime.minutes);if(0==(null===(U=this.attendanceData[e][o])||void 0===U?void 0:U.id)&&!(null===(R=this.attendanceData[e][o])||void 0===R?void 0:R.isDefShiftOff))return"-";if(0==(null===(O=this.attendanceData[e][o])||void 0===O?void 0:O.id)&&(null===(J=this.attendanceData[e][o])||void 0===J?void 0:J.isDefShiftOff)&&!(null===(F=this.attendanceData[e][o])||void 0===F?void 0:F.isWorkedOnday))return"OF";if((null===(nt=this.attendanceData[e][o])||void 0===nt?void 0:nt.id)>0&&(null===($=this.attendanceData[e][o])||void 0===$?void 0:$.isDefShiftOff)&&!(null===(z=this.attendanceData[e][o])||void 0===z?void 0:z.isWorkedOnday))return"O";if((null===(K=this.attendanceData[e][o])||void 0===K?void 0:K.id)>0&&(null===(mt=this.attendanceData[e][o])||void 0===mt?void 0:mt.isDefShiftOff)&&(null===(st=this.attendanceData[e][o])||void 0===st?void 0:st.isWorkedOnday))return"OT";if((null===(Y=this.attendanceData[e][o])||void 0===Y?void 0:Y.id)>0&&(null===(k=this.attendanceData[e][o])||void 0===k?void 0:k.isDefShiftOff)&&(0!=(null===(At=this.attendanceData[e][o])||void 0===At?void 0:At.nwTime.hours)||0!=(null===(bt=this.attendanceData[e][o])||void 0===bt?void 0:bt.nwTime.minutes)))return(null===(Tt=this.attendanceData[e][o])||void 0===Tt?void 0:Tt.nwTime.hours.toSting())+"."+(null===(Ct=this.attendanceData[e][o])||void 0===Ct?void 0:Ct.nwTime.minutes.toString());if((null===(ft=this.attendanceData[e][o])||void 0===ft?void 0:ft.id)>0&&!(null===(Q=this.attendanceData[e][o])||void 0===Q?void 0:Q.isDefShiftOff))return 0!=(null===(B=this.attendanceData[e][o])||void 0===B?void 0:B.nwTime.hours)||0!=(null===(qt=this.attendanceData[e][o])||void 0===qt?void 0:qt.nwTime.minutes)?(null===(vt=this.attendanceData[e][o])||void 0===vt?void 0:vt.nwTime.hours.toSting())+"."+(null===(yt=this.attendanceData[e][o])||void 0===yt?void 0:yt.nwTime.minutes.toString()):"A"}}return""}calculateStyles(e,o){return this.attendanceData[e][o].isDefShiftOff?"background-color: red":"background-color: blue"}multiplyTime(e,o,n){return{hrs:o*n>60?1.5*e+o*n/60:e*n,mins:o*n%60}}devideTime(e,o,n){return{hrs:(e-e%n)/n,mins:(e%n+o-(e%n+o)%n)/n}}convertTimeToShifts(e,o,n){return parseFloat(Number(((60*e*60+60*o)/(60*n*60)).toString()).toFixed(1))}getAllAttendance(){var e,o;this.isLoading=!0,this.notPostedAtndncExist=!0,this.attendanceData=[],this.employeeConsolidateData=[],this.daywiseConsolidateData=[],this.updatedAttendance=[];for(let n=0;n<this.listOfRoasters.length;n++){this.attendanceData[n]=[],this.employeeConsolidateData.push({total:0,totMins:0,off:0,wd:0,a:0,nwd:0,wh:0,lateDays:0,lateHrs:0,lateMins:0,overTime:0,overTimeMins:0,notAssigned:0,actualShifts:0,al_count:0,ul_count:0,el_count:0,sl_count:0,w_count:0,ot_count:0});for(let c=0;c<this.noOfDays;c++){this.daywiseConsolidateData.push({tch:0,tch_min:0,tcs:0,ot_count:0});let u=this.year+"-"+this.month.toString().padStart(2,"0")+"-"+(c+1).toString().padStart(2,"0"),d={projectCode:this.project.projectCode,siteCode:this.siteCode,employeeNumber:null===(e=this.listOfRoasters[n])||void 0===e?void 0:e.employeeNumber,attnDate:u,shiftCode:null===(o=this.listOfRoasters[n])||void 0===o?void 0:o.shiftCodesForMonth[c]};this.inputArray.push(d)}let r={inputList:this.inputArray.splice(0)};this.apiService.post("EmployeesAttendance/getAllEmployeeAttendance",r).subscribe(c=>{var p,u,d,m,h,C,A,S,D,U;let R=c,O=0;for(let J=0;J<this.noOfDays;J++)this.attendanceData[n][J]=R[O],(null===(p=R[O])||void 0===p?void 0:p.isPosted)||!((null===(u=R[O])||void 0===u?void 0:u.id)>0)||(null===(d=R[O])||void 0===d?void 0:d.employeeNumber)!=(null===(m=R[O])||void 0===m?void 0:m.altEmployeeNumber)&&""!=(null===(h=R[O])||void 0===h?void 0:h.altEmployeeNumber)&&null!=(null===(C=R[O])||void 0===C?void 0:C.altEmployeeNumber)||"P"!=(null===(A=R[O])||void 0===A?void 0:A.attendance)&&"OT"!=(null===(S=R[O])||void 0===S?void 0:S.attendance)?""!=(null===(D=R[O])||void 0===D?void 0:D.altEmployeeNumber)&&(null===(U=R[O])||void 0===U?void 0:U.id)>0&&this.apiService.get("EmployeesAttendance/getAltAttendanceById",R[O].id).subscribe(F=>{F&&!F.isPosted&&(null==F?void 0:F.id)>0&&((null==F?void 0:F.employeeNumber)==(null==F?void 0:F.altEmployeeNumber)||""==(null==F?void 0:F.altEmployeeNumber)||null==(null==F?void 0:F.altEmployeeNumber))&&("P"==(null==F?void 0:F.attendance)||"OT"==F.attendance)&&(this.notPostedAtndncExist=!1,this.updatedAttendance.findIndex(nt=>nt.id==F.id)<0&&this.updatedAttendance.push(F))}):(this.notPostedAtndncExist=!1,this.updatedAttendance.push(R[O])),(n==this.listOfRoasters.length-1||0==this.listOfRoasters.length)&&(this.getActiveColumn(),this.isLoading=!1),O++})}}getShiftTypeNumber(e){var o,n,s,r;if(-1==e)return{number:-1,nameEn:"-",nameAr:"-"};let c=0,p=this.listOfShiftCodes2.findIndex(m=>"O"==m.shiftCode)>=0,u=Number(null===(o=this.listOfShiftCodes2[e])||void 0===o?void 0:o.inTime.substring(0,2)),d=Number(null===(n=this.listOfShiftCodes2[e])||void 0===n?void 0:n.inTime.substring(3,2));for(let m=0;m<this.listOfShiftCodes2.length;m++){let h=Number(null===(s=this.listOfShiftCodes2[m])||void 0===s?void 0:s.inTime.substring(0,2)),C=Number(null===(r=this.listOfShiftCodes2[m])||void 0===r?void 0:r.inTime.substring(0,2));(u>h||u==h&&d>C)&&c++}return p?this.shiftTypeNames[c]:this.shiftTypeNames[c+1]}exportexcel(){let e=document.getElementById("excel_table"),o=document.getElementById("excel_table2"),n=document.getElementById("excel_table3"),s=document.getElementById("excel_table4");const r=ut.P6.table_to_sheet(e),c=ut.P6.table_to_sheet(o),p=ut.P6.table_to_sheet(n),u=ut.P6.table_to_sheet(s),d=ut.P6.book_new();ut.P6.book_append_sheet(d,r,"Sheet1"),ut.P6.book_append_sheet(d,c,"Sheet2"),ut.P6.book_append_sheet(d,p,"Sheet3"),ut.P6.book_append_sheet(d,u,"Sheet4"),ut.NC(d,"Attendance_"+this.project.projectCode+"_"+this.siteCode+"_"+this.month+"_"+this.year+".xlsx")}getRoasterReport(){if(this.roasterReport=[],this.totRoastersReport={contractualShifts:0,offs:0,qty:0},0!=this.listOfRoasters.length){let e=this.listOfRoasters.filter(o=>o.isPrimaryResource);return this.attendanceData.length>=e.length&&this.attendanceData[this.attendanceData.length-1].length==this.noOfDays&&e.forEach(o=>{let n=this.roasterReport.findIndex(p=>p.skillsetCode==o.skillsetCode),s=0,r=0;o.shiftCodesForMonth.forEach(p=>{let u=this.listOfShiftCodes2.findIndex(d=>d.shiftCode==p&&d.isOff)>=0;this.listOfShiftCodes2.findIndex(d=>"x"!=p&&d.shiftCode==p)>=0&&u?r++:this.listOfShiftCodes2.findIndex(d=>d.shiftCode==p)>=0&&!u&&"x"!=p&&""!=p&&s++});let c={skillsetCode:o.skillsetCode,contractualShifts:n>=0?this.roasterReport[n].contractualShifts+s:s,offs:n>=0?this.roasterReport[n].offs+r:r,qty:n>=0?this.roasterReport[n].qty+1:1};n>=0?this.roasterReport[n]=c:this.roasterReport.push(c),this.totRoastersReport.contractualShifts+=s,this.totRoastersReport.offs+=r,this.totRoastersReport.qty+=1}),!0}return!1}confirmClearAttendance(){0==this.updatedAttendance.length?this.notifyService.showInfo(this.translate.instant("No_Updates")):this.openClearAttendanceWindow(this.updatedAttendance.slice(),g.O.create,"Clear_Attendance","Save",Fe)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.uw),t.Y36(W.f),t.Y36(T.so),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-employee-attendance"]],features:[t.qOj],decls:75,vars:56,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],["type","text","formControlName","startDate","readonly","",1,"form-control"],["type","text","formControlName","endDate","readonly","",1,"form-control"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","monthYear",1,"form-control","datapickerinput",3,"matDatepicker","min","max","placeholder","click"],["matSuffix","",3,"for"],["startView","year","data-date-format","mm/yyyy",3,"monthSelected"],["dp2",""],["class","table-responsive",4,"ngIf"],[4,"ngIf"],["class","modal-footer",4,"ngIf"],[3,"value"],[1,"table-responsive"],["width","100%","id","excel_table"],["colspan","8","id","bg_white",2,"text-align","center"],[1,"baw"],[4,"ngFor","ngForOf"],["colspan","2",1,"baw"],[3,"isLoading"],["id","excel_table2",1,"sambaAttendanceTable","table-bordered","no-wrap"],["colspan","4","id","emptyCell"],["id","emptyCell",4,"ngFor","ngForOf"],["colspan","4",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","font-size:0.775rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight:600;padding: 2px",4,"ngFor","ngForOf"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","lightgreen"],["width","2%",2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","lightgreen"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","red"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","#c0d5fa"],["colspan","2",2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300","text-align","center"],["colspan","4",2,"text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: #e8eef3",4,"ngFor","ngForOf"],[2,"background-color","lightgray"],["colspan","4",2,"background-color","yellow","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","600","padding","2px"],["style","background-color:yellow",4,"ngFor","ngForOf"],[2,"background-color","yellow"],[2,"background-color","white"],["style","background-color:cornsilk",4,"ngFor","ngForOf"],[2,"background-color","cornsilk"],["colspan","4",2,"background-color","yellow","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: yellow",4,"ngFor","ngForOf"],["colspan","4",2,"background-color","sandybrown","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: sandybrown",4,"ngFor","ngForOf"],[2,"background-color","sandybrown"],["id","emptyCell"],["class","clickaction clickicons","style","font-size:smaller",3,"matTooltip","click",4,"ngIf"],[1,"clickaction","clickicons",2,"font-size","smaller",3,"matTooltip","click"],[1,"fas","fa-sync-alt",2,"resize","both"],[2,"font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],[2,"padding","3px","text-align","left"],[2,"padding","5px",3,"id"],["style","padding: 2px; text-align: center;",3,"id","click","contextmenu",4,"ngFor","ngForOf"],[2,"padding","2px","text-align","center",3,"id","click","contextmenu"],["hidden",""],[2,"background-color","#e8eef3"],[1,"col-md-12","col-lg-12",2,"padding","5px","align-items","center"],[1,"row","mt-1"],[1,"col-md-5","col-lg-5",2,"padding-right","5px"],["border","1","cellpadding","0","cellspacing","0","id","excel_table3",2,"width","100%","background-color","white"],[2,"width","75%","text-align","left","border","1px solid #878787","padding","2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","background-color","white"],[2,"border","1px solid #878787","padding","2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500","background-color","white"],[1,"col-md-4","col-lg-4",2,"padding-right","5px"],["border","1","cellpadding","0","cellspacing","0","id","excel_table4",2,"width","100%","background-color","white"],[2,"border","1px solid #878787","padding","2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","background-color","white"],[2,"border","1px solid #878787","padding","2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","600",3,"id"],[2,"border","1px solid #878787","padding","2px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600",3,"id"],[1,"modal-footer"],["class","row mt-12","hidden","",4,"ngIf"],["class","row mt-12",4,"ngIf"],[1,"row","mt-12"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["hidden","",1,"row","mt-12"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value","click"],[1,"col-md-6","col-lg-6","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-danger",3,"value","click"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",13),t.TgZ(20,"div",14),t._UZ(21,"input",15),t.ALo(22,"translate"),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(25,"div",11),t.TgZ(26,"label",12),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"div",13),t.TgZ(30,"div",14),t._UZ(31,"input",17),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(35,"div",11),t.TgZ(36,"div",13),t.TgZ(37,"label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"input",18),t.qZA(),t.qZA(),t.TgZ(41,"div",11),t.TgZ(42,"div",13),t.TgZ(43,"label"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"input",19),t.qZA(),t.qZA(),t.TgZ(47,"div",11),t.TgZ(48,"div",13),t.TgZ(49,"label",12),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"select",20),t.NdJ("change",function(r){return o.onSelectSiteCode(r)}),t.TgZ(53,"option",21),t._uU(54),t.ALo(55,"translate"),t.ALo(56,"translate"),t.qZA(),t.YNc(57,j0,2,3,"option",22),t.qZA(),t._UZ(58,"validation-message",16),t.qZA(),t.qZA(),t.TgZ(59,"div",11),t.TgZ(60,"div",13),t.TgZ(61,"label",12),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"div",13),t.TgZ(65,"div",14),t.TgZ(66,"input",23),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(70);return o.openDatePicker(r)}),t.ALo(67,"translate"),t.qZA(),t._UZ(68,"mat-datepicker-toggle",24),t.TgZ(69,"mat-datepicker",25,26),t.NdJ("monthSelected",function(r){t.CHM(n);const c=t.MAs(70);return o.closeDatePicker(r,c)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(71,R0,50,37,"div",27),t.YNc(72,rT,198,56,"div",27),t.YNc(73,bT,62,51,"div",28),t.YNc(74,LT,10,7,"div",29),t.qZA()}if(2&e){const n=t.MAs(70);t.xp6(1),t.Oqu(t.lcZ(2,28,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(12),t.Oqu(t.lcZ(18,30,"Customer_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(22,32,"Please_Enter")," ",t.lcZ(23,34,"Customer_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.customerCode),t.xp6(3),t.Oqu(t.lcZ(28,36,"Project_Code")),t.xp6(4),t.hYB("placeholder","",t.lcZ(32,38,"Please_Enter")," ",t.lcZ(33,40,"Project_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectCode),t.xp6(4),t.Oqu(t.lcZ(39,42,"Project_Start_Date")),t.xp6(6),t.Oqu(t.lcZ(45,44,"Project_End_Date")),t.xp6(6),t.Oqu(t.lcZ(51,46,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(55,48,"Select")," ",t.lcZ(56,50,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(4),t.Oqu(t.lcZ(63,52,"Time_Sheet_Month")),t.xp6(4),t.hYB("placeholder","",t.lcZ(67,54,"Select")," ","Year_Month",""),t.Q6J("matDatepicker",n)("min",o.minDate)("max",o.maxDate),t.xp6(2),t.Q6J("for",n),t.xp6(3),t.Q6J("ngIf",o.getRoasterReport()),t.xp6(1),t.Q6J("ngIf",0!=o.listOfRoasters.length),t.xp6(1),t.Q6J("ngIf",0!=o.listOfRoasters.length),t.xp6(1),t.Q6J("ngIf",!o.isLoading)}},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,l.EJ,l.YN,l.Kr,f.sg,M.hl,M.nW,gt.R9,M.Mq,f.O5,ht.z,rt.gM],pipes:[Z.X$],styles:["#emptyCell[_ngcontent-%COMP%] {\n    background-color: white;\n    border: none;\n    outline: none;\n    font-size: small;\n  }\n\n  #bg_gray[_ngcontent-%COMP%] {\n    background-color: lightgray; \n  }\n\n  #bg_white[_ngcontent-%COMP%] {\n    background-color: white; \n  }\n\n  #bg_red[_ngcontent-%COMP%] {\n    background-color: red; \n  }\n\n  #bg_black[_ngcontent-%COMP%] {\n    background-color: #e8eef3; \n  }\n\n  #bg_Active[_ngcontent-%COMP%] {\n    background-color: orange; \n  }\n\n\n  #bg_Shift0[_ngcontent-%COMP%] {\n    background-color: #4cff00; \n  }\n\n  #bg_Shift1[_ngcontent-%COMP%] {\n    background-color: #b200ff; \n  }\n\n  #bg_Shift2[_ngcontent-%COMP%] {\n    background-color: #0094ff; \n  }\n\n\n  #bg_Shift3[_ngcontent-%COMP%] {\n    background-color: #ff006e; \n  }\n   #bg_Shift4[_ngcontent-%COMP%] {\n    background-color: lightgreen; \n  }\n\n  #bg_offShift[_ngcontent-%COMP%] {\n    background-color: yellow;\n  }\n  #bg_Posted[_ngcontent-%COMP%] {\n    background-color: #d2fa9c;\n  }\n\n\n\n\n\n\n\n\n  #attendTable[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: black;\n    border-width: 1px;\n    border-block-color: black;\n    border-block: solid;\n    border-block-width: 1px;\n    border-inline-color: aqua\n  }\n\n  table.sambaAttendanceTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: #e8eef3;\n    border-width: 1px;\n    border-block-color: #e8eef3;\n    border-block: solid;\n    border-block-width: 1px;\n    background-color: lightgray;\n    border-inline-color: #e8eef3;\n    border-inline-width: 1px;\n    border-top-width: 1px;\n    border-top-color: #e8eef3;\n    border-bottom-width: 1px;\n    border-bottom-color: #e8eef3;\n    padding: 1px,1px,1px,1px;\n    text-align: center;\n  }\n\n  table.sambaAttendanceTable[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: black;\n    border-width: 1px;\n    width: 100%\n  }\n\n  th.baw[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: black;\n    border-width: 1px;\n    border-block-color: black;\n    border-block: solid;\n    border-block-width: 1px;\n    background-color: lightgray;\n    border-inline-color: black;\n    border-inline-width: 1px;\n    border-top-width: 1px;\n    border-top-color: black;\n    border-bottom-width: 1px;\n    border-bottom-color: black;\n    padding: 1px,1px,1px,1px;\n    text-align: center;\n    font-size: 0.775rem !important;\n    color: #000000;\n    font-family: 'Poppins', sans-serif;\n    font-weight: 600;\n    padding: 2px\n  }\n\n  td.baw[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: black;\n    border-width: 1px;\n    border-block-color: black;\n    border-block: solid;\n    border-block-width: 1px;\n    background-color: white;\n    border-inline-color: black;\n    border-inline-width: 1px;\n    border-inline-width: 1px;\n    border-top-width: 1px;\n    border-top-color: black;\n    border-bottom-width: 1px;\n    border-bottom-color: black;\n    padding: 1px,1px,1px,1px;\n    text-align: center;\n    font-size: 0.675rem !important;\n    color: #000000;\n    font-family: 'Poppins', sans-serif;\n    font-weight: 500;\n    padding: 2px\n  }"]}),i})();function DT(i,a){1&i&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function NT(i,a){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function ET(i,a){1&i&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function OT(i,a){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function jT(i,a){1&i&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name")," "))}function kT(i,a){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng)}}function MT(i,a){1&i&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function RT(i,a){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function PT(i,a){1&i&&(t.TgZ(0,"th",32),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function FT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().shiftPlan(n)}),t._UZ(1,"i",37),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Shift_Plan"))}}function IT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().skillsetPlan(n)}),t._UZ(1,"i",38),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("SkillSet_Plan"))}}function YT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().resourceCosting(n)}),t._UZ(2,"i",40),t._uU(3,"\xa0"),t.qZA(),t.TgZ(4,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().logisticsCosting(n)}),t._UZ(5,"i",41),t._uU(6,"\xa0"),t.qZA(),t.TgZ(7,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().materialCosting(n)}),t._UZ(8,"i",42),t._uU(9,"\xa0"),t.qZA(),t.TgZ(10,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().financialExpenseCosting(n)}),t._UZ(11,"i",43),t._uU(12,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Resource_Costing")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Logistics_Costing")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Material_Costing")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Financial_Expense_Costing"))}}function JT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().estimationReport(n)}),t._UZ(1,"i",44),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Estimation_Report"))}}function QT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().summaryReport(n)}),t._UZ(1,"i",45),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Summary_Report"))}}function BT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approveEstimation(n)}),t._UZ(1,"i",46),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Approve_Estimation"))}}function HT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().printEstimation(n)}),t._UZ(1,"i",47),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Print_Estimation"))}}function VT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().convertToProposal(n.projectCode)}),t._UZ(1,"i",48),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Convert_To_Proposal"))}}function $T(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().printProposal(n)}),t._UZ(1,"i",50),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Print_Proposal"))}}function GT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().convertToContract(n)}),t._UZ(1,"i",51),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Convert_To_Contract"))}}function WT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().calendarDays(n)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Generate_Monthly_Roaster"))}}function zT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().assignEmployyesToProjectSite(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Assign_Employyes_To_ProjectSite"))}}function XT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().mappingEmpToResourceForProjectSite(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Mapping_Employees_To_Resource_For_ProjectSite"))}}function KT(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().openMonthlyRoaster(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Lock_Shifts"))}}function t3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewContract(n)}),t._UZ(1,"i",56),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Contract"))}}function e3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().employeeAttendance(n)}),t._UZ(1,"i",57),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Employee_Attendance"))}}function o3(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,YT,13,4,"span",35),t.YNc(2,JT,3,1,"span",34),t.YNc(3,QT,3,1,"span",34),t.YNc(4,BT,3,1,"span",34),t.YNc(5,HT,3,1,"span",34),t.YNc(6,VT,3,1,"span",34),t.YNc(7,$T,3,1,"span",39),t.YNc(8,GT,3,1,"span",34),t.YNc(9,WT,3,1,"span",34),t.YNc(10,zT,3,1,"span",34),t.YNc(11,XT,3,1,"span",34),t.YNc(12,KT,3,1,"span",34),t.YNc(13,t3,3,1,"span",34),t.YNc(14,e3,3,1,"span",34),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.isConvrtedToContract&&!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isApproved&&e.hasAuthority&&e.authorities.canApproveEstimation&&!e.approvedUser),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isApproved&&e.hasAuthority&&!e.isConvertedToProposal),t.xp6(1),t.Q6J("ngIf",e.isConvertedToProposal),t.xp6(1),t.Q6J("ngIf",e.isConvertedToProposal&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract)}}function i3(i,a){if(1&i&&(t.TgZ(0,"td",33),t.YNc(1,FT,3,1,"span",34),t.YNc(2,IT,3,1,"span",34),t.YNc(3,o3,15,14,"span",35),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.authorities.canModifyEstimation),t.xp6(1),t.Q6J("ngIf",e.authorities.canModifyEstimation&&!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isShiftsAssigned&&e.isSkillSetsMapped)}}function n3(i,a){1&i&&t._UZ(0,"tr",58)}function a3(i,a){1&i&&t._UZ(0,"tr",59)}const s3=function(){return{standalone:!0}};let r3=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.oprService=m,this.pageService=h,this.translate=C,this.displayedColumns=["customerCode","projectCode","Project_Name","Branch_Code","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.form=this.fb.group({}),this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.searchValue="",this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Project/getProjectsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.isArab=this.isArab,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}resourceCosting(e){this.openDialogManage(e,g.O.create,"Resource_Costing","Save",ne)}logisticsCosting(e){this.openDialogManage(e,g.O.create,"Logistics_Vehicle_Costing","Save",se)}materialCosting(e){this.openDialogManage(e,g.O.create,"Material_Costing","Save",re)}financialExpenseCosting(e){this.openDialogManage(e,g.O.create,"Financial_Epense_Costing","Save",le)}estimationReport(e){this.openDialogManage(e,g.O.create,"Estimation_Cnsolidate_Report","Save",ce)}summaryReport(e){this.openDialogManage(e,g.O.create,"Estimation_Summary_Report","Save",pe)}convertToContract(e){this.openFullWindow(e,g.O.create,"Creating_Contract","Save",V2)}printEstimation(e){this.openDialogManage(e,g.O.create,"Estimation_Cnsolidate_Report","Print",ge)}assignEmployyesToProjectSite(e){this.openFullWindow(e,g.O.create,"Assigning_Employees_To_Site","Save",he)}mappingEmpToResourceForProjectSite(e){this.openDialogManage(e,g.O.create,"Mapping_Employees_To_Resources_For_Site","Save",fe)}printProposal(e){this.openDialogManage(e,g.O.create,"Project_Proposal","Print",_e)}shiftPlan(e){this.openDialogManage(e,g.O.create,"Shifts_Plan_For_Project","Save",ue)}skillsetPlan(e){this.openDialogManage(e,g.O.create,"Skillset_Plan_For_Project","Save",de)}calendarDays(e){this.openFullWindow(e,g.O.create,"Calander_Days","Save",me)}viewContract(e){this.openFullWindow(e,g.O.create,"Project_Contract","View",v6)}employeeAttendance(e){this.openFullWindow(e,g.O.create,"Employee_Attendance","View",Ze)}submit(){}openMonthlyRoaster(e){this.openFullWindow(e,g.O.create,"Monthly_Roaster","Save",ae)}approveEstimation(e){this.openApprovalDialog(e.branchCode,e.projectCode,g.O.create,"Estimation_Approval","Save","EST",Wt)}convertToProposal(e){this.form.value.projectCode=e,this.apiService.post("ProjectBudgetCosting/convertProjectToProposal",this.form.value).subscribe(o=>{this.utilService.OkMessage(),this.ngOnInit()},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}translateToolTip(e){return`${this.translate.instant(e)}`}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(W.f),t.Y36(V.N),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-project-budget-costing"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:47,vars:22,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-4","col-lg-4"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","projectCode"],["matColumnDef","Project_Name"],["matColumnDef","Branch_Code"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-clock"],[1,"fas","fa-user-plus"],[3,"click",4,"ngIf"],[1,"icon-people"],[1,"fas","fa-bus"],[1,"fas","fa-fax"],[1,"fas","fa-sort-amount-up"],[1,"icon-eye"],[1,"fas","fa-list"],[1,"fas","fa-check-circle"],[1,"fas","fa-print"],[1,"fas","fa-share"],[3,"click"],[1,"fas","fa-print",3,"matTooltip"],[1,"far","fa-handshake"],[1,"fas","fa-calendar-plus"],[1,"fas","fa-tasks"],[1,"fas","fa-users"],[1,"fas","fa-lock"],[1,"fas","fa-download"],[1,"fas","fa-calendar-check"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",1),t.TgZ(21,"div",13),t.TgZ(22,"input",14),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(23,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(24,"div",15),t.TgZ(25,"div",16),t.ynx(26),t.TgZ(27,"table",17),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(28,18),t.YNc(29,DT,3,3,"th",19),t.YNc(30,NT,2,1,"td",20),t.BQk(),t.ynx(31,21),t.YNc(32,ET,3,3,"th",19),t.YNc(33,OT,2,1,"td",20),t.BQk(),t.ynx(34,22),t.YNc(35,jT,3,3,"th",19),t.YNc(36,kT,2,1,"td",20),t.BQk(),t.ynx(37,23),t.YNc(38,MT,3,3,"th",19),t.YNc(39,RT,2,1,"td",20),t.BQk(),t.ynx(40,24),t.YNc(41,PT,3,3,"th",25),t.YNc(42,i3,4,3,"td",26),t.BQk(),t.YNc(43,n3,1,0,"tr",27),t.YNc(44,a3,1,0,"tr",28),t.qZA(),t.BQk(),t.qZA(),t.ynx(45),t.TgZ(46,"mat-paginator",29),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,13,"Projects")," "),t.xp6(6),t.hij(" ",t.lcZ(11,15,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(14,17,"Projects")),t.xp6(9),t.MGl("placeholder","",t.lcZ(23,19,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(21,s3)),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function l3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.titleOfServiceEng," ")}}const Nt=function(){return{standalone:!0}};function c3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",20),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.titleOfServiceEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Title_Of_Service"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.titleOfServiceEng)("ngModelOptions",t.DdM(8,Nt))}}function p3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.titleOfServiceArb," ")}}function u3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",20),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.titleOfServiceArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Title_Of_Service"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.titleOfServiceArb)("ngModelOptions",t.DdM(8,Nt))}}function d3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.companyDetailsEng," ")}}function m3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",21),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.companyDetailsEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Compnay_Details"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.companyDetailsEng)("ngModelOptions",t.DdM(8,Nt))}}function _3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.companyDetailsArb," ")}}function g3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.companyDetailsArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Compnay_Details"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.companyDetailsArb)("ngModelOptions",t.DdM(8,Nt))}}function h3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.customerDetailsEng," ")}}function f3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.customerDetailsEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Customer_Details"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.customerDetailsEng)("ngModelOptions",t.DdM(8,Nt))}}function Z3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.customerDetailsArb," ")}}function C3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.customerDetailsArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Customer_Details"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.customerDetailsArb)("ngModelOptions",t.DdM(8,Nt))}}function A3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.preambleEng," ")}}function T3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.preambleEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Preamble"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.preambleEng)("ngModelOptions",t.DdM(8,Nt))}}function v3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.preambleArb," ")}}function x3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.preambleArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Preamble"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.preambleArb)("ngModelOptions",t.DdM(8,Nt))}}function q3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.firstPartyEng," ")}}function b3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.firstPartyEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"First_Party"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.firstPartyEng)("ngModelOptions",t.DdM(8,Nt))}}function y3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.firstPartyArb," ")}}function S3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.firstPartyArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"First_Party"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.firstPartyArb)("ngModelOptions",t.DdM(8,Nt))}}function w3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.secondPartyEng," ")}}function U3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.secondPartyEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Second_Party"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.secondPartyEng)("ngModelOptions",t.DdM(8,Nt))}}function L3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.contractFormData.contractFormHead.secondPartyArb," ")}}function D3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().contractFormData.contractFormHead.secondPartyArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Second_Party"),""),t.Q6J("ngModel",e.contractFormData.contractFormHead.secondPartyArb)("ngModelOptions",t.DdM(8,Nt))}}function N3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.clauseTitleEng," ")}}function E3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",33),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.clauseTitleEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Title_Of_Service"),""),t.Q6J("ngModel",e.clauseTitleEng)("ngModelOptions",t.DdM(8,Nt))}}function O3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.clauseSubTitleEng," ")}}function j3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",33),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.clauseSubTitleEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Sub_Title"),""),t.Q6J("ngModel",e.clauseSubTitleEng)("ngModelOptions",t.DdM(8,Nt))}}function k3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.clauseDescriptionEng," ")}}function M3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",34),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.clauseDescriptionEng=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Description"),""),t.Q6J("ngModel",e.clauseDescriptionEng)("ngModelOptions",t.DdM(8,Nt))}}function R3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).editClause(n)}),t._UZ(1,"i",13),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function P3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).editClause(n)}),t._UZ(1,"i",35),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Update"))}}function F3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).moveUpClause(n)}),t._UZ(1,"i",36),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Move_Up"))}}function I3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).moveDownClause(n)}),t._UZ(1,"i",37),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Move_Down"))}}function Y3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).insertNewClause(n)}),t._UZ(1,"i",38),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Insert_New"))}}function J3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).removeClause(n)}),t._UZ(1,"i",39),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Remove"))}}function Q3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.clauseTitleArb," ")}}function B3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",33),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.clauseTitleArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Title_Of_Service"),""),t.Q6J("ngModel",e.clauseTitleArb)("ngModelOptions",t.DdM(8,Nt))}}function H3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.clauseSubTitleArb," ")}}function V3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"input",33),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.clauseSubTitleArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Sub_Title"),""),t.Q6J("ngModel",e.clauseSubTitleArb)("ngModelOptions",t.DdM(8,Nt))}}function $3(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.clauseDescriptionArb," ")}}function G3(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"textarea",34),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.clauseDescriptionArb=n}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.hYB("placeholder","",t.lcZ(2,4,"Please_Enter")," ",t.lcZ(3,6,"Description"),""),t.Q6J("ngModel",e.clauseDescriptionArb)("ngModelOptions",t.DdM(8,Nt))}}function W3(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",28),t.YNc(3,N3,2,1,"span",10),t.YNc(4,E3,4,9,"span",10),t.qZA(),t.TgZ(5,"td",29),t.YNc(6,O3,2,1,"span",10),t.YNc(7,j3,4,9,"span",10),t.qZA(),t.TgZ(8,"td",30),t.YNc(9,k3,2,1,"span",10),t.YNc(10,M3,4,9,"span",10),t.qZA(),t.TgZ(11,"td",31),t.YNc(12,R3,3,1,"span",32),t.YNc(13,P3,3,1,"span",32),t.YNc(14,F3,3,1,"span",32),t.YNc(15,I3,3,1,"span",32),t.YNc(16,Y3,3,1,"span",32),t.YNc(17,J3,3,1,"span",32),t.qZA(),t.qZA(),t.TgZ(18,"tr"),t.TgZ(19,"td",28),t.YNc(20,Q3,2,1,"span",10),t.YNc(21,B3,4,9,"span",10),t.qZA(),t.TgZ(22,"td",29),t.YNc(23,H3,2,1,"span",10),t.YNc(24,V3,4,9,"span",10),t.qZA(),t.TgZ(25,"td",30),t.YNc(26,$3,2,1,"span",10),t.YNc(27,G3,4,9,"span",10),t.qZA(),t.qZA(),t.BQk()),2&i){const e=a.index,o=t.oxw(2);t.xp6(3),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(2),t.Q6J("ngIf",-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(1),t.Q6J("ngIf",e>0&&-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",e<(null==o.contractFormData?null:o.contractFormData.contractClauses.length)-1&&-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",-1==o.editClauseIndex),t.xp6(1),t.Q6J("ngIf",-1==o.editClauseIndex||o.editClauseIndex==e),t.xp6(3),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e),t.xp6(2),t.Q6J("ngIf",o.editClauseIndex!=e),t.xp6(1),t.Q6J("ngIf",o.editClauseIndex==e)}}function z3(i,a){if(1&i&&(t.TgZ(0,"div",5),t.TgZ(1,"div",6),t.TgZ(2,"table",7),t.TgZ(3,"tr"),t.TgZ(4,"th",23),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",24),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",25),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",26),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.YNc(16,W3,28,18,"ng-container",27),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,5,"Title")," "),t.xp6(3),t.hij(" ",t.lcZ(9,7,"Sub_Title")," "),t.xp6(3),t.hij(" ",t.lcZ(12,9,"Description")," "),t.xp6(3),t.hij(" ",t.lcZ(15,11,"Action")," "),t.xp6(2),t.Q6J("ngForOf",null==e.contractFormData?null:e.contractFormData.contractClauses)}}let X3=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.editHeadItemNumber=-1,this.editClauseIndex=-1}ngOnInit(){this.form=this.fb.group({}),console.log(this.contractFormData)}submit(){}closeModel(){this.dialogRef.close(!0)}translateToolTip(e){return`${this.translate.instant(e)}`}editClause(e){this.editClauseIndex==e?""!=this.contractFormData.contractClauses[e].clauseTitleEng&&""!=this.contractFormData.contractClauses[e].clauseTitleArb||""!=this.contractFormData.contractClauses[e].clauseSubTitleEng&&""!=this.contractFormData.contractClauses[e].clauseSubTitleArb||""!=this.contractFormData.contractClauses[e].clauseDescriptionEng&&""!=this.contractFormData.contractClauses[e].clauseDescriptionArb?this.editClauseIndex=-1:this.notifyService.showWarning(this.translate.instant("Empty_Clause")):-1==this.editClauseIndex&&(this.editClauseIndex=e)}moveUpClause(e){let o=this.contractFormData.contractClauses[e];this.contractFormData.contractClauses[e]=this.contractFormData.contractClauses[e-1],this.contractFormData.contractClauses[e-1]=o}moveDownClause(e){let o=this.contractFormData.contractClauses[e];this.contractFormData.contractClauses[e]=this.contractFormData.contractClauses[e+1],this.contractFormData.contractClauses[e+1]=o}saveContractForm(){for(let e=0;e<this.contractFormData.contractClauses.length;e++)this.contractFormData.contractClauses[e].serialNumber=e+1;this.apiService.post("contractForm",this.contractFormData).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})}editHeadItem(e){this.editHeadItemNumber=this.editHeadItemNumber==e?-1:e}insertNewClause(e){this.contractFormData.contractClauses.splice(e+1,0,{clauseTitleEng:"",clauseTitleArb:"",clauseSubTitleEng:"",clauseSubTitleArb:"",clauseDescriptionEng:"",clauseDescriptionArb:"",id:0,serialNumber:0,contractFormId:this.contractFormData.contractFormHead.id}),this.editClauseIndex=e+1}removeClause(e){this.contractFormData.contractClauses.length>2&&this.contractFormData.contractClauses.splice(e,1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-update-contract-form"]],features:[t.qOj],decls:109,vars:62,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"scroll-sidebar"],[1,"outer"],[1,"col-md-12","col-lg-12"],["border","1","cellpadding","0","cellspacing","0",2,"width","100%","padding","10px"],[2,"width","6%","padding","10px"],[2,"width","45%","padding","10px","vertical-align","top"],[4,"ngIf"],[2,"width","4%","padding","10px"],[3,"matTooltip","click"],[1,"fas","fa-edit"],[2,"text-align","center","padding","10px"],["class","outer",4,"ngIf"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],["type","text",1,"form-control",2,"height","max-content",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",2,"height","max-content","max-height","stretch",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",2,"height","max-content",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[2,"width","10%","padding","10px"],[2,"width","20%","padding","10px"],[2,"padding","10px"],[2,"padding","10px","width","auto"],[4,"ngFor","ngForOf"],[2,"width","10%","text-align","right","padding","10px","vertical-align","top"],[2,"width","20%","text-align","right","padding","10px","vertical-align","top"],[2,"text-align","justify","padding","10px","white-space","pre-wrap","vertical-align","top"],["rowspan","2",2,"padding","10px","vertical-align","central","width","7%"],[3,"matTooltip","click",4,"ngIf"],["type","text",1,"form-control",2,"text-align","right",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"form-control",2,"text-align","right",3,"ngModel","placeholder","ngModelOptions","ngModelChange"],[1,"fas","fa-save"],[1,"fas","fa-arrow-up"],[1,"fas","fa-arrow-down"],[1,"fas","fa-plus-circle"],[1,"fas","fa-minus-circle"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2,3),t.NdJ("ngSubmit",function(){return o.saveContractForm()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"table",7),t.TgZ(11,"tr"),t.TgZ(12,"th",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"td",9),t.YNc(16,l3,2,1,"span",10),t.YNc(17,c3,4,9,"span",10),t.qZA(),t.TgZ(18,"td",9),t.YNc(19,p3,2,1,"span",10),t.YNc(20,u3,4,9,"span",10),t.qZA(),t.TgZ(21,"td",11),t.TgZ(22,"span",12),t.NdJ("click",function(){return o.editHeadItem(1)}),t._UZ(23,"i",13),t._uU(24,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"th",8),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"td",9),t.YNc(30,d3,2,1,"span",10),t.YNc(31,m3,4,9,"span",10),t.qZA(),t.TgZ(32,"td",9),t.YNc(33,_3,2,1,"span",10),t.YNc(34,g3,4,9,"span",10),t.qZA(),t.TgZ(35,"td",11),t.TgZ(36,"span",12),t.NdJ("click",function(){return o.editHeadItem(2)}),t._UZ(37,"i",13),t._uU(38,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"tr"),t.TgZ(40,"th",8),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"td",9),t.YNc(44,h3,2,1,"span",10),t.YNc(45,f3,4,9,"span",10),t.qZA(),t.TgZ(46,"td",9),t.YNc(47,Z3,2,1,"span",10),t.YNc(48,C3,4,9,"span",10),t.qZA(),t.TgZ(49,"td",11),t.TgZ(50,"span",12),t.NdJ("click",function(){return o.editHeadItem(3)}),t._UZ(51,"i",13),t._uU(52,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(53,"tr"),t.TgZ(54,"th",8),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"td",9),t.YNc(58,A3,2,1,"span",10),t.YNc(59,T3,4,9,"span",10),t.qZA(),t.TgZ(60,"td",9),t.YNc(61,v3,2,1,"span",10),t.YNc(62,x3,4,9,"span",10),t.qZA(),t.TgZ(63,"td",11),t.TgZ(64,"span",12),t.NdJ("click",function(){return o.editHeadItem(4)}),t._UZ(65,"i",13),t._uU(66,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(67,"tr"),t.TgZ(68,"th",8),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"td",9),t.YNc(72,q3,2,1,"span",10),t.YNc(73,b3,4,9,"span",10),t.qZA(),t.TgZ(74,"td",9),t.YNc(75,y3,2,1,"span",10),t.YNc(76,S3,4,9,"span",10),t.qZA(),t.TgZ(77,"td",11),t.TgZ(78,"span",12),t.NdJ("click",function(){return o.editHeadItem(5)}),t._UZ(79,"i",13),t._uU(80,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(81,"tr"),t.TgZ(82,"th",8),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"td",9),t.YNc(86,w3,2,1,"span",10),t.YNc(87,U3,4,9,"span",10),t.qZA(),t.TgZ(88,"td",9),t.YNc(89,L3,2,1,"span",10),t.YNc(90,D3,4,9,"span",10),t.qZA(),t.TgZ(91,"td",11),t.TgZ(92,"span",12),t.NdJ("click",function(){return o.editHeadItem(6)}),t._UZ(93,"i",13),t._uU(94,"\xa0"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(95,"div",14),t._UZ(96,"br"),t.TgZ(97,"b"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t._UZ(100,"br"),t.qZA(),t.YNc(101,z3,17,13,"div",15),t.qZA(),t.TgZ(102,"div",16),t.TgZ(103,"div",17),t.TgZ(104,"input",18),t.NdJ("click",function(){return o.closeModel()}),t.ALo(105,"translate"),t.qZA(),t._uU(106," \xa0 "),t._UZ(107,"input",19),t.ALo(108,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,42,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(8),t.hij(" ",t.lcZ(14,44,"Title_Of_Service")," "),t.xp6(3),t.Q6J("ngIf",1!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",1==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",1!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",1==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(28,46,"Company_Details")," "),t.xp6(3),t.Q6J("ngIf",2!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",2==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",2!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",2==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(42,48,"Customer_Details")," "),t.xp6(3),t.Q6J("ngIf",3!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",3==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",3!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",3==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(56,50,"Preamble")," "),t.xp6(3),t.Q6J("ngIf",4!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",4==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",4!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",4==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(70,52,"First_Party")," "),t.xp6(3),t.Q6J("ngIf",5!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",5==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",5!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",5==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(5),t.hij(" ",t.lcZ(84,54,"Second_Party")," "),t.xp6(3),t.Q6J("ngIf",6!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",6==o.editHeadItemNumber),t.xp6(2),t.Q6J("ngIf",6!=o.editHeadItemNumber),t.xp6(1),t.Q6J("ngIf",6==o.editHeadItemNumber),t.xp6(2),t.Q6J("matTooltip",o.translateToolTip("Edit")),t.xp6(6),t.Oqu(t.lcZ(99,56,"Contract_Clauses")),t.xp6(3),t.Q6J("ngIf",(null==o.contractFormData?null:o.contractFormData.contractClauses.length)>0),t.xp6(3),t.s9C("value",t.lcZ(105,58,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(108,60,"Save")))},directives:[l._Y,l.JL,l.sg,f.O5,rt.gM,l.Fj,l.JJ,l.On,f.sg],pipes:[Z.X$],encapsulation:2}),i})();function K3(i,a){if(1&i&&(t.TgZ(0,"option",6),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.s9C("value",e.value),t.xp6(1),t.hij(" ",o.isArabic?e.textTwo:e.text,"")}}function tv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"select",3),t.NdJ("change",function(n){return t.CHM(e),t.oxw(2).OnTemplateSelection(n)}),t.TgZ(2,"option",4),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.YNc(6,K3,2,2,"option",5),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(3),t.AsE("",t.lcZ(4,3,"Select")," ",t.lcZ(5,5,"SelectTemplate")," "),t.xp6(3),t.Q6J("ngForOf",e.templatesSelectionList)}}function ev(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).createContractTemplate()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Create_Template")))}function ov(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editContractTemplate()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit_Template")))}function iv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).saveContractForm()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Save_Addendum")))}function nv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).saveContractForm()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Save_Contract")))}function av(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,iv,3,3,"button",1),t._uU(2," \xa0 "),t.YNc(3,nv,3,3,"button",1),t._uU(4," \xa0 "),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.project?null:e.project.isAdendum),t.xp6(2),t.Q6J("ngIf",!(null!=e.project&&e.project.isAdendum))}}function sv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editContractForm()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit_Contract")))}function rv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).approveContract()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Approve_Contract")))}function lv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editProposalCosting()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," \xa0 "),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Edit_Proposal_Costing")))}function cv(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,tv,7,7,"span",0),t.TgZ(2,"span"),t._UZ(3,"br"),t.qZA(),t.YNc(4,ev,5,3,"span",0),t.YNc(5,ov,5,3,"span",0),t.YNc(6,av,5,2,"span",0),t.YNc(7,sv,5,3,"span",0),t.YNc(8,rv,5,3,"span",0),t.YNc(9,lv,5,3,"span",0),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=e.templatesSelectionList.length&&0==(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.id)),t.xp6(3),t.Q6J("ngIf",0==e.templatesSelectionList.length||0==(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.id)),t.xp6(1),t.Q6J("ngIf",null!=e.templateData),t.xp6(1),t.Q6J("ngIf",0==(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.id)&&null!=e.templateData),t.xp6(1),t.Q6J("ngIf",(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.id)>0),t.xp6(1),t.Q6J("ngIf",(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.id)>0),t.xp6(1),t.Q6J("ngIf",(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.id)>0||null!=e.templateData)}}function pv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().printInvoice()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Print")))}function uv(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",25),t._uU(2),t.qZA(),t.TgZ(3,"td",26),t._uU(4),t.qZA(),t.TgZ(5,"td",24),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td",24),t._uU(9),t.ALo(10,"number"),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.qty," "),t.xp6(2),t.hij(" ",e.itemEng," "),t.xp6(2),t.hij(" ",t.xi3(7,4,e.price,"3.2-5")," "),t.xp6(3),t.hij(" ",t.xi3(10,7,e.total,"3.2-5")," ")}}function dv(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",21),t.TgZ(3,"table",11),t.TgZ(4,"tr"),t.TgZ(5,"td",22),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"td",22),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td",22),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"td",22),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.YNc(17,uv,11,10,"tr",20),t.TgZ(18,"tr"),t.TgZ(19,"td",23),t._uU(20),t.qZA(),t.TgZ(21,"td",24),t._uU(22),t.ALo(23,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&i){const e=t.oxw(5);t.xp6(6),t.hij(" ",t.lcZ(7,7,"Qty")," "),t.xp6(3),t.hij(" ",t.lcZ(10,9,"Position")," "),t.xp6(3),t.hij(" ",t.lcZ(13,11,"Unit_Rate")," "),t.xp6(3),t.hij(" ",t.lcZ(16,13,"Total")," "),t.xp6(2),t.Q6J("ngForOf",e.proposalCosting),t.xp6(3),t.hij(" ","Grand_Total"," "),t.xp6(2),t.hij(" ",t.xi3(23,15,e.grandTotal,"3.2-5")," ")}}function mv(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",27),t.TgZ(2,"b"),t.TgZ(3,"u"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td",27),t.TgZ(6,"b"),t.TgZ(7,"u"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.clauseTitleEng),t.xp6(4),t.hij(" ",e.clauseTitleArb,"")}}function _v(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",28),t.TgZ(2,"b"),t.TgZ(3,"u"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td",29),t.TgZ(6,"b"),t.TgZ(7,"u"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(4),t.hij(" ",e.clauseSubTitleEng,""),t.xp6(4),t.Oqu(e.clauseSubTitleArb)}}function gv(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",30),t._uU(2),t.qZA(),t.TgZ(3,"td",30),t._uU(4),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.clauseDescriptionEng," "),t.xp6(2),t.hij(" ",e.clauseDescriptionArb," ")}}function hv(i,a){if(1&i&&(t.ynx(0),t.YNc(1,dv,24,18,"ng-container",0),t.YNc(2,mv,9,2,"tr",0),t.YNc(3,_v,9,2,"tr",0),t.YNc(4,gv,5,2,"tr",0),t.BQk()),2&i){const e=a.$implicit,o=a.index;t.xp6(1),t.Q6J("ngIf",2==o),t.xp6(1),t.Q6J("ngIf",null!=e.clauseTitleEng),t.xp6(1),t.Q6J("ngIf",null!=e.clauseSubTitleEng),t.xp6(1),t.Q6J("ngIf",null!=e.clauseDescriptionEng)}}function fv(i,a){if(1&i&&(t.ynx(0),t.YNc(1,hv,5,4,"ng-container",20),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.contractFormData.contractClauses)}}function Zv(i,a){if(1&i&&(t.TgZ(0,"div",9),t.TgZ(1,"div",10),t._UZ(2,"br"),t.TgZ(3,"table",11),t.TgZ(4,"tr"),t.TgZ(5,"td",12),t._uU(6),t.qZA(),t.TgZ(7,"td",13),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"tr"),t.TgZ(10,"td",14),t.TgZ(11,"b"),t.TgZ(12,"u"),t._uU(13,"Contract of providing Security Guarding Services"),t._UZ(14,"br"),t._uU(15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"td",14),t.TgZ(17,"b"),t.TgZ(18,"u"),t._uU(19," \u0639\u0642\u062f \u062a\u0642\u062f\u064a\u0645 \u062e\u062f\u0645\u0627\u062a \u062d\u0631\u0627\u0633\u0627\u062a \u0623\u0645\u0646\u064a\u0629"),t._UZ(20,"br"),t._uU(21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"tr"),t.TgZ(23,"td",15),t._uU(24),t.qZA(),t.TgZ(25,"td",15),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"tr"),t.TgZ(28,"td",16),t.TgZ(29,"u"),t._uU(30," (Referred to it from here on as first party)"),t.qZA(),t.qZA(),t.TgZ(31,"td",17),t.TgZ(32,"u"),t._uU(33,"(\u0648\u064a\u0634\u0627\u0631 \u0625\u0644\u064a\u0647\u0627 \u0641\u064a\u0645\u0627 \u0628\u0639\u062f \u0628\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u0623\u0648\u0644)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"tr"),t.TgZ(35,"td",15),t._uU(36),t.qZA(),t.TgZ(37,"td",15),t._uU(38),t.qZA(),t.qZA(),t.TgZ(39,"tr"),t.TgZ(40,"td",16),t.TgZ(41,"u"),t._uU(42," (Referred to it from here on as Second party)"),t.qZA(),t.qZA(),t.TgZ(43,"td",17),t.TgZ(44,"u"),t._uU(45,"( \u0648 \u064a\u0634\u0627\u0631 \u0625\u0644\u064a\u0647\u0627 \u0641\u064a\u0645\u0627 \u0628\u0639\u062f \u0628\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u062b\u0627\u0646\u064a)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"tr"),t.TgZ(47,"td",14),t.TgZ(48,"b"),t.TgZ(49,"u"),t._uU(50," Preamble"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"td",14),t.TgZ(52,"b"),t.TgZ(53,"u"),t._uU(54,"\u0627\u0644\u0628\u0646\u062f \u0627\u0644\u062a\u0645\u0647\u064a\u062f\u064a"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"tr"),t.TgZ(56,"td",15),t._uU(57),t.qZA(),t.TgZ(58,"td",15),t._uU(59),t.qZA(),t.qZA(),t.YNc(60,fv,2,1,"ng-container",0),t.TgZ(61,"tr"),t.TgZ(62,"td",16),t.TgZ(63,"b"),t._uU(64," First party:"),t.qZA(),t.qZA(),t.TgZ(65,"td",17),t.TgZ(66,"b"),t._uU(67," :\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u0623\u0648"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"tr"),t.TgZ(69,"td",18),t._uU(70),t.qZA(),t.TgZ(71,"td",19),t._uU(72),t.qZA(),t.qZA(),t._UZ(73,"br"),t.TgZ(74,"tr"),t.TgZ(75,"td",16),t.TgZ(76,"b"),t._uU(77," Second party:"),t.qZA(),t.qZA(),t.TgZ(78,"td",17),t.TgZ(79,"b"),t._uU(80," :\u0627\u0644\u0637\u0631\u0641 \u0627\u0644\u062b\u0627\u0646\u064a"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(81,"tr"),t.TgZ(82,"td",18),t._uU(83),t.qZA(),t.TgZ(84,"td",19),t._uU(85),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(6),t.hij(" (Reference No.",e.referenceNumber,") "),t.xp6(2),t.hij(" (",e.referenceNumber,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639) "),t.xp6(7),t.hij("(",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.titleOfServiceEng,")"),t.xp6(6),t.hij("(",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.titleOfServiceArb,")"),t.xp6(3),t.hij(" ",e.TranslateTaggedDataEng(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.companyDetailsEng)," "),t.xp6(2),t.hij(" ",e.TranslateTaggedDataArb(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.companyDetailsArb)," "),t.xp6(10),t.hij(" ",e.TranslateTaggedDataEng(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.customerDetailsEng)," "),t.xp6(2),t.hij(" ",e.TranslateTaggedDataArb(null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.customerDetailsArb)," "),t.xp6(19),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.preambleEng," "),t.xp6(2),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.preambleArb," "),t.xp6(1),t.Q6J("ngIf",(null==e.contractFormData?null:e.contractFormData.contractClauses.length)>0),t.xp6(10),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.firstPartyEng," "),t.xp6(2),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.firstPartyArb," "),t.xp6(11),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.secondPartyEng," "),t.xp6(2),t.hij(" ",null==e.contractFormData||null==e.contractFormData.contractFormHead?null:e.contractFormData.contractFormHead.secondPartyArb," ")}}function Cv(i,a){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,Zv,86,15,"div",8),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",0!=(null==e.contractFormData?null:e.contractFormData.contractClauses.length)&&null!=e.contractFormData)}}let Vt=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(p),this.oprService=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.dialog=c,this.authService=p,this.utilService=u,this.translate=d,this.notifyService=m,this.validationService=h,this.dialogRef=C,this.referenceNumber="000/0000",this.resourceSubCostingList=[],this.resourceCostingList=[],this.grandTotal=0,this.totalForResourceUnit=-1,this.resourceSelectList=[],this.resourceExpenceHeadSelectList=[],this.resourceCode="",this.activeResourceIndex=-1,this.siteCodeSelectList=[],this.type="",this.templatesSelectionList=[],this.isArabic=!1,this.date=new Date}ngOnInit(){this.loadData()}loadData(){this.templateData=null,this.isArabic=this.utilService.isArabic(),this.loadCustomerData(),this.loadProjectData(),this.loadSkillSetsList(),this.loadOperationsExpenseHeads(),this.loadMaterialEquipments(),this.loadLogisticsVehicles(),this.loadContractForm(),this.loadProposalCostingData(),this.loadContractTemplates()}loadContractForm(){var e,o;let n={projectCode:this.project.projectCode,siteCode:this.project.siteCode,customerCode:this.project.customerCode,isAdendum:null!==(o=null===(e=this.project)||void 0===e?void 0:e.isAdendum)&&void 0!==o&&o};this.apiService.post("ContractForm/getContractForm",n).subscribe(s=>{null!=s&&(this.contractFormData=s)})}loadContractTemplates(){this.apiService.getall(`ContractFormTemplates/getSelectionContractFormTemplates/${this.type}`).subscribe(e=>{null!=e&&(this.templatesSelectionList=e)})}OnTemplateSelection(e){if(""!=e.target.value){let o=Number(e.target.value);this.apiService.get("ContractFormTemplates/getContractFormTemplateById",o).subscribe(n=>{if(null!=n){this.templateData=n;for(let r=0;r<n.clauses.length;r++)n.clauses[r].id=0;this.contractFormData.contractClauses=n.clauses;let s=this.contractFormData.contractFormHead.id;this.contractFormData.contractFormHead=n.templateHead,this.contractFormData.contractFormHead.id=s}})}else this.templateData=null}submit(){}loadProjectData(){this.apiService.getall(`Project/getProjectByProjectCode/${this.project.projectCode}`).subscribe(e=>{null!=e&&(this.projectData=e)})}loadCustomerData(){this.apiService.getall(`CustomerMaster/getCustomerByCustomerCode/${this.project.customerCode}`).subscribe(e=>{null!=e&&(this.customerData=e,console.log(e),this.apiService.getall(`Company/getCompanyByCityCode/${e.custCityCode1}`).subscribe(o=>{null!=o&&(this.companyData=o,console.log(o))}),this.getCity(e.custCityCode1))})}loadInitialData(){var e;(null===(e=this.project)||void 0===e?void 0:e.isAdendum)?this.apiService.getall(`projectBudgetCosting/getProjectSiteEstimation/${this.project.customerCode}/${this.project.projectCode}/${this.project.siteCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)}):this.apiService.getall(`projectBudgetCosting/getProjectEstimation/${this.project.customerCode}/${this.project.projectCode}`).subscribe(o=>{null!=o?(this.projectBudgetEstimation=o,this.findTotalCosts()):(this.projectBudgetEstimation.siteWisePBCListForProject=[],this.projectBudgetEstimation.grandTotalCostForProject=-1)})}loadProposalCostingData(){var e;let o={customerCode:this.project.customerCode,siteCode:this.project.siteCode,projectCode:this.project.projectCode,isAdendum:null===(e=this.project)||void 0===e?void 0:e.isAdendum};this.apiService.post("proposalCosting/getProposalCosting",o).subscribe(n=>{this.proposalCosting=n;for(let s=0;s<n.length;s++)this.grandTotal+=n[s].price*n[s].qty;this.getReferenceNumber()})}getCity(e){this.apiService.getall(`City/getStateCountrybyCityCode/${e}`).subscribe(o=>{this.city=o,console.log(o)})}printComponent(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}findTotalCosts(){this.projectBudgetEstimation.grandTotalCostForProject=0,this.projectBudgetEstimation.siteWisePBCListForProject.forEach(e=>{e.totFcForSite=0,e.totLcForSite=0,e.totMcForSite=0,e.totRcForSite=0,e.grandTotalCostForSite=0,0!=e.prcListForSite.length&&e.prcListForSite.forEach(o=>{o.totResourceCost=0,0!=o.resourceSubCostingList.length&&(o.costPerUnit=o.margin,o.resourceSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totResourceCost=o.costPerUnit*o.quantity),e.totRcForSite=e.totRcForSite+o.totResourceCost}),0!=e.plcListForSite.length&&e.plcListForSite.forEach(o=>{o.totLogisticsCost=0,0!=o.logisticsSubCostingList.length&&(o.costPerUnit=o.margin,o.logisticsSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totLogisticsCost=o.costPerUnit*o.qty),e.totLcForSite=e.totLcForSite+o.totLogisticsCost}),0!=e.pmcListForSite.length&&e.pmcListForSite.forEach(o=>{o.totMaterialEquipmentCost=0,0!=o.materialEquipmentSubCostingList.length&&(o.costPerUnit=0,o.materialEquipmentSubCostingList.forEach(n=>{o.costPerUnit=o.costPerUnit+n.amount}),o.totMaterialEquipmentCost=o.costPerUnit*o.quantity),e.totMcForSite=e.totMcForSite+o.totMaterialEquipmentCost}),0!=e.pfcListForSite.length&&e.pfcListForSite.forEach(o=>{e.totFcForSite=e.totFcForSite+o.costPerUnit}),e.grandTotalCostForSite=e.grandTotalCostForSite+e.totFcForSite+e.totLcForSite+e.totMcForSite+e.totRcForSite,this.projectBudgetEstimation.grandTotalCostForProject=this.projectBudgetEstimation.grandTotalCostForProject+e.grandTotalCostForSite})}openDialogManage3(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.componentInstance.project=this.project,c.componentInstance.contractFormData=this.contractFormData,c.afterClosed().subscribe(p=>{p&&!0===p&&this.loadData()})}openDialogManage2(e,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,eo);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.inputData=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.loadData()})}loadSkillSetsList(){this.apiService.getall("Skillset/getAllSkillsetList").subscribe(e=>{this.skillsetList=e})}getSkillset(e){return this.skillsetList.find(n=>n.skillSetCode==e)}loadOperationsExpenseHeads(){this.apiService.getall("OperationExpenseHead/getSelectOperationExpenseHeadList").subscribe(e=>{this.opeartionsExpenseHeadsList=e})}getopeartionsExpenseHead(e){return this.opeartionsExpenseHeadsList.find(n=>n.value==e)}loadMaterialEquipments(){this.apiService.getall("Materialequipment/getSelectMaterialequipmentList").subscribe(e=>{this.materialEquipmentList=e})}getMaterialEquipments(e){return this.materialEquipmentList.find(n=>n.value==e)}loadLogisticsVehicles(){this.apiService.getall("Logisticsandvehicle/getSelectLogisticsandvehicleList").subscribe(e=>{this.logisticsVehicleList=e})}getLogisticsVehicle(e){return this.logisticsVehicleList.find(n=>n.value==e)}printInvoice(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}closeModel(){this.dialogRef.close(!0)}createContractTemplate(){let e=this.utilService.openCrudDialog(this.dialog,ee);e.componentInstance.modalTitle="Create Template",e.componentInstance.modalBtnTitle="Add",e.componentInstance.contractTemplateData=this.contractFormData,e.componentInstance.id=0,e.componentInstance.type=this.type,e.afterClosed().subscribe(o=>{o&&!0===o&&this.loadData()})}editContractTemplate(){let e=this.utilService.openCrudDialog(this.dialog,ee);e.componentInstance.modalTitle="Update Template",e.componentInstance.modalBtnTitle="Update",e.componentInstance.contractTemplateData=this.templateData,e.componentInstance.id=this.templateData.templateId,e.componentInstance.type=this.type,e.afterClosed().subscribe(o=>{o&&!0===o&&this.loadData()})}editProposalCosting(){this.openDialogManage2({projectCode:this.project.projectCode,customerCode:this.project.customerCode,siteCode:null==this.project.siteCode?"":this.project.siteCode,proposalCosting:this.proposalCosting},g.O.create,"Edit_Proposal_Costing","Edit")}getReferenceNumber(){var e,o,n;(null===(e=this.proposalCosting)||void 0===e?void 0:e.length)>0&&(this.referenceNumber=this.project.projectCode+"/"+((null===(o=this.project)||void 0===o?void 0:o.isAdendum)?this.project.siteCode+"/":"")+(null===(n=this.proposalCosting[0])||void 0===n?void 0:n.projectBudgetEstimationId.toString()),0==this.proposalCosting[0].id&&this.editProposalCosting())}openConfirmationDialog(e,o,n,s){let r=this.oprService.confirmationDialog(this.dialog,n);r.componentInstance.dbops=e,r.componentInstance.modalTitle=o,r.afterClosed().subscribe(c=>{var p,u;this.contractFormData.contractFormHead.projectCode=this.project.projectCode,this.contractFormData.contractFormHead.customerCode=this.project.customerCode,this.contractFormData.contractFormHead.siteCode=(null===(p=this.project)||void 0===p?void 0:p.isAdendum)?this.project.siteCode:null,this.contractFormData.contractFormHead.isAdendum=null===(u=this.project)||void 0===u?void 0:u.isAdendum,(c&&1==c||c.res)&&("SaveContractForm"==s?this.apiService.post("contractForm",this.contractFormData).subscribe(d=>{d&&(this.utilService.OkMessage(),this.loadData())},d=>{console.error(d),this.utilService.ShowApiErrorMessage(d)}):"ApproveContractForm"==s&&this.apiService.post("projectContracts/approveContractForm",{projectCode:this.project.projectCode,siteCode:this.project.isAdendum?this.project.siteCode:null,customerCode:this.project.customerCode,contractFormHeadId:this.contractFormData.contractFormHead.id}).subscribe(m=>{this.utilService.OkMessage(),this.loadData()},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m)}))})}saveContractForm(){null!=this.contractFormData?this.openConfirmationDialog(g.O.create,"Are_You_Sure?",xt,"SaveContractForm"):this.notifyService.showError(this.translate.instant("No Contract Data Found"))}editContractForm(){null!=this.contractFormData?this.openDialogManage3(this.contractFormData.contractFormHead.id,g.O.create,"Update_Contract_Form","Update",X3):this.notifyService.showError(this.translate.instant("No Contract Data Found"))}approveContract(){null!=this.contractFormData?this.openConfirmationDialog(g.O.create,"Are_You_Sure?",xt,"ApproveContractForm"):this.notifyService.showError(this.translate.instant("No Contract Data Found"))}TranslateTaggedDataEng(e){var o,n,s,r,c,p,u,d;let m="Second: "+(null===(o=this.customerData)||void 0===o?void 0:o.custName)+" Commercial Register "+this.referenceNumber+", Whose address -"+this.customerData.custAddress1+","+(null===(n=this.city)||void 0===n?void 0:n.cityName)+", Kingdom of Saudi Arabia, Phone: "+(null===(s=this.customerData)||void 0===s?void 0:s.custPhone1)+", email:"+this.customerData.custEmail1+" represented in signing this contract by "+(null===(r=this.customerData)||void 0===r?void 0:r.custSalesRep)+".",h=e.replace(/<<customer>>/gi,m),C="Thanks God alone and then: On "+this.referenceNumber+" - Corresponding to "+this.translate.instant(this.date.toLocaleDateString())+" A.D. Agreement in city of "+(null===(c=this.city)||void 0===c?void 0:c.cityName)+" between both: First: "+(null===(p=this.companyData)||void 0===p?void 0:p.companyName)+", address: "+(null===(u=this.companyData)||void 0===u?void 0:u.companyAddress)+", Kingdom of Saudi Arabia, Phone: "+(null===(d=this.companyData)||void 0===d?void 0:d.phone)+"  represented in signing this contract by Mohammed Abdullah Al Mansaky as being COO STS Group.";return h.replace(/<<company>>/gi,C)}TranslateTaggedDataArb(e){var o,n,s,r,c,p,u;let d="\u062b\u0627\u0646\u064a\u0627: - \u0634\u0631\u0643\u0629 "+this.customerData.custArbName+" \u0633\u062c\u0644 \u062a\u062c\u0627\u0631\u064a "+this.referenceNumber+",\u0639\u0646\u0648\u0627\u0646\u0647\u0627"+this.customerData.custAddress1+","+(null===(o=this.city)||void 0===o?void 0:o.cityNameAr)+", \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629 \u060c \u0627\u0644\u0647\u0627\u062a\u0641  "+(null===(n=this.customerData)||void 0===n?void 0:n.custPhone1)+", \u0627\u064a\u0645\u064a\u0644"+this.customerData.custEmail1+" \u0648\u064a\u0645\u062b\u0644\u0647\u0627 \u0641\u064a \u0627\u0644\u062a\u0648\u0642\u064a\u0639 \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u0639\u0642\u062f \u0627\u0644\u0623\u0633\u062a\u0627\u0630 "+(null===(s=this.customerData)||void 0===s?void 0:s.custSalesRep)+".",m=e.replace(/<<customer>>/gi,d),h="\u0627\u0647\u0640 \u0627\u0644\u0645\u0648\u0627\u0641\u0642 \u0644\u062d\u0645\u062f \u0644\u0644\u0647 \u0648\u062d\u062f\u0647 \u0648\u0628\u0639\u062f: - \u0641\u064a \u064a\u0648\u0645"+this.referenceNumber+"\u0645 \u062a\u0645 \u0627\u0644\u0627\u062a\u0641\u0627\u0642"+this.translate.instant(this.date.toLocaleDateString())+" A.D. \u0627\u062a\u0641\u0627\u0642\u064a\u0629 \u0641\u064a \u0645\u062f\u064a\u0646\u0629 "+(null===(r=this.city)||void 0===r?void 0:r.cityName)+"\u0628\u064a\u0646 \u0627\u0644\u0627\u062b\u0646\u064a\u0646: \u0623\u0648\u0644\u0627:"+(null===(c=this.companyData)||void 0===c?void 0:c.companyName)+", \u0639\u0646\u0648\u0627\u0646: "+(null===(p=this.companyData)||void 0===p?void 0:p.companyAddress)+", \u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629\u060c \u0647\u0627\u062a\u0641: "+(null===(u=this.companyData)||void 0===u?void 0:u.phone)+"  \u0645\u0645\u062b\u0644\u0629 \u0641\u064a \u062a\u0648\u0642\u064a\u0639 \u0647\u0630\u0627 \u0627\u0644\u0639\u0642\u062f \u0645\u0646 \u0642\u0628\u0644 Mohammed Abdullah Al Mansaky \u0643\u0645\u0627 \u064a\u062c\u0631\u064a  COO STS Group.";return m.replace(/<<company>>/gi,h)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(W.f),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(T.uw),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-contract-form"]],features:[t.qOj],decls:11,vars:3,consts:[[4,"ngIf"],[3,"click",4,"ngIf"],["type","button","aria-hidden","true",1,"",3,"click"],[1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"click"],["class","container-fluid invoice-container print-container","style"," width:850px; padding-top:5px;","id","printcontainer",4,"ngIf"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],["id","ProposalPage1",2,"page-break-after","always"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],[2,"width","50%","font-style","italic","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","50%","font-style","italic","text-align","right","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","50%","text-align","center","padding","10px"],[2,"width","50%","text-align","justify","padding","10px","vertical-align","top"],[2,"width","50%","text-align","left","padding","10px"],[2,"width","50%","text-align","right","padding","10px"],[2,"width","50%","text-align","left","padding","10px","white-space","pre-wrap","vertical-align","top"],[2,"width","50%","text-align","right","padding","10px","white-space","pre-wrap","vertical-align","top"],[4,"ngFor","ngForOf"],["colspan","2"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"border","1px solid #878787","padding","5px","text-align","right","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","text-align","right","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"border","1px solid #878787","padding","5px","text-align","left","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","500"],[2,"width","50%","text-align","center","padding","10px","vertical-align","top"],[2,"width","50%","text-align","left","padding","10px","vertical-align","top"],[2,"width","50%","text-align","right","padding","10px","vertical-align","top"],[2,"width","50%","text-align","justify","padding","10px","white-space","pre-wrap","vertical-align","top"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.YNc(1,cv,10,7,"span",0),t.TgZ(2,"span"),t.YNc(3,pv,3,3,"button",1),t._uU(4,"\xa0 "),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(6," Close"),t.qZA(),t.qZA(),t.qZA(),t._UZ(7,"br"),t._UZ(8,"br"),t._UZ(9,"br"),t.YNc(10,Cv,2,1,"div",0)),2&e&&(t.xp6(1),t.Q6J("ngIf",!(null!=o.contractFormData&&null!=o.contractFormData.contractFormHead&&o.contractFormData.contractFormHead.isApproved)),t.xp6(2),t.Q6J("ngIf",(null==o.contractFormData||null==o.contractFormData.contractFormHead?null:o.contractFormData.contractFormHead.id)>0||null!=o.templateData),t.xp6(7),t.Q6J("ngIf",(null==o.contractFormData||null==o.contractFormData.contractFormHead?null:o.contractFormData.contractFormHead.id)>0||null!=o.templateData))},directives:[f.O5,l.YN,l.Kr,f.sg],pipes:[Z.X$,f.JJ],encapsulation:2}),i})();function Av(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",57),t.TgZ(1,"a",58),t.NdJ("click",function(){return t.CHM(e),t.oxw().createNew()}),t._UZ(2,"i",59),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.hij("",t.lcZ(4,1,"New_Request")," "))}function Tv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function vv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function xv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function qv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function bv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function yv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function Sv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Request_Type")," "))}function wv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.AsE("",e.requestType,"",e.requestSubType,"")}}function Uv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Request_Number")," "))}function Lv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.requestNumber)}}function Dv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Requested_By")," "))}function Nv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.requestedBy)}}function Ev(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Requested_Date")," "))}function Ov(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.requestedDate,"dd/MM/yyyy"))}}function jv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Effective_Date")," "))}function kv(i,a){if(1&i&&(t.TgZ(0,"td",61),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.effectiveDate,"dd/MM/yyyy"))}}function Mv(i,a){1&i&&(t.TgZ(0,"th",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Approved")," "))}function Rv(i,a){1&i&&(t.TgZ(0,"span",64),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function Pv(i,a){1&i&&(t.TgZ(0,"span",65),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Fv(i,a){if(1&i&&(t.TgZ(0,"td",61),t.YNc(1,Rv,3,3,"span",62),t.YNc(2,Pv,3,3,"ng-template",null,63,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isApproved)("ngIfElse",o)}}function Iv(i,a){1&i&&(t.TgZ(0,"th",66),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Yv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().edit(n)}),t._UZ(1,"i",72),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function Jv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().delete(n)}),t._UZ(1,"i",73),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function Qv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approveRequest(n)}),t._UZ(1,"i",74),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function Bv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.YNc(1,Yv,3,1,"span",69),t.YNc(2,Jv,3,1,"span",69),t.YNc(3,Qv,3,1,"span",69),t.TgZ(4,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewRequest(n)}),t._UZ(5,"i",71),t._uU(6,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(e.canEditReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isApproved)&&(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Request"))}}function Hv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().edit(n)}),t._UZ(1,"i",72),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Edit_Request"))}}function Vv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().delete(n)}),t._UZ(1,"i",73),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Delete_Request"))}}function $v(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().approveRequest(n)}),t._UZ(1,"i",74),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Approve_Request"))}}function Gv(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Hv,3,1,"span",69),t.YNc(2,Vv,3,1,"span",69),t.YNc(3,$v,3,1,"span",69),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",(!(null!=e&&e.isFileUploadRequired)||e.fileUrl)&&(e.canApproveReq||e.isAdmin)&&!e.isMerged)}}function Wv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().mapEmpToRes(n)}),t._UZ(1,"i",75),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Mapp_Employee_To_Resource"))}}function zv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().mergeRequest(n.requestNumber)}),t._UZ(1,"i",76),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("matTooltip",e.translateToolTip("Merge_Resources"))}}function Xv(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Wv,3,1,"span",69),t.YNc(2,zv,3,1,"span",69),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.canEditReq||e.isAdmin),t.xp6(1),t.Q6J("ngIf",(e.canEditReq||e.isAdmin)&&e.isMappedResources)}}function Kv(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewRequest(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Request"))}}function tx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewMappings(n.requestNumber)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Resource_Mapping"))}}function ex(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Gv,4,3,"span",68),t.YNc(2,Xv,3,2,"span",68),t.YNc(3,Kv,3,1,"span",69),t.YNc(4,tx,3,1,"span",69),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isApproved&&!e.isMerged),t.xp6(1),t.Q6J("ngIf",!e.isMappedResources),t.xp6(1),t.Q6J("ngIf",e.isMappedResources)}}function ox(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendumForm(n)}),t._UZ(1,"i",77),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Generate_Addendum"))}}function ix(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadAdendum(n)}),t._UZ(1,"i",78),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function nx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewAddendum(n)}),t._UZ(1,"i",79),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_File"))}}function ax(i,a){if(1&i&&(t.TgZ(0,"td",67),t.YNc(1,Bv,7,4,"span",68),t.YNc(2,ex,5,4,"span",68),t.YNc(3,ox,3,1,"span",69),t.YNc(4,ix,3,1,"span",69),t.YNc(5,nx,3,1,"span",69),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","AddResource"!=e.requestType),t.xp6(1),t.Q6J("ngIf","AddResource"==e.requestType),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&(e.canApproveReq||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isFileUploadRequired)&&e.fileUrl)}}function sx(i,a){1&i&&t._UZ(0,"tr",80)}function rx(i,a){1&i&&t._UZ(0,"tr",81)}const io=function(){return{standalone:!0}};let no=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A,S){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=m,this.pageService=h,this.oprService=C,this.translate=A,this.dialogRef=S,this.displayedColumns=["customerCode","siteCode","projectCode","requestType","requestNumber","requestedBy","requestedDate","effectiveDate","isApproved","Actions"],this.searchValue="",this.sortingOrder="requestedDate asc",this.isLoading=!1,this.isUpdating=!1,this.listType="",this.approvedStatus=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder,"","")}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder,this.approvedStatus,this.listType)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder,this.approvedStatus,this.listType)}loadList(e,o,n,s,r="",c){this.isLoading=!0,this.apiService.getPagination(`PvAllRequests/getPvAllRequestsPagedListByProjectSite/${this.project.projectCode}/${this.project.siteCode}`,this.utilService.getOprQueryString(e,o,n,s,this.approvedStatus,"",0,"",this.listType)).subscribe(p=>{this.isLoading=!1,this.totalItemsCount=0,this.data=new _.by(p.items),this.totalItemsCount=p.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount,this.isLoading=!1}),this.data.sort=this.sort},p=>{this.utilService.ShowApiErrorMessage(p),this.isLoading=!1})}applyFilter(e,o){(e||o)&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,"",this.listType))}openConfirmationDialogManage(e,o,n,s,r,c,p){let u=this.oprService.confirmationDialog(this.dialog,c);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.id=e,u.componentInstance.confirmType="general",u.afterClosed().subscribe(d=>{d?("SwapEmployees"==o?this.apiService.get("PvSwapEmployees/ApproveReqPvSwapEmployeesReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):"RemoveResource"==o?this.apiService.get("PvRemoveResource/ApproveReqPvRemoveResourceReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):"AddResource"==o?this.apiService.get("PvAddResource/ApproveReqPvAddResourceReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):"TransferResource"==o?this.apiService.get("PvTransferResource/ApproveReqPvTransferResourceReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):"TransferWithReplacement"==o?this.apiService.get("PvTransferWithReplacement/ApproveReqPvTransferWithReplacementReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):"ReplaceResource"==o?this.apiService.get("PvReplaceResource/ApproveReqPvReplaceResourceReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}):"ProjectVariations"==o&&this.apiService.get("PvOpenCloseReq/ApproveReqPvOpenCloseReqById",e).subscribe(m=>{this.isUpdating=!1,m&&(this.utilService.OkMessage(),this.ngOnInit())},m=>{console.error(m),this.utilService.ShowApiErrorMessage(m),this.isUpdating=!1}),this.isUpdating=!1):this.isUpdating=!1})}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}createNewWindow(e,o,n,s,r,c){let p=this.utilService.openCrudDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.id=e,p.componentInstance.projectData=o,p.componentInstance.isFromProjectsAction=!0,p.afterClosed().subscribe(u=>{u&&!0===u&&this.initialLoading()})}openDialogManage2(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.requestData=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}approveRequest(e){this.isUpdating?this.notifyService.showError(this.translate.instant("Please Wait...")):(this.isUpdating=!0,this.openConfirmationDialogManage(null==e?void 0:e.requestNumber,null==e?void 0:e.requestType,g.O.update,"Conforming_Approve_Request","Approve",xt,"general"))}edit(e){let o=e.requestType,n=e.requestNumber;"SwapEmployees"==o?this.openDialogManage(n,g.O.update,"Updating_Request_For_Swap_Employees","Update",te):"RemoveResource"==o?this.openDialogManage(n,g.O.update,"Updating_Request_For_Remove_Resource","Update",Rt):"AddResource"==o?this.openDialogManage(n,g.O.update,"Updating_Request_For_Adding_Resources","Update",Ht):"TransferResource"==o?this.openDialogManage(n,g.O.update,"Updating_Request_For_Transfer_Resource","Update",Pt):"ReplaceResource"==o?this.openDialogManage(n,g.O.update,"Updating_Request_For_Replace_Employee","Update",Mt):"TransferWithReplacement"==o?this.openDialogManage(n,g.O.update,"Updating_Request_For_Transfer_With_Replacement","Update",Ft):"ProjectVariations"==o&&this.apiService.get("PvOpenCloseReq/getPvOpenCloseReqById",n).subscribe(s=>{this.openDialogManage2(s,g.O.update,"Updating_Request_For_Open_Close","Update",Et)})}delete(e){let o=e.requestType,n=e.requestNumber;this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(r=>{r&&n>0&&("SwapEmployees"==o?this.apiService.delete("PvSwapEmployees",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"RemoveResource"==o?this.apiService.delete("PvRemoveResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"AddResource"==o?this.apiService.delete("PvAddResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"TransferResource"==o?this.apiService.delete("PvTransferResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"ReplaceResource"==o?this.apiService.delete("PvReplaceResource",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"TransferWithReplacement"==o?this.apiService.delete("PvTransferWithReplacement",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}):"ProjectVariations"==o&&this.apiService.delete("PvOpenCloseReq",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()}))},r=>this.utilService.ShowApiErrorMessage(r))}viewRequest(e){let o=e.requestType;"SwapEmployees"==o?this.openDialogManage(e.requestNumber,g.O.create,"Request_For_Swap_Employees","View",Kt):"RemoveResource"==o?this.openDialogManage(e.requestNumber,g.O.create,"Request_For_Remove_Resource","View",Rt):"AddResource"==o?this.openDialogManage(e.requestNumber,g.O.create,"Request_For_Add_Resource","View",Ht):"TransferResource"==o?this.openDialogManage(e.requestNumber,g.O.create,"Request_For_Transfer_Employee","View",Pt):"ReplaceResource"==o?this.openDialogManage(e.requestNumber,g.O.create,"Replace_Resource_Request","View",Mt):"ProjectVariations"==o?this.apiService.get("PvOpenCloseReq/getPvOpenCloseReqById",e.requestNumber).subscribe(n=>{this.openDialogManage2(n,g.O.create,"Request_For_Open_Close_Project_Site","View",Et)}):"TransferWithReplacement"==o&&this.openDialogManage(e.requestNumber,g.O.create,"Request_For_Transfer_With_Replacement","View",Ft)}translateToolTip(e){return`${this.translate.instant(e)}`}mapEmpToRes(e){this.openDialogManage(e.requestNumber,g.O.create,"Employee_To_Resource_Mapping","Add",Jt)}viewMappings(e){this.openDialogManage(e,g.O.create,"Employee_Mapping_For_Add_Resources","View",Jt)}mergeRequest(e){this.openConfirmationDialogManage2(e,g.O.update,"Confirming_Merge_Request","Merge",xt,"general")}openConfirmationDialogManage2(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,r);p.componentInstance.dbops=o,p.componentInstance.modalTitle=n,p.componentInstance.modalBtnTitle=s,p.componentInstance.id=e,p.componentInstance.confirmType="general",p.afterClosed().subscribe(u=>{u?"Confirming_Merge_Request"==n&&this.apiService.get("PvAddResource/mergePvAddResourceReqById",e).subscribe(d=>{d&&(this.utilService.OkMessage(),this.ngOnInit())},d=>{console.error(d),this.utilService.ShowApiErrorMessage(d)}):this.notifyService.showError(this.translate.instant("Something_Went_Wrong"))})}closeModel(){this.dialogRef.close(!0)}createNew(){!this.isUpdating&&!this.isLoading&&("addResource"==this.listType?this.createNewWindow(0,this.project,g.O.create,"New_Request_For_Add_Resource","Add",Ht):"removeResource"==this.listType?this.createNewWindow(0,this.project,g.O.create,"New_Request_For_Remove_Resource","Add",Rt):"replaceResource"==this.listType?this.createNewWindow(0,this.project,g.O.create,"New_Request_For_Replace_Employees","Add",Mt):"swapEmployees"==this.listType?this.createNewWindow(0,this.project,g.O.create,"New_Request_For_Swap_Employees","Add",Kt):"transferWithReplacement"==this.listType?this.createNewWindow(0,this.project,g.O.create,"New_Request_For_Transfer_With_Replacement","Add",Ft):"transferResource"==this.listType&&this.createNewWindow(0,this.project,g.O.create,"New_Request_For_Transfer_Employee","Add",Pt))}refresh(){this.searchValue="",this.sortingOrder="requestedDate desc",this.approvedStatus="",this.listType="",this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}loadApprovals(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}viewAddendum(e){window.open(e.fileUrl)}uploadAdendum(e){let o=this.oprService.openAutoWidthDialog(this.dialog,ie);o.componentInstance.requestData=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewAddendumForm(e){let o=this.utilService.openCrudDialog(this.dialog,be);o.componentInstance.pvRequest=e,o.componentInstance.type="AddResource"==e.requestType?"ForAddingResources":"RemoveResource"==e.requestType?"ForRemovingResources":"",o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-pv-requests-pagination-by-project-site"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:122,vars:67,consts:[[1,"modal-body"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-2"],[1,"mr-sm-2"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","change","ngModelChange"],["value",""],["value","addResource"],["value","removeResource"],["value","replaceResource"],["value","swapEmployees"],["value","transferResource"],["value","transferWithReplacement"],["value","projectVariations"],["value","approved"],["value","unapproved"],[1,"col-md-3"],[1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[3,"click"],[1,"btn","btn-primary","icon-refresh"],[1,"col-md-1"],[3,"isLoading"],["class","col-md-2 text-right",4,"ngIf"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","requestType"],["matColumnDef","requestNumber"],["matColumnDef","requestedBy"],["matColumnDef","requestedDate"],["matColumnDef","effectiveDate"],["matColumnDef","isApproved"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[1,"col-md-2","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"far","fa-trash-alt"],[1,"icon-like"],[1,"fas","fa-users"],[1,"fas","fa-redo"],[1,"far","fa-arrow-alt-circle-down"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(2," \xd7"),t.qZA(),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"h3",5),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"nav",7),t.TgZ(11,"ol",8),t.TgZ(12,"li",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",9),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"li",10),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",11),t.TgZ(22,"div",3),t.TgZ(23,"div",12),t.TgZ(24,"div",13),t.TgZ(25,"div",14),t.TgZ(26,"div",3),t.TgZ(27,"div",15),t.TgZ(28,"label",16),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"select",17),t.NdJ("change",function(){return o.loadApprovals()})("ngModelChange",function(s){return o.listType=s}),t.TgZ(32,"option",18),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"option",19),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"option",20),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"option",21),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"option",22),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"option",23),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"option",24),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"option",25),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"div",15),t.TgZ(57,"label",16),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"select",17),t.NdJ("change",function(){return o.loadApprovals()})("ngModelChange",function(s){return o.approvedStatus=s}),t.TgZ(61,"option",18),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"option",26),t._uU(65,"Approved"),t.qZA(),t.TgZ(66,"option",27),t._uU(67,"UnApproved"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div",28),t._UZ(69,"label",16),t.TgZ(70,"input",29),t.NdJ("ngModelChange",function(s){return o.searchValue=s}),t.ALo(71,"translate"),t.qZA(),t.qZA(),t.TgZ(72,"div",15),t.TgZ(73,"button",30),t.NdJ("click",function(){return o.applyFilter(o.searchValue,o.listType)}),t._uU(74),t.ALo(75,"translate"),t.qZA(),t._uU(76," \xa0 "),t.TgZ(77,"a",31),t.NdJ("click",function(){return o.refresh()}),t._UZ(78,"i",32),t.qZA(),t._uU(79," \xa0 "),t.qZA(),t.TgZ(80,"div",33),t._UZ(81,"spinner-loader",34),t.qZA(),t.YNc(82,Av,5,3,"div",35),t.qZA(),t.qZA(),t._UZ(83,"div",36),t.TgZ(84,"div",37),t.TgZ(85,"div",38),t.ynx(86),t.TgZ(87,"table",39),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(88,40),t.YNc(89,Tv,3,3,"th",41),t.YNc(90,vv,2,1,"td",42),t.BQk(),t.ynx(91,43),t.YNc(92,xv,3,3,"th",41),t.YNc(93,qv,2,1,"td",42),t.BQk(),t.ynx(94,44),t.YNc(95,bv,3,3,"th",41),t.YNc(96,yv,2,1,"td",42),t.BQk(),t.ynx(97,45),t.YNc(98,Sv,3,3,"th",41),t.YNc(99,wv,2,2,"td",42),t.BQk(),t.ynx(100,46),t.YNc(101,Uv,3,3,"th",41),t.YNc(102,Lv,2,1,"td",42),t.BQk(),t.ynx(103,47),t.YNc(104,Dv,3,3,"th",41),t.YNc(105,Nv,2,1,"td",42),t.BQk(),t.ynx(106,48),t.YNc(107,Ev,3,3,"th",41),t.YNc(108,Ov,3,4,"td",42),t.BQk(),t.ynx(109,49),t.YNc(110,jv,3,3,"th",41),t.YNc(111,kv,3,4,"td",42),t.BQk(),t.ynx(112,50),t.YNc(113,Mv,3,3,"th",41),t.YNc(114,Fv,4,2,"td",42),t.BQk(),t.ynx(115,51),t.YNc(116,Iv,3,3,"th",52),t.YNc(117,ax,6,5,"td",53),t.BQk(),t.YNc(118,sx,1,0,"tr",54),t.YNc(119,rx,1,0,"tr",55),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.ynx(120),t.TgZ(121,"mat-paginator",56),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA()),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,31,"Project_Management_Requests")," "),t.xp6(6),t.hij(" ",t.lcZ(14,33,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(17,35,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(20,37,"Requests")),t.xp6(10),t.Oqu(t.lcZ(30,39,"RequestType")),t.xp6(2),t.Q6J("ngModel",o.listType)("ngModelOptions",t.DdM(65,io)),t.xp6(2),t.Oqu(t.lcZ(34,41,"Select")),t.xp6(3),t.Oqu(t.lcZ(37,43,"AddResource")),t.xp6(3),t.Oqu(t.lcZ(40,45,"RemoveResource")),t.xp6(3),t.Oqu(t.lcZ(43,47,"ReplaceResource")),t.xp6(3),t.Oqu(t.lcZ(46,49,"SwapEmployees")),t.xp6(3),t.Oqu(t.lcZ(49,51,"TransferResource")),t.xp6(3),t.Oqu(t.lcZ(52,53,"TransferWithReplacement")),t.xp6(3),t.Oqu(t.lcZ(55,55,"ProjectVariations")),t.xp6(4),t.Oqu(t.lcZ(59,57,"Approval_Status")),t.xp6(2),t.Q6J("ngModel",o.approvedStatus)("ngModelOptions",t.DdM(66,io)),t.xp6(2),t.Oqu(t.lcZ(63,59,"Select")),t.xp6(8),t.MGl("placeholder","",t.lcZ(71,61,"Search"),"..."),t.Q6J("ngModel",o.searchValue),t.xp6(4),t.Oqu(t.lcZ(75,63,"Search")),t.xp6(7),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",""!=o.listType&&"projectVariations"!=o.listType),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(31),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.EJ,l.JJ,l.On,l.YN,l.Kr,l.Fj,_t.r,f.O5,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,rt.gM,_.XQ,_.Gk],pipes:[Z.X$,f.uU],encapsulation:2}),i})(),ao=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d){super(p),this.translate=e,this.notifyService=o,this.utilService=n,this.dialog=s,this.apiService=r,this.dialogRef=c,this.authService=p,this.fb=u,this.oprService=d,this.confirmType="",this.leaveType="",this.remarks="",this.titleQuestion=this.translate.instant("Are_You_Sure?"),this.subTitleQuestion=""}ngOnInit(){this.setForm()}setForm(){this.form=this.fb.group({})}closeModel(e){"true"==e&&("transResign"==this.confirmType&&"TR"==this.leaveType&&""!=this.remarks||"transResign"==this.confirmType&&"R"==this.leaveType||"leave"==this.confirmType)?this.dialogRef.close({res:!0,remarks:this.remarks}):"true"==e&&"transResign"==this.confirmType&&"TR"==this.leaveType?this.notifyService.showError(this.translate.instant("Enter_Remarks")):this.dialogRef.close("true"==e&&"cancelLeave"==this.confirmType||"true"==e&&"postAttendance"==this.confirmType||"true"==e&&"general"==this.confirmType||"true"==e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.sK),t.Y36(w.g),t.Y36(y.t),t.Y36(T.uw),t.Y36(b.s),t.Y36(T.so),t.Y36(x._),t.Y36(l.qu),t.Y36(W.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-confirm-dialog-window-general"]],features:[t.qOj],decls:11,vars:9,consts:[["novalidate","",1,"mt-4",2,"text-align","center","color","red",3,"formGroup"],["role","alert",1,"alert","alert-danger"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-success","btn-midblock",3,"value","click"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-danger","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.TgZ(5,"input",2),t.NdJ("click",function(){return o.closeModel("true")}),t.ALo(6,"translate"),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"input",3),t.NdJ("click",function(){return o.closeModel("false")}),t.ALo(9,"translate"),t.qZA(),t._uU(10," \xa0 "),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.Oqu(o.titleQuestion),t.xp6(1),t.hij("\xa0",o.subTitleQuestion,"\xa0 "),t.xp6(1),t.s9C("value",t.lcZ(6,5,"Yes")),t.xp6(3),t.s9C("value",t.lcZ(9,7,"No")))},directives:[l._Y,l.JL,l.sg],pipes:[Z.X$],encapsulation:2}),i})();function lx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",56),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).searchKey=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("ngModel",e.searchKey)}}function cx(i,a){if(1&i&&(t.TgZ(0,"option",60),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.s9C("value",e.shiftCode),t.xp6(1),t.AsE("",e.shiftCode,"-",o.isArabic?e.shiftNumberNameAR:e.shiftNumberNameEN,"")}}const so=function(){return{standalone:!0}};function px(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"select",57),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).searchKey=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.TgZ(1,"option",58),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.YNc(5,cx,2,3,"option",59),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("ngModel",e.searchKey)("ngModelOptions",t.DdM(9,so)),t.xp6(2),t.AsE("",t.lcZ(3,5,"Select")," ",t.lcZ(4,7,"Shift_Code")," "),t.xp6(3),t.Q6J("ngForOf",e.listOfShiftCodes2)}}function ux(i,a){if(1&i){const e=t.EpF();t.ynx(0,32),t.TgZ(1,"div",33),t.TgZ(2,"div",34),t.TgZ(3,"div",35),t.TgZ(4,"h4",36),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"fieldset",37),t.TgZ(8,"label",38),t.TgZ(9,"input",39),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().reportType=n}),t.qZA(),t._uU(10,"\xa0 Attendance\xa0 "),t.TgZ(11,"input",40),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().reportType=n}),t.qZA(),t._uU(12,"\xa0TimeSheet "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",41),t.TgZ(14,"div",35),t.TgZ(15,"h4",36),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"fieldset",37),t.YNc(19,lx,1,1,"input",42),t.YNc(20,px,6,10,"select",43),t._uU(21," \xa0 "),t.TgZ(22,"label"),t.TgZ(23,"input",44),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().filterType=n})("click",function(){return t.CHM(e),t.oxw().searchKey=""}),t.qZA(),t._uU(24," \xa0Employee \xa0 "),t.TgZ(25,"input",44),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().filterType=n})("click",function(){return t.CHM(e),t.oxw().searchKey=""}),t.qZA(),t._uU(26," \xa0ShiftCode "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",45),t.TgZ(28,"div",46),t.TgZ(29,"span"),t.TgZ(30,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().postAttendance()}),t._UZ(31,"i",48),t.qZA(),t.TgZ(32,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().autoAttendance(-1)}),t._UZ(33,"i",49),t.qZA(),t.TgZ(34,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearAttendance()}),t._UZ(35,"i",50),t.qZA(),t.qZA(),t.TgZ(36,"span"),t.TgZ(37,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().reloadData()}),t._UZ(38,"i",51),t.qZA(),t.qZA(),t.TgZ(39,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportexcel()}),t._UZ(40,"i",52),t.qZA(),t.qZA(),t.TgZ(41,"div",53),t.TgZ(42,"div",54),t.TgZ(43,"fieldset",37),t.TgZ(44,"label"),t.TgZ(45,"input",55),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().highlightPostedAtt=n}),t.qZA(),t._uU(46),t.ALo(47,"translate"),t.TgZ(48,"input",55),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().highlightPendingAtt=n}),t.qZA(),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,20,"Report_Type")),t.xp6(4),t.Q6J("ngModel",e.reportType),t.xp6(2),t.Q6J("value","TimeSheet")("ngModel",e.reportType),t.xp6(5),t.Oqu(t.lcZ(17,22,"Search")),t.xp6(3),t.Q6J("ngIf","employee"==e.filterType),t.xp6(1),t.Q6J("ngIf","shiftCode"==e.filterType),t.xp6(3),t.Q6J("value","employee")("ngModel",e.filterType),t.xp6(2),t.Q6J("value","shiftCode")("ngModel",e.filterType),t.xp6(5),t.Q6J("matTooltip",e.translateToolTip("Post_Attendance")),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Enter_Auto_Attendance")),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Clear_Attendance")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Reload_Data")),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Download")),t.xp6(6),t.Q6J("ngModel",e.highlightPostedAtt),t.xp6(1),t.hij("",t.lcZ(47,24,"Show_Posted_Attendance")," \xa0 "),t.xp6(2),t.Q6J("ngModel",e.highlightPendingAtt),t.xp6(1),t.hij("",t.lcZ(50,26,"Show_Pending_Attendance")," \xa0 ")}}function dx(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",null==e.result?null:e.result.daysInMonth2),t.xp6(1),t.AsE("",null==e.result?null:e.result.month2Text,"-",null==e.result?null:e.result.year2Text,"")}}function mx(i,a){if(1&i&&(t.TgZ(0,"span",71),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",o.getWeekDay(null==e?null:e.attnDate)," ")}}function _x(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",72),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).autoAttendance(n)}),t._UZ(1,"i",73),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Enter_Auto_Attendance"))}}function gx(i,a){if(1&i&&(t.TgZ(0,"th",68),t.YNc(1,mx,2,1,"span",69),t.YNc(2,_x,2,1,"span",70),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.s9C("id",n.getDayBackground(o)),t.Q6J("matTooltip",n.getDayTooltip(e)),t.xp6(1),t.Q6J("ngIf",n.activeColumn!=o&&(!(null!=e&&e.isHoliday)||n.activeColumn<o)),t.xp6(1),t.Q6J("ngIf",n.activeColumn==o||(null==e?null:e.isHoliday)&&n.activeColumn>o)}}function hx(i,a){1&i&&(t.ynx(0),t.TgZ(1,"th",74),t._uU(2," \u0639\u062f\u062f \u0623\u064a\u0627\u0645 \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(3,"th",74),t._uU(4," \u0639\u062f\u062f \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(5,"th",74),t._uU(6," \u0623\u064a\u0627\u0645 \u0627\u0644\u0639\u0637\u0644\u0629 \u0627\u0644\u0623\u0633\u0628\u0648\u0639\u064a\u0629 "),t.qZA(),t.TgZ(7,"th",74),t._uU(8," \u0627\u062c\u0627\u0632\u0629 \u0633\u0646\u0648\u064a\u0629 "),t.qZA(),t.TgZ(9,"th",74),t._uU(10," \u0625\u062c\u0627\u0632\u0629 \u062e\u0627\u0635\u0629/\u0637\u0627\u0631\u0626\u0629 "),t.qZA(),t.TgZ(11,"th",74),t._uU(12," \u0627\u062c\u0627\u0632\u0629 \u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0647 "),t.qZA(),t.TgZ(13,"th",74),t._uU(14," \u0627\u062c\u0627\u0632\u0629 \u0645\u0631\u0636\u064a\u0629 "),t.qZA(),t.TgZ(15,"th",74),t._uU(16," \u0625\u062c\u0627\u0632\u0629 \u0627\u062e\u062a\u0628\u0627\u0631\u0627\u062a "),t.qZA(),t.TgZ(17,"th",74),t._uU(18," \u063a\u064a\u0627\u0628 "),t.qZA(),t.TgZ(19,"th",74),t._uU(20," \u0627\u0646\u0633\u062d\u0627\u0628 "),t.qZA(),t.TgZ(21,"th",75),t._uU(22," \u062c\u0632\u0627\u0621\u0627\u062a "),t.qZA(),t.TgZ(23,"th",75),t._uU(24," \u0639\u062f\u062f \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u062a\u0627\u062e\u064a\u0631 "),t.qZA(),t.TgZ(25,"th",76),t._uU(26," \u0648\u0642\u062a \u0627\u0636\u0627\u0641\u0649 "),t.qZA(),t.BQk())}function fx(i,a){if(1&i&&(t.TgZ(0,"th",68),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.s9C("id",n.getDayBackground(o)),t.Q6J("matTooltip",n.getDayTooltip(e)),t.xp6(1),t.hij(" ",e.day," ")}}function Zx(i,a){1&i&&(t.ynx(0),t.TgZ(1,"th",74),t._uU(2," W D C "),t.qZA(),t.TgZ(3,"th",74),t._uU(4," Nor. Hrs "),t.qZA(),t.TgZ(5,"th",74),t._uU(6," OF "),t.qZA(),t.TgZ(7,"th",74),t._uU(8," AL "),t.qZA(),t.TgZ(9,"th",74),t._uU(10," EL "),t.qZA(),t.TgZ(11,"th",74),t._uU(12," UL "),t.qZA(),t.TgZ(13,"th",74),t._uU(14," SL "),t.qZA(),t.TgZ(15,"th",74),t._uU(16," STL "),t.qZA(),t.TgZ(17,"th",74),t._uU(18," A "),t.qZA(),t.TgZ(19,"th",74),t._uU(20," W "),t.qZA(),t.TgZ(21,"th",75),t._uU(22," Penalty "),t.qZA(),t.TgZ(23,"th",75),t._uU(24," Late Hours "),t.qZA(),t.TgZ(25,"th",76),t._uU(26," OT "),t.qZA(),t.BQk())}function Cx(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",77),t._uU(2,"No Attendance Found"),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",(null==e.result||null==e.result.columns?null:e.result.columns.length)+4)}}function Ax(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.getEmpRow(o)+1," ")}}function Tx(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.getEmpRow(o)+1," ")}}function vx(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==n?null:n.employeeNumber," ")}}function xx(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==n?null:n.employeeNumber," ")}}function qx(i,a){1&i&&(t.TgZ(0,"span",87),t._uU(1,"(New)"),t.qZA())}function bx(i,a){if(1&i&&(t.TgZ(0,"td",84),t._uU(1),t.YNc(2,qx,2,0,"span",85),t.TgZ(3,"span",86),t._UZ(4,"br"),t._uU(5),t.qZA(),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.isArabic?null==n?null:n.employeeNameAr:null==n?null:n.employeeName," "),t.xp6(1),t.Q6J("ngIf",null==n?null:n.isNewHire),t.xp6(3),t.hij("(",null==n?null:n.positionName,")")}}function yx(i,a){1&i&&(t.TgZ(0,"span",87),t._uU(1,"(New)"),t.qZA())}function Sx(i,a){if(1&i&&(t.TgZ(0,"td",84),t._uU(1),t.YNc(2,yx,2,0,"span",88),t.TgZ(3,"span",86),t._UZ(4,"br"),t._uU(5),t.qZA(),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.isArabic?null==n?null:n.employeeNameAr:null==n?null:n.employeeName," "),t.xp6(1),t.Q6J("ngIf",null==n?null:n.isNewHire),t.xp6(3),t.hij("(",null==n?null:n.positionName,")")}}function wx(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",89),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).singClick(r,s)})("contextmenu",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).onRightClick(r,s)}),t._uU(1),t.qZA()}if(2&i){const e=a.index,o=t.oxw(2).index,n=t.oxw(3);t.s9C("id",n.getCellBackGround(o,e)),t.Q6J("matTooltip",n.getToolTip(o,e)),t.xp6(1),t.hij(" ",n.getAttendanceFlag(o,e)," ")}}function Ux(i,a){if(1&i&&(t.TgZ(0,"td",92),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"WDC")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].wdc," ")}}function Lx(i,a){if(1&i&&(t.TgZ(0,"td",92),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"WDC")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].wdc," ")}}function Dx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"No.Of.Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime)/60," ")}}function Nx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"No.Of.Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime)/60," ")}}function Ex(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OF")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",((null==s.result||null==s.result.rows[o]?null:s.result.rows[o].contractualShiftTime)-(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime))/s.result.siteWorkingTime," ")}}function Ox(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OF")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",((null==s.result||null==s.result.rows[o]?null:s.result.rows[o].contractualShiftTime)-(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime))/s.result.siteWorkingTime," ")}}function jx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"AL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].AL," ")}}function kx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"AL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].AL," ")}}function Mx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"EL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].EL," ")}}function Rx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"EL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].EL," ")}}function Px(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"UL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].UL," ")}}function Fx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"UL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].UL," ")}}function Ix(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"SL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].SL," ")}}function Yx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"SL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].SL," ")}}function Jx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"STL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].STL," ")}}function Qx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"STL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].STL," ")}}function Bx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Ab")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab," ")}}function Hx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Ab")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab," ")}}function Vx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"W")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].W," ")}}function $x(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"W")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].W," ")}}function Gx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Penalty")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",2*(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab)," ")}}function Wx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Penalty")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",2*(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab)," ")}}function zx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Late Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].lateHrs)," ")}}function Xx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Late Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].lateHrs)," ")}}function Kx(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OT")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].OT)," ")}}function tq(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OT")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].OT)," ")}}function eq(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Ux,2,4,"td",90),t.YNc(2,Lx,2,4,"td",90),t.YNc(3,Dx,2,4,"td",91),t.YNc(4,Nx,2,4,"td",91),t.YNc(5,Ex,2,4,"td",91),t.YNc(6,Ox,2,4,"td",91),t.YNc(7,jx,2,4,"td",91),t.YNc(8,kx,2,4,"td",91),t.YNc(9,Mx,2,4,"td",91),t.YNc(10,Rx,2,4,"td",91),t.YNc(11,Px,2,4,"td",91),t.YNc(12,Fx,2,4,"td",91),t.YNc(13,Ix,2,4,"td",91),t.YNc(14,Yx,2,4,"td",91),t.YNc(15,Jx,2,4,"td",91),t.YNc(16,Qx,2,4,"td",91),t.YNc(17,Bx,2,4,"td",91),t.YNc(18,Hx,2,4,"td",91),t.YNc(19,Vx,2,4,"td",91),t.YNc(20,$x,2,4,"td",91),t.YNc(21,Gx,2,4,"td",91),t.YNc(22,Wx,2,4,"td",91),t.YNc(23,zx,2,4,"td",91),t.YNc(24,Xx,2,4,"td",91),t.YNc(25,Kx,2,4,"td",91),t.YNc(26,tq,2,4,"td",91),t.BQk()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber))}}function oq(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Ax,2,3,"td",79),t.YNc(2,Tx,2,3,"td",79),t.YNc(3,vx,2,3,"td",80),t.YNc(4,xx,2,3,"td",80),t.YNc(5,bx,6,5,"td",81),t.YNc(6,Sx,6,5,"td",81),t.TgZ(7,"td",82),t._uU(8),t.qZA(),t.YNc(9,wx,2,3,"td",83),t.YNc(10,eq,27,26,"ng-container",63),t.BQk()),2&i){const e=t.oxw(),o=e.index,n=e.$implicit,s=t.oxw(3);t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.s9C("id",s.getShiftBgColor(null==n?null:n.shiftCode)),t.xp6(1),t.hij(" ",s.getShiftNumberName(null==n?null:n.shiftCode)," "),t.xp6(1),t.Q6J("ngForOf",n.attendanceMatrix),t.xp6(1),t.Q6J("ngIf","TimeSheet"==s.reportType&&0!=(null==s.result?null:s.result.rows.length)&&!s.isLoading)}}function iq(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,oq,11,10,"ng-container",63),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",o.canShowRow(e))}}function nq(i,a){if(1&i&&(t.ynx(0),t.YNc(1,iq,2,1,"tr",78),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.result.rows)}}function aq(i,a){1&i&&(t.TgZ(0,"span",87),t._uU(1,"(New)"),t.qZA())}function sq(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",89),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).singClick(r,s)})("contextmenu",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).onRightClick(r,s)}),t._uU(1),t.qZA()}if(2&i){const e=a.index,o=t.oxw(2).index,n=t.oxw(3);t.s9C("id",n.getCellBackGround(o,e)),t.Q6J("matTooltip",n.getToolTip(o,e)),t.xp6(1),t.hij(" ",n.getAttendanceFlag(o,e)," ")}}function rq(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"td",92),t._uU(2),t.qZA(),t.TgZ(3,"td",93),t._uU(4),t.qZA(),t.TgZ(5,"td",93),t._uU(6),t.qZA(),t.TgZ(7,"td",93),t._uU(8),t.qZA(),t.TgZ(9,"td",93),t._uU(10),t.qZA(),t.TgZ(11,"td",93),t._uU(12),t.qZA(),t.TgZ(13,"td",93),t._uU(14),t.qZA(),t.TgZ(15,"td",93),t._uU(16),t.qZA(),t.TgZ(17,"td",93),t._uU(18),t.qZA(),t.TgZ(19,"td",93),t._uU(20),t.qZA(),t.TgZ(21,"td",93),t._uU(22),t.qZA(),t.TgZ(23,"td",93),t._uU(24),t.qZA(),t.TgZ(25,"td",93),t._uU(26),t.qZA(),t.BQk()),2&i){const e=t.oxw(2).index,o=t.oxw(3);t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"WDC")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].wdc," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"No.Of.Hrs")),t.xp6(1),t.hij(" ",(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].allottedShiftTime)/60," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"OF")),t.xp6(1),t.hij(" ",((null==o.result||null==o.result.rows[e]?null:o.result.rows[e].contractualShiftTime)-(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].allottedShiftTime))/o.result.siteWorkingTime," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"AL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].AL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"EL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].EL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"UL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].UL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"SL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].SL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"STL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].STL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"Ab")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].Ab," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"W")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].W," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"Penalty")),t.xp6(1),t.hij(" ",2*(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].Ab)," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"Late Hrs")),t.xp6(1),t.hij(" ",o.hrsToStrHrsMins(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].lateHrs)," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"OT")),t.xp6(1),t.hij(" ",o.hrsToStrHrsMins(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].OT)," ")}}function lq(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"td",82),t._uU(2),t.qZA(),t.TgZ(3,"td",82),t._uU(4),t.qZA(),t.TgZ(5,"td",84),t._uU(6),t.YNc(7,aq,2,0,"span",85),t.TgZ(8,"span",86),t._UZ(9,"br"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"td",82),t._uU(12),t.qZA(),t.YNc(13,sq,2,3,"td",83),t.YNc(14,rq,27,39,"ng-container",63),t.BQk()),2&i){const e=t.oxw(),o=e.index,n=e.$implicit,s=t.oxw(3);t.xp6(1),t.s9C("id",s.getEmpBackGround(o,0)),t.xp6(1),t.hij(" ",s.getEmpRow(o)+1," "),t.xp6(1),t.s9C("id",s.getEmpBackGround(o,0)),t.xp6(1),t.hij(" ",null==n?null:n.employeeNumber," "),t.xp6(1),t.s9C("id",s.getEmpBackGround(o,0)),t.xp6(1),t.hij(" ",s.isArabic?null==n?null:n.employeeNameAr:null==n?null:n.employeeName," "),t.xp6(1),t.Q6J("ngIf",null==n?null:n.isNewHire),t.xp6(3),t.hij("(",null==n?null:n.positionName,")"),t.xp6(1),t.s9C("id",s.getShiftBgColor(null==n?null:n.shiftCode)),t.xp6(1),t.hij(" ",s.getShiftNumberName(null==n?null:n.shiftCode)," "),t.xp6(1),t.Q6J("ngForOf",n.attendanceMatrix),t.xp6(1),t.Q6J("ngIf","TimeSheet"==s.reportType&&0!=(null==s.result?null:s.result.rows.length)&&!s.isLoading)}}function cq(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,lq,15,12,"ng-container",63),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",o.canShowRow(e))}}function pq(i,a){if(1&i&&(t.ynx(0),t.YNc(1,cq,2,1,"tr",78),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.result.rows)}}function uq(i,a){if(1&i&&(t.TgZ(0,"td",98),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,null==o.result||null==o.result.columns[e]?null:o.result.columns[e].contractualShiftTime,"1.0-1")," ")}}function dq(i,a){if(1&i&&(t.TgZ(0,"td",101),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].contractualShiftTime)/((null==o.result?null:o.result.siteWorkingTime)/60),"1.0-1")," ")}}function mq(i,a){if(1&i&&(t.TgZ(0,"td",98),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",o.hrsToStrHrsMins(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].attendedTime)," ")}}function _q(i,a){if(1&i&&(t.TgZ(0,"td",101),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].attendedTime)/((null==o.result?null:o.result.siteWorkingTime)/60),"1.0-1")," ")}}function gq(i,a){if(1&i&&(t.TgZ(0,"td",106),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].contractualShiftTime)/((null==o.result?null:o.result.siteWorkingTime)/60)-(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].attendedTime)/((null==o.result?null:o.result.siteWorkingTime)/60),"1.0-1")," ")}}function hq(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",94),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"td"),t.TgZ(6,"td",95),t._uU(7),t.qZA(),t.TgZ(8,"td",95),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",95),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td",95),t._uU(15),t.qZA(),t.TgZ(16,"td",95),t._uU(17),t.qZA(),t.TgZ(18,"td",95),t._uU(19),t.qZA(),t.TgZ(20,"td",95),t._uU(21),t.qZA(),t.TgZ(22,"td",95),t._uU(23),t.qZA(),t.TgZ(24,"td",95),t._uU(25),t.qZA(),t.TgZ(26,"td",95),t._uU(27),t.qZA(),t.TgZ(28,"td",95),t._uU(29),t.qZA(),t.TgZ(30,"td",95),t._uU(31),t.ALo(32,"number"),t.qZA(),t.TgZ(33,"td",95),t._uU(34),t.ALo(35,"number"),t.qZA(),t.qZA(),t.TgZ(36,"tr"),t.TgZ(37,"td",96),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.YNc(40,uq,3,4,"td",97),t.TgZ(41,"td",98),t._uU(42),t.ALo(43,"number"),t.qZA(),t._UZ(44,"td",99),t._UZ(45,"td",99),t._UZ(46,"td",99),t._UZ(47,"td",99),t._UZ(48,"td",99),t._UZ(49,"td",99),t._UZ(50,"td",99),t._UZ(51,"td",99),t._UZ(52,"td",99),t._UZ(53,"td",99),t._UZ(54,"td",99),t._UZ(55,"td",99),t.qZA(),t.TgZ(56,"tr"),t.TgZ(57,"td",94),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.YNc(60,dq,3,4,"td",100),t.TgZ(61,"td",101),t._uU(62),t.ALo(63,"number"),t.qZA(),t._UZ(64,"td",99),t._UZ(65,"td",99),t._UZ(66,"td",99),t._UZ(67,"td",99),t._UZ(68,"td",99),t._UZ(69,"td",99),t._UZ(70,"td",99),t._UZ(71,"td",99),t._UZ(72,"td",99),t._UZ(73,"td",99),t._UZ(74,"td",99),t._UZ(75,"td",99),t.qZA(),t.TgZ(76,"tr"),t.TgZ(77,"td",102),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.YNc(80,mq,2,1,"td",103),t.TgZ(81,"td",98),t._uU(82),t.qZA(),t._UZ(83,"td",99),t._UZ(84,"td",99),t._UZ(85,"td",99),t._UZ(86,"td",99),t._UZ(87,"td",99),t._UZ(88,"td",99),t._UZ(89,"td",99),t._UZ(90,"td",99),t._UZ(91,"td",99),t._UZ(92,"td",99),t._UZ(93,"td",99),t._UZ(94,"td",99),t.qZA(),t.TgZ(95,"tr"),t.TgZ(96,"td",94),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.YNc(99,_q,3,4,"td",100),t.TgZ(100,"td",101),t._uU(101),t.ALo(102,"number"),t.qZA(),t._UZ(103,"td",99),t._UZ(104,"td",99),t._UZ(105,"td",99),t._UZ(106,"td",99),t._UZ(107,"td",99),t._UZ(108,"td",99),t._UZ(109,"td",99),t._UZ(110,"td",99),t._UZ(111,"td",99),t._UZ(112,"td",99),t._UZ(113,"td",99),t._UZ(114,"td",99),t.qZA(),t.TgZ(115,"tr"),t.TgZ(116,"td",104),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.YNc(119,gq,3,4,"td",105),t.TgZ(120,"td",106),t._uU(121),t.ALo(122,"number"),t.qZA(),t._UZ(123,"td",99),t._UZ(124,"td",99),t._UZ(125,"td",99),t._UZ(126,"td",99),t._UZ(127,"td",99),t._UZ(128,"td",99),t._UZ(129,"td",99),t._UZ(130,"td",99),t._UZ(131,"td",99),t._UZ(132,"td",99),t._UZ(133,"td",99),t._UZ(134,"td",99),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,30,"Total")," "),t.xp6(2),t.uIk("colspan",null==e.result?null:e.result.columns.length),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.wdc," "),t.xp6(2),t.hij(" ",t.xi3(10,32,(null==e.rowGrandTotal?null:e.rowGrandTotal.wdc)*(null==e.result?null:e.result.siteWorkingTime)/60,"1.0-1")," "),t.xp6(3),t.hij(" ",t.xi3(13,35,null==e.rowGrandTotal?null:e.rowGrandTotal.OF,"1.0-1")," "),t.xp6(3),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.AL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.EL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.UL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.SL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.STL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.Ab," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.W," "),t.xp6(2),t.hij(" ",2*(null==e.rowGrandTotal?null:e.rowGrandTotal.Ab)," "),t.xp6(2),t.hij(" ",t.xi3(32,38,null==e.rowGrandTotal?null:e.rowGrandTotal.lateHrs,"1.0-1")," "),t.xp6(3),t.hij(" ",t.xi3(35,41,null==e.rowGrandTotal?null:e.rowGrandTotal.OT,"1.0-1")," "),t.xp6(4),t.hij(" ",t.lcZ(39,44,"Total_Contracted_Hours")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(43,46,null==e.columnGrandTotal?null:e.columnGrandTotal.contractualShiftTime,"1.0-1")," "),t.xp6(16),t.hij(" ",t.lcZ(59,49,"Total_Contracted_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(63,51,e.columnGrandTotal.contractualShiftTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(16),t.hij(" ",t.lcZ(79,54,"Actual_Hours")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",e.hrsToStrHrsMins(e.columnGrandTotal.attendedTime)," "),t.xp6(15),t.hij(" ",t.lcZ(98,56,"Actual_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(102,58,e.columnGrandTotal.attendedTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(16),t.hij(" ",t.lcZ(118,61,"Variance_of_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(122,63,(null==e.columnGrandTotal?null:e.columnGrandTotal.contractualShiftTime)/((null==e.result?null:e.result.siteWorkingTime)/60)-(null==e.columnGrandTotal?null:e.columnGrandTotal.attendedTime)/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," ")}}function fq(i,a){if(1&i&&(t.TgZ(0,"table",61),t.TgZ(1,"tr"),t._UZ(2,"th",62),t.ynx(3),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.BQk(),t.YNc(6,dx,3,3,"ng-container",63),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"th",64),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",65),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",64),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.YNc(17,gx,3,4,"th",66),t.YNc(18,hx,27,0,"ng-container",63),t.qZA(),t.TgZ(19,"tr"),t.YNc(20,fx,2,3,"th",66),t.YNc(21,Zx,27,0,"ng-container",63),t.qZA(),t.TgZ(22,"tbody",67),t.YNc(23,Cx,3,1,"tr",63),t.YNc(24,nq,2,1,"ng-container",63),t.YNc(25,pq,2,1,"ng-container",63),t.YNc(26,hq,135,66,"ng-container",63),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.uIk("colspan",null==e.result?null:e.result.daysInMonth1),t.xp6(1),t.AsE("",null==e.result?null:e.result.month1Text,"-",null==e.result?null:e.result.year1Text,""),t.xp6(1),t.Q6J("ngIf",!(null!=e.result&&e.result.isSingleMonth)),t.xp6(3),t.hij(" ",t.lcZ(10,15,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(13,17,"Employee")," "),t.xp6(3),t.hij(" ",t.lcZ(16,19,"Shift")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(1),t.Q6J("ngIf","TimeSheet"==e.reportType&&0!=(null==e.result?null:e.result.rows.length)&&!e.isLoading),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(1),t.Q6J("ngIf","TimeSheet"==e.reportType&&0!=(null==e.result?null:e.result.rows.length)&&!e.isLoading),t.xp6(2),t.Q6J("ngIf",0==(null==e.result?null:e.result.rows.length)),t.xp6(1),t.Q6J("ngIf",!e.isShiftFilterApplied()),t.xp6(1),t.Q6J("ngIf",e.isShiftFilterApplied()),t.xp6(1),t.Q6J("ngIf","TimeSheet"==e.reportType&&0!=(null==e.result?null:e.result.rows.length)&&!e.isLoading)}}function Zq(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",110),t._uU(4),t.qZA(),t.TgZ(5,"td",111),t._uU(6),t.qZA(),t.TgZ(7,"td",111),t._uU(8),t.qZA(),t.TgZ(9,"td",111),t._uU(10),t.qZA(),t.TgZ(11,"td",111),t._uU(12),t.qZA(),t.TgZ(13,"td",111),t._uU(14),t.qZA(),t.TgZ(15,"td",111),t._uU(16),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(null==e?null:e.positionName),t.xp6(2),t.hij("",null==e?null:e.qty," "),t.xp6(2),t.hij("",null==e?null:e.dailyHrs," "),t.xp6(2),t.hij("",null==e?null:e.monthlyHrs," "),t.xp6(2),t.Oqu(null==e?null:e.monthlyShifts),t.xp6(2),t.hij("",(null==e?null:e.monthlyShifts)-(null==e?null:e.monthlyOffs)," "),t.xp6(2),t.Oqu(null==e?null:e.monthlyOffs)}}function Cq(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td",114),t._uU(4),t.qZA(),t.TgZ(5,"th"),t._uU(6,"= "),t.qZA(),t.TgZ(7,"td",115),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.shiftCode),t.xp6(1),t.MGl("id","bgColorShift_",null==e?null:e.shiftNumber,""),t.xp6(1),t.hij("",o.isArabic?null==e?null:e.shiftName_AR:null==e?null:e.shiftName_EN," "),t.xp6(3),t.MGl("id","bgColorShift_",null==e?null:e.shiftNumber,""),t.xp6(1),t.hij("",o.isArabic?null==e?null:e.shiftNumberNameAR:null==e?null:e.shiftNumberNameEN," ")}}function Aq(i,a){if(1&i&&(t.TgZ(0,"div",107),t.TgZ(1,"div",108),t.TgZ(2,"div",35),t.TgZ(3,"table",109),t.TgZ(4,"tr"),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"th",110),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",111),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",111),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th",111),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th",111),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th",111),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th",111),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.YNc(29,Zq,17,8,"tr",78),t.TgZ(30,"tr"),t.TgZ(31,"th",111),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"th",111),t._uU(35),t.qZA(),t.TgZ(36,"th",111),t._uU(37),t.qZA(),t.TgZ(38,"th",111),t._uU(39),t.qZA(),t.TgZ(40,"th",111),t._uU(41),t.qZA(),t.TgZ(42,"th",111),t._uU(43),t.qZA(),t.TgZ(44,"th",111),t._uU(45),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",112),t.TgZ(47,"div",35),t.TgZ(48,"table",109),t.TgZ(49,"tr"),t.TgZ(50,"th",111),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"td"),t._uU(54),t.ALo(55,"number"),t.qZA(),t.qZA(),t.TgZ(56,"tr"),t.TgZ(57,"th",111),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"td"),t._uU(61),t.ALo(62,"number"),t.qZA(),t.qZA(),t.TgZ(63,"tr"),t.TgZ(64,"th",111),t._uU(65),t.ALo(66,"translate"),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"td"),t._uU(69),t.ALo(70,"number"),t.qZA(),t.qZA(),t.TgZ(71,"tr"),t.TgZ(72,"th",111),t._uU(73),t.ALo(74,"translate"),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"td"),t._uU(77),t.ALo(78,"number"),t.qZA(),t.qZA(),t.TgZ(79,"tr"),t.TgZ(80,"th",111),t._uU(81),t.ALo(82,"translate"),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"td"),t._uU(85),t.ALo(86,"number"),t.qZA(),t.qZA(),t.TgZ(87,"tr"),t.TgZ(88,"th",111),t._uU(89),t.ALo(90,"translate"),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"td"),t._uU(93),t.ALo(94,"number"),t.qZA(),t.qZA(),t.TgZ(95,"tr"),t.TgZ(96,"th",111),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.TgZ(99,"td"),t._uU(100),t.ALo(101,"number"),t.qZA(),t.qZA(),t.TgZ(102,"tr"),t.TgZ(103,"th",111),t._uU(104),t.ALo(105,"translate"),t.qZA(),t.TgZ(106,"td"),t._uU(107),t.ALo(108,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(109,"div",113),t.TgZ(110,"div",35),t.TgZ(111,"table",109),t.YNc(112,Cq,9,5,"tr",78),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,37,"S.No")),t.xp6(3),t.hij("",t.lcZ(10,39,"Position")," "),t.xp6(3),t.hij("",t.lcZ(13,41,"Qty")," "),t.xp6(3),t.hij("",t.lcZ(16,43,"Daily_Hrs")," "),t.xp6(3),t.hij("",t.lcZ(19,45,"Monthly_Hrs")," "),t.xp6(3),t.hij("",t.lcZ(22,47,"Scheduled_Shifts")," "),t.xp6(3),t.hij("",t.lcZ(25,49,"Assigned_Shifts")," "),t.xp6(3),t.hij("",t.lcZ(28,51,"OFFS")," "),t.xp6(2),t.Q6J("ngForOf",null==e.roasterReport?null:e.roasterReport.rowsByPositions),t.xp6(3),t.Oqu(t.lcZ(33,53,"Total")),t.xp6(3),t.hij("",null==e.roasterReport?null:e.roasterReport.qty," "),t.xp6(2),t.hij("",null==e.roasterReport?null:e.roasterReport.dailyHrs," "),t.xp6(2),t.hij("",null==e.roasterReport?null:e.roasterReport.monthlyHrs," "),t.xp6(2),t.Oqu(null==e.roasterReport?null:e.roasterReport.monthlyShifts),t.xp6(2),t.hij("",(null==e.roasterReport?null:e.roasterReport.monthlyShifts)-(null==e.roasterReport?null:e.roasterReport.monthlyOffs)," "),t.xp6(2),t.Oqu(null==e.roasterReport?null:e.roasterReport.monthlyOffs),t.xp6(6),t.Oqu(t.lcZ(52,55,"Contracted_Shifts")),t.xp6(3),t.hij(" ",t.xi3(55,57,e.columnGrandTotal.contractualShiftTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(4),t.Oqu(t.lcZ(59,60,"Contracted_Hours")),t.xp6(3),t.hij("",t.xi3(62,62,null==e.columnGrandTotal?null:e.columnGrandTotal.contractualShiftTime,"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(66,65,"Actual_Shifts"),"(",t.lcZ(67,67,"With_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(70,69,(e.columnGrandTotal.attendedTime+(null==e.rowGrandTotal?null:e.rowGrandTotal.OT)/2)/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(74,72,"Actual_Hours"),"(",t.lcZ(75,74,"With_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(78,76,e.columnGrandTotal.attendedTime+(null==e.rowGrandTotal?null:e.rowGrandTotal.OT)/2,"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(82,79,"Actual_Shifts"),"(",t.lcZ(83,81,"Without_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(86,83,e.columnGrandTotal.attendedTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(90,86,"Actual_Hours"),"(",t.lcZ(91,88,"Without_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(94,90,e.columnGrandTotal.attendedTime,"1.0-1")," "),t.xp6(4),t.Oqu(t.lcZ(98,93,"Overtime_Hours")),t.xp6(3),t.hij("",t.xi3(101,95,null==e.rowGrandTotal?null:e.rowGrandTotal.OT,"1.0-1")," "),t.xp6(4),t.Oqu(t.lcZ(105,98,"Overtime_Shifts\t")),t.xp6(3),t.hij(" ",t.xi3(108,100,60*(null==e.rowGrandTotal?null:e.rowGrandTotal.OT)*1.5/(null==e.result?null:e.result.siteWorkingTime),"1.0-1"),""),t.xp6(5),t.Q6J("ngForOf",e.listOfShiftCodes2)}}let Tq=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(u),this.datePipe=e,this.dialog=o,this.oprService=n,this.fb=s,this.http=r,this.router=c,this.apiService=p,this.authService=u,this.utilService=d,this.translate=m,this.notifyService=h,this.validationService=C,this.dialogRef=A,this.result={rows:[],columns:[]},this.filteredRows=[],this.rows=[],this.isLoading=!1,this.isArabic=!1,this.employeesGroup=[],this.projectCode="",this.siteCode="",this.fromDate=new Date,this.toDate=new Date,this.minDate=new Date,this.maxDate=new Date,this.projectSelectionList=[],this.siteSelectionList=[],this.readonly=!1,this.isFromProjectSiteActions=!0,this.listOfShiftCodes2=[],this.reportType="TimeSheet",this.filterType="employee",this.highlightPostedAtt=!1,this.highlightPendingAtt=!1,this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1},this.columnGrandTotal={contractualShiftTime:0,attendedTime:0},this.rowGrandTotal={contractualShiftTime:0,wdc:10,AL:0,UL:0,SL:0,EL:0,STL:0,Ab:0,OT:0,lateHrs:0,W:0,OF:0},this.pageNumber=0,this.pageSize=1,this.totalRowsCount=0,this.totalEmployeesCount=0,this.tempAltEmployeeNumber="",this.filter={employeeNumber:"",shiftCode:""},this.searchKey="",this.dataProcessedTime=new Date,this.isDataProcessed=!1,this.time=0,this.waitingTime=60,this.activeColumn=-1,this.shiftTypeNames=[{number:0,nameEn:"OFF",nameAr:"\u0639\u0637\u0644\u0629ss"},{number:1,nameEn:"Shift 1",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u0623\u0648\u0644\u0649"},{number:2,nameEn:"Shift 2",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0646\u064a\u0629"},{number:3,nameEn:"Shift 3",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629"},{number:4,nameEn:"Shift 4",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629"}],this.roasterReport={rows:[]}}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.isFromProjectSiteActions&&this.setForm()}setForm(){this.form=this.fb.group({}),this.isFromProjectSiteActions&&(this.readonly=!0,this.getProjectData(),this.getSiteData(),this.loadShiftCodes())}submit(){}loadProjectSelectionList(){this.apiService.getall("project/getSelectProjectList2").subscribe(e=>{this.projectSelectionList=e})}loadSiteSelectionListForProject(){this.apiService.getall(`projectSites/getSelectProjectSitesListByProjectCode/${this.projectCode}`).subscribe(e=>{this.siteSelectionList=e})}getProjectData(){this.apiService.getall(`project/getProjectByProjectCode/${this.projectCode}`).subscribe(e=>{this.projectData=e})}getSiteData(){this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.projectCode}/${this.siteCode}`).subscribe(e=>{this.siteData=e})}getReport(){if(this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1},this.fromDate.getDate()>28)this.notifyService.showInfo("Invalid Payroll Date: Select Date between 1-28");else{let o=new Date(this.fromDate);o.setMinutes(o.getMinutes()-o.getTimezoneOffset()),this.fromDate=o,this.getReports()}}getRoasterReport(e){this.apiService.post("Reports/getRoasterPayrollReport",e).subscribe(o=>{this.roasterReport=o})}calculateRowGrandTotal(){var e;this.rowGrandTotal={contractualShiftTime:0,wdc:0,AL:0,UL:0,SL:0,EL:0,STL:0,Ab:0,OT:0,lateHrs:0,W:0,OF:0};for(let o=0;o<(null===(e=this.result)||void 0===e?void 0:e.rows.length);o++)(0==o||this.result.rows[o].employeeNumber!=this.result.rows[o-1].employeeNumber)&&(this.rowGrandTotal.wdc+=this.result.rows[o].wdc,this.rowGrandTotal.contractualShiftTime+=this.result.rows[o].contractualShiftTime,this.rowGrandTotal.allottedShiftTime+=this.result.rows[o].allottedShiftTime,this.rowGrandTotal.AL+=this.result.rows[o].AL,this.rowGrandTotal.UL+=this.result.rows[o].UL,this.rowGrandTotal.SL+=this.result.rows[o].SL,this.rowGrandTotal.EL+=this.result.rows[o].EL,this.rowGrandTotal.STL+=this.result.rows[o].STL,this.rowGrandTotal.Ab+=this.result.rows[o].Ab,this.rowGrandTotal.OT+=this.result.rows[o].OT,this.rowGrandTotal.lateHrs+=this.result.rows[o].lateHrs,this.rowGrandTotal.W+=this.result.rows[o].W,this.rowGrandTotal.OF+=(this.result.rows[o].contractualShiftTime-this.result.rows[o].allottedShiftTime)/this.result.siteWorkingTime)}getReports(){if(""!=this.projectCode&&""!=this.siteCode){let e={projectCode:this.projectCode,siteCode:this.siteCode,payrollStartDate:this.fromDate,pageNumber:this.pageNumber,pageSize:this.pageSize,employeeNumber:""};this.isLoading=!0,this.apiService.post("Reports/getAttendancePayrollReport",e).subscribe(o=>{var n,s;this.result=o,(null===(n=null==o?void 0:o.rows)||void 0===n?void 0:n.length)>0?((null==o?void 0:o.isExistEmptyShifts)&&this.notifyService.showWarning("Incomplete_Shift_Locks"),this.fromDate=null==o?void 0:o.columns[0].attnDate,this.toDate=null==o?void 0:o.columns[(null===(s=null==o?void 0:o.columns)||void 0===s?void 0:s.length)-1].attnDate,this.totalEmployeesCount=o.totalEmployeesCount,this.loadRemainingData(e),this.getRoasterReport(e)):(this.notifyService.showInfo("No Roasters Found"),this.isLoading=!1)},o=>{this.isLoading=!1,this.notifyService.showError(o.error.message)})}}loadRemainingData(e){e.pageNumber++,e.pageNumber>Math.floor(this.totalEmployeesCount/this.pageSize)?(this.employeesGroup=[],this.isLoading=!1,this.generateReportAndCalculations(),this.startTimer(),this.RefreshOffs()):this.apiService.post("Reports/getAttendancePayrollReport",e).subscribe(o=>{this.result.rows=this.result.rows.concat(o.rows),this.loadRemainingData(e)})}filterRows(e){return e.filter(o=>o.employeeNumber)}generateReportAndCalculations(){this.employeesGroup=[],this.result.rows.sort((e,o)=>e.employeeNumber<o.employeeNumber?-1:1),this.result.rows.forEach(e=>{e.uniqueShiftsCount>0&&this.employeesGroup.indexOf(o=>o.employeeNumber==e.employeeNumber)<0&&this.employeesGroup.push({employeeNumber:e.employeeNumber})}),this.calculateColumnTotals(this.result),this.calculateRowTotals(this.result),this.updateActiveColumn(),this.calculateRowGrandTotal()}updateActiveColumn(){this.activeColumn=-1;for(let e=0;e<this.result.columns.length;e++)if(this.result.rows.findIndex(o=>o.attendanceMatrix[e].attndId>0)<0&&!this.result.columns[e].isHoliday&&this.result.rows.findIndex(o=>"O"!=o.shiftCode&&"-"==o.attendanceMatrix[e].attnFlag)>=0){this.activeColumn=e;break}}calculateRowTotals(e){var o,n,s,r,c,p,u,d,m,h,C,A,S,D,U,R,O,J,F,nt,$,z,K,mt,st;for(let Y=0;Y<(null==e?void 0:e.rows.length);Y++){let k=null==e?void 0:e.rows.filter(P=>P.employeeNumber==(null==e?void 0:e.rows[Y].employeeNumber)),At=0,bt=0,Tt=0,Ct=0,ft=0,Q=0,B=0,qt=0,vt=0,yt=0,Zt=0,Ut=0;for(let P=0;P<k.length;P++)for(let I=0;I<(null==e?void 0:e.columns.length);I++)bt+=k[P].attendanceMatrix[I].contractualShiftTime,Tt+=k[P].attendanceMatrix[I].allottedShiftTime,k[P].attendanceMatrix[I].allottedShiftTime>0&&At++,1==(null===(o=k[P].attendanceMatrix[I])||void 0===o?void 0:o.isOnLeave)?"AL"==k[P].attendanceMatrix[I].attnFlag?Ct++:"UL"==k[P].attendanceMatrix[I].attnFlag?qt++:"CL"==k[P].attendanceMatrix[I].attnFlag?Q++:"STL"==k[P].attendanceMatrix[I].attnFlag?B++:"EL"==k[P].attendanceMatrix[I].attnFlag?ft++:"W"==k[P].attendanceMatrix[I].attnFlag&&yt++:"S"==(null===(n=k[P].attendanceMatrix[I])||void 0===n?void 0:n.attnFlag)||"A"==(null===(s=k[P].attendanceMatrix[I])||void 0===s?void 0:s.attnFlag)?vt++:(null===(r=k[P].attendanceMatrix[I])||void 0===r?void 0:r.refIdForAlt)>0?Zt+=null!==(p=null===(c=k[P].attendanceMatrix[I])||void 0===c?void 0:c.attendedTime)&&void 0!==p?p:0:0==(null===(d=null===(u=k[P])||void 0===u?void 0:u.attendanceMatrix[I])||void 0===d?void 0:d.refIdForAlt)&&(null===(h=null===(m=k[P])||void 0===m?void 0:m.attendanceMatrix[I])||void 0===h?void 0:h.allottedShiftTime)<(null===(A=null===(C=k[P])||void 0===C?void 0:C.attendanceMatrix[I])||void 0===A?void 0:A.attendedTime)&&(Zt+=(null===(D=null===(S=k[P])||void 0===S?void 0:S.attendanceMatrix[I])||void 0===D?void 0:D.attendedTime)-(null===(U=k[P].attendanceMatrix[I])||void 0===U?void 0:U.allottedShiftTime)),(null===(R=k[P].attendanceMatrix[I])||void 0===R?void 0:R.attndId)>0&&"S"!=(null===(O=k[P].attendanceMatrix[I])||void 0===O?void 0:O.attnFlag)&&"A"!=(null===(J=k[P].attendanceMatrix[I])||void 0===J?void 0:J.attnFlag)&&(null===(F=k[P].attendanceMatrix[I])||void 0===F?void 0:F.allottedShiftTime)>(null===($=null===(nt=k[P])||void 0===nt?void 0:nt.attendanceMatrix[I])||void 0===$?void 0:$.attendedTime)&&(Ut+=(null===(K=null===(z=k[P])||void 0===z?void 0:z.attendanceMatrix[I])||void 0===K?void 0:K.allottedShiftTime)-(null===(st=null===(mt=k[P])||void 0===mt?void 0:mt.attendanceMatrix[I])||void 0===st?void 0:st.attendedTime));e.rows[Y].contractualShiftTime=bt,e.rows[Y].wdc=At,e.rows[Y].allottedShiftTime=Tt,e.rows[Y].AL=Ct,e.rows[Y].UL=qt,e.rows[Y].SL=Q,e.rows[Y].EL=ft,e.rows[Y].STL=B,e.rows[Y].Ab=vt,e.rows[Y].OT=Zt/60,e.rows[Y].lateHrs=Ut/60,e.rows[Y].W=yt}}calculateColumnTotals(e){var o,n,s;this.columnGrandTotal.contractualShiftTime=0,this.columnGrandTotal.attendedTime=0;for(let r=0;r<(null==e?void 0:e.columns.length);r++){let c=0,p=0,u=0;for(let d=0;d<(null==e?void 0:e.rows.length);d++)c+=null===(o=null==e?void 0:e.rows[d].attendanceMatrix[r])||void 0===o?void 0:o.allottedShiftTime,p+=null===(n=null==e?void 0:e.rows[d].attendanceMatrix[r])||void 0===n?void 0:n.attendedTime,u+=null===(s=null==e?void 0:e.rows[d].attendanceMatrix[r])||void 0===s?void 0:s.contractualShiftTime;e.columns[r].allottedShiftTime=c/60,e.columns[r].attendedTime=p/60,e.columns[r].contractualShiftTime=u/60,this.columnGrandTotal.contractualShiftTime+=e.columns[r].contractualShiftTime,this.columnGrandTotal.attendedTime+=e.columns[r].attendedTime}}getEmpRow(e){return this.employeesGroup.findIndex(o=>o.employeeNumber==this.result.rows[e].employeeNumber)}getEmpBackGround(e,o){return(this.getEmpRow(e)+o)%2==0?"bgColorEven":"bgColorOdd"}getCellBackGround(e,o){var n,s,r,c,p,u,d;if(this.activeColumn==o)return"bgColorActiveColumn";if(this.alternativeAttedanceMapping.r1==e&&this.alternativeAttedanceMapping.c==o)return"bgColorPrimaryAttnd";if(this.alternativeAttedanceMapping.r2==e&&this.alternativeAttedanceMapping.c==o)return"bgColorAltAttnd";{let m=this.getEmpRow(e);return(null===(n=this.result.rows[e].attendanceMatrix[o])||void 0===n?void 0:n.isPosted)&&this.highlightPostedAtt?"bgColorPosted":"A"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorAbsent":"OT"==this.result.rows[e].attendanceMatrix[o].attnFlag||this.result.rows[e].attendanceMatrix[o].refIdForAlt>0?"bgColorOT":(null===(s=this.result.rows[e].attendanceMatrix[o])||void 0===s?void 0:s.isTransfered)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorTransfer":(null===(r=this.result.rows[e].attendanceMatrix[o])||void 0===r?void 0:r.isTerminated)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorTerminated":(null===(c=this.result.rows[e].attendanceMatrix[o])||void 0===c?void 0:c.isResigned)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorResign":(null===(p=this.result.rows[e].attendanceMatrix[o])||void 0===p?void 0:p.isOnLeave)&&0==this.result.rows[e].attendanceMatrix[o].altAttId?"bgColorLeave":"-"==(null===(u=this.result.rows[e].attendanceMatrix[o])||void 0===u?void 0:u.attnFlag)&&this.highlightPendingAtt&&!(null===(d=this.result.columns[o])||void 0===d?void 0:d.isHoliday)&&"O"!=this.result.rows[e].shiftCode?"bgColorAttendancePending":"S"==this.result.rows[e].attendanceMatrix[o].attnFlag||"O"==this.result.rows[e].attendanceMatrix[o].attnFlag||this.result.rows[e].attendanceMatrix[o].altAttId>0?"bgColorSwap":""==this.result.rows[e].attendanceMatrix[o].attnFlag||this.result.columns[o].isHoliday&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorNoShift":m%2==0?"bgColorEven":"bgColorOdd"}}openDatePicker(e){e.open()}closeModel(){this.dialogRef.close()}exportexcel(){let e=document.getElementById("excel_table");const o=ut.P6.table_to_sheet(e),n=ut.P6.book_new();ut.P6.book_append_sheet(n,o,"Sheet1"),ut.NC(n,this.reportType+"_"+this.projectCode+"_"+this.siteCode+".xlsx")}FindAlternativeAttedanceMapping(e,o){var n;this.alternativeAttedanceMapping={r1:-1,r2:-1,c:o};let s=null===(n=this.result.rows[e])||void 0===n?void 0:n.attendanceMatrix[o];if(s.attndId>0){if(s.altAttId>0){this.alternativeAttedanceMapping.r1=e;let r=this.result.rows.findIndex(c=>c.attendanceMatrix[o].attndId==s.altAttId);this.alternativeAttedanceMapping.r2=r}else if(s.refIdForAlt>0){let r=this.result.rows.findIndex(c=>c.attendanceMatrix[o].attndId==s.refIdForAlt);this.alternativeAttedanceMapping.r1=r,this.alternativeAttedanceMapping.r2=e}}else this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1}}getToolTip(e,o,n){var s,r,c=new f.uU("en-US");let p=-1==o?"":c.transform(null===(s=this.result.columns[o])||void 0===s?void 0:s.attnDate,"dd/MM/yyyy"),u=this.isArabic?this.result.rows[e].employeeNameAr:this.result.rows[e].employeeName;return-1==o?`${n}  : \nEmployee Number : ${this.result.rows[e].employeeNumber}.\nEmployee Name : ${u}.\n`:`Employee Number : ${this.result.rows[e].employeeNumber}.\nEmployee Name : ${u}.\nShift : ${this.result.rows[e].shiftCode}.\nDate : ${p}.\nAttendance ID: ${null===(r=this.result.rows[e].attendanceMatrix[o])||void 0===r?void 0:r.attndId}.\nAlternate AttID: ${this.result.rows[e].attendanceMatrix[o].altAttId}`}translateToolTip(e){return this.translate.instant(e)}openPrint(){const e=document.getElementById("excel_table"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode2/${this.projectCode}/${this.siteCode}`).subscribe(e=>{this.listOfShiftCodes2=e,this.listOfShiftCodes2.sort((n,s)=>"O"==n.shiftCode||n.inTime<s.inTime?-1:1);const o=this.listOfShiftCodes2.findIndex(n=>"O"==n.shiftCode)>=0;for(let n=0;n<this.listOfShiftCodes2.length;n++)this.listOfShiftCodes2[n].shiftNumberNameEN=o?this.shiftTypeNames[n].nameEn:this.shiftTypeNames[n+1].nameEn,this.listOfShiftCodes2[n].shiftNumberNameAR=o?this.shiftTypeNames[n].nameAr:this.shiftTypeNames[n+1].nameAr,this.listOfShiftCodes2[n].shiftNumber=o?n:n+1})}singClick(e,o){this.FindAlternativeAttedanceMapping(e,o),""!=this.result.rows[e].attendanceMatrix[o].attnFlag&&0==this.result.rows[e].attendanceMatrix[o].attndId&&this.manualAttendance(e,o)}onRightClick(e,o){return this.result.rows[e].attendanceMatrix[o].attndId>0&&0==this.result.rows[e].attendanceMatrix[o].refIdForAlt?this.updateManualAttendance(e,o):""==this.result.rows[e].attendanceMatrix[o].attnFlag&&this.openPvRequestWindow(e,o),!1}manualAttendance(e,o){var n;let s=this.getEmpRow(e),c=new f.uU("en-US").transform(null===(n=this.result.columns[o])||void 0===n?void 0:n.attnDate,"yyyy-MM-dd");this.apiService.post("monthlyRoaster/getSingleRoasterForEmployee",{employeeNumber:this.employeesGroup[s].employeeNumber,projectCode:this.projectCode,siteCode:this.siteCode,date:this.result.columns[o].attnDate}).subscribe(u=>{this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.projectCode}/${this.siteCode}/${this.employeesGroup[s].employeeNumber}/${c}/${this.result.rows[e].shiftCode}`).subscribe(d=>{var m,h,C,A;let S={r:e,c:o,totRows:this.employeesGroup.length},U={id:d.id,projectCode:this.projectCode,siteCode:this.siteCode,attnDate:c,shiftCode:this.result.rows[e].shiftCode,employeeNumber:this.result.rows[e].employeeNumber,employeeID:null!==(m=null==d?void 0:d.employeeID)&&void 0!==m?m:0,isDefShiftOff:"O"==this.result.rows[e].shiftCode,isActive:!0,inTime:null===(h=this.listOfShiftCodes2.find(R=>R.shiftCode==this.result.rows[e].shiftCode))||void 0===h?void 0:h.inTime,outTime:null===(C=this.listOfShiftCodes2.find(R=>R.shiftCode==this.result.rows[e].shiftCode))||void 0===C?void 0:C.outTime,isDefaultEmployee:!(null===(A=this.listOfShiftCodes2.find(R=>R.shiftCode==this.result.rows[e].shiftCode))||void 0===A?void 0:A.isOff),isPrimarySite:!0,isPosted:null==d?void 0:d.isPosted,altEmployeeNumber:this.result.rows[e].employeeNumber,altShiftCode:this.result.rows[e].shiftCode,attendance:"P",refIdForAlt:0,leavesData:null==d?void 0:d.leavesData,transORresignData:null==d?void 0:d.transORresignData,isOnLeave:null==d?void 0:d.isOnLeave,isWithDrawn:null==d?void 0:d.isWithDrawn,isResigned:null==d?void 0:d.isResigned,isTransfered:null==d?void 0:d.isTransfered,isTerminated:null==d?void 0:d.isTerminated,daywiseConsolidateData:this.getDayWiseConsolidateData(e,o),roasterData:u,r:e,c:o,shiftCodesSelectionList:this.listOfShiftCodes2};this.openManualAttendanceDialogWindow(S,U,g.O.create,"Manual_Attendance","Save",ke)})})}openManualAttendanceDialogWindow(e,o,n,s,r,c){if(!this.isLoading){this.isLoading=!0;let p=this.oprService.openAutoWidthDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.inputData=o,p.componentInstance.inputCellData=e,p.afterClosed().subscribe(u=>{this.isLoading=!1,(null==u?void 0:u.isUpdatedShift)?(o.altEmployeeNumber="",this.removeAndUpdateEmployeeRows(o)):1==(null==u?void 0:u.res)&&this.removeAndUpdateEmployeeRows(null==u?void 0:u.outputData)},u=>{this.isLoading=!1})}}removeAndUpdateEmployeeRows(e){this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1};let o=null==e?void 0:e.employeeNumber,n=null==e?void 0:e.altEmployeeNumber;""!=o&&(this.employeesGroup=this.employeesGroup.filter(s=>s.employeeNumber!=o),this.result.rows=this.result.rows.filter(s=>s.employeeNumber!=o),this.insertNewEmployee(o)),""!=n&&o!=n&&(this.employeesGroup=this.employeesGroup.filter(s=>s.employeeNumber!=n),this.result.rows=this.result.rows.filter(s=>s.employeeNumber!=n),this.insertNewEmployee(n))}insertNewEmployee(e){this.apiService.post("Reports/getAttendancePayrollReport",{projectCode:this.projectCode,siteCode:this.siteCode,payrollStartDate:this.fromDate,pageNumber:0,pageSize:1,employeeNumber:e}).subscribe(n=>{this.tempAltEmployeeNumber="",n.rows.length>0&&(this.result.rows=this.result.rows.concat(n.rows),this.generateReportAndCalculations())})}openUpdateAttendanceDialogWindow(e,o,n,s,r,c){if(!this.isLoading){this.isLoading=!0;let p=this.oprService.openAutoWidthDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.inputData=o,p.componentInstance.inputCellData=e,p.afterClosed().subscribe(u=>{this.isLoading=!1,1==(null==u?void 0:u.res)&&((""!=this.tempAltEmployeeNumber&&""==u.outputData.altEmployeeNumber||""!=this.tempAltEmployeeNumber&&""==u.outputData.employeeNumber)&&(u.outputData.altEmployeeNumber=this.tempAltEmployeeNumber,this.tempAltEmployeeNumber=""),this.removeAndUpdateEmployeeRows(u.outputData))},u=>{this.isLoading=!1})}}minsToStrHrsMins(e){return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`}hrsToStrHrsMins(e){let o=Math.floor(e);return`${o}:${Math.ceil(60*(e-o)).toString().padStart(2,"0")}`}updateManualAttendance(e,o){var n,s,r=new f.uU("en-US");let c=this.getEmpRow(e),p=null===(n=this.result.columns[o])||void 0===n?void 0:n.attnDate,u=r.transform(null===(s=this.result.columns[o])||void 0===s?void 0:s.attnDate,"yyyy-MM-dd");if(new Date<=p)this.notifyService.showError(this.translate.instant("Can_not_Enter_Attendance_For_Future_Date"));else{let m={r:e,c:o,totRows:this.employeesGroup.length};this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.projectCode}/${this.siteCode}/${this.employeesGroup[c].employeeNumber}/${u}/${this.result.rows[e].shiftCode}`).subscribe(h=>{var C;this.tempAltEmployeeNumber=null!==(C=h.altEmployeeNumber)&&void 0!==C?C:"",h.daywiseConsolidateData=this.getDayWiseConsolidateData(e,o),this.openUpdateAttendanceDialogWindow(m,h,g.O.create,"Update_Manual_Attendance","Save",Re)})}}getDayWiseConsolidateData(e,o){var n,s,r,c,p,u,d,m,h,C,A;return{tch:null===(s=null===(n=this.result)||void 0===n?void 0:n.columns[o])||void 0===s?void 0:s.contractualShiftTime,tch_min:60*(null===(c=null===(r=this.result)||void 0===r?void 0:r.columns[o])||void 0===c?void 0:c.contractualShiftTime)%60,tcs:60*(null===(u=null===(p=this.result)||void 0===p?void 0:p.columns[o])||void 0===u?void 0:u.contractualShiftTime)/(null===(d=this.result)||void 0===d?void 0:d.siteWorkingTime),ot_count:0,mins:60*(null===(h=null===(m=this.result)||void 0===m?void 0:m.columns[o])||void 0===h?void 0:h.attendedTime)%60,hours:Math.floor(null===(A=null===(C=this.result)||void 0===C?void 0:C.columns[o])||void 0===A?void 0:A.attendedTime)}}isShiftFilterApplied(){return"shiftCode"==this.filterType&&""!=this.searchKey}applyFilter(){"employee"==this.filterType?(this.filter.employeeNumber=this.searchKey,this.filter.shiftCode=""):"shiftCode"==this.filterType&&(this.filter.shiftCode=this.searchKey,this.filter.employeeNumber="")}canShowRow(e){return""==this.searchKey||"shiftCode"==this.filterType&&(null==e?void 0:e.shiftCode)==this.searchKey||!("employee"!=this.filterType||!(null==e?void 0:e.employeeNumber.includes(this.searchKey))&&!(this.isArabic?null==e?void 0:e.employeeNameAr.includes(this.searchKey):null==e?void 0:e.employeeName.toLowerCase().includes(this.searchKey.toLowerCase())))}startTimer(){this.dataProcessedTime=new Date,this.interval=setInterval(()=>{let e=new Date,o=60*this.dataProcessedTime.getHours()*60+60*this.dataProcessedTime.getMinutes()+this.dataProcessedTime.getSeconds(),n=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds();this.time=n-o,this.time<this.waitingTime?this.isDataProcessed=!0:(this.isDataProcessed=!1,this.pauseTimer())},1e3)}pauseTimer(){clearInterval(this.interval)}reloadData(){this.getReports()}clearAttendance(){if(!this.isLoading){let e=this.oprService.openAutoWidthDialog(this.dialog,Fe);e.componentInstance.dbops=g.O.create,e.componentInstance.modalTitle="Clear_Attendance",e.componentInstance.modalBtnTitle="Save",e.componentInstance.projectCode=this.projectCode,e.componentInstance.siteCode=this.siteCode,e.componentInstance.maxDate=this.toDate,e.componentInstance.minDate=this.fromDate,e.afterClosed().subscribe(o=>{this.isLoading=!1,(1==o.res||o)&&this.getReports()})}}postAttendance(){if(!this.isLoading){let e=this.oprService.openAutoWidthDialog(this.dialog,Pe);e.componentInstance.dbops=g.O.create,e.componentInstance.modalTitle="Post_Attendance",e.componentInstance.modalBtnTitle="Save",e.componentInstance.maxPostDate=this.toDate,e.componentInstance.minPostDate=this.fromDate,e.componentInstance.projectCode=this.projectCode,e.componentInstance.siteCode=this.siteCode,e.afterClosed().subscribe(o=>{this.isLoading=!1,1==o&&this.getReports()})}}autoAttendance(e){const o=this.oprService.openApprovalDialog(this.dialog,ao);o.componentInstance.dbops=g.O.create,o.componentInstance.modalTitle="Auto_Attendance",o.componentInstance.confirmType="general",o.componentInstance.titleQuestion=this.translate.instant("Are_You_Sure?"),o.componentInstance.subTitleQuestion=this.translate.instant(-1==e?"Do_you_want_to_enter_default_attendance_for_whole_month?":"Do_you_want_to_enter_default_attendance_for_selected_day?"),o.afterClosed().subscribe(n=>{1==n&&(this.isLoading=!0,this.enterAutoAttendance(e))})}enterAutoAttendance(e){var o,n;let s=[],r=e,c=e;-1==e&&(r=0,c=this.result.columns.length-1);for(let p=r;p<=c;p++){let u=this.result.rows.findIndex(d=>d.attendanceMatrix[p].attndId>=0);if(!(this.result.columns[p].isHoliday&&r!=c||u))for(let d=0;d<this.result.rows.length;d++)!this.result.rows[d].attendanceMatrix[p].isResigned&&!this.result.rows[d].attendanceMatrix[p].isTransfered&&!this.result.rows[d].attendanceMatrix[p].isTerminated&&"-"==this.result.rows[d].attendanceMatrix[p].attnFlag&&"O"!=this.result.rows[d].shiftCode&&s.push({id:0,projectCode:this.projectCode,siteCode:this.siteCode,attnDate:this.result.columns[p].attnDate,shiftCode:this.result.rows[d].shiftCode,employeeNumber:this.result.rows[d].employeeNumber,isDefShiftOff:!1,isActive:!0,inTime:null===(o=this.listOfShiftCodes2.find(m=>m.shiftCode==this.result.rows[d].shiftCode))||void 0===o?void 0:o.inTime,outTime:null===(n=this.listOfShiftCodes2.find(m=>m.shiftCode==this.result.rows[d].shiftCode))||void 0===n?void 0:n.outTime,isDefaultEmployee:!0,isPrimarySite:!0,isPosted:!1,altEmployeeNumber:"",altShiftCode:"",attendance:"P",refIdForAlt:0,shiftNumber:1})}if(this.interval=setInterval(()=>{},1e3),0==s.length)return this.isLoading=!1,void this.notifyService.showWarning(this.translate.instant("No_Updations_Found"));this.apiService.post("EmployeesAttendance/enterAutoAttendance",s).subscribe(p=>{this.isLoading=!1,this.getReports()},p=>{var u;this.isLoading=!1,this.notifyService.showError(this.translate.instant(null===(u=null==p?void 0:p.error)||void 0===u?void 0:u.message))})}getAttendanceFlag(e,o){var n,s,r,c,p,u,d;let m=this.result.rows[e].attendanceMatrix[o].attnFlag;return(null===(n=this.result.rows[e].attendanceMatrix[o])||void 0===n?void 0:n.isTransfered)&&""!=this.result.rows[e].attendanceMatrix[o].attnFlag?m="TR":(null===(s=this.result.rows[e].attendanceMatrix[o])||void 0===s?void 0:s.isResigned)&&""!=this.result.rows[e].attendanceMatrix[o].attnFlag?m="R":(null===(r=this.result.rows[e].attendanceMatrix[o])||void 0===r?void 0:r.isTerminated)&&""!=this.result.rows[e].attendanceMatrix[o].attnFlag?m="X":"S"!=this.result.rows[e].attendanceMatrix[o].attnFlag||(null===(c=this.result.rows[e].attendanceMatrix[o])||void 0===c?void 0:c.isOnLeave)||"O"==this.result.rows[e].shiftCode?"O"==this.result.rows[e].shiftCode&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?m="O":(null===(p=this.result.columns[o])||void 0===p?void 0:p.isHoliday)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag&&(m="H"):m="A","TimeSheet"==this.reportType&&(null===(u=this.result.rows[e].attendanceMatrix[o])||void 0===u?void 0:u.attendedTime)>0&&(m=this.minsToStrHrsMins(null===(d=this.result.rows[e].attendanceMatrix[o])||void 0===d?void 0:d.attendedTime)),m}getDayBackground(e){var o;if(null===(o=this.result.columns[e])||void 0===o?void 0:o.isHoliday)return"bgColorDateHeaderHoliday"}getDayTooltip(e){return`${(null==e?void 0:e.isHoliday)?this.isArabic?e.holidayInf.calanderName_AR:e.holidayInf.calanderName_EN:""}`}getShiftBgColor(e){let o=this.listOfShiftCodes2.find(s=>s.shiftCode==e);return`bgColorShift_${null==o?0:o.shiftNumber}`}getShiftNumberName(e){let o=this.listOfShiftCodes2.find(n=>n.shiftCode==e);return null==o?"-":this.isArabic?o.shiftNumberNameAR:o.shiftNumberNameEN}getWeekDay(e){switch(new Date(e).getDay()){case 0:return"Su";case 1:return"M";case 2:return"T";case 3:return"W";case 4:return"Th";case 5:return"F";case 6:return"S";default:return""}}openPvRequestWindow(e,o){let n=this.datePipe.transform(this.result.columns[o].attnDate,"yyyy-MM-dd");this.apiService.post("PvAllRequests/getRecentApprovedPvRequestData",{projectCode:this.projectCode,siteCode:this.siteCode,employeeNumber:this.result.rows[e].employeeNumber,date:n}).subscribe(r=>0==(null==r?void 0:r.reqId)||null==r?(this.notifyService.showInfo("Employee Not Available"),!0):(1==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.O.create,"Request_For_Add_Resource","View",Jt):2==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.O.create,"Request_For_Remove_Resource","View",Rt):3==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.O.create,"Request_For_Transfer_Employee","View",Pt):4==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.O.create,"Request_For_Transfer_With_Replacement","View",Ft):5==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.O.create,"Request_For_Swap_Employees","View",te):6==(null==r?void 0:r.requestType)&&this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.O.create,"Request_For_Replace_Resource","View",Mt),!1))}openPvRequestDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{})}RefreshOffs(){var e,o,n,s,r;let p="01"==(null===(e=this.datePipe.transform(this.fromDate,"yyyy-MM-dd"))||void 0===e?void 0:e.substr(8,2)),u={siteCode:this.siteCode,month:null===(o=this.datePipe.transform(this.fromDate,"yyyy-MM-dd"))||void 0===o?void 0:o.substr(5,2),year:null===(n=this.datePipe.transform(this.fromDate,"yyyy-MM-dd"))||void 0===n?void 0:n.substr(0,4)};if(this.apiService.post("OpUtils/RefreshOffs",u),!p){let d={siteCode:this.siteCode,month:null===(s=this.datePipe.transform(this.toDate,"yyyy-MM-dd"))||void 0===s?void 0:s.substr(5,2),year:null===(r=this.datePipe.transform(this.toDate,"yyyy-MM-dd"))||void 0===r?void 0:r.substr(0,4)};this.apiService.post("OpUtils/RefreshOffs",d)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(T.uw),t.Y36(W.f),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-attendance-payroll-report"]],features:[t.qOj],decls:72,vars:75,consts:[["type","button",1,"btn","close",3,"click"],["id","header"],[1,"row"],[1,"col-md-9","col-lg-9"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0",2,"background","none"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-3","col-lg-3"],[1,"btn-list"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary",3,"click"],[1,"far","fa-calendar-alt"],["hidden","hidden",1,"btn-list",2,"background-color","royalblue","color","white"],["hidden","hidden",1,"form-control","datapickerinput",3,"ngModel","ngModelOptions","matDatepicker","placeholder","ngModelChange","click","dateChange"],["matSuffix","",3,"for","ngModel","dateChange","ngModelChange"],[3,"dateChange"],["picker",""],["style","text-align:center",4,"ngIf"],[2,"background-color","#f9fbfd",3,"isLoading"],["id","excel_table"],["id","ReportTable",1,"card"],[1,"table-responsive"],[1,"none-border",2,"width","100%"],[2,"background-color","white","text-align","center","border","none","padding","0px 0px 0px 0px"],["colspan","32",2,"background-color","white","text-align","center","border","none","padding","0px 0px 0px 0px"],[2,"font-size","large"],[2,"font-size","medium"],[2,"font-size","x-small"],[2,"font-size","small","font-style","italic"],["class","sambaAttendanceTable  table-bordered no-wrap",4,"ngIf"],["id","consolidateTables","class","row","style","padding:10px 10px 10px 10px; text-align:center",4,"ngIf"],[2,"text-align","center"],[1,"row",2,"text-align","center"],[1,"card","col-md-3","col-lg-3",2,"padding-right","5px"],[1,"card-body"],[1,"card-title"],[1,"radio"],["for","radio1"],["type","radio","name","reportType","value","Attendance",3,"ngModel","ngModelChange"],["type","radio","name","reportType",3,"value","ngModel","ngModelChange"],[1,"card","col-md-4","col-lg-4",2,"padding-right","5px"],["type","text","class","form-control btn","placeholder","Enter Key","style","width:48%;border:solid;border-color:lightgray;border-width:1px;text-align:start",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","form-control btn","style","width: 48%; border: solid; border-color: lightgray; border-width: 1px;",3,"ngModel","ngModelOptions","ngModelChange","change",4,"ngIf"],["type","radio","name","filterType",3,"value","ngModel","ngModelChange","click"],[1,"card","col-md-5","col-lg-5",2,"vertical-align","central"],[1,"card-body","btn-list",2,"text-align","center","padding","15px 15px 0px 0px"],[1,"btn","btn","waves-effect","waves-light","btn-outline-primary",2,"text-align","center","vertical-align","central",3,"matTooltip","click"],[1,"fas","fa-thumbs-up",2,"font-size","x-large"],[1,"fas","fa-fast-forward",2,"font-size","x-large"],[1,"fas","fa-eraser",2,"font-size","x-large"],[1,"fas","fa-history",2,"font-size","x-large"],[1,"fas","fa-arrow-alt-circle-down",2,"font-size","x-large"],[1,"col-md-12",2,"vertical-align","central"],[1,"btn-list",2,"align-content","center","vertical-align","central","padding","15px 20px 0px 0px"],["type","checkbox","name","highlightData",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter Key",1,"form-control","btn",2,"width","48%","border","solid","border-color","lightgray","border-width","1px","text-align","start",3,"ngModel","ngModelChange","change"],[1,"form-control","btn",2,"width","48%","border","solid","border-color","lightgray","border-width","1px",3,"ngModel","ngModelOptions","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"sambaAttendanceTable","table-bordered","no-wrap"],["colspan","4"],[4,"ngIf"],["rowspan","2",2,"font-size","0.775rem !important","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","text-align","center"],["rowspan","2","colspan","2",2,"font-size","0.775rem !important","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","text-align","center"],["style","font-size:0.775rem !important; font-family: 'Poppins', sans-serif;font-weight:600;padding: 2px;",3,"id","matTooltip",4,"ngFor","ngForOf"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300","text-align","center"],[2,"font-size","0.775rem !important","font-family","'Poppins', sans-serif","font-weight","600","padding","2px",3,"id","matTooltip"],["style","color:white;font-size:x-small",4,"ngIf"],["class","clickaction clickicons","style","color:yellow;font-size:x-small",3,"matTooltip","click",4,"ngIf"],[2,"color","white","font-size","x-small"],[1,"clickaction","clickicons",2,"color","yellow","font-size","x-small",3,"matTooltip","click"],[1,"fas","fa-sync-alt",2,"font-size","small"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","lightgreen"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","red"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","#c0d5fa"],[2,"text-align","center","font-size","x-large"],[4,"ngFor","ngForOf"],["style","padding: 3px; text-align: center;",3,"id",4,"ngIf"],["style","padding: 3px; text-align: center",3,"id",4,"ngIf"],["style","padding: 3px; text-align: left",3,"id",4,"ngIf"],[2,"padding","3px","text-align","center",3,"id"],["style","text-align: center;",3,"id","matTooltip","click","contextmenu",4,"ngFor","ngForOf"],[2,"padding","3px","text-align","left",3,"id"],["class","fas fa-user","style","color:blue;background-color:yellow",4,"ngIf"],[2,"font-style","italic"],[1,"fas","fa-user",2,"color","blue","background-color","yellow"],["class","fas fa-user","style","color: blue; background-color: yellow",4,"ngIf"],[2,"text-align","center",3,"id","matTooltip","click","contextmenu"],["style","text-align: center",3,"id","matTooltip",4,"ngIf"],["style","padding: 3px; text-align: center",3,"id","matTooltip",4,"ngIf"],[2,"text-align","center",3,"id","matTooltip"],[2,"padding","3px","text-align","center",3,"id","matTooltip"],["colspan","4",2,"text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],[2,"background-color","#e8eef3","color","black"],["colspan","4",2,"background-color","yellow","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","600","padding","2px"],["style","background-color:yellow",4,"ngFor","ngForOf"],[2,"background-color","yellow"],[2,"background-color","white"],["style","background-color:cornsilk",4,"ngFor","ngForOf"],[2,"background-color","cornsilk"],["colspan","4",2,"background-color","yellow","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: yellow",4,"ngFor","ngForOf"],["colspan","4",2,"background-color","sandybrown","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: sandybrown",4,"ngFor","ngForOf"],[2,"background-color","sandybrown"],["id","consolidateTables",1,"row",2,"padding","10px 10px 10px 10px","text-align","center"],["id","consolidateRoasterPlanTable",1,"card"],[1,"consolidateDataTable"],["colspan","2"],["colspan","3"],["id","consolidateTimeSheetTable",1,"card"],["id","consolidateShiftsPlanTable",1,"card"],["colspan","2",3,"id"],["colspan","3",3,"id"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(1,"x"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"nav",5),t.TgZ(7,"ol",6),t.TgZ(8,"li",7),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"li",7),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"li",7),t._uU(15),t.qZA(),t.TgZ(16,"li",7),t._uU(17),t.qZA(),t.TgZ(18,"li",8),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"div",10),t.TgZ(23,"button",11),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(37);return o.openDatePicker(r)}),t._uU(24),t.ALo(25,"translate"),t.ALo(26,"translate"),t._UZ(27,"i",12),t.qZA(),t.TgZ(28,"div",13),t._uU(29),t.ALo(30,"translate"),t.ALo(31,"translate"),t.TgZ(32,"input",14),t.NdJ("ngModelChange",function(r){return o.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(37);return o.openDatePicker(r)})("dateChange",function(){return o.getReport()}),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"mat-datepicker-toggle",15),t.NdJ("dateChange",function(){return o.getReport()})("ngModelChange",function(r){return o.fromDate=r}),t.qZA(),t.TgZ(36,"mat-datepicker",16,17),t.NdJ("dateChange",function(){return o.getReport()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(38,ux,51,28,"ng-container",18),t._UZ(39,"auto-loader",19),t.TgZ(40,"div",20),t.TgZ(41,"div",21),t.TgZ(42,"div",22),t.TgZ(43,"table",23),t.TgZ(44,"tr",24),t.TgZ(45,"td",25),t.TgZ(46,"span",26),t._uU(47),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"tr",24),t.TgZ(49,"td",25),t.TgZ(50,"span",27),t._uU(51),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"tr",24),t.TgZ(53,"td",25),t.TgZ(54,"span",28),t._uU(55),t.ALo(56,"translate"),t.ALo(57,"translate"),t.ALo(58,"date"),t.ALo(59,"translate"),t.ALo(60,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"tr",24),t.TgZ(62,"td",25),t.TgZ(63,"span",29),t._uU(64),t.ALo(65,"translate"),t.ALo(66,"translate"),t.ALo(67,"date"),t.ALo(68,"translate"),t.ALo(69,"date"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(70,fq,27,21,"table",30),t.qZA(),t.qZA(),t.YNc(71,Aq,113,103,"div",31),t.qZA()}if(2&e){const n=t.MAs(37);t.xp6(9),t.hij(" ",t.lcZ(10,32,"Operations")," "),t.xp6(3),t.hij(" ",t.lcZ(13,34,"Projects")," "),t.xp6(3),t.hij(" ",o.siteCode," "),t.xp6(2),t.hij(" ",o.projectCode," "),t.xp6(2),t.hij(" ",t.lcZ(20,36,"Attendance")," "),t.xp6(5),t.AsE(" ",t.lcZ(25,38,"Select")," ",t.lcZ(26,40,"Payroll_Date")," "),t.xp6(5),t.AsE(" ",t.lcZ(30,42,"Select")," ",t.lcZ(31,44,"Payroll_Date")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(33,46,"Please_Enter")," ",t.lcZ(34,48,"Payroll_Start_Date"),""),t.Q6J("ngModel",o.fromDate)("ngModelOptions",t.DdM(74,so))("matDatepicker",n),t.xp6(3),t.Q6J("for",n)("ngModel",o.fromDate),t.xp6(3),t.Q6J("ngIf",(null==o.result?null:o.result.isValidReq)&&0!=(null==o.result||null==o.result.rows?null:o.result.rows.length)&&!o.isLoading),t.xp6(1),t.Q6J("isLoading",o.isLoading),t.xp6(8),t.hij(" ",o.isArabic?null==o.projectData?null:o.projectData.projectNameArb:null==o.projectData?null:o.projectData.projectNameEng," "),t.xp6(4),t.hij(" ",o.isArabic?null==o.siteData?null:o.siteData.projectNameArb:null==o.siteData?null:o.siteData.projectNameEng," "),t.xp6(4),t.xDo(" ",t.lcZ(56,50,"Project_Duration")," \xa0:\xa0 ",t.lcZ(57,52,"From")," ",t.xi3(58,54,null==o.projectData?null:o.projectData.startDate,"dd/MM/yyyy"),"\xa0",t.lcZ(59,57,"To"),"\xa0",t.xi3(60,59,null==o.projectData?null:o.projectData.endDate,"dd/MM/yyyy")," "),t.xp6(9),t.xDo(" ",t.lcZ(65,62,"Attendance_Monthly_Report"),"\xa0 ",t.lcZ(66,64,"From")," ",t.xi3(67,66,o.fromDate,"dd/MM/yyyy"),"\xa0 ",t.lcZ(68,69,"To"),"\xa0 ",t.xi3(69,71,o.toDate,"dd/MM/yyyy")," "),t.xp6(6),t.Q6J("ngIf",0!=(null==o.result||null==o.result.columns?null:o.result.columns.length)),t.xp6(1),t.Q6J("ngIf",0!=(null==o.result?null:o.result.rows.length)&&!o.isLoading)}},directives:[l.Fj,M.hl,l.JJ,l.On,M.nW,gt.R9,M.Mq,f.O5,ht.z,l._,rt.gM,l.Wl,l.EJ,l.YN,l.Kr,f.sg],pipes:[Z.X$,f.uU,f.JJ],styles:["#attendTable[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    border-block-color: lightgray;\n    border-block: lightgray;\n    border-block-width: 1px;\n    border-inline-color: aqua\n  }\n\n\n  table.consolidateDataTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    color: black;\n    font-size: small;\n    padding: 5px 5px 5px 5px\n  }\n\n\n  table.sambaAttendanceTable[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    width: 100%\n  }\n\n\n    table.sambaAttendanceTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n      background-color: #fafafa;\n      border: solid;\n      border-color: lightgray;\n      border-width: 1px;\n      padding: 5px 15px 5px 15px\n    }\n\n    table.sambaAttendanceTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\n      background-color: #548087;\n      border: solid;\n      border-color: lightgray;\n      border-width: 1px;\n      color: white;\n      text-align: center;\n    }\n\n\n  #bgColorEven[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: white;\n  }\n\n  #bgColorOdd[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: white;\n    \n  }\n\n  #bgColorAltAttnd[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: maroon;\n    color: white;\n  }\n\n  #bgColorPrimaryAttnd[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: blue;\n    color: white;\n  }\n\n  #bgColorAbsent[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white\n  }\n\n  #bgColorSwap[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: yellow;\n    color: red\n  }\n\n  #bgColorNoShift[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: #f3f3f3;\n    color: none\n  }\n\n  #bgColorLeave[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorTransfer[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorResign[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorTerminated[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorAttendancePending[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: yellowgreen; \n  }\n\n  #bgColorOT[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: yellow;\n    color: green;\n  }\n\n  #bgColorPosted[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: orange;\n    color: white;\n  }\n\n  #bgColorActiveColumn[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: aqua;\n    color: blue;\n  }\n\n  #bgColorDateHeaderHoliday[_ngcontent-%COMP%] {\n    background-color: lightgreen;\n    color: yellow;\n  }\n\n  #bgColorShift_0[_ngcontent-%COMP%] {\n    background-color: burlywood;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }\n\n  #bgColorShift_1[_ngcontent-%COMP%] {\n    background-color: lightcoral;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }\n\n  #bgColorShift_2[_ngcontent-%COMP%] {\n    background-color: mediumpurple;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }\n\n  #bgColorShift_3[_ngcontent-%COMP%] {\n    background-color: cadetblue;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }"]}),i})();function vq(i,a){if(1&i&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.Q6J("value",e.value),t.xp6(1),t.AsE(" ",o.isArabic?e.textTwo:e.text,"-",e.value," ")}}function xq(i,a){if(1&i&&(t.TgZ(0,"span",37),t._UZ(1,"validation-message",27),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.customerCode)}}function qq(i,a){1&i&&(t.TgZ(0,"span",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function bq(i,a){if(1&i&&(t.TgZ(0,"option",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function yq(i,a){if(1&i&&(t.TgZ(0,"span",37),t._UZ(1,"validation-message",27),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.projectCode)}}function Sq(i,a){1&i&&(t.TgZ(0,"span",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function wq(i,a){if(1&i&&(t.TgZ(0,"option",38),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function Uq(i,a){if(1&i&&(t.TgZ(0,"span",37),t._UZ(1,"validation-message",27),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function Lq(i,a){1&i&&(t.TgZ(0,"span",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Dq(i,a){if(1&i&&(t.TgZ(0,"span",37),t._UZ(1,"validation-message",27),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.contactNumber)}}function Nq(i,a){1&i&&(t.TgZ(0,"span",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function Eq(i,a){if(1&i&&(t.TgZ(0,"div",12),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"ng-select",39),t._UZ(6,"validation-message",27),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,3,"Visited_By")),t.xp6(2),t.Q6J("items",e.userSelectionList),t.xp6(1),t.Q6J("control",e.form.controls.visitedBy)}}function Oq(i,a){if(1&i&&(t.TgZ(0,"div",12),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",40),t.ALo(6,"translate"),t._UZ(7,"validation-message",27),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,3,"Visited_Time")),t.xp6(2),t.s9C("placeholder",t.lcZ(6,5,"Visited_Time")),t.xp6(2),t.Q6J("control",e.form.controls.visitedDateTime)}}function jq(i,a){if(1&i&&(t.TgZ(0,"div",8),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"textarea",41),t.ALo(6,"translate"),t.ALo(7,"translate"),t._UZ(8,"validation-message",27),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"Supervisor_Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,6,"Please_Enter")," ",t.lcZ(7,8,"Supervisor_Remarks"),""),t.xp6(3),t.Q6J("control",e.form.controls.supervisorRemarks)}}function kq(i,a){if(1&i&&(t.TgZ(0,"div",8),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"textarea",42),t.ALo(6,"translate"),t.ALo(7,"translate"),t._uU(8,"\n"),t.qZA(),t._UZ(9,"validation-message",27),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"Customer_Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,6,"Please_Enter")," ",t.lcZ(7,8,"Customer_Remarks"),""),t.xp6(4),t.Q6J("control",e.form.controls.customerRemarks)}}function Mq(i,a){if(1&i&&(t.TgZ(0,"div",8),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"textarea",43),t.ALo(6,"translate"),t.ALo(7,"translate"),t._uU(8,"                      "),t.qZA(),t._UZ(9,"validation-message",27),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"Action_Terms")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,6,"Please_Enter")," ",t.lcZ(7,8,"Action_Terms"),""),t.xp6(4),t.Q6J("control",e.form.controls.actionTerms)}}function Rq(i,a){if(1&i&&(t.TgZ(0,"div",8),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"textarea",44),t.ALo(6,"translate"),t.ALo(7,"translate"),t._UZ(8,"validation-message",27),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"Customer_Notes")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,6,"Please_Enter")," ",t.lcZ(7,8,"Customer_Notes"),""),t.xp6(3),t.Q6J("control",e.form.controls.customerNotes)}}function Pq(i,a){1&i&&(t._UZ(0,"input",45),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}function Fq(i,a){1&i&&(t._UZ(0,"input",45),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Confirm"))}function Iq(i,a){1&i&&(t._UZ(0,"input",45),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Submit"))}function Yq(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"form",2,3),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().submit()}),t.TgZ(2,"h3"),t._uU(3),t.TgZ(4,"button",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(5," \xd7"),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"div",8),t.TgZ(12,"div",10),t.TgZ(13,"div",11),t.TgZ(14,"div",12),t.TgZ(15,"label",13),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",14),t.TgZ(19,"div",15),t._UZ(20,"auto-loader",16),t._UZ(21,"input",17),t.ALo(22,"translate"),t.ALo(23,"translate"),t.TgZ(24,"mat-autocomplete",18,19),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().onSelectionCustomerCode(n,1)}),t.YNc(26,vq,2,3,"mat-option",20),t.ALo(27,"async"),t.qZA(),t.qZA(),t.YNc(28,xq,2,1,"span",21),t.YNc(29,qq,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(30,"div",12),t.TgZ(31,"label",13),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"div",14),t.TgZ(35,"div",15),t.TgZ(36,"select",22),t.NdJ("change",function(){return t.CHM(e),t.oxw().onSelectionProjectCode()}),t.TgZ(37,"option",23),t._uU(38),t.ALo(39,"translate"),t.ALo(40,"translate"),t.qZA(),t.YNc(41,bq,2,2,"option",24),t.qZA(),t.qZA(),t.YNc(42,yq,2,1,"span",21),t.YNc(43,Sq,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(44,"div",12),t.TgZ(45,"label",13),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"div",14),t.TgZ(49,"div",15),t.TgZ(50,"select",25),t.NdJ("change",function(){return t.CHM(e),t.oxw().onSelectionSiteCode()}),t.TgZ(51,"option",23),t._uU(52),t.ALo(53,"translate"),t.ALo(54,"translate"),t.qZA(),t.YNc(55,wq,2,2,"option",24),t.qZA(),t.qZA(),t.YNc(56,Uq,2,1,"span",21),t.YNc(57,Lq,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(58,"div",12),t.TgZ(59,"div",14),t.TgZ(60,"label"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"ng-select",26),t._UZ(64,"validation-message",27),t.qZA(),t.qZA(),t.TgZ(65,"div",12),t.TgZ(66,"div",14),t.TgZ(67,"label"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t._UZ(70,"input",28),t.ALo(71,"translate"),t.ALo(72,"translate"),t.YNc(73,Dq,2,1,"span",21),t.YNc(74,Nq,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(75,"div",12),t.TgZ(76,"div",14),t.TgZ(77,"label"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t._UZ(80,"input",29),t.ALo(81,"translate"),t._UZ(82,"validation-message",27),t.qZA(),t.qZA(),t.TgZ(83,"div",12),t.TgZ(84,"div",14),t.TgZ(85,"label"),t._uU(86),t.ALo(87,"translate"),t.qZA(),t._UZ(88,"ng-select",30),t._UZ(89,"validation-message",27),t.qZA(),t.qZA(),t.YNc(90,Eq,7,5,"div",31),t.YNc(91,Oq,8,7,"div",31),t.YNc(92,jq,9,10,"div",32),t.YNc(93,kq,10,10,"div",32),t.YNc(94,Mq,10,10,"div",32),t.YNc(95,Rq,9,10,"div",32),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(96,"div",8),t.TgZ(97,"div",9),t.TgZ(98,"div",33),t.TgZ(99,"input",34),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t.ALo(100,"translate"),t.qZA(),t._uU(101," \xa0 "),t.YNc(102,Pq,2,3,"input",35),t.YNc(103,Fq,2,3,"input",35),t.YNc(104,Iq,2,3,"input",35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(1),o=t.MAs(25),n=t.oxw();let s,r,c,p,u,d,m,h;t.Q6J("formGroup",n.form),t.xp6(3),t.hij(" ",n.modalTitle," "),t.xp6(13),t.Oqu(t.lcZ(17,47,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",n.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(22,49,"Please_Enter")," ",t.lcZ(23,51,"Customer_Code"),""),t.Q6J("formControl",n.custCodeControl)("matAutocomplete",o),t.xp6(5),t.Q6J("ngForOf",t.lcZ(27,53,n.filteredCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(s=n.form.get("customerCode"))&&s.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(r=n.form.get("customerCode"))?null:r.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(3),t.Oqu(t.lcZ(33,55,"Project")),t.xp6(6),t.AsE("",t.lcZ(39,57,"Select")," ",t.lcZ(40,59,"Project")," "),t.xp6(3),t.Q6J("ngForOf",n.projectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(c=n.form.get("projectCode"))&&c.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(p=n.form.get("projectCode"))?null:p.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(3),t.Oqu(t.lcZ(47,61,"Site")),t.xp6(6),t.AsE("",t.lcZ(53,63,"Select")," ",t.lcZ(54,65,"Site")," "),t.xp6(3),t.Q6J("ngForOf",n.siteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(u=n.form.get("siteCode"))&&u.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(d=n.form.get("siteCode"))?null:d.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(4),t.Oqu(t.lcZ(62,67,"Reason_Code")),t.xp6(2),t.Q6J("items",n.reasonCodeSelectionList),t.xp6(1),t.Q6J("control",n.form.controls.reasonCode),t.xp6(4),t.Oqu(t.lcZ(69,69,"Contact_Number")),t.xp6(2),t.hYB("placeholder","",t.lcZ(71,71,"Please_Enter")," ",t.lcZ(72,73,"Contact_Number"),""),t.xp6(3),t.Q6J("ngIf",!(null!=(m=n.form.get("contactNumber"))&&m.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(h=n.form.get("contactNumber"))?null:h.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(4),t.Oqu(t.lcZ(79,75,"Schedule_Time")),t.xp6(2),t.s9C("placeholder",t.lcZ(81,77,"Schedule_Time")),t.xp6(2),t.Q6J("control",n.form.controls.scheduleDateTime),t.xp6(4),t.Oqu(t.lcZ(87,79,"Superivisor")),t.xp6(2),t.Q6J("items",n.userSelectionList),t.xp6(1),t.Q6J("control",n.form.controls.supervisorId),t.xp6(1),t.Q6J("ngIf","visit"==n.action),t.xp6(1),t.Q6J("ngIf","visit"==n.action),t.xp6(1),t.Q6J("ngIf","visit"==n.action),t.xp6(1),t.Q6J("ngIf","visit"==n.action),t.xp6(1),t.Q6J("ngIf","visit"==n.action),t.xp6(1),t.Q6J("ngIf","visit"==n.action),t.xp6(4),t.s9C("value",t.lcZ(100,81,"Cancel")),t.xp6(3),t.Q6J("ngIf","new"==n.action||"edit"==n.action),t.xp6(1),t.Q6J("ngIf","confirm"==n.action),t.xp6(1),t.Q6J("ngIf","visit"==n.action)}}function Jq(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div"),t.TgZ(2,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().print()}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5," \xa0 "),t.TgZ(6,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(7," Close"),t.qZA(),t.qZA(),t._UZ(8,"br"),t._UZ(9,"br"),t._UZ(10,"br"),t.TgZ(11,"div",48),t.TgZ(12,"div",49),t.ynx(13,50),t.TgZ(14,"table",51),t.TgZ(15,"tr"),t.TgZ(16,"td",52),t.TgZ(17,"h5",53),t.TgZ(18,"strong"),t._uU(19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"td",54),t._UZ(21,"img",55),t.qZA(),t.TgZ(22,"td",52),t.TgZ(23,"h5",56),t.TgZ(24,"strong"),t._uU(25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"table",57),t.TgZ(27,"tr",54),t.TgZ(28,"td",58),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"td",58),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"td",58),t._uU(35),t.ALo(36,"translate"),t.ALo(37,"date"),t.qZA(),t.TgZ(38,"td",58),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"table",57),t.TgZ(42,"tr",54),t.TgZ(43,"td",59),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"td",60),t._uU(47),t._UZ(48,"br"),t._uU(49),t.qZA(),t.TgZ(50,"td",59),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"td",61),t._uU(54),t._UZ(55,"br"),t._uU(56),t.qZA(),t.qZA(),t.TgZ(57,"tr",54),t.TgZ(58,"td",59),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"td",62),t._uU(62),t.qZA(),t.TgZ(63,"td",59),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"td",62),t._uU(67),t.qZA(),t.qZA(),t.TgZ(68,"tr"),t.TgZ(69,"td",63),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"td",64),t._uU(73),t.ALo(74,"date"),t.qZA(),t.TgZ(75,"td",63),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"td",64),t._uU(79),t.qZA(),t.qZA(),t.qZA(),t.TgZ(80,"table",57),t.TgZ(81,"tr"),t.TgZ(82,"th",65),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.qZA(),t.TgZ(85,"tr"),t.TgZ(86,"td",66),t._uU(87),t.qZA(),t.qZA(),t.TgZ(88,"tr",67),t.TgZ(89,"th",65),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.qZA(),t.TgZ(92,"tr"),t.TgZ(93,"td",68),t._uU(94),t.qZA(),t.qZA(),t.TgZ(95,"tr"),t.TgZ(96,"th",65),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.qZA(),t.TgZ(99,"tr"),t.TgZ(100,"td",68),t._uU(101),t.qZA(),t.qZA(),t.TgZ(102,"tr"),t.TgZ(103,"th",65),t._uU(104),t.ALo(105,"translate"),t.qZA(),t.qZA(),t.TgZ(106,"tr"),t.TgZ(107,"td",68),t._uU(108),t.qZA(),t.qZA(),t.qZA(),t.BQk(),t.ynx(109,69),t.TgZ(110,"table",57),t.TgZ(111,"tr",70),t.TgZ(112,"td",71),t._UZ(113,"br"),t.qZA(),t.qZA(),t.TgZ(114,"tr",72),t.TgZ(115,"td",73),t._UZ(116,"br"),t.qZA(),t.TgZ(117,"td",63),t._uU(118),t.ALo(119,"translate"),t.qZA(),t.TgZ(120,"td",73),t._UZ(121,"br"),t.qZA(),t.TgZ(122,"td",63),t._uU(123),t.ALo(124,"translate"),t.qZA(),t.TgZ(125,"td",73),t._UZ(126,"br"),t.qZA(),t.TgZ(127,"td",63),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.qZA(),t.TgZ(130,"tr",74),t.TgZ(131,"td",75),t._UZ(132,"br"),t._UZ(133,"br"),t._UZ(134,"br"),t.qZA(),t.TgZ(135,"td",75),t._uU(136),t.ALo(137,"translate"),t.qZA(),t.TgZ(138,"td",76),t._UZ(139,"br"),t.qZA(),t.TgZ(140,"td",75),t._uU(141),t.ALo(142,"translate"),t.qZA(),t.TgZ(143,"td",76),t._UZ(144,"br"),t.qZA(),t.TgZ(145,"td",75),t._uU(146),t.ALo(147,"translate"),t.qZA(),t.qZA(),t._UZ(148,"tr"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,40,"Print")),t.xp6(16),t.hij(" ",null==e.CompanyData?null:e.CompanyData.companyName," "),t.xp6(2),t.s9C("src",null==e.CompanyData?null:e.CompanyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",null==e.CompanyData?null:e.CompanyData.companyNameAr," "),t.xp6(4),t.AsE(" ",t.lcZ(30,42,"Ref.No"),":",e.resultData.id," "),t.xp6(3),t.AsE(" ",t.lcZ(33,44,"Reason_Code"),": ",e.isArabic?e.resultData.reasonCodeNameAr:null==e.resultData?null:e.resultData.reasonCodeNameEng," "),t.xp6(3),t.AsE(" ",t.lcZ(36,46,"Schedule_Date"),": ",t.xi3(37,48,null==e.resultData?null:e.resultData.scheduleDateTime,"dd/MM/YYYY")," "),t.xp6(4),t.AsE(" ",t.lcZ(40,51,"Supervisor"),": ",null==e.resultData?null:e.resultData.nameSupervisorId," "),t.xp6(5),t.Oqu(t.lcZ(45,53,"Customer_Name")),t.xp6(3),t.hij(" ",e.resultData.projectNameEng," "),t.xp6(2),t.hij(" ",e.resultData.projectNameAr," "),t.xp6(2),t.Oqu(t.lcZ(52,55,"Site_Name")),t.xp6(3),t.hij(" ",e.resultData.siteNameEng," "),t.xp6(2),t.hij(" ",e.resultData.siteNameAr," "),t.xp6(3),t.Oqu(t.lcZ(60,57,"Customer_Address")),t.xp6(3),t.Oqu(e.resultData.customerAddress),t.xp6(2),t.Oqu(t.lcZ(65,59,"Site_Address")),t.xp6(3),t.Oqu(e.resultData.siteAddress),t.xp6(3),t.Oqu(t.lcZ(71,61,"Visited_Date")),t.xp6(3),t.hij(" ",t.xi3(74,63,null==e.resultData?null:e.resultData.visitedDateTime,"dd/MM/YYYY")," "),t.xp6(3),t.Oqu(t.lcZ(77,66,"Visited_By")),t.xp6(3),t.hij(" ",null==e.resultData?null:e.resultData.nameVisitedBy," "),t.xp6(4),t.hij(" ",t.lcZ(84,68,"Supervisor_Remarks")," "),t.xp6(4),t.hij(" ",null==e.resultData?null:e.resultData.supervisorRemarks," "),t.xp6(3),t.hij(" ",t.lcZ(91,70,"Customer_Remarks")," "),t.xp6(4),t.hij(" ",null==e.resultData?null:e.resultData.customerRemarks," "),t.xp6(3),t.hij(" ",t.lcZ(98,72,"Customer_Notes")," "),t.xp6(4),t.hij(" ",null==e.resultData?null:e.resultData.customerNotes," "),t.xp6(3),t.hij(" ",t.lcZ(105,74,"Action_Terms")," "),t.xp6(4),t.hij(" ",null==e.resultData?null:e.resultData.actionTerms," "),t.xp6(10),t.Oqu(t.lcZ(119,76,"Operations_Supervisor")),t.xp6(5),t.Oqu(t.lcZ(124,78,"Operations_Manager")),t.xp6(5),t.Oqu(t.lcZ(129,80,"Regional_Manager")),t.xp6(8),t.Oqu(t.lcZ(137,82,"Signature")),t.xp6(5),t.Oqu(t.lcZ(142,84,"Signature")),t.xp6(5),t.Oqu(t.lcZ(147,86,"Signature"))}}let Qq=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u){super(r),this.validationService=e,this.datepipe=o,this.translate=n,this.fb=s,this.authService=r,this.utilService=c,this.apiService=p,this.dialogRef=u,this.id=0,this.readonly="",this.siteCodeList=[],this.action="",this.empNumber="",this.isDataLoading=!1,this.custCodeControl=new l.NI("",l.kI.required),this.isArabic=!1,this.userSelectionList=[],this.reasonCodeSelectionList=[],this.isFromProjectsAction=!1,this.projectsList=[],this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,tt.O)(""),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(d=>(""!==d.trim()&&(this.isDataLoading=!0),this.filterCustCodes(d||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.LoadReasonCodeSelectionList(),this.LoadUserSelectionList(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}LoadReasonCodeSelectionList(){this.apiService.getall("ReasonCode/getSelectReasonCodeListForCustomerVisit").subscribe(e=>{null!=e&&(this.reasonCodeSelectionList=e,this.reasonCodeSelectionList.forEach(o=>{o.text=this.isArabic?o.textTwo+"-"+o.value:o.text+"-"+o.value}))})}LoadUserSelectionList(){this.apiService.getall("Users/GetUserSelectionList").subscribe(e=>{null!=e&&(this.userSelectionList=e)})}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],projectCode:["",l.kI.required],siteCode:["",l.kI.required],reasonCode:["",l.kI.required],contactNumber:["",l.kI.compose([l.kI.required,this.validationService.mobileValidator])],supervisorId:["",l.kI.required],scheduleDateTime:["",l.kI.required],isOpen:[!0],isClosed:[!1],isInprogress:[!1],id:[this.id]}),this.isFromProjectsAction&&(this.custCodeControl.setValue(this.projectData.customerCode),this.form.controls.siteCode.setValue(this.projectData.siteCode),this.form.controls.projectCode.setValue(this.projectData.projectCode),this.form.controls.customerCode.setValue(this.projectData.customerCode),this.form.controls.customerCode.disable({onlySelf:!0}),this.custCodeControl.disable({onlySelf:!0}),this.form.controls.projectCode.disable({onlySelf:!0}),this.form.controls.siteCode.disable({onlySelf:!0}),this.loadCustomerData(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode),this.loadSiteCodes(this.projectData.projectCode)),"visit"==this.action&&(this.form.controls.customerCode.disable({onlySelf:!0}),this.custCodeControl.disable({onlySelf:!0}),this.form.controls.projectCode.disable({onlySelf:!0}),this.form.controls.siteCode.disable({onlySelf:!0}),this.form.controls.reasonCode.disable({onlySelf:!0}),this.form.controls.contactNumber.disable({onlySelf:!0}),this.form.controls.supervisorId.disable({onlySelf:!0}),this.form.controls.scheduleDateTime.disable({onlySelf:!0}),this.form.addControl("supervisorRemarks",new l.NI("",l.kI.required)),this.form.addControl("customerRemarks",new l.NI("",l.kI.required)),this.form.addControl("actionTerms",new l.NI("",l.kI.required)),this.form.addControl("customerNotes",new l.NI("",l.kI.required)),this.form.addControl("visitedBy",new l.NI("",l.kI.required)),this.form.addControl("visitedDateTime",new l.NI("",l.kI.required)))}loadCustomerData(e){this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+e).subscribe(o=>{null!=o&&(this.CustomerData=o,this.form.controls.contactNumber.setValue(o.custMobile1),this.loadCompanyData(o))})}loadCompanyData(e){this.apiService.getall(`Company/getCompanyByCityCode/${e.custCityCode1}`).subscribe(o=>{null!=o&&(this.CompanyData=o)})}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o?n=e.target.value:3==o&&(n=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){let r=this.custCodeControl.value;this.form.controls.customerCode.setValue(r),this.form.controls.contactNumber.setValue(s.custMobile1),this.loadProjectsList(r)}else this.form.controls.customerCode.setValue("");this.form.controls.projectCode.setValue(""),this.form.controls.siteCode.setValue(""),this.projectsList=[],this.siteCodeList=[]})}onSelectionProjectCode(){this.loadSiteCodes(this.form.controls.projectCode.value),""!=this.form.controls.projectCode.value&&(this.isDataLoading=!0,this.form.controls.siteCode.setValue("")),this.isDataLoading=!1}getProjectData(){this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectData=e})}loadSiteCodes(e){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(o=>{this.siteCodeList=o,this.isDataLoading=!1})}loadProjectsList(e){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(o=>{this.projectsList=o,this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.apiService.get("CustomerVisitForm/getById",this.id).subscribe(e=>{null!=e&&(this.resultData=e,this.form.patchValue(e),this.custCodeControl.setValue(e.customerCode),this.form.controls.projectCode.setValue(e.projectCode),this.form.controls.customerCode.setValue(e.customerCode),this.form.controls.siteCode.setValue(e.siteCode),this.form.controls.contactNumber.setValue(e.contactNumber),this.form.controls.supervisorId.setValue(e.supervisorId.toString()),this.form.controls.visitedBy.setValue(null==e.visitedBy||0==e.visitedBy?"":e.visitedBy.toString()),this.getProjectData(),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){this.form.value.customerCode=this.custCodeControl.value,this.form.value.projectCode=this.form.controls.projectCode.value,this.form.value.siteCode=this.form.controls.siteCode.value,this.form.value.action=this.action,this.form.valid?this.apiService.post("CustomerVisitForm",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}onSelectionSiteCode(){""!=this.form.controls.siteCode.value&&this.getProjectData()}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}print(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(N.R),t.Y36(f.uU),t.Y36(Z.sK),t.Y36(l.qu),t.Y36(x._),t.Y36(y.t),t.Y36(b.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-customer-vist-form"]],features:[t.qOj],decls:2,vars:2,consts:[["novalidate","","class","mt-4",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-4","col-lg-4"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","projectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["bindLabel","text","bindValue","value","formControlName","reasonCode",3,"items"],[3,"control"],["type","text","formControlName","contactNumber",1,"form-control",3,"placeholder"],["matInput","","type","datetime-local","formControlName","scheduleDateTime",1,"form-control","datapickerinput",3,"placeholder"],["bindLabel","text","bindValue","value","formControlName","supervisorId",3,"items"],["class","col-md-4 col-lg-4",4,"ngIf"],["class","col-md-12 col-lg-12",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"value"],["bindLabel","text","bindValue","value","formControlName","visitedBy",3,"items"],["matInput","","type","datetime-local","formControlName","visitedDateTime",1,"form-control","datapickerinput",3,"placeholder"],["type","text","formControlName","supervisorRemarks",1,"form-control",3,"placeholder"],["formControlName","customerRemarks",1,"form-control",3,"placeholder"],["type","text","formControlName","actionTerms",1,"form-control",3,"placeholder"],["formControlName","customerNotes",1,"form-control",3,"placeholder"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printableArea",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px","height","100%"],[2,"page-break-after","always","height","100vh"],["id","tableData"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],[2,"width","35%"],[2,"text-align","left"],[2,"text-align","center"],[1,"float-center",2,"width","200px","height","150px",3,"src"],[2,"text-align","right"],["border","1","cellpadding","5","cellspacing","0",2,"width","100%"],[2,"border","1px solid #878787","padding","5px","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","15%",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","word-wrap","break-word"],["width","35%",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["width","35%",2,"white-space","pre-wrap","border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["width","35%",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400","white-space","pre-wrap"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["colspan","4",2,"border","none","padding","5px","text-align","left","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","4",2,"border","none","padding","5px","text-align","justify","white-space","pre-wrap","font-size","0.675rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","400"],[2,"border","1px"],["colspan","4",2,"border","none","padding","5px","text-align","justify","white-space","pre-wrap","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["id","footer"],[2,"background","#808080"],["colspan","6"],[2,"text-align","center","word-wrap","break-word"],["width","20%"],[2,"text-align","center","word-wrap","break-word","vertical-align","top"],["rowspan","2",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["rowspan","2"]],template:function(e,o){1&e&&(t.YNc(0,Yq,105,83,"form",0),t.YNc(1,Jq,149,88,"ng-container",1)),2&e&&(t.Q6J("ngIf","view"!=o.action),t.xp6(1),t.Q6J("ngIf","view"==o.action))},directives:[f.O5,l._Y,l.JL,l.sg,ht.z,l.Fj,at.ZL,l.JJ,l.oH,at.XC,f.sg,l.EJ,l.u,l.YN,l.Kr,Dt.w9,G.s,St.ey],pipes:[Z.X$,f.Ov,f.uU],encapsulation:2}),i})();function Bq(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",54),t.TgZ(1,"button",55),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(2," \xd7"),t.qZA(),t.qZA()}}function Hq(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Ref.No")," "))}function Vq(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.id)}}function $q(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Schedule_Date")," "))}function Gq(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.scheduleDateTime,"dd/MM/YYYY"))}}function Wq(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function zq(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function Xq(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function Kq(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function t4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function e4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function o4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reason_Code")," "))}function i4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCode)}}function n4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reason_Code")," "))}function a4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCodeNameEng)}}function s4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reason_Code")," "))}function r4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCodeNameAr)}}function l4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Supervisor")," "))}function c4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.nameSupervisorId)}}function p4(i,a){1&i&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Status")," "))}function u4(i,a){if(1&i&&(t.TgZ(0,"td",57),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.status)}}function d4(i,a){1&i&&(t.TgZ(0,"th",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function m4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().createUpdate(n.id,"edit")}),t._UZ(1,"i",63),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function _4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().confirmVisit(n)}),t._UZ(1,"i",64),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Confirm"))}}function g4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().createUpdate(n.id,"visit")}),t._UZ(1,"i",65),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Fillup_Form"))}}function h4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",59),t.YNc(1,m4,3,1,"span",60),t.YNc(2,_4,3,1,"span",60),t.YNc(3,g4,3,1,"span",60),t.TgZ(4,"span",61),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().createUpdate(s.id,"view")}),t._UZ(5,"i",62),t._uU(6,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isOpen)&&e.canEdit),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isOpen)&&e.isCRM),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isInprogress)&&e.isCRM),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View"))}}function f4(i,a){1&i&&t._UZ(0,"tr",66)}function Z4(i,a){1&i&&t._UZ(0,"tr",67)}const ro=function(){return{standalone:!0}};let lo=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A,S){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=m,this.pageService=h,this.oprService=C,this.translate=A,this.dialogRef=S,this.displayedColumns=["id","scheduleDateTime","customerCode","siteCode","projectCode","reasonCodeNameEng","reasonCodeNameAr","nameSupervisorId","status","Actions"],this.searchValue="",this.sortingOrder="id asc",this.isLoading=!1,this.isUpdating=!1,this.listType="",this.approvedStatus="",this.project={projectCode:"-NA-",siteCode:"-NA-"},this.isArabic=!1,this.reasonCodeSelectionList=[]}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.initialLoading()}initialLoading(){this.LoadReasonCodeSelectionList(),this.loadList(0,this.pageService.pageCount,"",this.sortingOrder,"","")}LoadReasonCodeSelectionList(){this.apiService.getall("ReasonCode/getSelectReasonCodeList").subscribe(e=>{null!=e&&(this.reasonCodeSelectionList=e,this.reasonCodeSelectionList.forEach(o=>{o.text=this.isArabic?o.textTwo+"-"+o.value:o.text+"-"+o.value}))})}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder,this.approvedStatus,this.listType)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder,this.approvedStatus,this.listType)}loadList(e,o,n,s,r="",c){this.isLoading=!0,this.apiService.getPagination(`CustomerVisitForm/getCustomerVisitFormsPagedListByProjectSite/${this.project.projectCode}/${this.project.siteCode}`,this.utilService.getOprQueryString(e,o,n,s,this.approvedStatus,"",0,"",this.listType)).subscribe(p=>{this.isLoading=!1,this.totalItemsCount=0,this.data=new _.by(p.items),this.totalItemsCount=p.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount,this.isLoading=!1}),this.data.sort=this.sort},p=>{this.utilService.ShowApiErrorMessage(p),this.isLoading=!1})}applyFilter(e,o){(e||o)&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,"",this.listType))}translateToolTip(e){return`${this.translate.instant(e)}`}refresh(){this.searchValue="",this.sortingOrder="id desc",this.approvedStatus="",this.listType="",this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}loadApprovals(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}closeModel(){this.dialogRef.close(!0)}delete(e){let n=e.requestNumber;this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(r=>{r&&n>0&&this.apiService.delete("CustomerVisitFrom",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()})},r=>this.utilService.ShowApiErrorMessage(r))}createUpdate(e,o){let n=this.oprService.openAutoHeightWidthDialog(this.dialog,Qq);n.componentInstance.dbops=g.O.create,n.componentInstance.modalTitle="Customer_Visit_Form",n.componentInstance.modalBtnTitle="createUpdate",n.componentInstance.id=e,n.componentInstance.action=o,"-NA-"!=this.project.projectCode&&(n.componentInstance.isFromProjectsAction=!0),n.componentInstance.projectData=this.project,n.afterClosed().subscribe(s=>{s&&!0===s&&this.initialLoading()})}confirmVisit(e){this.utilService.openDeleteConfirmDialog(this.dialog,xt).afterClosed().subscribe(n=>{n&&(e.action="confirm",e.modalTitle="modalTitle",e.modalBtnTitle="modalBtnTitle",this.apiService.post("CustomerVisitForm",e).subscribe(s=>{s&&(this.utilService.OkMessage(),this.initialLoading())},s=>{console.error(s),this.utilService.ShowApiErrorMessage(s)}))})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-customer-visit-forms"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:105,vars:47,consts:[["class","modal-body",4,"ngIf"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-2"],[1,"mr-sm-2"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","change","ngModelChange"],["value",""],["value","open"],["value","closed"],["value","inProgress"],[1,"col-md-3"],[1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[3,"click"],[1,"btn","btn-primary","icon-refresh"],[1,"col-md-1"],[3,"isLoading"],[1,"col-md-2","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","scheduleDateTime"],["matColumnDef","customerCode"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","reasonCode"],["matColumnDef","reasonCodeNameEng"],["matColumnDef","reasonCodeNameAr"],["matColumnDef","nameSupervisorId"],["matColumnDef","status"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[1,"modal-body"],["type","button","aria-hidden","true",1,"close",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[1,"fas","fa-edit"],[1,"fas","fa-check"],[1,"fas","fa-pencil-alt"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.YNc(0,Bq,3,0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h3",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"nav",6),t.TgZ(9,"ol",7),t.TgZ(10,"li",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"li",8),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"li",9),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"div",2),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",13),t.TgZ(24,"div",2),t.TgZ(25,"div",14),t.TgZ(26,"label",15),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"ng-select",16),t.NdJ("ngModelChange",function(s){return o.listType=s}),t.qZA(),t.qZA(),t.TgZ(30,"div",14),t.TgZ(31,"label",15),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"select",17),t.NdJ("change",function(){return o.loadApprovals()})("ngModelChange",function(s){return o.approvedStatus=s}),t.TgZ(35,"option",18),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"option",19),t._uU(39,"Open"),t.qZA(),t.TgZ(40,"option",20),t._uU(41,"Closed"),t.qZA(),t.TgZ(42,"option",21),t._uU(43,"Inprogress"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",22),t._UZ(45,"label",15),t.TgZ(46,"input",23),t.NdJ("ngModelChange",function(s){return o.searchValue=s}),t.ALo(47,"translate"),t.qZA(),t.qZA(),t.TgZ(48,"div",14),t.TgZ(49,"button",24),t.NdJ("click",function(){return o.applyFilter(o.searchValue,o.listType)}),t._uU(50),t.ALo(51,"translate"),t.qZA(),t._uU(52," \xa0 "),t.TgZ(53,"a",25),t.NdJ("click",function(){return o.refresh()}),t._UZ(54,"i",26),t.qZA(),t._uU(55," \xa0 "),t.qZA(),t.TgZ(56,"div",27),t._UZ(57,"spinner-loader",28),t.qZA(),t.TgZ(58,"div",29),t.TgZ(59,"a",30),t.NdJ("click",function(){return o.createUpdate(0,"new")}),t._UZ(60,"i",31),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(63,"div",32),t.TgZ(64,"div",33),t.TgZ(65,"div",34),t.ynx(66),t.TgZ(67,"table",35),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(68,36),t.YNc(69,Hq,3,3,"th",37),t.YNc(70,Vq,2,1,"td",38),t.BQk(),t.ynx(71,39),t.YNc(72,$q,3,3,"th",37),t.YNc(73,Gq,3,4,"td",38),t.BQk(),t.ynx(74,40),t.YNc(75,Wq,3,3,"th",37),t.YNc(76,zq,2,1,"td",38),t.BQk(),t.ynx(77,41),t.YNc(78,Xq,3,3,"th",37),t.YNc(79,Kq,2,1,"td",38),t.BQk(),t.ynx(80,42),t.YNc(81,t4,3,3,"th",37),t.YNc(82,e4,2,1,"td",38),t.BQk(),t.ynx(83,43),t.YNc(84,o4,3,3,"th",37),t.YNc(85,i4,2,1,"td",38),t.BQk(),t.ynx(86,44),t.YNc(87,n4,3,3,"th",37),t.YNc(88,a4,2,1,"td",38),t.BQk(),t.ynx(89,45),t.YNc(90,s4,3,3,"th",37),t.YNc(91,r4,2,1,"td",38),t.BQk(),t.ynx(92,46),t.YNc(93,l4,3,3,"th",37),t.YNc(94,c4,2,1,"td",38),t.BQk(),t.ynx(95,47),t.YNc(96,p4,3,3,"th",37),t.YNc(97,u4,2,1,"td",38),t.BQk(),t.ynx(98,48),t.YNc(99,d4,3,3,"th",49),t.YNc(100,h4,7,4,"td",50),t.BQk(),t.YNc(101,f4,1,0,"tr",51),t.YNc(102,Z4,1,0,"tr",52),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.ynx(103),t.TgZ(104,"mat-paginator",53),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA()),2&e&&(t.Q6J("ngIf","-NA-"!=o.project.projectCode),t.xp6(5),t.hij(" ",t.lcZ(6,25,"Customer_Visit_Forms")," "),t.xp6(6),t.hij(" ",t.lcZ(12,27,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(15,29,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(18,31,"Customer_Visit_Forms")),t.xp6(10),t.Oqu(t.lcZ(28,33,"RequestType")),t.xp6(2),t.Q6J("items",o.reasonCodeSelectionList)("ngModel",o.listType)("ngModelOptions",t.DdM(45,ro)),t.xp6(3),t.Oqu(t.lcZ(33,35,"Approval_Status")),t.xp6(2),t.Q6J("ngModel",o.approvedStatus)("ngModelOptions",t.DdM(46,ro)),t.xp6(2),t.Oqu(t.lcZ(37,37,"Select")),t.xp6(10),t.MGl("placeholder","",t.lcZ(47,39,"Search"),"..."),t.Q6J("ngModel",o.searchValue),t.xp6(4),t.Oqu(t.lcZ(51,41,"Search")),t.xp6(7),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(62,43,"New_Request")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(34),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[f.O5,Dt.w9,l.JJ,l.On,l.EJ,l.YN,l.Kr,l.Fj,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,rt.gM,_.XQ,_.Gk],pipes:[Z.X$,f.uU],encapsulation:2}),i})();function C4(i,a){if(1&i&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.Q6J("value",e.value),t.xp6(1),t.AsE(" ",o.isArabic?e.textTwo:e.text,"-",e.value," ")}}function A4(i,a){if(1&i&&(t.TgZ(0,"span",42),t._UZ(1,"validation-message",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.customerCode)}}function T4(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function v4(i,a){if(1&i&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function x4(i,a){if(1&i&&(t.TgZ(0,"span",42),t._UZ(1,"validation-message",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.projectCode)}}function q4(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function b4(i,a){if(1&i&&(t.TgZ(0,"option",43),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.s9C("value",e.siteCode),t.xp6(1),t.Oqu(o.isArabic?e.siteArbName:e.siteName)}}function y4(i,a){if(1&i&&(t.TgZ(0,"span",42),t._UZ(1,"validation-message",28),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("control",e.form.controls.siteCode)}}function S4(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function w4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",44),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div"),t.TgZ(6,"input",45),t.NdJ("change",function(n){return t.CHM(e),t.oxw(2).onFileChanged(n,1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"Proof")))}function U4(i,a){if(1&i&&(t.TgZ(0,"div",12),t._UZ(1,"img",46),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.s9C("src",e.proofForComplaintUrl,t.LSH)}}function L4(i,a){if(1&i&&(t.TgZ(0,"div",26),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",47),t.ALo(6,"translate"),t._UZ(7,"validation-message",28),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,3,"Closing_Date")),t.xp6(2),t.s9C("placeholder",t.lcZ(6,5,"Closing_Date")),t.xp6(2),t.Q6J("control",e.form.controls.closingDate)}}function D4(i,a){if(1&i&&(t.TgZ(0,"div",48),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"textarea",49),t.ALo(6,"translate"),t.ALo(7,"translate"),t._UZ(8,"validation-message",28),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"Closing_Description")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,6,"Please_Enter")," ",t.lcZ(7,8,"Closing_Description"),""),t.xp6(3),t.Q6J("control",e.form.controls.actionDescription)}}function N4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",44),t.TgZ(1,"div",14),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div"),t.TgZ(6,"input",50),t.NdJ("change",function(n){return t.CHM(e),t.oxw(2).onFileChanged(n,2)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"Proof")))}function E4(i,a){1&i&&(t._UZ(0,"input",51),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}function O4(i,a){1&i&&(t._UZ(0,"input",51),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Confirm"))}function j4(i,a){1&i&&(t._UZ(0,"input",51),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Close_Complaint"))}function k4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"form",2,3),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().submit()}),t.TgZ(2,"h3"),t._uU(3),t.TgZ(4,"button",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(5," \xd7"),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"div",8),t.TgZ(12,"div",10),t.TgZ(13,"div",11),t.TgZ(14,"div",12),t.TgZ(15,"label",13),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",14),t.TgZ(19,"div",15),t._UZ(20,"auto-loader",16),t._UZ(21,"input",17),t.ALo(22,"translate"),t.ALo(23,"translate"),t.TgZ(24,"mat-autocomplete",18,19),t.NdJ("optionSelected",function(n){return t.CHM(e),t.oxw().onSelectionCustomerCode(n,1)}),t.YNc(26,C4,2,3,"mat-option",20),t.ALo(27,"async"),t.qZA(),t.qZA(),t.YNc(28,A4,2,1,"span",21),t.YNc(29,T4,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(30,"div",12),t.TgZ(31,"label",13),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"div",14),t.TgZ(35,"div",15),t.TgZ(36,"select",22),t.NdJ("change",function(){return t.CHM(e),t.oxw().onSelectionProjectCode()}),t.TgZ(37,"option",23),t._uU(38),t.ALo(39,"translate"),t.ALo(40,"translate"),t.qZA(),t.YNc(41,v4,2,2,"option",24),t.qZA(),t.qZA(),t.YNc(42,x4,2,1,"span",21),t.YNc(43,q4,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(44,"div",12),t.TgZ(45,"label",13),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.TgZ(48,"div",14),t.TgZ(49,"div",15),t.TgZ(50,"select",25),t.NdJ("change",function(){return t.CHM(e),t.oxw().onSelectionSiteCode()}),t.TgZ(51,"option",23),t._uU(52),t.ALo(53,"translate"),t.ALo(54,"translate"),t.qZA(),t.YNc(55,b4,2,2,"option",24),t.qZA(),t.qZA(),t.YNc(56,y4,2,1,"span",21),t.YNc(57,S4,3,3,"span",21),t.qZA(),t.qZA(),t.TgZ(58,"div",26),t.TgZ(59,"div",14),t.TgZ(60,"label"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"ng-select",27),t._UZ(64,"validation-message",28),t.qZA(),t.qZA(),t.TgZ(65,"div",26),t.TgZ(66,"div",14),t.TgZ(67,"label"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t._UZ(70,"input",29),t.ALo(71,"translate"),t.ALo(72,"translate"),t._UZ(73,"validation-message",28),t.qZA(),t.qZA(),t.TgZ(74,"div",26),t.TgZ(75,"div",14),t.TgZ(76,"label"),t._uU(77),t.ALo(78,"translate"),t.qZA(),t._UZ(79,"input",30),t.ALo(80,"translate"),t._UZ(81,"validation-message",28),t.qZA(),t.qZA(),t.TgZ(82,"div",26),t.TgZ(83,"div",14),t.TgZ(84,"label"),t._uU(85),t.ALo(86,"translate"),t.qZA(),t._UZ(87,"ng-select",31),t._UZ(88,"validation-message",28),t.qZA(),t.qZA(),t.TgZ(89,"div",32),t.TgZ(90,"div",14),t.TgZ(91,"label"),t._uU(92),t.ALo(93,"translate"),t.qZA(),t._UZ(94,"textarea",33),t.ALo(95,"translate"),t.ALo(96,"translate"),t._UZ(97,"validation-message",28),t.qZA(),t.qZA(),t.YNc(98,w4,7,3,"div",34),t.YNc(99,U4,2,1,"div",35),t.YNc(100,L4,8,7,"div",36),t.YNc(101,D4,9,10,"div",37),t.YNc(102,N4,7,3,"div",34),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(103,"div",8),t.TgZ(104,"div",9),t.TgZ(105,"div",38),t.TgZ(106,"input",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t.ALo(107,"translate"),t.qZA(),t._uU(108," \xa0 "),t.YNc(109,E4,2,3,"input",40),t.YNc(110,O4,2,3,"input",40),t.YNc(111,j4,2,3,"input",40),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(1),o=t.MAs(25),n=t.oxw();let s,r,c,p,u,d;t.Q6J("formGroup",n.form),t.xp6(3),t.hij(" ",n.modalTitle," "),t.xp6(13),t.Oqu(t.lcZ(17,49,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",n.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(22,51,"Please_Enter")," ",t.lcZ(23,53,"Customer_Code"),""),t.Q6J("formControl",n.custCodeControl)("matAutocomplete",o),t.xp6(5),t.Q6J("ngForOf",t.lcZ(27,55,n.filteredCustCodes)),t.xp6(2),t.Q6J("ngIf",!(null!=(s=n.form.get("customerCode"))&&s.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(r=n.form.get("customerCode"))?null:r.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(3),t.Oqu(t.lcZ(33,57,"Project")),t.xp6(6),t.AsE("",t.lcZ(39,59,"Select")," ",t.lcZ(40,61,"Project")," "),t.xp6(3),t.Q6J("ngForOf",n.projectsList),t.xp6(1),t.Q6J("ngIf",!(null!=(c=n.form.get("projectCode"))&&c.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(p=n.form.get("projectCode"))?null:p.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(3),t.Oqu(t.lcZ(47,63,"Site")),t.xp6(6),t.AsE("",t.lcZ(53,65,"Select")," ",t.lcZ(54,67,"Site")," "),t.xp6(3),t.Q6J("ngForOf",n.siteCodeList),t.xp6(1),t.Q6J("ngIf",!(null!=(u=n.form.get("siteCode"))&&u.hasError("required")&&null!=e&&e.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(d=n.form.get("siteCode"))?null:d.hasError("required"))&&(null==e?null:e.submitted)),t.xp6(4),t.Oqu(t.lcZ(62,69,"Reason_Code")),t.xp6(2),t.Q6J("items",n.reasonCodeSelectionList),t.xp6(1),t.Q6J("control",n.form.controls.reasonCode),t.xp6(4),t.Oqu(t.lcZ(69,71,"Complaint_By")),t.xp6(2),t.hYB("placeholder","",t.lcZ(71,73,"Please_Enter")," ",t.lcZ(72,75,"Complaint_By"),""),t.xp6(3),t.Q6J("control",n.form.controls.complaintBy),t.xp6(4),t.Oqu(t.lcZ(78,77,"Complaint_Date")),t.xp6(2),t.s9C("placeholder",t.lcZ(80,79,"Complaint_Date")),t.xp6(2),t.Q6J("control",n.form.controls.complaintDate),t.xp6(4),t.Oqu(t.lcZ(86,81,"Booked_By")),t.xp6(2),t.Q6J("items",n.userSelectionList),t.xp6(1),t.Q6J("control",n.form.controls.bookedBy),t.xp6(4),t.Oqu(t.lcZ(93,83,"Complaint_Description")),t.xp6(2),t.hYB("placeholder","",t.lcZ(95,85,"Please_Enter")," ",t.lcZ(96,87,"Complaint_Description"),""),t.xp6(3),t.Q6J("control",n.form.controls.complaintDescription),t.xp6(1),t.Q6J("ngIf","new"==n.action||"edit"==n.action),t.xp6(1),t.Q6J("ngIf",n.proofForComplaintUrl&&("new"==n.action||"edit"==n.action||0==n.id)),t.xp6(1),t.Q6J("ngIf","closing"==n.action),t.xp6(1),t.Q6J("ngIf","closing"==n.action),t.xp6(1),t.Q6J("ngIf","closing"==n.action),t.xp6(4),t.s9C("value",t.lcZ(107,89,"Cancel")),t.xp6(3),t.Q6J("ngIf","new"==n.action||"edit"==n.action),t.xp6(1),t.Q6J("ngIf","startAction"==n.action),t.xp6(1),t.Q6J("ngIf","closing"==n.action)}}function M4(i,a){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div"),t.TgZ(2,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().print()}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5," \xa0 "),t.TgZ(6,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(7," Close"),t.qZA(),t.qZA(),t._UZ(8,"br"),t._UZ(9,"br"),t._UZ(10,"br"),t.TgZ(11,"div",54),t.TgZ(12,"div",55),t.ynx(13,56),t.TgZ(14,"table",57),t.TgZ(15,"tr"),t.TgZ(16,"td",58),t.TgZ(17,"h5",59),t.TgZ(18,"strong"),t._uU(19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"td",60),t._UZ(21,"img",61),t.qZA(),t.TgZ(22,"td",58),t.TgZ(23,"h5",62),t.TgZ(24,"strong"),t._uU(25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"table",63),t.TgZ(27,"tr",60),t.TgZ(28,"td",64),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"td",64),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"td",65),t._uU(35),t.ALo(36,"translate"),t.ALo(37,"date"),t.qZA(),t.TgZ(38,"td",64),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.TgZ(41,"tr",60),t.TgZ(42,"td",65),t._uU(43),t.ALo(44,"translate"),t.ALo(45,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"table",63),t.TgZ(47,"tr",60),t.TgZ(48,"td",66),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.TgZ(51,"td",67),t._uU(52),t._UZ(53,"br"),t._uU(54),t.qZA(),t.TgZ(55,"td",66),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"td",68),t._uU(59),t._UZ(60,"br"),t._uU(61),t.qZA(),t.qZA(),t.TgZ(62,"tr",60),t.TgZ(63,"td",66),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"td",69),t._uU(67),t.qZA(),t.TgZ(68,"td",66),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.TgZ(71,"td",69),t._uU(72),t.qZA(),t.qZA(),t.TgZ(73,"tr",60),t.TgZ(74,"td",70),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"td",71),t._uU(78),t.qZA(),t.TgZ(79,"td",70),t._uU(80),t.ALo(81,"translate"),t.qZA(),t.TgZ(82,"td",71),t._uU(83),t.qZA(),t.qZA(),t.TgZ(84,"tr"),t.TgZ(85,"td",70),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.TgZ(88,"td",71),t._uU(89),t.qZA(),t.TgZ(90,"td",70),t._uU(91),t.ALo(92,"translate"),t.qZA(),t.TgZ(93,"td",71),t._uU(94),t.qZA(),t.qZA(),t.qZA(),t.TgZ(95,"table",63),t.TgZ(96,"tr"),t.TgZ(97,"th",72),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.qZA(),t.TgZ(100,"tr"),t.TgZ(101,"td",73),t._uU(102),t.qZA(),t.qZA(),t.TgZ(103,"tr"),t.TgZ(104,"th",72),t._uU(105),t.ALo(106,"translate"),t.qZA(),t.qZA(),t.TgZ(107,"tr"),t.TgZ(108,"td",73),t._uU(109),t.qZA(),t.qZA(),t.qZA(),t.BQk(),t.ynx(110,74),t.TgZ(111,"table",63),t.TgZ(112,"tr",75),t.TgZ(113,"td",76),t._UZ(114,"br"),t.qZA(),t.qZA(),t.TgZ(115,"tr",77),t.TgZ(116,"td",78),t._UZ(117,"br"),t.qZA(),t.TgZ(118,"td",70),t._uU(119),t.ALo(120,"translate"),t.qZA(),t.TgZ(121,"td",78),t._UZ(122,"br"),t.qZA(),t.TgZ(123,"td",70),t._uU(124),t.ALo(125,"translate"),t.qZA(),t.TgZ(126,"td",78),t._UZ(127,"br"),t.qZA(),t.TgZ(128,"td",70),t._uU(129),t.ALo(130,"translate"),t.qZA(),t.qZA(),t.TgZ(131,"tr",79),t.TgZ(132,"td",80),t._UZ(133,"br"),t._UZ(134,"br"),t._UZ(135,"br"),t.qZA(),t.TgZ(136,"td",80),t._uU(137),t.ALo(138,"translate"),t.qZA(),t.TgZ(139,"td",81),t._UZ(140,"br"),t.qZA(),t.TgZ(141,"td",80),t._uU(142),t.ALo(143,"translate"),t.qZA(),t.TgZ(144,"td",81),t._UZ(145,"br"),t.qZA(),t.TgZ(146,"td",80),t._uU(147),t.ALo(148,"translate"),t.qZA(),t.qZA(),t._UZ(149,"tr"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,42,"Print")),t.xp6(16),t.hij(" ",null==e.CompanyData?null:e.CompanyData.companyName," "),t.xp6(2),t.s9C("src",null==e.CompanyData?null:e.CompanyData.logoURL,t.LSH),t.xp6(4),t.hij(" ",null==e.CompanyData?null:e.CompanyData.companyNameAr," "),t.xp6(4),t.AsE(" ",t.lcZ(30,44,"Ref.No"),":",e.resultData.id," "),t.xp6(3),t.AsE(" ",t.lcZ(33,46,"Reason_Code"),": ",e.isArabic?e.resultData.reasonCodeNameAr:null==e.resultData?null:e.resultData.reasonCodeNameEng," "),t.xp6(3),t.AsE(" ",t.lcZ(36,48,"Complaint_Date"),": ",t.xi3(37,50,null==e.resultData?null:e.resultData.complaintDate,"dd/MM/YYYY")," "),t.xp6(4),t.AsE(" ",t.lcZ(40,53,"Complaint_By"),": ",null==e.resultData?null:e.resultData.complaintBy," "),t.xp6(4),t.AsE(" ",t.lcZ(44,55,"Complaint_Closed_Date"),": ",t.xi3(45,57,null==e.resultData?null:e.resultData.closingDate,"dd/MM/YYYY")," "),t.xp6(6),t.Oqu(t.lcZ(50,60,"Customer_Name")),t.xp6(3),t.hij(" ",e.resultData.projectNameEng," "),t.xp6(2),t.hij(" ",e.resultData.projectNameAr," "),t.xp6(2),t.Oqu(t.lcZ(57,62,"Site_Name")),t.xp6(3),t.hij(" ",e.resultData.siteNameEng," "),t.xp6(2),t.hij(" ",e.resultData.siteNameAr," "),t.xp6(3),t.Oqu(t.lcZ(65,64,"Customer_Address")),t.xp6(3),t.Oqu(e.resultData.customerAddress),t.xp6(2),t.Oqu(t.lcZ(70,66,"Site_Address")),t.xp6(3),t.Oqu(e.resultData.siteAddress),t.xp6(3),t.Oqu(t.lcZ(76,68,"Complaint_Booked_By")),t.xp6(3),t.Oqu(null==e.resultData?null:e.resultData.nameBookedBy),t.xp6(2),t.Oqu(t.lcZ(81,70,"Evidence_Attached?")),t.xp6(3),t.Oqu(null==(null==e.resultData?null:e.resultData.proofForComplaint)?"no":"yes"),t.xp6(3),t.Oqu(t.lcZ(87,72,"Complaint_Closed_By")),t.xp6(3),t.Oqu(null==e.resultData?null:e.resultData.nameClosedBy),t.xp6(2),t.Oqu(t.lcZ(92,74,"Closing_Complaint_Document_Attached?")),t.xp6(3),t.Oqu(null!=e.resultData&&e.resultData.isClosed?null==(null==e.resultData?null:e.resultData.proofForAction)?"no":"yes":""),t.xp6(4),t.hij(" ",t.lcZ(99,76,"Complaint_Opening_Remarks")," "),t.xp6(4),t.hij(" ",null==e.resultData?null:e.resultData.complaintDescription," "),t.xp6(3),t.hij(" ",t.lcZ(106,78,"Closing_Remarks")," "),t.xp6(4),t.hij(" ",null==e.resultData?null:e.resultData.actionDescription," "),t.xp6(10),t.Oqu(t.lcZ(120,80,"Operations_Supervisor")),t.xp6(5),t.Oqu(t.lcZ(125,82,"Operations_Manager")),t.xp6(5),t.Oqu(t.lcZ(130,84,"Regional_Manager")),t.xp6(8),t.Oqu(t.lcZ(138,86,"Signature")),t.xp6(5),t.Oqu(t.lcZ(143,88,"Signature")),t.xp6(5),t.Oqu(t.lcZ(148,90,"Signature"))}}let R4=(()=>{class i extends q{constructor(e,o,n,s,r,c,p){super(s),this.datepipe=e,this.translate=o,this.fb=n,this.authService=s,this.utilService=r,this.apiService=c,this.dialogRef=p,this.id=0,this.readonly="",this.siteCodeList=[],this.action="",this.isDataLoading=!1,this.custCodeControl=new l.NI("",l.kI.required),this.isArabic=!1,this.userSelectionList=[],this.reasonCodeSelectionList=[],this.isFromProjectsAction=!1,this.projectsList=[],this.proofForComplaintUrl=null,this.proofForActionUrl=null,this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,tt.O)(""),(0,et.b)(r.autoDelay()),(0,ot.x)(),(0,it.w)(u=>(""!==u.trim()&&(this.isDataLoading=!0),this.filterCustCodes(u||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}ngOnInit(){this.isDataLoading=!0,this.setForm(),this.LoadReasonCodeSelectionList(),this.LoadUserSelectionList(),this.isArabic=this.utilService.isArabic(),this.id>0?(this.readonly="readonly",this.editForm()):(this.readonly="",this.isDataLoading=!1)}LoadReasonCodeSelectionList(){this.apiService.getall("ReasonCode/getSelectReasonCodeListForCustomerComplaint").subscribe(e=>{null!=e&&(this.reasonCodeSelectionList=e,this.reasonCodeSelectionList.forEach(o=>{o.text=this.isArabic?o.textTwo+"-"+o.value:o.text+"-"+o.value}))})}LoadUserSelectionList(){this.apiService.getall("Users/GetUserSelectionList").subscribe(e=>{null!=e&&(this.userSelectionList=e)})}setForm(){this.form=this.fb.group({customerCode:["",l.kI.required],projectCode:["",l.kI.required],siteCode:["",l.kI.required],reasonCode:["",l.kI.required],complaintBy:["",l.kI.required],complaintDescription:["",l.kI.required],proofForComplaintFileName:[""],proofForComplaintIForm:[""],isActionRequired:[!1],complaintDate:["",l.kI.required],bookedBy:["",l.kI.required],proofForAction:[""],proofForComplaint:[""],branchCode:[""],isOpen:[!0],isClosed:[!1],isInprogress:[!1],id:[this.id]}),this.isFromProjectsAction&&(this.custCodeControl.setValue(this.projectData.customerCode),this.form.controls.siteCode.setValue(this.projectData.siteCode),this.form.controls.projectCode.setValue(this.projectData.projectCode),this.form.controls.customerCode.setValue(this.projectData.customerCode),this.form.controls.customerCode.disable({onlySelf:!0}),this.custCodeControl.disable({onlySelf:!0}),this.form.controls.projectCode.disable({onlySelf:!0}),this.form.controls.siteCode.disable({onlySelf:!0}),this.loadCustomerData(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode),this.loadSiteCodes(this.projectData.projectCode)),"closing"==this.action&&(this.form.controls.customerCode.disable({onlySelf:!0}),this.custCodeControl.disable({onlySelf:!0}),this.form.controls.projectCode.disable({onlySelf:!0}),this.form.controls.siteCode.disable({onlySelf:!0}),this.form.controls.reasonCode.disable({onlySelf:!0}),this.form.controls.complaintBy.disable({onlySelf:!0}),this.form.controls.complaintDescription.disable({onlySelf:!0}),this.form.controls.isActionRequired.disable({onlySelf:!0}),this.form.controls.complaintDate.disable({onlySelf:!0}),this.form.controls.bookedBy.disable({onlySelf:!0}),this.form.controls.proofForComplaintIForm.disable({onlySelf:!0}),this.form.addControl("closingDate",new l.NI("",l.kI.required)),this.form.addControl("actionDescription",new l.NI("",l.kI.required)),this.form.addControl("proofForActionIForm",new l.NI("")),this.form.addControl("proofForActionFileName",new l.NI("")))}loadCustomerData(e){this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+e).subscribe(o=>{null!=o&&(this.CustomerData=o,this.loadCompanyData(o))})}loadCompanyData(e){this.apiService.getall(`Company/getCompanyByCityCode/${e.custCityCode1}`).subscribe(o=>{null!=o&&(this.CompanyData=o)})}onSelectionCustomerCode(e,o){let n="";1==o?n=e.option.value:2==o?n=e.target.value:3==o&&(n=e),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){let r=this.custCodeControl.value;this.form.controls.customerCode.setValue(r),this.loadProjectsList(r)}else this.form.controls.customerCode.setValue("");this.form.controls.projectCode.setValue(""),this.form.controls.siteCode.setValue(""),this.projectsList=[],this.siteCodeList=[]})}onSelectionProjectCode(){this.loadSiteCodes(this.form.controls.projectCode.value),""!=this.form.controls.projectCode.value&&(this.isDataLoading=!0,this.form.controls.siteCode.setValue("")),this.isDataLoading=!1}getProjectData(){this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.form.controls.projectCode.value}/${this.form.controls.siteCode.value}`).subscribe(e=>{this.projectData=e})}loadSiteCodes(e){this.isDataLoading=!0,this.apiService.getall(`CustomerSite/getSelectSiteListByProjectCode/${e}`).subscribe(o=>{this.siteCodeList=o,this.isDataLoading=!1})}loadProjectsList(e){this.isDataLoading=!0,this.apiService.getall(`project/getSelectProjectListByCustomerCode/${e}`).subscribe(o=>{this.projectsList=o,this.isDataLoading=!1})}editForm(){this.isDataLoading=!0,this.isFromProjectsAction&&(this.form.controls.customerCode.disable({onlySelf:!0}),this.custCodeControl.disable({onlySelf:!0}),this.form.controls.projectCode.disable({onlySelf:!0}),this.form.controls.siteCode.disable({onlySelf:!0}),this.custCodeControl.setValue(this.projectData.customerCode),this.loadProjectsList(this.projectData.customerCode),this.loadSiteCodes(this.projectData.projectCode)),this.apiService.get("CustomerComplaints/getById",this.id).subscribe(e=>{null!=e&&(this.resultData=e,this.form.patchValue(e),this.proofForComplaintUrl=e.proofForComplaint,this.proofForActionUrl=e.proofForAction,this.loadCustomerData(e.customerCode),this.form.controls.projectCode.setValue(e.projectCode),this.form.controls.customerCode.setValue(e.customerCode),this.form.controls.siteCode.setValue(e.siteCode),this.form.controls.reasonCode.setValue(e.reasonCode),this.form.controls.bookedBy.setValue(e.bookedBy.toString()),this.proofForComplaintUrl=null==e?void 0:e.proofForComplaint,this.proofForActionUrl=null==e?void 0:e.proofForAction,this.getProjectData(),this.isDataLoading=!1)})}closeModel(){this.dialogRef.close()}submit(){let e=new Date(this.form.controls.complaintDate.value);if(e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.form.value.complaintDate=e,this.form.valid){this.id>0&&(this.form.value.id=this.id);const o=new FormData;o.append("id",this.id.toString()),o.append("proofForComplaintFileName",this.authService.ApiEndPoint().replace("api","")+"ProofsForComplaints/"),o.append("proofForActionFileName",this.authService.ApiEndPoint().replace("api","")+"ProofsForActions/"),o.append("proofForComplaintIForm",this.form.controls.proofForComplaintIForm.value),o.append("isActionRequired",this.form.controls.isActionRequired.value),o.append("customerCode",this.form.controls.customerCode.value),o.append("projectCode",this.form.controls.projectCode.value),o.append("siteCode",this.form.controls.siteCode.value),o.append("reasonCode",this.form.controls.reasonCode.value),o.append("branchCode",this.form.controls.branchCode.value),o.append("complaintBy",this.form.controls.complaintBy.value),o.append("bookedBy",this.form.controls.bookedBy.value),o.append("action",this.action),o.append("complaintDate",this.form.controls.complaintDate.value),o.append("complaintDescription",this.form.controls.complaintDescription.value),"closing"==this.action&&(o.append("proofForActionIForm",this.form.controls.proofForActionIForm.value),o.append("actionDescription",this.form.controls.actionDescription.value),o.append("closingDate",this.form.controls.closingDate.value)),this.apiService.post("CustomerComplaints",o).subscribe(n=>{n&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}else this.utilService.FillUpFields()}onSelectionSiteCode(){""!=this.form.controls.siteCode.value&&this.getProjectData()}translateToolTip(e){return this.translate.instant(e)}ToDateString(e){var o;return null!=e?null===(o=this.datepipe.transform(e.toString(),"yyyy-MM-dd"))||void 0===o?void 0:o.toString():""}openDatePicker(e){e.open()}print(){const o=document.getElementById("printableArea"),n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}onFileChanged(e,o){let n=new FileReader;if(e.target.files&&e.target.files.length>0){let s=e.target.files[0];n.readAsDataURL(s),n.onload=()=>{1===o?(this.proofForComplaintUrl=n.result,this.form.patchValue({proofForComplaintIForm:s,proofForComplaintFileName:n.result})):2===o&&(this.proofForActionUrl=n.result,this.form.patchValue({proofForActionIForm:s,proofForActionFileName:n.result}))}}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(Z.sK),t.Y36(l.qu),t.Y36(x._),t.Y36(y.t),t.Y36(b.s),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-customer-complaint"]],features:[t.qOj],decls:2,vars:2,consts:[["novalidate","","class","mt-4",3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],["myform","ngForm"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],["id","inputEntry",1,"row","mt-2"],[1,"col-md-4","col-lg-4"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete"],[3,"optionSelected"],["auto1","matAutocomplete"],["style","font-size:smaller",3,"value",4,"ngFor","ngForOf"],["style","color:red",4,"ngIf"],["formControlName","projectCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],[1,"col-md-3","col-lg-3"],["bindLabel","text","bindValue","value","formControlName","reasonCode",3,"items"],[3,"control"],["type","text","formControlName","complaintBy",1,"form-control",3,"placeholder"],["matInput","","type","datetime-local","formControlName","complaintDate",1,"form-control","datapickerinput",3,"placeholder"],["bindLabel","text","bindValue","value","formControlName","bookedBy",3,"items"],[1,"col-md-6","col-lg-6"],["type","text","formControlName","complaintDescription",1,"form-control",3,"placeholder"],["class","col-md-2 col-lg-2",4,"ngIf"],["class","col-md-4 col-lg-4",4,"ngIf"],["class","col-md-3 col-lg-3",4,"ngIf"],["class","col-md-7 col-lg-7",4,"ngIf"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[2,"font-size","smaller",3,"value"],[2,"color","red"],[3,"value"],[1,"col-md-2","col-lg-2"],["accept","image/*","type","file",2,"width","100%",3,"change"],["width","250","height","200",3,"src"],["matInput","","type","datetime-local","value","curDate","formControlName","closingDate",1,"form-control","datapickerinput",3,"placeholder"],[1,"col-md-7","col-lg-7"],["type","text","formControlName","actionDescription",1,"form-control",3,"placeholder"],["accept","image/*,.pdf","type","file",2,"width","100%",3,"change"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printableArea",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px","height","100%"],[2,"page-break-after","always","height","100vh"],["id","tableData"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],[2,"width","35%"],[2,"text-align","left"],[2,"text-align","center"],[1,"float-center",2,"width","200px","height","150px",3,"src"],[2,"text-align","right"],["border","1","cellpadding","5","cellspacing","0",2,"width","100%"],["rowspan","2",2,"border","1px solid #878787","padding","5px","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","15%",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","word-wrap","break-word"],["width","35%",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["width","35%",2,"white-space","pre-wrap","border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["width","35%",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400","white-space","pre-wrap"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["colspan","4",2,"border","none","padding","5px","text-align","left","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","4",2,"border","none","padding","5px","text-align","justify","white-space","pre-wrap","font-size","0.675rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","400"],["id","footer"],[2,"background","#808080"],["colspan","6"],[2,"text-align","center","word-wrap","break-word"],["width","20%"],[2,"text-align","center","word-wrap","break-word","vertical-align","top"],["rowspan","2",2,"border","1px solid #878787","padding","5px","text-align","center","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["rowspan","2"]],template:function(e,o){1&e&&(t.YNc(0,k4,112,91,"form",0),t.YNc(1,M4,150,92,"ng-container",1)),2&e&&(t.Q6J("ngIf","view"!=o.action),t.xp6(1),t.Q6J("ngIf","view"==o.action))},directives:[f.O5,l._Y,l.JL,l.sg,ht.z,l.Fj,at.ZL,l.JJ,l.oH,at.XC,f.sg,l.EJ,l.u,l.YN,l.Kr,Dt.w9,G.s,St.ey],pipes:[Z.X$,f.Ov,f.uU],encapsulation:2}),i})();function P4(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",51),t.TgZ(1,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModel()}),t._uU(2," \xd7"),t.qZA(),t.qZA()}}function F4(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function I4(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function Y4(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function J4(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function Q4(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function B4(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function H4(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reason_Code")," "))}function V4(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCode)}}function $4(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reason_Code")," "))}function G4(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCodeNameEng)}}function W4(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Reason_Code")," "))}function z4(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCodeNameAr)}}function X4(i,a){1&i&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Status")," "))}function K4(i,a){if(1&i&&(t.TgZ(0,"td",54),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.status)}}function tb(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function eb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",58),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().createUpdate(n.id,"edit")}),t._UZ(1,"i",62),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function ob(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",58),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().startAction(n)}),t._UZ(1,"i",63),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Start_Action"))}}function ib(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",58),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().createUpdate(n.id,"closing")}),t._UZ(1,"i",64),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Close"))}}function nb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().showImage(null==n?null:n.proofForComplaint)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"View_Complaint")))}function ab(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t._uU(1," | "),t.TgZ(2,"a",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().showImage(null==n?null:n.proofForAction)}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"View_Action")))}function sb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",56),t.YNc(1,eb,3,1,"span",57),t.YNc(2,ob,3,1,"span",57),t.YNc(3,ib,3,1,"span",57),t.TgZ(4,"span",58),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().createUpdate(s.id,"view")}),t._UZ(5,"i",59),t._uU(6,"\xa0\xa0"),t.qZA(),t.TgZ(7,"span",60),t.YNc(8,nb,4,3,"span",61),t.YNc(9,ab,5,3,"span",61),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isOpen)&&e.canEdit),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isOpen),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isInprogress),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View")),t.xp6(4),t.Q6J("ngIf",null!=(null==e?null:e.proofForComplaint)),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isClosed)&&null!=(null==e?null:e.proofForAction))}}function rb(i,a){1&i&&t._UZ(0,"tr",66)}function lb(i,a){1&i&&t._UZ(0,"tr",67)}const co=function(){return{standalone:!0}};let po=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A,S){super(c),this.datepipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=m,this.pageService=h,this.oprService=C,this.translate=A,this.dialogRef=S,this.displayedColumns=["customerCode","siteCode","projectCode","reasonCodeNameEng","reasonCodeNameAr","status","Actions"],this.searchValue="",this.sortingOrder="id asc",this.isLoading=!1,this.isUpdating=!1,this.listType="",this.approvedStatus="",this.project={projectCode:"-NA-",siteCode:"-NA-"},this.isArabic=!1,this.reasonCodeSelectionList=[]}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.initialLoading()}initialLoading(){this.LoadReasonCodeSelectionList(),this.loadList(0,this.pageService.pageCount,"",this.sortingOrder,"","")}LoadReasonCodeSelectionList(){this.apiService.getall("ReasonCode/getSelectReasonCodeListForCustomerComplaint").subscribe(e=>{null!=e&&(this.reasonCodeSelectionList=e,this.reasonCodeSelectionList.forEach(o=>{o.text=this.isArabic?o.textTwo+"-"+o.value:o.text+"-"+o.value}))})}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}loadList(e,o,n,s,r="",c){this.isLoading=!0,this.apiService.getPagination(`CustomerComplaints/getCustomerComplaintsPagedListByProjectSite/${this.project.projectCode}/${this.project.siteCode}`,this.utilService.getOprQueryString(e,o,n,s,this.approvedStatus,"",0,"",this.listType)).subscribe(p=>{this.isLoading=!1,this.totalItemsCount=0,this.data=new _.by(p.items),this.totalItemsCount=p.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount,this.isLoading=!1}),this.data.sort=this.sort},p=>{this.utilService.ShowApiErrorMessage(p),this.isLoading=!1})}applyFilter(e,o){(e||o)&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,"",this.listType))}translateToolTip(e){return`${this.translate.instant(e)}`}refresh(){this.searchValue="",this.sortingOrder="id desc",this.approvedStatus="",this.listType="",this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}loadApprovals(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder,this.approvedStatus,this.listType)}closeModel(){this.dialogRef.close(!0)}delete(e){let n=e.requestNumber;this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(r=>{r&&n>0&&this.apiService.delete("CustomerComplaints",n).subscribe(c=>{this.utilService.OkMessage(),this.ngOnInit()})},r=>this.utilService.ShowApiErrorMessage(r))}createUpdate(e,o){let n=this.oprService.openAutoHeightWidthDialog(this.dialog,R4);n.componentInstance.dbops=g.O.create,n.componentInstance.modalTitle="Customer_Complaint",n.componentInstance.modalBtnTitle="createUpdate",n.componentInstance.id=e,n.componentInstance.action=o,"-NA-"!=this.project.projectCode&&(n.componentInstance.isFromProjectsAction=!0),n.componentInstance.projectData=this.project,n.afterClosed().subscribe(s=>{s&&!0===s&&this.initialLoading()})}startAction(e){this.utilService.openDeleteConfirmDialog(this.dialog,xt).afterClosed().subscribe(n=>{n&&this.apiService.get("CustomerComplaints/StartAction/",e.id).subscribe(s=>{s&&(this.utilService.OkMessage(),this.initialLoading())},s=>{console.error(s),this.utilService.ShowApiErrorMessage(s)})})}showImage(e){window.open(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-customer-complaints"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:96,vars:47,consts:[["class","modal-body",4,"ngIf"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"col-md-2"],[1,"mr-sm-2"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelOptions","ngModelChange"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","change","ngModelChange"],["value",""],["value","open"],["value","closed"],["value","inProgress"],[1,"col-md-3"],[1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary",3,"click"],[3,"click"],[1,"btn","btn-primary","icon-refresh"],[1,"col-md-1"],[3,"isLoading"],[1,"col-md-2","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","projectCode"],["matColumnDef","reasonCode"],["matColumnDef","reasonCodeNameEng"],["matColumnDef","reasonCodeNameAr"],["matColumnDef","status"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[1,"modal-body"],["type","button","aria-hidden","true",1,"close",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-eye"],[2,"color","navy","font-style","italic"],[4,"ngIf"],[1,"fas","fa-edit"],[1,"fas","fa-check"],[1,"fas","fa-pencil-alt"],[2,"color","blue",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.YNc(0,P4,3,0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"h3",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"nav",6),t.TgZ(9,"ol",7),t.TgZ(10,"li",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"li",8),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"li",9),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"div",2),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",13),t.TgZ(24,"div",2),t.TgZ(25,"div",14),t.TgZ(26,"label",15),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"ng-select",16),t.NdJ("ngModelChange",function(s){return o.listType=s}),t.qZA(),t.qZA(),t.TgZ(30,"div",14),t.TgZ(31,"label",15),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"select",17),t.NdJ("change",function(){return o.loadApprovals()})("ngModelChange",function(s){return o.approvedStatus=s}),t.TgZ(35,"option",18),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"option",19),t._uU(39,"Open"),t.qZA(),t.TgZ(40,"option",20),t._uU(41,"Closed"),t.qZA(),t.TgZ(42,"option",21),t._uU(43,"Inprogress"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",22),t._UZ(45,"label",15),t.TgZ(46,"input",23),t.NdJ("ngModelChange",function(s){return o.searchValue=s}),t.ALo(47,"translate"),t.qZA(),t.qZA(),t.TgZ(48,"div",14),t.TgZ(49,"button",24),t.NdJ("click",function(){return o.applyFilter(o.searchValue,o.listType)}),t._uU(50),t.ALo(51,"translate"),t.qZA(),t._uU(52," \xa0 "),t.TgZ(53,"a",25),t.NdJ("click",function(){return o.refresh()}),t._UZ(54,"i",26),t.qZA(),t._uU(55," \xa0 "),t.qZA(),t.TgZ(56,"div",27),t._UZ(57,"spinner-loader",28),t.qZA(),t.TgZ(58,"div",29),t.TgZ(59,"a",30),t.NdJ("click",function(){return o.createUpdate(0,"new")}),t._UZ(60,"i",31),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(63,"div",32),t.TgZ(64,"div",33),t.TgZ(65,"div",34),t.ynx(66),t.TgZ(67,"table",35),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(68,36),t.YNc(69,F4,3,3,"th",37),t.YNc(70,I4,2,1,"td",38),t.BQk(),t.ynx(71,39),t.YNc(72,Y4,3,3,"th",37),t.YNc(73,J4,2,1,"td",38),t.BQk(),t.ynx(74,40),t.YNc(75,Q4,3,3,"th",37),t.YNc(76,B4,2,1,"td",38),t.BQk(),t.ynx(77,41),t.YNc(78,H4,3,3,"th",37),t.YNc(79,V4,2,1,"td",38),t.BQk(),t.ynx(80,42),t.YNc(81,$4,3,3,"th",37),t.YNc(82,G4,2,1,"td",38),t.BQk(),t.ynx(83,43),t.YNc(84,W4,3,3,"th",37),t.YNc(85,z4,2,1,"td",38),t.BQk(),t.ynx(86,44),t.YNc(87,X4,3,3,"th",37),t.YNc(88,K4,2,1,"td",38),t.BQk(),t.ynx(89,45),t.YNc(90,tb,3,3,"th",46),t.YNc(91,sb,10,6,"td",47),t.BQk(),t.YNc(92,rb,1,0,"tr",48),t.YNc(93,lb,1,0,"tr",49),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.ynx(94),t.TgZ(95,"mat-paginator",50),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA()),2&e&&(t.Q6J("ngIf","-NA-"!=o.project.projectCode),t.xp6(5),t.hij(" ",t.lcZ(6,25,"Customer_Complaints")," "),t.xp6(6),t.hij(" ",t.lcZ(12,27,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(15,29,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(18,31,"Customer_Complaints")),t.xp6(10),t.Oqu(t.lcZ(28,33,"RequestType")),t.xp6(2),t.Q6J("items",o.reasonCodeSelectionList)("ngModel",o.listType)("ngModelOptions",t.DdM(45,co)),t.xp6(3),t.Oqu(t.lcZ(33,35,"Approval_Status")),t.xp6(2),t.Q6J("ngModel",o.approvedStatus)("ngModelOptions",t.DdM(46,co)),t.xp6(2),t.Oqu(t.lcZ(37,37,"Select")),t.xp6(10),t.MGl("placeholder","",t.lcZ(47,39,"Search"),"..."),t.Q6J("ngModel",o.searchValue),t.xp6(4),t.Oqu(t.lcZ(51,41,"Search")),t.xp6(7),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(62,43,"New_Request")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[f.O5,Dt.w9,l.JJ,l.On,l.EJ,l.YN,l.Kr,l.Fj,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function cb(i,a){1&i&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function pb(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",e.requestData.siteCode," ")}}function ub(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().uploadFile()}),t.ALo(1,"translate"),t.qZA()}2&i&&t.s9C("value",t.lcZ(1,1,"Upload"))}let we=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.filePath=""}ngOnInit(){null!=this.projectSite?(this.requestData=this.projectSite,this.filePath=this.authService.ApiEndPoint().replace("api","")+"Uploads/ContractForms/"):null!=this.project&&(this.requestData=this.project,this.requestData.siteCode="",this.filePath=this.authService.ApiEndPoint().replace("api","")+"Uploads/ContractForms/")}submit(){}closeModel(){this.dialogRef.close()}onFileChanged(e,o){let n=new FileReader;if(e.target.files&&e.target.files.length>0){let s=e.target.files[0];n.readAsDataURL(s),n.onload=()=>{1===o&&(this.requestData.fileIForm=s,this.requestData.fileName=n.result)}}}uploadFile(){var e;if(null!=this.requestData.fileIForm){const o=new FormData;o.append("id",this.requestData.id),o.append("fileIForm",this.requestData.fileIForm),o.append("fileName",this.filePath),o.append("isAdendum",null!==(e=this.requestData.isAdendum)&&void 0!==e&&e),this.apiService.post("projectSites/uploadContractForm",o).subscribe(n=>{n&&(this.utilService.OkMessage(),this.dialogRef.close(!0))},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}else this.utilService.ShowApiErrorMessage(this.translate.instant("Select_File"))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-upload-file"]],features:[t.qOj],decls:36,vars:18,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"row",2,"text-align","center"],[1,"col-md-12","col-lg-12"],[1,"table","table-bordered","no-wrap"],[4,"ngIf"],[1,"col-md-8","col-lg-8"],[1,"form-group"],["accept",".pdf","type","file",3,"change"],[1,"col-md-4","col-lg-4","align-content-center"],["type","button","class","btn waves-effect waves- active btn-rounded   btn-primary btn-midblock",3,"value","click",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-","active","btn-rounded","btn-primary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"div"),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"table",4),t.TgZ(9,"thead"),t.TgZ(10,"tr"),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.YNc(17,cb,3,3,"th",5),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"tbody"),t.TgZ(22,"tr"),t.TgZ(23,"td"),t._uU(24),t.qZA(),t.TgZ(25,"td"),t._uU(26),t.qZA(),t.YNc(27,pb,2,1,"td",5),t.TgZ(28,"td"),t._uU(29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",6),t.TgZ(31,"div",7),t.TgZ(32,"input",8),t.NdJ("change",function(s){return o.onFileChanged(s,1)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",9),t.YNc(34,ub,2,3,"input",10),t._uU(35," \xa0 "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,10,"Uploading_ContractForm")),t.xp6(11),t.hij(" ",t.lcZ(13,12,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(16,14,"Project_Code")," "),t.xp6(2),t.Q6J("ngIf",o.requestData.isAdendum),t.xp6(2),t.hij(" ",t.lcZ(20,16,"Request_Number")," "),t.xp6(5),t.hij(" ",o.requestData.customerCode," "),t.xp6(2),t.hij(" ",o.requestData.projectCode," "),t.xp6(1),t.Q6J("ngIf",o.requestData.isAdendum),t.xp6(2),t.hij(" ",o.requestData.id," "),t.xp6(5),t.Q6J("ngIf",null!=(null==o.requestData?null:o.requestData.fileIForm)))},directives:[f.O5],pipes:[Z.X$],encapsulation:2}),i})();function db(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function mb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function _b(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function gb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function hb(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name")," "))}function fb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng)}}function Zb(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function Cb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function Ab(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function Tb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function vb(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Start_Date")," "))}function xb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.startDate,"longDate"))}}function qb(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"End_Date")," "))}function bb(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.endDate,"longDate"))}}function yb(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Addendum")," "))}function Sb(i,a){1&i&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function wb(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function Ub(i,a){if(1&i&&(t.TgZ(0,"td",35),t.YNc(1,Sb,3,3,"span",36),t.YNc(2,wb,3,3,"ng-template",null,37,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isAdendum)("ngIfElse",o)}}function Lb(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Db(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().shiftPlan(n)}),t._UZ(1,"i",47),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Shift_Plan"))}}function Nb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().skillsetPlan(n)}),t._UZ(1,"i",48),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("SkillSet_Plan"))}}function Eb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().resourceCosting(n)}),t._UZ(2,"i",49),t._uU(3,"\xa0"),t.qZA(),t.TgZ(4,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().logisticsCosting(n)}),t._UZ(5,"i",50),t._uU(6,"\xa0"),t.qZA(),t.TgZ(7,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().materialCosting(n)}),t._UZ(8,"i",51),t._uU(9,"\xa0"),t.qZA(),t.TgZ(10,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().financialExpenseCosting(n)}),t._UZ(11,"i",52),t._uU(12,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(4).$implicit,o=t.oxw();t.xp6(1),t.Tol(o.getResourceColor(e)),t.Q6J("matTooltip",o.translateToolTip("Resource_Costing")),t.xp6(3),t.Tol(o.getLogisticsColor(e)),t.Q6J("matTooltip",o.translateToolTip("Logistics_Costing")),t.xp6(3),t.Tol(o.getMaterialColor(e)),t.Q6J("matTooltip",o.translateToolTip("Material_Costing")),t.xp6(3),t.Tol(o.getFinanceExpenceColor(e)),t.Q6J("matTooltip",o.translateToolTip("Financial_Expense_Costing"))}}function Ob(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().enableEditCostingButton(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(5);t.Q6J("matTooltip",e.translateToolTip("Edit_Costing"))}}function jb(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Eb,13,16,"span",42),t.YNc(2,Ob,3,1,"span",45),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isEstimationForProjectApproved&&!e.isAdendum)}}function kb(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,jb,3,2,"span",42),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",!e.isConvertedToProposal&&e.authorities.canModifyEstimation)}}function Mb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().calendarDays(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Generate_Monthly_Roaster"))}}function Rb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().assignEmployyesToProjectSite(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Assign_Employyes_To_ProjectSite"))}}function Pb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().mappingEmpToResourceForProjectSite(n)}),t._UZ(1,"i",56),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Mapping_Employees_To_Resource_For_ProjectSite"))}}function Fb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().openMonthlyRoaster(n)}),t._UZ(1,"i",57),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Lock_Shifts"))}}function Ib(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().employeeAttendance(n)}),t._UZ(1,"i",58),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Employee_Attendance"))}}function Yb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().employeePayrollAttendance(n)}),t._UZ(1,"i",59),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Employee_Attendance_Payroll"))}}function Jb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ViewCustomerVisitForms(n)}),t._UZ(1,"i",60),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Customer_Visit_Forms"))}}function Qb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ViewCustomerComplaints(n)}),t._UZ(1,"i",61),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Customer_Complaints"))}}function Bb(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Db,3,1,"span",45),t.YNc(2,Nb,3,1,"span",45),t.YNc(3,kb,2,1,"span",42),t.YNc(4,Mb,3,1,"span",45),t.YNc(5,Rb,3,1,"span",45),t.YNc(6,Pb,3,1,"span",45),t.YNc(7,Fb,3,1,"span",45),t.YNc(8,Ib,3,1,"span",45),t.YNc(9,Yb,3,1,"span",45),t.YNc(10,Jb,3,1,"span",45),t.YNc(11,Qb,3,1,"span",45),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.authorities.canModifyEstimation),t.xp6(1),t.Q6J("ngIf",e.isShiftsAssigned&&(e.authorities.canModifyEstimation||e.isAdmin)&&!e.isResourcesAssigned&&(!e.isEstimationForProjectApproved||!e.isEstimationCompleted&&e.isAdendum)),t.xp6(1),t.Q6J("ngIf",e.isShiftsAssigned&&e.isSkillSetsMapped),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract)}}function Hb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().ReopenProject(n)}),t._UZ(1,"i",68),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Reopen_Project_Site"),""))}function Vb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().ExtendProject(n)}),t._UZ(1,"i",68),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Extend_Project_Site"),""))}function $b(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().RevokeSuspension(n)}),t._UZ(1,"i",68),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Revoke_Suspension"),""))}function Gb(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Hb,4,3,"a",66),t.YNc(2,Vb,4,3,"a",66),t.YNc(3,$b,4,3,"a",66),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",null==e?null:e.isClosed),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isClosed||null!=e&&e.isInProgress||null!=e&&e.isSuspended)),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isSuspended)}}function Wb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ViewRequests(n)}),t._UZ(2,"i",68),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().CloseProject(n)}),t._UZ(6,"i",68),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().SuspendProject(n)}),t._UZ(10,"i",68),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ExtendProject(n)}),t._UZ(14,"i",68),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,4,"View_Requests"),""),t.xp6(4),t.hij(" ",t.lcZ(8,6,"Close_Project_Site"),""),t.xp6(4),t.hij(" ",t.lcZ(12,8,"Suspend_Project_Site"),""),t.xp6(4),t.hij(" ",t.lcZ(16,10,"Extend_Project_Site"),""))}function zb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().ExtendProject(n)}),t._UZ(1,"i",68),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Extend_Project_Site"),""))}function Xb(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ReopenProject(n)}),t._UZ(2,"i",68),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,zb,4,3,"a",66),t.qZA()}if(2&i){const e=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",t.lcZ(4,2,"Reopen_Project_Site"),""),t.xp6(2),t.Q6J("ngIf",null==e?null:e.canExtendProject)}}function Kb(i,a){if(1&i&&(t.TgZ(0,"span",62),t.TgZ(1,"a",63),t._UZ(2,"i",64),t.qZA(),t.TgZ(3,"span",65),t.YNc(4,Gb,4,3,"span",42),t.YNc(5,Wb,17,12,"span",42),t.YNc(6,Xb,6,4,"span",42),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("matTooltip",o.translateToolTip("Project_Site_Variance")),t.xp6(4),t.Q6J("ngIf",null==e?null:e.isInActive),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isInActive)&&(null==e?null:e.isInProgress)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isInProgress)&&!(null!=e&&e.isInActive)&&e.isConvrtedToContract)}}function ty(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().enableEditCostingButton(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit_Costing"))}}function ey(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().estimationReport(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Estimation_Report"))}}function oy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().summaryReport(n)}),t._UZ(1,"i",72),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Summary_Report"))}}function iy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approveEstimation(n)}),t._UZ(1,"i",73),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Approve_Estimation"))}}function ny(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().printEstimation(n)}),t._UZ(1,"i",74),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Print_Estimation"))}}function ay(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",75),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().printProposal(n)}),t._UZ(1,"i",76),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Print_Proposal"))}}function sy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().convertToContract(n)}),t._UZ(1,"i",77),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Merge_To_Contract"))}}function ry(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().uploadFile(n)}),t._UZ(1,"i",78),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function ly(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewContract(n)}),t._UZ(1,"i",79),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Addendum"))}}function cy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewUploadedFile(n)}),t._UZ(1,"i",79),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Download_File"))}}function py(i,a){if(1&i&&(t.TgZ(0,"span",69),t.YNc(1,ty,3,1,"a",45),t.YNc(2,ey,3,1,"a",45),t.YNc(3,oy,3,1,"a",45),t.YNc(4,iy,3,1,"a",45),t.YNc(5,ny,3,1,"a",45),t.YNc(6,ay,3,1,"a",70),t.YNc(7,sy,3,1,"a",45),t.YNc(8,ry,3,1,"a",45),t.YNc(9,ly,3,1,"a",45),t.YNc(10,cy,3,1,"a",45),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!(null!=e&&e.isApproved)),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isApproved&&e.hasAuthority&&e.authorities.canApproveEstimation&&!e.approvedUser),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isApproved&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isApproved&&!e.fileUrl&&(e.canApprove||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract&&!e.fileUrl),t.xp6(1),t.Q6J("ngIf",e.fileUrl)}}function uy(i,a){if(1&i&&(t.TgZ(0,"td",41),t.YNc(1,Bb,12,11,"span",42),t.YNc(2,Kb,7,4,"span",43),t.YNc(3,py,11,10,"span",44),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isInActive)&&(null==e?null:e.isInProgress)),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isAdendum)}}function dy(i,a){1&i&&t._UZ(0,"tr",80)}function my(i,a){1&i&&t._UZ(0,"tr",81)}let _y=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.oprService=m,this.pageService=h,this.translate=C,this.dialogRef=A,this.displayedColumns=["customerCode","projectCode","Project_Name","SiteCode","Branch_Code","startDate","endDate","isAdendum","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.form=this.fb.group({}),this.searchValue=this.project.projectCode,this.initialLoading()}refresh(){this.searchValue=this.project.projectCode,this.initialLoading()}initialLoading(){this.searchValue=this.project.projectCode,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.project.projectCode,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ProjectSites/getProjectSitesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.isArab=this.isArab,c.componentInstance.type="ForAddingSite",c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openDialogManage(e,o,n,s,r){let c=this.oprService.openAutoHeightWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.requestData=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openPaginationWindow(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialog(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,n);p.componentInstance.dbops=e,p.componentInstance.modalTitle=o,p.componentInstance.confirmType=s,p.afterClosed().subscribe(u=>{(u&&1==u||u.res)&&this.apiService.post("ProjectBudgetCosting/skippEstimation",this.project).subscribe(d=>{this.utilService.OkMessage(),this.ngOnInit()},d=>{console.error(d),this.utilService.ShowApiErrorMessage(d)})})}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}resourceCosting(e){this.openDialogManage(e,g.O.create,"Resource_Costing","Save",ne)}logisticsCosting(e){this.openDialogManage(e,g.O.create,"Logistics_Vehicle_Costing","Save",se)}materialCosting(e){this.openDialogManage(e,g.O.create,"Material_Costing","Save",re)}financialExpenseCosting(e){this.openDialogManage(e,g.O.create,"Financial_Epense_Costing","Save",le)}estimationReport(e){this.openDialogManage(e,g.O.create,"Estimation_Cnsolidate_Report","Save",ce)}summaryReport(e){this.openDialogManage(e,g.O.create,"Estimation_Summary_Report","Save",pe)}convertToContract(e){this.openFullWindow(e,g.O.create,"Creating_Contract","Save",Vt)}printEstimation(e){this.openDialogManage(e,g.O.create,"Estimation_Cnsolidate_Report","Print",ge)}assignEmployyesToProjectSite(e){this.openFullWindow(e,g.O.create,"Assigning_Employees_To_Site","Save",he)}mappingEmpToResourceForProjectSite(e){this.openDialogManage(e,g.O.create,"Mapping_Employees_To_Resources_For_Site","Save",fe)}printProposal(e){this.openDialogManage(e,g.O.create,"Project_Proposal","Print",_e)}shiftPlan(e){this.openDialogManage(e,g.O.create,"Shifts_Plan_For_Project","Save",ue)}skillsetPlan(e){this.openDialogManage(e,g.O.create,"Skillset_Plan_For_Project","Save",de)}calendarDays(e){this.openFullWindow(e,g.O.create,"Calander_Days","Save",me)}viewContract(e){this.openFullWindow(e,g.O.create,"Adendum_Contract","View",Vt)}employeeAttendance(e){this.openFullWindow(e,g.O.create,"Employee_Attendance","View",Ze)}submit(){}openMonthlyRoaster(e){this.openFullWindow(e,g.O.create,"Monthly_Roaster","Save",ae)}approveEstimation(e){this.openApprovalDialog(e.branchCode,e.projectCode+"/"+e.siteCode,g.O.create,"Estimation_Approval","Save","ADNDM",Wt)}enableEditCostingButton(e){e.isEstimationCompleted=!1}convertToProposal(e){this.apiService.post("ProjectBudgetCosting/convertProjectSiteToProposal",e).subscribe(o=>{this.utilService.OkMessage(),this.ngOnInit()},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}translateToolTip(e){return`${this.translate.instant(e)}`}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}closeModel(){this.dialogRef.close(!0)}skippEstimation(e){this.project=e,console.log(e),this.openConfirmationDialog(g.O.create,"Are_You_Sure?",xt,"general","Skipp_Estimation",0)}CloseProject(e){e.isExtendProjReq=!1,e.isReOpenReq=!1,e.isRevokeSuspReq=!1,e.isSuspendReq=!1,e.isCloseReq=!0,e.id=0,this.openDialogManage(e,g.O.create,"Close_Project_Site","Save",Et)}CancelProject(){}SuspendProject(e){e.isExtendProjReq=!1,e.isReOpenReq=!1,e.isRevokeSuspReq=!1,e.isSuspendReq=!0,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.O.create,"Suspend_Project_Site","Save",Et)}ExtendProject(e){e.isExtendProjReq=!0,e.isReOpenReq=!1,e.isRevokeSuspReq=!1,e.isSuspendReq=!1,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.O.create,"Extend_Project_Site","Save",Et)}ReopenProject(e){e.isExtendProjReq=!1,e.isReOpenReq=!0,e.isRevokeSuspReq=!1,e.isSuspendReq=!1,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.O.create,"Reopen_Project_Site","Save",Et)}RevokeSuspension(e){e.isExtendProjReq=!1,e.isReOpenReq=!1,e.isRevokeSuspReq=!0,e.isSuspendReq=!1,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.O.create,"Revoke_Suspension","Save",Et)}ViewRequests(e){this.openPaginationWindow(e,g.O.create,"","",no)}ViewCustomerVisitForms(e){let o=this.oprService.openAutoHeightWidthDialog(this.dialog,lo);o.componentInstance.dbops=g.O.create,o.componentInstance.modalTitle="",o.componentInstance.modalBtnTitle="",o.componentInstance.project=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}ViewCustomerComplaints(e){let o=this.oprService.openAutoHeightWidthDialog(this.dialog,po);o.componentInstance.dbops=g.O.create,o.componentInstance.modalTitle="",o.componentInstance.modalBtnTitle="",o.componentInstance.project=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}employeePayrollAttendance(e){let o=this.oprService.openAutoHeightWidthDialog(this.dialog,Tq);o.componentInstance.projectCode=e.projectCode,o.componentInstance.siteCode=e.siteCode,o.componentInstance.isFromProjectSiteActions=!0,o.afterClosed().subscribe(n=>{})}uploadFile(e){let o=this.oprService.openAutoWidthDialog(this.dialog,we);o.componentInstance.projectSite=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewUploadedFile(e){window.open(e.fileUrl)}getResourceColor(e){return e.isResourcesAssigned?"GreenText":"RedText"}getLogisticsColor(e){return e.isLogisticsAssigned?"GreenText":"RedText"}getMaterialColor(e){return e.isMaterialAssigned?"GreenText":"RedText"}getFinanceExpenceColor(e){return e.isExpenceOverheadsAssigned?"GreenText":"RedText"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(W.f),t.Y36(V.N),t.Y36(Z.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-project-sites"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:59,vars:16,consts:[[1,"modal-body"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","projectCode"],["matColumnDef","Project_Name"],["matColumnDef","SiteCode"],["matColumnDef","Branch_Code"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","isAdendum"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[4,"ngIf"],[3,"matTooltip",4,"ngIf"],["style","padding-left:5px",4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-clock"],[1,"fas","fa-user-plus"],[1,"icon-people"],[1,"fas","fa-bus"],[1,"fas","fa-fax"],[1,"fas","fa-sort-amount-up"],[1,"far","fa-edit"],[1,"fas","fa-calendar-plus"],[1,"fas","fa-tasks"],[1,"fas","fa-users"],[1,"fas","fa-lock"],[1,"fas","fa-calendar-check"],[1,"fab","fa-wpforms"],[1,"fas","fa-motorcycle"],[1,"fas","fa-phone-square"],[3,"matTooltip"],["id","navbarDropdown","role","list","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"fas","fa-sun"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],["class","dropdown-item tableicons",3,"click",4,"ngIf"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],[2,"padding-left","5px"],[3,"click",4,"ngIf"],[1,"icon-eye"],[1,"fas","fa-list"],[1,"fas","fa-check-circle"],[1,"fas","fa-print"],[3,"click"],[1,"fas","fa-print",3,"matTooltip"],[1,"far","fa-handshake"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(2," \xd7"),t.qZA(),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"h3",5),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"nav",7),t.TgZ(11,"ol",8),t.TgZ(12,"li",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",10),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",11),t.TgZ(19,"div",3),t.TgZ(20,"div",12),t.TgZ(21,"div",13),t.TgZ(22,"div",14),t._UZ(23,"div",3),t._UZ(24,"div",15),t.TgZ(25,"div",16),t.ynx(26),t.TgZ(27,"table",17),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(28,18),t.YNc(29,db,3,3,"th",19),t.YNc(30,mb,2,1,"td",20),t.BQk(),t.ynx(31,21),t.YNc(32,_b,3,3,"th",19),t.YNc(33,gb,2,1,"td",20),t.BQk(),t.ynx(34,22),t.YNc(35,hb,3,3,"th",19),t.YNc(36,fb,2,1,"td",20),t.BQk(),t.ynx(37,23),t.YNc(38,Zb,3,3,"th",19),t.YNc(39,Cb,2,1,"td",20),t.BQk(),t.ynx(40,24),t.YNc(41,Ab,3,3,"th",19),t.YNc(42,Tb,2,1,"td",20),t.BQk(),t.ynx(43,25),t.YNc(44,vb,3,3,"th",19),t.YNc(45,xb,3,4,"td",20),t.BQk(),t.ynx(46,26),t.YNc(47,qb,3,3,"th",19),t.YNc(48,bb,3,4,"td",20),t.BQk(),t.ynx(49,27),t.YNc(50,yb,3,3,"th",19),t.YNc(51,Ub,4,2,"td",20),t.BQk(),t.ynx(52,28),t.YNc(53,Lb,3,3,"th",29),t.YNc(54,uy,4,3,"td",30),t.BQk(),t.YNc(55,dy,1,0,"tr",31),t.YNc(56,my,1,0,"tr",32),t.qZA(),t.BQk(),t.qZA(),t.ynx(57),t.TgZ(58,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,10,o.modalTitle)," "),t.xp6(6),t.hij(" ",t.lcZ(14,12,o.project.projectCode)," "),t.xp6(3),t.Oqu(t.lcZ(17,14,"Sites")),t.xp6(11),t.Q6J("dataSource",o.data),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$,f.uU],styles:["span.RedText[_ngcontent-%COMP%] {\n    color: red;\n\n  }\n  span.GreenText[_ngcontent-%COMP%] {\n    color: lawngreen;\n     }\n  span.BlueText[_ngcontent-%COMP%] {\n    color: blue;\n     }"]}),i})();function gy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().generateReport()}),t._uU(1," Generate Report "),t.qZA()}}function hy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",54),t._uU(2," print "),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportexcel()}),t._uU(5,"ExportExcel"),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.Q6J("useExistingCss",!0))}function fy(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function Zy(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function Cy(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function Ay(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function Ty(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name")," "))}function vy(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng)}}function xy(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Start_Date")," "))}function qy(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.startDate,"longDate"))}}function by(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"End_Date")," "))}function yy(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.endDate,"longDate"))}}function Sy(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function wy(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function Uy(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function Ly(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().estimationReport(n)}),t._UZ(1,"i",63),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Estimation_Report"))}}function Dy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().summaryReport(n)}),t._UZ(1,"i",64),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Summary_Report"))}}function Ny(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveEstimation(n)}),t._UZ(1,"i",65),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Estimation"))}}function Ey(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().printEstimation(n)}),t._UZ(1,"i",66),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Print_Estimation"))}}function Oy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().printProposal(n)}),t._UZ(1,"i",68),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Print_Proposal"))}}function jy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().convertToContract(n)}),t._UZ(1,"i",69),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Convert_To_Contract"))}}function ky(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadFile(n)}),t._UZ(1,"i",70),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function My(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewContract(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_Contract"))}}function Ry(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewUploadedFile(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Download_File"))}}function Py(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",58),t.YNc(1,Ly,3,1,"span",59),t.YNc(2,Dy,3,1,"span",59),t.YNc(3,Ny,3,1,"span",59),t.YNc(4,Ey,3,1,"span",59),t.YNc(5,Oy,3,1,"span",60),t.YNc(6,jy,3,1,"span",59),t.YNc(7,ky,3,1,"a",59),t.YNc(8,My,3,1,"a",59),t.YNc(9,Ry,3,1,"a",59),t.TgZ(10,"span",61),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewProjectSites(s)}),t._UZ(11,"i",62),t._uU(12,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isApproved&&(e.hasAuthority&&e.authorities.canApproveEstimation||e.isAdmin)&&!e.approvedUser),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",!e.isConvrtedToContract&&e.isEstimationCompleted&&e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract&&e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isConvertedToProposal&&e.isApproved&&!e.fileUrl&&(e.canApprove||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract&&!e.fileUrl),t.xp6(1),t.Q6J("ngIf",e.fileUrl),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Sites"))}}function Fy(i,a){1&i&&t._UZ(0,"tr",72)}function Iy(i,a){1&i&&t._UZ(0,"tr",73)}function Yy(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",77),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.ALo(6,"date"),t.ALo(7,"translate"),t.ALo(8,"date"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.xDo(" ",t.lcZ(4,5,"Start_Date")," ",t.lcZ(5,7,"Between")," ",t.xi3(6,9,null==e.filter?null:e.filter.startDateFrom,"longDate")," ",t.lcZ(7,12,"And")," ",t.xi3(8,14,null==e.filter?null:e.filter.startDateTo,"longDate")," ")}}function Jy(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",77),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.ALo(6,"date"),t.ALo(7,"translate"),t.ALo(8,"date"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.xDo(" ",t.lcZ(4,5,"End_Date")," ",t.lcZ(5,7,"Between")," ",t.xi3(6,9,null==e.filter?null:e.filter.endDateFrom,"longDate")," ",t.lcZ(7,12,"And")," ",t.xi3(8,14,null==e.filter?null:e.filter.endDateTo,"longDate")," ")}}function Qy(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.customerCode),t.xp6(2),t.Oqu(e.projectCode),t.xp6(2),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng),t.xp6(2),t.Oqu(t.xi3(9,6,e.startDate,"longDate")),t.xp6(3),t.Oqu(t.xi3(12,9,e.endDate,"longDate")),t.xp6(3),t.Oqu(e.branchCode)}}function By(i,a){if(1&i&&(t.TgZ(0,"div",74),t.TgZ(1,"div",75),t.TgZ(2,"table",76),t.TgZ(3,"tr"),t.TgZ(4,"td",77),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.YNc(14,Yy,9,17,"tr",31),t.TgZ(15,"tr"),t.TgZ(16,"td",77),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.YNc(19,Jy,9,17,"tr",31),t.qZA(),t._UZ(20,"br"),t.qZA(),t.TgZ(21,"table",78),t.TgZ(22,"tr"),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"th"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.YNc(41,Qy,15,12,"tr",79),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,16,"Report_On_Projects")),t.xp6(4),t.AsE("",t.lcZ(10,18,"Customer_Code"),":",null==e.filter.customerCode||""==e.filter.customerCode?"All":e.filter.customerCode,""),t.xp6(3),t.AsE("",t.lcZ(13,20,"Branch_Code"),":",null==e.filter.branchCode||""==e.filter.branchCode?"All":e.filter.branchCode,""),t.xp6(2),t.Q6J("ngIf",e.filter.startDateFrom&&e.filter.startDateTo),t.xp6(3),t.AsE("",t.lcZ(18,22,"Search_Key"),":",e.searchValue,""),t.xp6(2),t.Q6J("ngIf",e.filter.endDateFrom&&e.filter.endDateTo),t.xp6(5),t.hij(" ",t.lcZ(25,24,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(28,26,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(31,28,"Project_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(34,30,"Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(37,32,"End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(40,34,"Branch_Code")," "),t.xp6(2),t.Q6J("ngForOf",e.reportData)}}const Hy=function(){return{standalone:!0}};let Vy=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.oprService=m,this.pageService=h,this.translate=C,this.displayedColumns=["customerCode","projectCode","Project_Name","branchCode","startDate","endDate","Actions"],this.reportData=[],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.customerSelectionList=[],this.citySelectionList=[],this.isArab=!1,this.filter={customerCode:"",branchCode:""},this.filterDates={startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null}}ngOnInit(){this.isArab=this.utilService.isArabic(),this.form=this.fb.group({}),this.initialLoading()}openDatePicker(e){e.open()}refresh(){this.reportData=[],this.resetFilter()}resetFilter(){this.filter={customerCode:"",branchCode:"",startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null},this.filterDates={startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null},this.applyFilter("")}clearReport(){this.reportData=[]}initialLoading(){this.searchValue="",this.loadCitiesList(),this.loadCustomersList(),this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}loadCitiesList(){this.apiService.getall("Branch/getBranchSelectListForUser").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArab?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}onSortOrder(e){this.reportData=[],"Project_Name"==e.active&&(e.active=this.isArab?"projectNameArb":"projectNameEng"),this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}generateReport(){this.reportData=[];for(let e=0;e<=Math.floor(this.totalItemsCount/100);e++){let o={pageIndex:e,pageSize:100,previousPageIndex:0==e?0:e-1,length:0};this.loadListReport(o.pageIndex,o.pageSize,this.searchValue,this.sortingOrder)}}setFilterDates(){if(null!=this.filterDates.startDateFrom){let e=new Date(this.filterDates.startDateFrom);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.startDateFrom=e}if(null!=this.filterDates.startDateTo){let e=new Date(this.filterDates.startDateTo);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.startDateTo=e}if(null!=this.filterDates.endDateFrom){let e=new Date(this.filterDates.endDateFrom);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.endDateFrom=e}if(null!=this.filterDates.endDateTo){let e=new Date(this.filterDates.endDateTo);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.endDateTo=e}}loadList(e,o,n,s){this.isLoading=!0,this.setFilterDates(),this.oprService.getPaginationWithFilter("Project/getProjectsPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}loadListReport(e,o,n,s){this.isLoading=!0,this.setFilterDates(),this.oprService.getPaginationWithFilter("Project/getProjectsPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.isLoading=!1,this.reportData=0==this.reportData.length?r.items:this.reportData.concat(r.items)},r=>this.utilService.ShowApiErrorMessage(r))}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.type="ForProject",c.componentInstance.isArab=this.isArab,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openDialogManage(e,o,n,s,r){let c=this.oprService.openAutoHeightWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openDialogManage2(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}resourceCosting(e){this.openDialogManage(e,g.O.create,"Resource_Costing","Save",ne)}logisticsCosting(e){this.openDialogManage(e,g.O.create,"Logistics_Vehicle_Costing","Save",se)}materialCosting(e){this.openDialogManage(e,g.O.create,"Material_Costing","Save",re)}financialExpenseCosting(e){this.openDialogManage(e,g.O.create,"Financial_Epense_Costing","Save",le)}estimationReport(e){this.openDialogManage(e,g.O.create,"Estimation_Cnsolidate_Report","Save",ce)}summaryReport(e){this.openDialogManage(e,g.O.create,"Estimation_Summary_Report","Save",pe)}convertToContract(e){this.openFullWindow(e,g.O.create,"Creating_Contract","Save",Vt)}printEstimation(e){this.openDialogManage(e,g.O.create,"Estimation_Cnsolidate_Report","Print",ge)}assignEmployyesToProjectSite(e){this.openFullWindow(e,g.O.create,"Assigning_Employees_To_Site","Save",he)}mappingEmpToResourceForProjectSite(e){this.openDialogManage(e,g.O.create,"Mapping_Employees_To_Resources_For_Site","Save",fe)}printProposal(e){this.openDialogManage2(e,g.O.create,"Project_Proposal","Print",_e)}shiftPlan(e){this.openDialogManage(e,g.O.create,"Shifts_Plan_For_Project","Save",ue)}skillsetPlan(e){this.openDialogManage(e,g.O.create,"Skillset_Plan_For_Project","Save",de)}calendarDays(e){this.openFullWindow(e,g.O.create,"Calander_Days","Save",me)}viewContract(e){this.openFullWindow(e,g.O.create,"Creating_Contract","View",Vt)}employeeAttendance(e){this.openFullWindow(e,g.O.create,"Employee_Attendance","View",Ze)}submit(){}openMonthlyRoaster(e){this.openFullWindow(e,g.O.create,"Monthly_Roaster","Save",ae)}approveEstimation(e){this.openApprovalDialog(e.branchCode,e.projectCode,g.O.create,"Estimation_Approval","Save","EST",Wt)}convertToProposal(e){this.apiService.post("ProjectBudgetCosting/convertProjectToProposal",e).subscribe(o=>{this.utilService.OkMessage(),this.ngOnInit()},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}translateToolTip(e){return`${this.translate.instant(e)}`}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder),this.reportData=[]}viewProjectSites(e){this.openDialogManage(e,g.O.create,"List_Of_Sites_In_Project","Pagination",_y)}uploadFile(e){let o=this.oprService.openAutoWidthDialog(this.dialog,we);o.componentInstance.project=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewUploadedFile(e){window.open(e.fileUrl)}exportexcel(){let e=document.getElementById("printcontainer");const o=ut.P6.table_to_sheet(e),n=ut.P6.book_new();ut.P6.book_append_sheet(n,o,"Sheet1"),ut.NC(n,"projectsReport.xlsx")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(W.f),t.Y36(V.N),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-project"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:130,vars:66,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"outer"],[1,"col-md-4","col-lg-4"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-8","col-lg-8"],[1,"col-md-6","col-lg-6"],[1,"form-group",2,"text-align","center"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click","dateChange"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],["picker3",""],["picker4",""],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-6","col-lg-6",2,"align-content","flex-start"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary","icon-refresh",3,"click"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","projectCode"],["matColumnDef","Project_Name"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","branchCode"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["id","printcontainer","hidden","",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["printTitle","ProjectsReport","printSectionId","printcontainer","ngxPrint","",1,"btn","btn-primary",3,"useExistingCss"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"click",4,"ngIf"],[3,"matTooltip","click"],[1,"icon-eye"],[1,"fas","fa-sticky-note"],[1,"fas","fa-list"],[1,"fas","fa-check-circle"],[1,"fas","fa-print"],[3,"click"],[1,"fas","fa-print",3,"matTooltip"],[1,"far","fa-handshake"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""],["id","printcontainer","hidden",""],["width","100%"],["id","attndTable"],["colspan","2"],["id","attndTable","width","100%"],[4,"ngFor","ngForOf"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",1),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t.TgZ(24,"label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"ng-select",16),t.NdJ("ngModelChange",function(r){return o.filter.branchCode=r})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",17),t.TgZ(29,"div",15),t.TgZ(30,"label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"ng-select",16),t.NdJ("ngModelChange",function(r){return o.filter.customerCode=r})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",18),t.TgZ(35,"div",1),t.TgZ(36,"div",10),t.TgZ(37,"div",19),t.TgZ(38,"label"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",18),t.TgZ(42,"div",15),t.TgZ(43,"div",15),t.TgZ(44,"div",20),t.TgZ(45,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.startDateFrom=r})("click",function(){t.CHM(n);const r=t.MAs(50);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",22),t._UZ(48,"mat-datepicker-toggle",23),t._UZ(49,"mat-datepicker",null,24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"div",18),t.TgZ(52,"div",15),t.TgZ(53,"div",15),t.TgZ(54,"div",20),t.TgZ(55,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.startDateTo=r})("click",function(){t.CHM(n);const r=t.MAs(60);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"div",22),t._UZ(58,"mat-datepicker-toggle",23),t._UZ(59,"mat-datepicker",null,25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"div",18),t.TgZ(62,"div",1),t.TgZ(63,"div",10),t.TgZ(64,"div",19),t.TgZ(65,"label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div",18),t.TgZ(69,"div",15),t.TgZ(70,"div",15),t.TgZ(71,"div",20),t.TgZ(72,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.endDateFrom=r})("click",function(){t.CHM(n);const r=t.MAs(77);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"div",22),t._UZ(75,"mat-datepicker-toggle",23),t._UZ(76,"mat-datepicker",null,26),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(78,"div",18),t.TgZ(79,"div",15),t.TgZ(80,"div",15),t.TgZ(81,"div",20),t.TgZ(82,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.endDateTo=r})("click",function(){t.CHM(n);const r=t.MAs(87);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"div",22),t._UZ(85,"mat-datepicker-toggle",23),t._UZ(86,"mat-datepicker",null,27),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(88,"div",1),t.TgZ(89,"div",14),t.TgZ(90,"input",28),t.NdJ("ngModelChange",function(r){return o.searchValue=r})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(91,"translate"),t.qZA(),t.qZA(),t.TgZ(92,"div",29),t.YNc(93,gy,2,0,"button",30),t.YNc(94,hy,6,1,"span",31),t.TgZ(95,"span"),t._uU(96," \xa0 "),t.TgZ(97,"button",32),t.NdJ("click",function(){return o.refresh()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(98,"div",33),t._UZ(99,"spinner-loader",34),t.qZA(),t.qZA(),t._UZ(100,"div",35),t.TgZ(101,"div",36),t.ynx(102),t.TgZ(103,"table",37),t.NdJ("matSortChange",function(r){return o.onSortOrder(r)}),t.ynx(104,38),t.YNc(105,fy,3,3,"th",39),t.YNc(106,Zy,2,1,"td",40),t.BQk(),t.ynx(107,41),t.YNc(108,Cy,3,3,"th",39),t.YNc(109,Ay,2,1,"td",40),t.BQk(),t.ynx(110,42),t.YNc(111,Ty,3,3,"th",39),t.YNc(112,vy,2,1,"td",40),t.BQk(),t.ynx(113,43),t.YNc(114,xy,3,3,"th",39),t.YNc(115,qy,3,4,"td",40),t.BQk(),t.ynx(116,44),t.YNc(117,by,3,3,"th",39),t.YNc(118,yy,3,4,"td",40),t.BQk(),t.ynx(119,45),t.YNc(120,Sy,3,3,"th",39),t.YNc(121,wy,2,1,"td",40),t.BQk(),t.ynx(122,46),t.YNc(123,Uy,3,3,"th",47),t.YNc(124,Py,13,10,"td",48),t.BQk(),t.YNc(125,Fy,1,0,"tr",49),t.YNc(126,Iy,1,0,"tr",50),t.qZA(),t.BQk(),t.qZA(),t.ynx(127),t.TgZ(128,"mat-paginator",51),t.NdJ("page",function(r){return o.onPageSwitch(r)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(129,By,42,36,"div",52)}if(2&e){const n=t.MAs(50),s=t.MAs(60),r=t.MAs(77),c=t.MAs(87);t.xp6(4),t.hij(" ",t.lcZ(5,41,"Projects")," "),t.xp6(6),t.hij(" ",t.lcZ(11,43,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(14,45,"Projects")),t.xp6(12),t.Oqu(t.lcZ(26,47,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.filter.branchCode),t.xp6(4),t.Oqu(t.lcZ(32,49,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.filter.customerCode),t.xp6(6),t.Oqu(t.lcZ(40,51,"Start_Date")),t.xp6(6),t.s9C("placeholder",t.lcZ(46,53,"From_Date")),t.Q6J("ngModel",o.filterDates.startDateFrom)("matDatepicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(7),t.MGl("placeholder"," ",t.lcZ(56,55,"To_Date"),""),t.Q6J("ngModel",o.filterDates.startDateTo)("matDatepicker",s),t.xp6(3),t.Q6J("for",s),t.xp6(8),t.Oqu(t.lcZ(67,57,"End_Date")),t.xp6(6),t.s9C("placeholder",t.lcZ(73,59,"From_Date")),t.Q6J("ngModel",o.filterDates.endDateFrom)("matDatepicker",r),t.xp6(3),t.Q6J("for",r),t.xp6(7),t.MGl("placeholder"," ",t.lcZ(83,61,"To_Date"),""),t.Q6J("ngModel",o.filterDates.endDateTo)("matDatepicker",c),t.xp6(3),t.Q6J("for",c),t.xp6(5),t.MGl("placeholder","",t.lcZ(91,63,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(65,Hy)),t.xp6(3),t.Q6J("ngIf",0==o.reportData.length),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0),t.xp6(5),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0)}},directives:[Dt.w9,l.JJ,l.On,l.Fj,M.hl,M.nW,gt.R9,M.Mq,f.O5,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,Xt.I,_.ge,v.nU,_.ev,rt.gM,_.XQ,_.Gk,f.sg],pipes:[Z.X$,f.uU],styles:["#attndTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\n    border: solid;\n    border-width: 1px;\n    padding: 5px 5px 5px 5px;\n    text-align: center;\n  }\n\n  #attndTable[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n\n  #printcontainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n    width: 100%;\n    padding: 10px 10px 10px 10px;\n  }"]}),i})();function $y(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",56),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).searchKey=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("ngModel",e.searchKey)}}function Gy(i,a){if(1&i&&(t.TgZ(0,"option",60),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.s9C("value",e.shiftCode),t.xp6(1),t.AsE("",e.shiftCode,"-",o.isArabic?e.shiftNumberNameAR:e.shiftNumberNameEN,"")}}const uo=function(){return{standalone:!0}};function Wy(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"select",57),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).searchKey=n})("change",function(){return t.CHM(e),t.oxw(2).applyFilter()}),t.TgZ(1,"option",58),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.YNc(5,Gy,2,3,"option",59),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("ngModel",e.searchKey)("ngModelOptions",t.DdM(9,uo)),t.xp6(2),t.AsE("",t.lcZ(3,5,"Select")," ",t.lcZ(4,7,"Shift_Code")," "),t.xp6(3),t.Q6J("ngForOf",e.listOfShiftCodes2)}}function zy(i,a){if(1&i){const e=t.EpF();t.ynx(0,32),t.TgZ(1,"div",33),t.TgZ(2,"div",34),t.TgZ(3,"div",35),t.TgZ(4,"h4",36),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"fieldset",37),t.TgZ(8,"label",38),t.TgZ(9,"input",39),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().reportType=n}),t.qZA(),t._uU(10,"\xa0 Attendance\xa0 "),t.TgZ(11,"input",40),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().reportType=n}),t.qZA(),t._uU(12,"\xa0TimeSheet "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",41),t.TgZ(14,"div",35),t.TgZ(15,"h4",36),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"fieldset",37),t.YNc(19,$y,1,1,"input",42),t.YNc(20,Wy,6,10,"select",43),t._uU(21," \xa0 "),t.TgZ(22,"label"),t.TgZ(23,"input",44),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().filterType=n})("click",function(){return t.CHM(e),t.oxw().searchKey=""}),t.qZA(),t._uU(24," \xa0Employee \xa0 "),t.TgZ(25,"input",44),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().filterType=n})("click",function(){return t.CHM(e),t.oxw().searchKey=""}),t.qZA(),t._uU(26," \xa0ShiftCode "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",45),t.TgZ(28,"div",46),t.TgZ(29,"span"),t.TgZ(30,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().postAttendance()}),t._UZ(31,"i",48),t.qZA(),t.TgZ(32,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().autoAttendance(-1)}),t._UZ(33,"i",49),t.qZA(),t.TgZ(34,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().clearAttendance()}),t._UZ(35,"i",50),t.qZA(),t.qZA(),t.TgZ(36,"span"),t.TgZ(37,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().reloadData()}),t._UZ(38,"i",51),t.qZA(),t.qZA(),t.TgZ(39,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportexcel()}),t._UZ(40,"i",52),t.qZA(),t.qZA(),t.TgZ(41,"div",53),t.TgZ(42,"div",54),t.TgZ(43,"fieldset",37),t.TgZ(44,"label"),t.TgZ(45,"input",55),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().highlightPostedAtt=n}),t.qZA(),t._uU(46),t.ALo(47,"translate"),t.TgZ(48,"input",55),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().highlightPendingAtt=n}),t.qZA(),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,20,"Report_Type")),t.xp6(4),t.Q6J("ngModel",e.reportType),t.xp6(2),t.Q6J("value","TimeSheet")("ngModel",e.reportType),t.xp6(5),t.Oqu(t.lcZ(17,22,"Search")),t.xp6(3),t.Q6J("ngIf","employee"==e.filterType),t.xp6(1),t.Q6J("ngIf","shiftCode"==e.filterType),t.xp6(3),t.Q6J("value","employee")("ngModel",e.filterType),t.xp6(2),t.Q6J("value","shiftCode")("ngModel",e.filterType),t.xp6(5),t.Q6J("matTooltip",e.translateToolTip("Post_Attendance")),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Enter_Auto_Attendance")),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Clear_Attendance")),t.xp6(3),t.Q6J("matTooltip",e.translateToolTip("Reload_Data")),t.xp6(2),t.Q6J("matTooltip",e.translateToolTip("Download")),t.xp6(6),t.Q6J("ngModel",e.highlightPostedAtt),t.xp6(1),t.hij("",t.lcZ(47,24,"Show_Posted_Attendance")," \xa0 "),t.xp6(2),t.Q6J("ngModel",e.highlightPendingAtt),t.xp6(1),t.hij("",t.lcZ(50,26,"Show_Pending_Attendance")," \xa0 ")}}function Xy(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",null==e.result?null:e.result.daysInMonth2),t.xp6(1),t.AsE("",null==e.result?null:e.result.month2Text,"-",null==e.result?null:e.result.year2Text,"")}}function Ky(i,a){if(1&i&&(t.TgZ(0,"span",71),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",o.getWeekDay(null==e?null:e.attnDate)," ")}}function tS(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",72),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).autoAttendance(n)}),t._UZ(1,"i",73),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Enter_Auto_Attendance"))}}function eS(i,a){if(1&i&&(t.TgZ(0,"th",68),t.YNc(1,Ky,2,1,"span",69),t.YNc(2,tS,2,1,"span",70),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.s9C("id",n.getDayBackground(o)),t.Q6J("matTooltip",n.getDayTooltip(e)),t.xp6(1),t.Q6J("ngIf",n.activeColumn!=o&&(!(null!=e&&e.isHoliday)||n.activeColumn<o)),t.xp6(1),t.Q6J("ngIf",n.activeColumn==o||(null==e?null:e.isHoliday)&&n.activeColumn>o)}}function oS(i,a){1&i&&(t.ynx(0),t.TgZ(1,"th",74),t._uU(2," \u0639\u062f\u062f \u0623\u064a\u0627\u0645 \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(3,"th",74),t._uU(4," \u0639\u062f\u062f \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 "),t.qZA(),t.TgZ(5,"th",74),t._uU(6," \u0623\u064a\u0627\u0645 \u0627\u0644\u0639\u0637\u0644\u0629 \u0627\u0644\u0623\u0633\u0628\u0648\u0639\u064a\u0629 "),t.qZA(),t.TgZ(7,"th",74),t._uU(8," \u0627\u062c\u0627\u0632\u0629 \u0633\u0646\u0648\u064a\u0629 "),t.qZA(),t.TgZ(9,"th",74),t._uU(10," \u0625\u062c\u0627\u0632\u0629 \u062e\u0627\u0635\u0629/\u0637\u0627\u0631\u0626\u0629 "),t.qZA(),t.TgZ(11,"th",74),t._uU(12," \u0627\u062c\u0627\u0632\u0629 \u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639\u0647 "),t.qZA(),t.TgZ(13,"th",74),t._uU(14," \u0627\u062c\u0627\u0632\u0629 \u0645\u0631\u0636\u064a\u0629 "),t.qZA(),t.TgZ(15,"th",74),t._uU(16," \u0625\u062c\u0627\u0632\u0629 \u0627\u062e\u062a\u0628\u0627\u0631\u0627\u062a "),t.qZA(),t.TgZ(17,"th",74),t._uU(18," \u063a\u064a\u0627\u0628 "),t.qZA(),t.TgZ(19,"th",74),t._uU(20," \u0627\u0646\u0633\u062d\u0627\u0628 "),t.qZA(),t.TgZ(21,"th",75),t._uU(22," \u062c\u0632\u0627\u0621\u0627\u062a "),t.qZA(),t.TgZ(23,"th",75),t._uU(24," \u0639\u062f\u062f \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u062a\u0627\u062e\u064a\u0631 "),t.qZA(),t.TgZ(25,"th",76),t._uU(26," \u0648\u0642\u062a \u0627\u0636\u0627\u0641\u0649 "),t.qZA(),t.BQk())}function iS(i,a){if(1&i&&(t.TgZ(0,"th",68),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.s9C("id",n.getDayBackground(o)),t.Q6J("matTooltip",n.getDayTooltip(e)),t.xp6(1),t.hij(" ",e.day," ")}}function nS(i,a){1&i&&(t.ynx(0),t.TgZ(1,"th",74),t._uU(2," W D C "),t.qZA(),t.TgZ(3,"th",74),t._uU(4," Nor. Hrs "),t.qZA(),t.TgZ(5,"th",74),t._uU(6," OF "),t.qZA(),t.TgZ(7,"th",74),t._uU(8," AL "),t.qZA(),t.TgZ(9,"th",74),t._uU(10," EL "),t.qZA(),t.TgZ(11,"th",74),t._uU(12," UL "),t.qZA(),t.TgZ(13,"th",74),t._uU(14," SL "),t.qZA(),t.TgZ(15,"th",74),t._uU(16," STL "),t.qZA(),t.TgZ(17,"th",74),t._uU(18," A "),t.qZA(),t.TgZ(19,"th",74),t._uU(20," W "),t.qZA(),t.TgZ(21,"th",75),t._uU(22," Penalty "),t.qZA(),t.TgZ(23,"th",75),t._uU(24," Late Hours "),t.qZA(),t.TgZ(25,"th",76),t._uU(26," OT "),t.qZA(),t.BQk())}function aS(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",77),t._uU(2,"No Attendance Found"),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.uIk("colspan",(null==e.result||null==e.result.columns?null:e.result.columns.length)+4)}}function sS(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.getEmpRow(o)+1," ")}}function rS(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.getEmpRow(o)+1," ")}}function lS(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==n?null:n.employeeNumber," ")}}function cS(i,a){if(1&i&&(t.TgZ(0,"td",82),t._uU(1),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==n?null:n.employeeNumber," ")}}function pS(i,a){1&i&&(t.TgZ(0,"span",87),t._uU(1,"(New)"),t.qZA())}function uS(i,a){if(1&i&&(t.TgZ(0,"td",84),t._uU(1),t.YNc(2,pS,2,0,"span",85),t.TgZ(3,"span",86),t._UZ(4,"br"),t._uU(5),t.qZA(),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.isArabic?null==n?null:n.employeeNameAr:null==n?null:n.employeeName," "),t.xp6(1),t.Q6J("ngIf",null==n?null:n.isNewHire),t.xp6(3),t.hij("(",null==n?null:n.positionName,")")}}function dS(i,a){1&i&&(t.TgZ(0,"span",87),t._uU(1,"(New)"),t.qZA())}function mS(i,a){if(1&i&&(t.TgZ(0,"td",84),t._uU(1),t.YNc(2,dS,2,0,"span",88),t.TgZ(3,"span",86),t._UZ(4,"br"),t._uU(5),t.qZA(),t.qZA()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.isArabic?null==n?null:n.employeeNameAr:null==n?null:n.employeeName," "),t.xp6(1),t.Q6J("ngIf",null==n?null:n.isNewHire),t.xp6(3),t.hij("(",null==n?null:n.positionName,")")}}function _S(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",89),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).singClick(r,s)})("contextmenu",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).onRightClick(r,s)}),t._uU(1),t.qZA()}if(2&i){const e=a.index,o=t.oxw(2).index,n=t.oxw(3);t.s9C("id",n.getCellBackGround(o,e)),t.Q6J("matTooltip",n.getToolTip(o,e)),t.xp6(1),t.hij(" ",n.getAttendanceFlag(o,e)," ")}}function gS(i,a){if(1&i&&(t.TgZ(0,"td",92),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"WDC")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].wdc," ")}}function hS(i,a){if(1&i&&(t.TgZ(0,"td",92),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"WDC")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].wdc," ")}}function fS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"No.Of.Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime)/60," ")}}function ZS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"No.Of.Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime)/60," ")}}function CS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OF")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",((null==s.result||null==s.result.rows[o]?null:s.result.rows[o].contractualShiftTime)-(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime))/s.result.siteWorkingTime," ")}}function AS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OF")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",((null==s.result||null==s.result.rows[o]?null:s.result.rows[o].contractualShiftTime)-(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].allottedShiftTime))/s.result.siteWorkingTime," ")}}function TS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"AL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].AL," ")}}function vS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"AL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].AL," ")}}function xS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"EL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].EL," ")}}function qS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"EL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].EL," ")}}function bS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"UL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].UL," ")}}function yS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"UL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].UL," ")}}function SS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"SL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].SL," ")}}function wS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"SL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].SL," ")}}function US(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"STL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].STL," ")}}function LS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"STL")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].STL," ")}}function DS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Ab")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab," ")}}function NS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Ab")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab," ")}}function ES(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"W")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].W," ")}}function OS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"W")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",null==s.result||null==s.result.rows[o]?null:s.result.rows[o].W," ")}}function jS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Penalty")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",2*(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab)," ")}}function kS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Penalty")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",2*(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].Ab)," ")}}function MS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Late Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].lateHrs)," ")}}function RS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"Late Hrs")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].lateHrs)," ")}}function PS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OT")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].OT)," ")}}function FS(i,a){if(1&i&&(t.TgZ(0,"td",93),t._uU(1),t.qZA()),2&i){const e=t.oxw(3),o=e.index,n=e.$implicit,s=t.oxw(3);t.s9C("id",s.getEmpBackGround(o,0)),t.Q6J("matTooltip",s.getToolTip(o,-1,"OT")),t.uIk("rowspan",n.uniqueShiftsCount),t.xp6(1),t.hij(" ",s.hrsToStrHrsMins(null==s.result||null==s.result.rows[o]?null:s.result.rows[o].OT)," ")}}function IS(i,a){if(1&i&&(t.ynx(0),t.YNc(1,gS,2,4,"td",90),t.YNc(2,hS,2,4,"td",90),t.YNc(3,fS,2,4,"td",91),t.YNc(4,ZS,2,4,"td",91),t.YNc(5,CS,2,4,"td",91),t.YNc(6,AS,2,4,"td",91),t.YNc(7,TS,2,4,"td",91),t.YNc(8,vS,2,4,"td",91),t.YNc(9,xS,2,4,"td",91),t.YNc(10,qS,2,4,"td",91),t.YNc(11,bS,2,4,"td",91),t.YNc(12,yS,2,4,"td",91),t.YNc(13,SS,2,4,"td",91),t.YNc(14,wS,2,4,"td",91),t.YNc(15,US,2,4,"td",91),t.YNc(16,LS,2,4,"td",91),t.YNc(17,DS,2,4,"td",91),t.YNc(18,NS,2,4,"td",91),t.YNc(19,ES,2,4,"td",91),t.YNc(20,OS,2,4,"td",91),t.YNc(21,jS,2,4,"td",91),t.YNc(22,kS,2,4,"td",91),t.YNc(23,MS,2,4,"td",91),t.YNc(24,RS,2,4,"td",91),t.YNc(25,PS,2,4,"td",91),t.YNc(26,FS,2,4,"td",91),t.BQk()),2&i){const e=t.oxw(2),o=e.index,n=e.$implicit,s=t.oxw(3);t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber))}}function YS(i,a){if(1&i&&(t.ynx(0),t.YNc(1,sS,2,3,"td",79),t.YNc(2,rS,2,3,"td",79),t.YNc(3,lS,2,3,"td",80),t.YNc(4,cS,2,3,"td",80),t.YNc(5,uS,6,5,"td",81),t.YNc(6,mS,6,5,"td",81),t.TgZ(7,"td",82),t._uU(8),t.qZA(),t.YNc(9,_S,2,3,"td",83),t.YNc(10,IS,27,26,"ng-container",63),t.BQk()),2&i){const e=t.oxw(),o=e.index,n=e.$implicit,s=t.oxw(3);t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.Q6J("ngIf",0==o),t.xp6(1),t.Q6J("ngIf",o>0&&n.employeeNumber!=(null==s.result.rows[o-1]?null:s.result.rows[o-1].employeeNumber)),t.xp6(1),t.s9C("id",s.getShiftBgColor(null==n?null:n.shiftCode)),t.xp6(1),t.hij(" ",s.getShiftNumberName(null==n?null:n.shiftCode)," "),t.xp6(1),t.Q6J("ngForOf",n.attendanceMatrix),t.xp6(1),t.Q6J("ngIf","TimeSheet"==s.reportType&&0!=(null==s.result?null:s.result.rows.length)&&!s.isLoading)}}function JS(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,YS,11,10,"ng-container",63),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",o.canShowRow(e))}}function QS(i,a){if(1&i&&(t.ynx(0),t.YNc(1,JS,2,1,"tr",78),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.result.rows)}}function BS(i,a){1&i&&(t.TgZ(0,"span",87),t._uU(1,"(New)"),t.qZA())}function HS(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",89),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).singClick(r,s)})("contextmenu",function(){const s=t.CHM(e).index,r=t.oxw(2).index;return t.oxw(3).onRightClick(r,s)}),t._uU(1),t.qZA()}if(2&i){const e=a.index,o=t.oxw(2).index,n=t.oxw(3);t.s9C("id",n.getCellBackGround(o,e)),t.Q6J("matTooltip",n.getToolTip(o,e)),t.xp6(1),t.hij(" ",n.getAttendanceFlag(o,e)," ")}}function VS(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"td",92),t._uU(2),t.qZA(),t.TgZ(3,"td",93),t._uU(4),t.qZA(),t.TgZ(5,"td",93),t._uU(6),t.qZA(),t.TgZ(7,"td",93),t._uU(8),t.qZA(),t.TgZ(9,"td",93),t._uU(10),t.qZA(),t.TgZ(11,"td",93),t._uU(12),t.qZA(),t.TgZ(13,"td",93),t._uU(14),t.qZA(),t.TgZ(15,"td",93),t._uU(16),t.qZA(),t.TgZ(17,"td",93),t._uU(18),t.qZA(),t.TgZ(19,"td",93),t._uU(20),t.qZA(),t.TgZ(21,"td",93),t._uU(22),t.qZA(),t.TgZ(23,"td",93),t._uU(24),t.qZA(),t.TgZ(25,"td",93),t._uU(26),t.qZA(),t.BQk()),2&i){const e=t.oxw(2).index,o=t.oxw(3);t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"WDC")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].wdc," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"No.Of.Hrs")),t.xp6(1),t.hij(" ",(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].allottedShiftTime)/60," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"OF")),t.xp6(1),t.hij(" ",((null==o.result||null==o.result.rows[e]?null:o.result.rows[e].contractualShiftTime)-(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].allottedShiftTime))/o.result.siteWorkingTime," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"AL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].AL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"EL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].EL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"UL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].UL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"SL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].SL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"STL")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].STL," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"Ab")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].Ab," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"W")),t.xp6(1),t.hij(" ",null==o.result||null==o.result.rows[e]?null:o.result.rows[e].W," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"Penalty")),t.xp6(1),t.hij(" ",2*(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].Ab)," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"Late Hrs")),t.xp6(1),t.hij(" ",o.hrsToStrHrsMins(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].lateHrs)," "),t.xp6(1),t.s9C("id",o.getEmpBackGround(e,0)),t.Q6J("matTooltip",o.getToolTip(e,-1,"OT")),t.xp6(1),t.hij(" ",o.hrsToStrHrsMins(null==o.result||null==o.result.rows[e]?null:o.result.rows[e].OT)," ")}}function $S(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"td",82),t._uU(2),t.qZA(),t.TgZ(3,"td",82),t._uU(4),t.qZA(),t.TgZ(5,"td",84),t._uU(6),t.YNc(7,BS,2,0,"span",85),t.TgZ(8,"span",86),t._UZ(9,"br"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"td",82),t._uU(12),t.qZA(),t.YNc(13,HS,2,3,"td",83),t.YNc(14,VS,27,39,"ng-container",63),t.BQk()),2&i){const e=t.oxw(),o=e.index,n=e.$implicit,s=t.oxw(3);t.xp6(1),t.s9C("id",s.getEmpBackGround(o,0)),t.xp6(1),t.hij(" ",s.getEmpRow(o)+1," "),t.xp6(1),t.s9C("id",s.getEmpBackGround(o,0)),t.xp6(1),t.hij(" ",null==n?null:n.employeeNumber," "),t.xp6(1),t.s9C("id",s.getEmpBackGround(o,0)),t.xp6(1),t.hij(" ",s.isArabic?null==n?null:n.employeeNameAr:null==n?null:n.employeeName," "),t.xp6(1),t.Q6J("ngIf",null==n?null:n.isNewHire),t.xp6(3),t.hij("(",null==n?null:n.positionName,")"),t.xp6(1),t.s9C("id",s.getShiftBgColor(null==n?null:n.shiftCode)),t.xp6(1),t.hij(" ",s.getShiftNumberName(null==n?null:n.shiftCode)," "),t.xp6(1),t.Q6J("ngForOf",n.attendanceMatrix),t.xp6(1),t.Q6J("ngIf","TimeSheet"==s.reportType&&0!=(null==s.result?null:s.result.rows.length)&&!s.isLoading)}}function GS(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,$S,15,12,"ng-container",63),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",o.canShowRow(e))}}function WS(i,a){if(1&i&&(t.ynx(0),t.YNc(1,GS,2,1,"tr",78),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.result.rows)}}function zS(i,a){if(1&i&&(t.TgZ(0,"td",98),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,null==o.result||null==o.result.columns[e]?null:o.result.columns[e].contractualShiftTime,"1.0-1")," ")}}function XS(i,a){if(1&i&&(t.TgZ(0,"td",101),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].contractualShiftTime)/((null==o.result?null:o.result.siteWorkingTime)/60),"1.0-1")," ")}}function KS(i,a){if(1&i&&(t.TgZ(0,"td",98),t._uU(1),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",o.hrsToStrHrsMins(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].attendedTime)," ")}}function t5(i,a){if(1&i&&(t.TgZ(0,"td",101),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].attendedTime)/((null==o.result?null:o.result.siteWorkingTime)/60),"1.0-1")," ")}}function e5(i,a){if(1&i&&(t.TgZ(0,"td",106),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=a.index,o=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].contractualShiftTime)/((null==o.result?null:o.result.siteWorkingTime)/60)-(null==o.result||null==o.result.columns[e]?null:o.result.columns[e].attendedTime)/((null==o.result?null:o.result.siteWorkingTime)/60),"1.0-1")," ")}}function o5(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",94),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"td"),t.TgZ(6,"td",95),t._uU(7),t.qZA(),t.TgZ(8,"td",95),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",95),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td",95),t._uU(15),t.qZA(),t.TgZ(16,"td",95),t._uU(17),t.qZA(),t.TgZ(18,"td",95),t._uU(19),t.qZA(),t.TgZ(20,"td",95),t._uU(21),t.qZA(),t.TgZ(22,"td",95),t._uU(23),t.qZA(),t.TgZ(24,"td",95),t._uU(25),t.qZA(),t.TgZ(26,"td",95),t._uU(27),t.qZA(),t.TgZ(28,"td",95),t._uU(29),t.qZA(),t.TgZ(30,"td",95),t._uU(31),t.ALo(32,"number"),t.qZA(),t.TgZ(33,"td",95),t._uU(34),t.ALo(35,"number"),t.qZA(),t.qZA(),t.TgZ(36,"tr"),t.TgZ(37,"td",96),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.YNc(40,zS,3,4,"td",97),t.TgZ(41,"td",98),t._uU(42),t.ALo(43,"number"),t.qZA(),t._UZ(44,"td",99),t._UZ(45,"td",99),t._UZ(46,"td",99),t._UZ(47,"td",99),t._UZ(48,"td",99),t._UZ(49,"td",99),t._UZ(50,"td",99),t._UZ(51,"td",99),t._UZ(52,"td",99),t._UZ(53,"td",99),t._UZ(54,"td",99),t._UZ(55,"td",99),t.qZA(),t.TgZ(56,"tr"),t.TgZ(57,"td",94),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.YNc(60,XS,3,4,"td",100),t.TgZ(61,"td",101),t._uU(62),t.ALo(63,"number"),t.qZA(),t._UZ(64,"td",99),t._UZ(65,"td",99),t._UZ(66,"td",99),t._UZ(67,"td",99),t._UZ(68,"td",99),t._UZ(69,"td",99),t._UZ(70,"td",99),t._UZ(71,"td",99),t._UZ(72,"td",99),t._UZ(73,"td",99),t._UZ(74,"td",99),t._UZ(75,"td",99),t.qZA(),t.TgZ(76,"tr"),t.TgZ(77,"td",102),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.YNc(80,KS,2,1,"td",103),t.TgZ(81,"td",98),t._uU(82),t.qZA(),t._UZ(83,"td",99),t._UZ(84,"td",99),t._UZ(85,"td",99),t._UZ(86,"td",99),t._UZ(87,"td",99),t._UZ(88,"td",99),t._UZ(89,"td",99),t._UZ(90,"td",99),t._UZ(91,"td",99),t._UZ(92,"td",99),t._UZ(93,"td",99),t._UZ(94,"td",99),t.qZA(),t.TgZ(95,"tr"),t.TgZ(96,"td",94),t._uU(97),t.ALo(98,"translate"),t.qZA(),t.YNc(99,t5,3,4,"td",100),t.TgZ(100,"td",101),t._uU(101),t.ALo(102,"number"),t.qZA(),t._UZ(103,"td",99),t._UZ(104,"td",99),t._UZ(105,"td",99),t._UZ(106,"td",99),t._UZ(107,"td",99),t._UZ(108,"td",99),t._UZ(109,"td",99),t._UZ(110,"td",99),t._UZ(111,"td",99),t._UZ(112,"td",99),t._UZ(113,"td",99),t._UZ(114,"td",99),t.qZA(),t.TgZ(115,"tr"),t.TgZ(116,"td",104),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.YNc(119,e5,3,4,"td",105),t.TgZ(120,"td",106),t._uU(121),t.ALo(122,"number"),t.qZA(),t._UZ(123,"td",99),t._UZ(124,"td",99),t._UZ(125,"td",99),t._UZ(126,"td",99),t._UZ(127,"td",99),t._UZ(128,"td",99),t._UZ(129,"td",99),t._UZ(130,"td",99),t._UZ(131,"td",99),t._UZ(132,"td",99),t._UZ(133,"td",99),t._UZ(134,"td",99),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,30,"Total")," "),t.xp6(2),t.uIk("colspan",null==e.result?null:e.result.columns.length),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.wdc," "),t.xp6(2),t.hij(" ",t.xi3(10,32,(null==e.rowGrandTotal?null:e.rowGrandTotal.wdc)*(null==e.result?null:e.result.siteWorkingTime)/60,"1.0-1")," "),t.xp6(3),t.hij(" ",t.xi3(13,35,null==e.rowGrandTotal?null:e.rowGrandTotal.OF,"1.0-1")," "),t.xp6(3),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.AL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.EL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.UL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.SL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.STL," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.Ab," "),t.xp6(2),t.hij(" ",null==e.rowGrandTotal?null:e.rowGrandTotal.W," "),t.xp6(2),t.hij(" ",2*(null==e.rowGrandTotal?null:e.rowGrandTotal.Ab)," "),t.xp6(2),t.hij(" ",t.xi3(32,38,null==e.rowGrandTotal?null:e.rowGrandTotal.lateHrs,"1.0-1")," "),t.xp6(3),t.hij(" ",t.xi3(35,41,null==e.rowGrandTotal?null:e.rowGrandTotal.OT,"1.0-1")," "),t.xp6(4),t.hij(" ",t.lcZ(39,44,"Total_Contracted_Hours")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(43,46,null==e.columnGrandTotal?null:e.columnGrandTotal.contractualShiftTime,"1.0-1")," "),t.xp6(16),t.hij(" ",t.lcZ(59,49,"Total_Contracted_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(63,51,e.columnGrandTotal.contractualShiftTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(16),t.hij(" ",t.lcZ(79,54,"Actual_Hours")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",e.hrsToStrHrsMins(e.columnGrandTotal.attendedTime)," "),t.xp6(15),t.hij(" ",t.lcZ(98,56,"Actual_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(102,58,e.columnGrandTotal.attendedTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(16),t.hij(" ",t.lcZ(118,61,"Variance_of_Shifts")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(2),t.hij(" ",t.xi3(122,63,(null==e.columnGrandTotal?null:e.columnGrandTotal.contractualShiftTime)/((null==e.result?null:e.result.siteWorkingTime)/60)-(null==e.columnGrandTotal?null:e.columnGrandTotal.attendedTime)/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," ")}}function i5(i,a){if(1&i&&(t.TgZ(0,"table",61),t.TgZ(1,"tr"),t._UZ(2,"th",62),t.ynx(3),t.TgZ(4,"th"),t._uU(5),t.qZA(),t.BQk(),t.YNc(6,Xy,3,3,"ng-container",63),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"th",64),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",65),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",64),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.YNc(17,eS,3,4,"th",66),t.YNc(18,oS,27,0,"ng-container",63),t.qZA(),t.TgZ(19,"tr"),t.YNc(20,iS,2,3,"th",66),t.YNc(21,nS,27,0,"ng-container",63),t.qZA(),t.TgZ(22,"tbody",67),t.YNc(23,aS,3,1,"tr",63),t.YNc(24,QS,2,1,"ng-container",63),t.YNc(25,WS,2,1,"ng-container",63),t.YNc(26,o5,135,66,"ng-container",63),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(4),t.uIk("colspan",null==e.result?null:e.result.daysInMonth1),t.xp6(1),t.AsE("",null==e.result?null:e.result.month1Text,"-",null==e.result?null:e.result.year1Text,""),t.xp6(1),t.Q6J("ngIf",!(null!=e.result&&e.result.isSingleMonth)),t.xp6(3),t.hij(" ",t.lcZ(10,15,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(13,17,"Employee")," "),t.xp6(3),t.hij(" ",t.lcZ(16,19,"Shift")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(1),t.Q6J("ngIf","TimeSheet"==e.reportType&&0!=(null==e.result?null:e.result.rows.length)&&!e.isLoading),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(1),t.Q6J("ngIf","TimeSheet"==e.reportType&&0!=(null==e.result?null:e.result.rows.length)&&!e.isLoading),t.xp6(2),t.Q6J("ngIf",0==(null==e.result?null:e.result.rows.length)),t.xp6(1),t.Q6J("ngIf",!e.isShiftFilterApplied()),t.xp6(1),t.Q6J("ngIf",e.isShiftFilterApplied()),t.xp6(1),t.Q6J("ngIf","TimeSheet"==e.reportType&&0!=(null==e.result?null:e.result.rows.length)&&!e.isLoading)}}function n5(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",110),t._uU(4),t.qZA(),t.TgZ(5,"td",111),t._uU(6),t.qZA(),t.TgZ(7,"td",111),t._uU(8),t.qZA(),t.TgZ(9,"td",111),t._uU(10),t.qZA(),t.TgZ(11,"td",111),t._uU(12),t.qZA(),t.TgZ(13,"td",111),t._uU(14),t.qZA(),t.TgZ(15,"td",111),t._uU(16),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(null==e?null:e.positionName),t.xp6(2),t.hij("",null==e?null:e.qty," "),t.xp6(2),t.hij("",null==e?null:e.dailyHrs," "),t.xp6(2),t.hij("",null==e?null:e.monthlyHrs," "),t.xp6(2),t.Oqu(null==e?null:e.monthlyShifts),t.xp6(2),t.hij("",(null==e?null:e.monthlyShifts)-(null==e?null:e.monthlyOffs)," "),t.xp6(2),t.Oqu(null==e?null:e.monthlyOffs)}}function a5(i,a){1&i&&(t.TgZ(0,"tr",115),t.TgZ(1,"td",116),t._uU(2,"*Incomplete_Shift_Locks"),t.qZA(),t.qZA())}function s5(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td",117),t._uU(4),t.qZA(),t.TgZ(5,"th"),t._uU(6,"= "),t.qZA(),t.TgZ(7,"td",118),t._uU(8),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.shiftCode),t.xp6(1),t.MGl("id","bgColorShift_",null==e?null:e.shiftNumber,""),t.xp6(1),t.hij("",o.isArabic?null==e?null:e.shiftName_AR:null==e?null:e.shiftName_EN," "),t.xp6(3),t.MGl("id","bgColorShift_",null==e?null:e.shiftNumber,""),t.xp6(1),t.hij("",o.isArabic?null==e?null:e.shiftNumberNameAR:null==e?null:e.shiftNumberNameEN," ")}}function r5(i,a){if(1&i&&(t.TgZ(0,"div",107),t.TgZ(1,"div",108),t.TgZ(2,"div",35),t.TgZ(3,"table",109),t.TgZ(4,"tr"),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"th",110),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"th",111),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",111),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"th",111),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"th",111),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"th",111),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th",111),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.qZA(),t.YNc(29,n5,17,8,"tr",78),t.TgZ(30,"tr"),t.TgZ(31,"th",111),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"th",111),t._uU(35),t.qZA(),t.TgZ(36,"th",111),t._uU(37),t.qZA(),t.TgZ(38,"th",111),t._uU(39),t.qZA(),t.TgZ(40,"th",111),t._uU(41),t.qZA(),t.TgZ(42,"th",111),t._uU(43),t.qZA(),t.TgZ(44,"th",111),t._uU(45),t.qZA(),t.qZA(),t.YNc(46,a5,3,0,"tr",112),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",113),t.TgZ(48,"div",35),t.TgZ(49,"table",109),t.TgZ(50,"tr"),t.TgZ(51,"th",111),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"td"),t._uU(55),t.ALo(56,"number"),t.qZA(),t.qZA(),t.TgZ(57,"tr"),t.TgZ(58,"th",111),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"td"),t._uU(62),t.ALo(63,"number"),t.qZA(),t.qZA(),t.TgZ(64,"tr"),t.TgZ(65,"th",111),t._uU(66),t.ALo(67,"translate"),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"td"),t._uU(70),t.ALo(71,"number"),t.qZA(),t.qZA(),t.TgZ(72,"tr"),t.TgZ(73,"th",111),t._uU(74),t.ALo(75,"translate"),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"td"),t._uU(78),t.ALo(79,"number"),t.qZA(),t.qZA(),t.TgZ(80,"tr"),t.TgZ(81,"th",111),t._uU(82),t.ALo(83,"translate"),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"td"),t._uU(86),t.ALo(87,"number"),t.qZA(),t.qZA(),t.TgZ(88,"tr"),t.TgZ(89,"th",111),t._uU(90),t.ALo(91,"translate"),t.ALo(92,"translate"),t.qZA(),t.TgZ(93,"td"),t._uU(94),t.ALo(95,"number"),t.qZA(),t.qZA(),t.TgZ(96,"tr"),t.TgZ(97,"th",111),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"td"),t._uU(101),t.ALo(102,"number"),t.qZA(),t.qZA(),t.TgZ(103,"tr"),t.TgZ(104,"th",111),t._uU(105),t.ALo(106,"translate"),t.qZA(),t.TgZ(107,"td"),t._uU(108),t.ALo(109,"number"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(110,"div",114),t.TgZ(111,"div",35),t.TgZ(112,"table",109),t.YNc(113,s5,9,5,"tr",78),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,38,"S.No")),t.xp6(3),t.hij("",t.lcZ(10,40,"Position")," "),t.xp6(3),t.hij("",t.lcZ(13,42,"Qty")," "),t.xp6(3),t.hij("",t.lcZ(16,44,"Daily_Hrs")," "),t.xp6(3),t.hij("",t.lcZ(19,46,"Monthly_Hrs")," "),t.xp6(3),t.hij("",t.lcZ(22,48,"Scheduled_Shifts")," "),t.xp6(3),t.hij("",t.lcZ(25,50,"Assigned_Shifts")," "),t.xp6(3),t.hij("",t.lcZ(28,52,"OFFS")," "),t.xp6(2),t.Q6J("ngForOf",null==e.roasterReport?null:e.roasterReport.rowsByPositions),t.xp6(3),t.Oqu(t.lcZ(33,54,"Total")),t.xp6(3),t.hij("",null==e.roasterReport?null:e.roasterReport.qty," "),t.xp6(2),t.hij("",null==e.roasterReport?null:e.roasterReport.dailyHrs," "),t.xp6(2),t.hij("",null==e.roasterReport?null:e.roasterReport.monthlyHrs," "),t.xp6(2),t.Oqu(null==e.roasterReport?null:e.roasterReport.monthlyShifts),t.xp6(2),t.hij("",(null==e.roasterReport?null:e.roasterReport.monthlyShifts)-(null==e.roasterReport?null:e.roasterReport.monthlyOffs)," "),t.xp6(2),t.Oqu(null==e.roasterReport?null:e.roasterReport.monthlyOffs),t.xp6(1),t.Q6J("ngIf",null==e.result?null:e.result.isExistEmptyShifts),t.xp6(6),t.Oqu(t.lcZ(53,56,"Contracted_Shifts")),t.xp6(3),t.hij(" ",t.xi3(56,58,e.columnGrandTotal.contractualShiftTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(4),t.Oqu(t.lcZ(60,61,"Contracted_Hours")),t.xp6(3),t.hij("",t.xi3(63,63,null==e.columnGrandTotal?null:e.columnGrandTotal.contractualShiftTime,"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(67,66,"Actual_Shifts"),"(",t.lcZ(68,68,"With_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(71,70,(e.columnGrandTotal.attendedTime+(null==e.rowGrandTotal?null:e.rowGrandTotal.OT)/2)/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(75,73,"Actual_Hours"),"(",t.lcZ(76,75,"With_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(79,77,e.columnGrandTotal.attendedTime+(null==e.rowGrandTotal?null:e.rowGrandTotal.OT)/2,"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(83,80,"Actual_Shifts"),"(",t.lcZ(84,82,"Without_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(87,84,e.columnGrandTotal.attendedTime/((null==e.result?null:e.result.siteWorkingTime)/60),"1.0-1")," "),t.xp6(4),t.AsE("",t.lcZ(91,87,"Actual_Hours"),"(",t.lcZ(92,89,"Without_Overtime"),")"),t.xp6(4),t.hij("",t.xi3(95,91,e.columnGrandTotal.attendedTime,"1.0-1")," "),t.xp6(4),t.Oqu(t.lcZ(99,94,"Overtime_Hours")),t.xp6(3),t.hij("",t.xi3(102,96,null==e.rowGrandTotal?null:e.rowGrandTotal.OT,"1.0-1")," "),t.xp6(4),t.Oqu(t.lcZ(106,99,"Overtime_Shifts\t")),t.xp6(3),t.hij(" ",t.xi3(109,101,60*(null==e.rowGrandTotal?null:e.rowGrandTotal.OT)*1.5/(null==e.result?null:e.result.siteWorkingTime),"1.0-1"),""),t.xp6(5),t.Q6J("ngForOf",e.listOfShiftCodes2)}}let l5=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(u),this.datePipe=e,this.dialog=o,this.oprService=n,this.fb=s,this.http=r,this.router=c,this.apiService=p,this.authService=u,this.utilService=d,this.translate=m,this.notifyService=h,this.validationService=C,this.dialogRef=A,this.result={rows:[],columns:[]},this.filteredRows=[],this.rows=[],this.isLoading=!1,this.isArabic=!1,this.employeesGroup=[],this.projectCode="",this.siteCode="",this.fromDate=new Date,this.toDate=new Date,this.minDate=new Date,this.maxDate=new Date,this.projectSelectionList=[],this.siteSelectionList=[],this.readonly=!1,this.isFromProjectSiteActions=!0,this.listOfShiftCodes2=[],this.reportType="TimeSheet",this.filterType="employee",this.highlightPostedAtt=!1,this.highlightPendingAtt=!1,this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1},this.columnGrandTotal={contractualShiftTime:0,attendedTime:0},this.rowGrandTotal={contractualShiftTime:0,wdc:10,AL:0,UL:0,SL:0,EL:0,STL:0,Ab:0,OT:0,lateHrs:0,W:0,OF:0},this.pageNumber=0,this.pageSize=1,this.totalRowsCount=0,this.totalEmployeesCount=0,this.tempAltEmployeeNumber="",this.filter={employeeNumber:"",shiftCode:""},this.searchKey="",this.dataProcessedTime=new Date,this.isDataProcessed=!1,this.time=0,this.waitingTime=60,this.activeColumn=-1,this.shiftTypeNames=[{number:0,nameEn:"OFF",nameAr:"\u0639\u0637\u0644\u0629ss"},{number:1,nameEn:"Shift 1",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u0623\u0648\u0644\u0649"},{number:2,nameEn:"Shift 2",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0646\u064a\u0629"},{number:3,nameEn:"Shift 3",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629"},{number:4,nameEn:"Shift 4",nameAr:"\u0627\u0644\u0648\u0631\u062f\u064a\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629"}],this.roasterReport={rows:[]}}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.isFromProjectSiteActions&&(this.maxDate=this.inputData.oldestRoasterStartDate,this.setForm())}setForm(){this.form=this.fb.group({}),this.isFromProjectSiteActions&&(this.readonly=!0,this.getProjectData(),this.getSiteData(),this.loadShiftCodes())}submit(){}loadProjectSelectionList(){this.apiService.getall("project/getSelectProjectList2").subscribe(e=>{this.projectSelectionList=e})}loadSiteSelectionListForProject(){this.apiService.getall(`projectSites/getSelectProjectSitesListByProjectCode/${this.projectCode}`).subscribe(e=>{this.siteSelectionList=e})}getProjectData(){this.apiService.getall(`project/getProjectByProjectCode/${this.projectCode}`).subscribe(e=>{this.projectData=e})}getSiteData(){this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${this.projectCode}/${this.siteCode}`).subscribe(e=>{this.siteData=e})}getReport(){if(this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1},this.fromDate.getDate()>28)this.notifyService.showInfo("Invalid Payroll Date: Select Date between 1-28");else{let o=new Date(this.fromDate);o.setMinutes(o.getMinutes()-o.getTimezoneOffset()),this.fromDate=o,this.getReports()}}getRoasterReport(e){this.apiService.post("Reports/getRoasterPayrollReport",e).subscribe(o=>{this.roasterReport=o})}calculateRowGrandTotal(){var e;this.rowGrandTotal={contractualShiftTime:0,wdc:0,AL:0,UL:0,SL:0,EL:0,STL:0,Ab:0,OT:0,lateHrs:0,W:0,OF:0};for(let o=0;o<(null===(e=this.result)||void 0===e?void 0:e.rows.length);o++)(0==o||this.result.rows[o].employeeNumber!=this.result.rows[o-1].employeeNumber)&&(this.rowGrandTotal.wdc+=this.result.rows[o].wdc,this.rowGrandTotal.contractualShiftTime+=this.result.rows[o].contractualShiftTime,this.rowGrandTotal.allottedShiftTime+=this.result.rows[o].allottedShiftTime,this.rowGrandTotal.AL+=this.result.rows[o].AL,this.rowGrandTotal.UL+=this.result.rows[o].UL,this.rowGrandTotal.SL+=this.result.rows[o].SL,this.rowGrandTotal.EL+=this.result.rows[o].EL,this.rowGrandTotal.STL+=this.result.rows[o].STL,this.rowGrandTotal.Ab+=this.result.rows[o].Ab,this.rowGrandTotal.OT+=this.result.rows[o].OT,this.rowGrandTotal.lateHrs+=this.result.rows[o].lateHrs,this.rowGrandTotal.W+=this.result.rows[o].W,this.rowGrandTotal.OF+=(this.result.rows[o].contractualShiftTime-this.result.rows[o].allottedShiftTime)/this.result.siteWorkingTime)}getReports(){if(""!=this.projectCode&&""!=this.siteCode){let e={projectCode:this.projectCode,siteCode:this.siteCode,payrollStartDate:this.fromDate,pageNumber:this.pageNumber,pageSize:this.pageSize,employeeNumber:""};this.isLoading=!0,this.apiService.post("Reports/getAttendancePayrollReport",e).subscribe(o=>{var n,s;this.result=o,(null===(n=null==o?void 0:o.rows)||void 0===n?void 0:n.length)>0?((null==o?void 0:o.isExistEmptyShifts)&&this.notifyService.showWarning("Incomplete_Shift_Locks"),this.fromDate=null==o?void 0:o.columns[0].attnDate,this.toDate=null==o?void 0:o.columns[(null===(s=null==o?void 0:o.columns)||void 0===s?void 0:s.length)-1].attnDate,this.totalEmployeesCount=o.totalEmployeesCount,this.loadRemainingData(e),this.getRoasterReport(e)):(this.notifyService.showInfo("No Roasters Found"),this.isLoading=!1)},o=>{this.isLoading=!1,this.notifyService.showError(o.error.message)})}}loadRemainingData(e){e.pageNumber++,e.pageNumber>Math.floor(this.totalEmployeesCount/this.pageSize)?(this.employeesGroup=[],this.isLoading=!1,this.generateReportAndCalculations(),this.startTimer(),this.RefreshOffs()):this.apiService.post("Reports/getAttendancePayrollReport",e).subscribe(o=>{this.result.rows=this.result.rows.concat(o.rows),this.loadRemainingData(e)})}filterRows(e){return e.filter(o=>o.employeeNumber)}generateReportAndCalculations(){this.employeesGroup=[],this.result.rows.sort((e,o)=>e.employeeNumber<o.employeeNumber?-1:1),this.result.rows.forEach(e=>{e.uniqueShiftsCount>0&&this.employeesGroup.indexOf(o=>o.employeeNumber==e.employeeNumber)<0&&this.employeesGroup.push({employeeNumber:e.employeeNumber})}),this.calculateColumnTotals(this.result),this.calculateRowTotals(this.result),this.updateActiveColumn(),this.calculateRowGrandTotal()}updateActiveColumn(){this.activeColumn=-1;for(let e=0;e<this.result.columns.length;e++)if(this.result.rows.findIndex(o=>o.attendanceMatrix[e].attndId>0)<0&&!this.result.columns[e].isHoliday&&this.result.rows.findIndex(o=>"O"!=o.shiftCode&&"-"==o.attendanceMatrix[e].attnFlag)>=0){this.activeColumn=e;break}}calculateRowTotals(e){var o,n,s,r,c,p,u,d,m,h,C,A,S,D,U,R,O,J,F,nt,$,z,K,mt,st;for(let Y=0;Y<(null==e?void 0:e.rows.length);Y++){let k=null==e?void 0:e.rows.filter(P=>P.employeeNumber==(null==e?void 0:e.rows[Y].employeeNumber)),At=0,bt=0,Tt=0,Ct=0,ft=0,Q=0,B=0,qt=0,vt=0,yt=0,Zt=0,Ut=0;for(let P=0;P<k.length;P++)for(let I=0;I<(null==e?void 0:e.columns.length);I++)bt+=k[P].attendanceMatrix[I].contractualShiftTime,Tt+=k[P].attendanceMatrix[I].allottedShiftTime,k[P].attendanceMatrix[I].allottedShiftTime>0&&At++,1==(null===(o=k[P].attendanceMatrix[I])||void 0===o?void 0:o.isOnLeave)?"AL"==k[P].attendanceMatrix[I].attnFlag?Ct++:"UL"==k[P].attendanceMatrix[I].attnFlag?qt++:"CL"==k[P].attendanceMatrix[I].attnFlag?Q++:"STL"==k[P].attendanceMatrix[I].attnFlag?B++:"EL"==k[P].attendanceMatrix[I].attnFlag?ft++:"W"==k[P].attendanceMatrix[I].attnFlag&&yt++:"S"==(null===(n=k[P].attendanceMatrix[I])||void 0===n?void 0:n.attnFlag)||"A"==(null===(s=k[P].attendanceMatrix[I])||void 0===s?void 0:s.attnFlag)?vt++:(null===(r=k[P].attendanceMatrix[I])||void 0===r?void 0:r.refIdForAlt)>0?Zt+=null!==(p=null===(c=k[P].attendanceMatrix[I])||void 0===c?void 0:c.attendedTime)&&void 0!==p?p:0:0==(null===(d=null===(u=k[P])||void 0===u?void 0:u.attendanceMatrix[I])||void 0===d?void 0:d.refIdForAlt)&&(null===(h=null===(m=k[P])||void 0===m?void 0:m.attendanceMatrix[I])||void 0===h?void 0:h.allottedShiftTime)<(null===(A=null===(C=k[P])||void 0===C?void 0:C.attendanceMatrix[I])||void 0===A?void 0:A.attendedTime)&&(Zt+=(null===(D=null===(S=k[P])||void 0===S?void 0:S.attendanceMatrix[I])||void 0===D?void 0:D.attendedTime)-(null===(U=k[P].attendanceMatrix[I])||void 0===U?void 0:U.allottedShiftTime)),(null===(R=k[P].attendanceMatrix[I])||void 0===R?void 0:R.attndId)>0&&"S"!=(null===(O=k[P].attendanceMatrix[I])||void 0===O?void 0:O.attnFlag)&&"A"!=(null===(J=k[P].attendanceMatrix[I])||void 0===J?void 0:J.attnFlag)&&(null===(F=k[P].attendanceMatrix[I])||void 0===F?void 0:F.allottedShiftTime)>(null===($=null===(nt=k[P])||void 0===nt?void 0:nt.attendanceMatrix[I])||void 0===$?void 0:$.attendedTime)&&(Ut+=(null===(K=null===(z=k[P])||void 0===z?void 0:z.attendanceMatrix[I])||void 0===K?void 0:K.allottedShiftTime)-(null===(st=null===(mt=k[P])||void 0===mt?void 0:mt.attendanceMatrix[I])||void 0===st?void 0:st.attendedTime));e.rows[Y].contractualShiftTime=bt,e.rows[Y].wdc=At,e.rows[Y].allottedShiftTime=Tt,e.rows[Y].AL=Ct,e.rows[Y].UL=qt,e.rows[Y].SL=Q,e.rows[Y].EL=ft,e.rows[Y].STL=B,e.rows[Y].Ab=vt,e.rows[Y].OT=Zt/60,e.rows[Y].lateHrs=Ut/60,e.rows[Y].W=yt}}calculateColumnTotals(e){var o,n,s;this.columnGrandTotal.contractualShiftTime=0,this.columnGrandTotal.attendedTime=0;for(let r=0;r<(null==e?void 0:e.columns.length);r++){let c=0,p=0,u=0;for(let d=0;d<(null==e?void 0:e.rows.length);d++)c+=null===(o=null==e?void 0:e.rows[d].attendanceMatrix[r])||void 0===o?void 0:o.allottedShiftTime,p+=null===(n=null==e?void 0:e.rows[d].attendanceMatrix[r])||void 0===n?void 0:n.attendedTime,u+=null===(s=null==e?void 0:e.rows[d].attendanceMatrix[r])||void 0===s?void 0:s.contractualShiftTime;e.columns[r].allottedShiftTime=c/60,e.columns[r].attendedTime=p/60,e.columns[r].contractualShiftTime=u/60,this.columnGrandTotal.contractualShiftTime+=e.columns[r].contractualShiftTime,this.columnGrandTotal.attendedTime+=e.columns[r].attendedTime}}getEmpRow(e){return this.employeesGroup.findIndex(o=>o.employeeNumber==this.result.rows[e].employeeNumber)}getEmpBackGround(e,o){return(this.getEmpRow(e)+o)%2==0?"bgColorEven":"bgColorOdd"}getCellBackGround(e,o){var n,s,r,c,p,u,d;if(this.activeColumn==o)return"bgColorActiveColumn";if(this.alternativeAttedanceMapping.r1==e&&this.alternativeAttedanceMapping.c==o)return"bgColorPrimaryAttnd";if(this.alternativeAttedanceMapping.r2==e&&this.alternativeAttedanceMapping.c==o)return"bgColorAltAttnd";{let m=this.getEmpRow(e);return(null===(n=this.result.rows[e].attendanceMatrix[o])||void 0===n?void 0:n.isPosted)&&this.highlightPostedAtt?"bgColorPosted":"A"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorAbsent":"OT"==this.result.rows[e].attendanceMatrix[o].attnFlag||this.result.rows[e].attendanceMatrix[o].refIdForAlt>0?"bgColorOT":(null===(s=this.result.rows[e].attendanceMatrix[o])||void 0===s?void 0:s.isTransfered)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorTransfer":(null===(r=this.result.rows[e].attendanceMatrix[o])||void 0===r?void 0:r.isTerminated)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorTerminated":(null===(c=this.result.rows[e].attendanceMatrix[o])||void 0===c?void 0:c.isResigned)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorResign":(null===(p=this.result.rows[e].attendanceMatrix[o])||void 0===p?void 0:p.isOnLeave)&&0==this.result.rows[e].attendanceMatrix[o].altAttId?"bgColorLeave":"-"==(null===(u=this.result.rows[e].attendanceMatrix[o])||void 0===u?void 0:u.attnFlag)&&this.highlightPendingAtt&&!(null===(d=this.result.columns[o])||void 0===d?void 0:d.isHoliday)&&"O"!=this.result.rows[e].shiftCode?"bgColorAttendancePending":"S"==this.result.rows[e].attendanceMatrix[o].attnFlag||"O"==this.result.rows[e].attendanceMatrix[o].attnFlag||this.result.rows[e].attendanceMatrix[o].altAttId>0?"bgColorSwap":""==this.result.rows[e].attendanceMatrix[o].attnFlag||this.result.columns[o].isHoliday&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?"bgColorNoShift":m%2==0?"bgColorEven":"bgColorOdd"}}openDatePicker(e){e.open()}closeModel(){this.dialogRef.close()}exportexcel(){let e=document.getElementById("excel_table");const o=ut.P6.table_to_sheet(e),n=ut.P6.book_new();ut.P6.book_append_sheet(n,o,"Sheet1"),ut.NC(n,this.reportType+"_"+this.projectCode+"_"+this.siteCode+".xlsx")}FindAlternativeAttedanceMapping(e,o){var n;this.alternativeAttedanceMapping={r1:-1,r2:-1,c:o};let s=null===(n=this.result.rows[e])||void 0===n?void 0:n.attendanceMatrix[o];if(s.attndId>0){if(s.altAttId>0){this.alternativeAttedanceMapping.r1=e;let r=this.result.rows.findIndex(c=>c.attendanceMatrix[o].attndId==s.altAttId);this.alternativeAttedanceMapping.r2=r}else if(s.refIdForAlt>0){let r=this.result.rows.findIndex(c=>c.attendanceMatrix[o].attndId==s.refIdForAlt);this.alternativeAttedanceMapping.r1=r,this.alternativeAttedanceMapping.r2=e}}else this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1}}getToolTip(e,o,n){var s,r,c=new f.uU("en-US");let p=-1==o?"":c.transform(null===(s=this.result.columns[o])||void 0===s?void 0:s.attnDate,"dd/MM/yyyy"),u=this.isArabic?this.result.rows[e].employeeNameAr:this.result.rows[e].employeeName;return-1==o?`${n}  : \nEmployee Number : ${this.result.rows[e].employeeNumber}.\nEmployee Name : ${u}.\n`:`Employee Number : ${this.result.rows[e].employeeNumber}.\nEmployee Name : ${u}.\nShift : ${this.result.rows[e].shiftCode}.\nDate : ${p}.\nAttendance ID: ${null===(r=this.result.rows[e].attendanceMatrix[o])||void 0===r?void 0:r.attndId}.\nAlternate AttID: ${this.result.rows[e].attendanceMatrix[o].altAttId}`}translateToolTip(e){return this.translate.instant(e)}openPrint(){const e=document.getElementById("excel_table"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}loadShiftCodes(){this.apiService.getall(`ShiftMaster/getShiftsByProjectAndSiteCode2/${this.projectCode}/${this.siteCode}`).subscribe(e=>{this.listOfShiftCodes2=e,this.listOfShiftCodes2.sort((n,s)=>"O"==n.shiftCode||n.inTime<s.inTime?-1:1);const o=this.listOfShiftCodes2.findIndex(n=>"O"==n.shiftCode)>=0;for(let n=0;n<this.listOfShiftCodes2.length;n++)this.listOfShiftCodes2[n].shiftNumberNameEN=o?this.shiftTypeNames[n].nameEn:this.shiftTypeNames[n+1].nameEn,this.listOfShiftCodes2[n].shiftNumberNameAR=o?this.shiftTypeNames[n].nameAr:this.shiftTypeNames[n+1].nameAr,this.listOfShiftCodes2[n].shiftNumber=o?n:n+1})}singClick(e,o){this.FindAlternativeAttedanceMapping(e,o),""!=this.result.rows[e].attendanceMatrix[o].attnFlag&&0==this.result.rows[e].attendanceMatrix[o].attndId&&this.manualAttendance(e,o)}onRightClick(e,o){return this.result.rows[e].attendanceMatrix[o].attndId>0&&0==this.result.rows[e].attendanceMatrix[o].refIdForAlt?this.updateManualAttendance(e,o):""==this.result.rows[e].attendanceMatrix[o].attnFlag&&this.openPvRequestWindow(e,o),!1}manualAttendance(e,o){var n;let s=this.getEmpRow(e),c=new f.uU("en-US").transform(null===(n=this.result.columns[o])||void 0===n?void 0:n.attnDate,"yyyy-MM-dd");this.apiService.post("monthlyRoaster/getSingleRoasterForEmployee",{employeeNumber:this.employeesGroup[s].employeeNumber,projectCode:this.projectCode,siteCode:this.siteCode,date:this.result.columns[o].attnDate}).subscribe(u=>{this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.projectCode}/${this.siteCode}/${this.employeesGroup[s].employeeNumber}/${c}/${this.result.rows[e].shiftCode}`).subscribe(d=>{var m,h,C,A;let S={r:e,c:o,totRows:this.employeesGroup.length},U={id:d.id,projectCode:this.projectCode,siteCode:this.siteCode,attnDate:c,shiftCode:this.result.rows[e].shiftCode,employeeNumber:this.result.rows[e].employeeNumber,employeeID:null!==(m=null==d?void 0:d.employeeID)&&void 0!==m?m:0,isDefShiftOff:"O"==this.result.rows[e].shiftCode,isActive:!0,inTime:null===(h=this.listOfShiftCodes2.find(R=>R.shiftCode==this.result.rows[e].shiftCode))||void 0===h?void 0:h.inTime,outTime:null===(C=this.listOfShiftCodes2.find(R=>R.shiftCode==this.result.rows[e].shiftCode))||void 0===C?void 0:C.outTime,isDefaultEmployee:!(null===(A=this.listOfShiftCodes2.find(R=>R.shiftCode==this.result.rows[e].shiftCode))||void 0===A?void 0:A.isOff),isPrimarySite:!0,isPosted:null==d?void 0:d.isPosted,altEmployeeNumber:this.result.rows[e].employeeNumber,altShiftCode:this.result.rows[e].shiftCode,attendance:"P",refIdForAlt:0,leavesData:null==d?void 0:d.leavesData,transORresignData:null==d?void 0:d.transORresignData,isOnLeave:null==d?void 0:d.isOnLeave,isWithDrawn:null==d?void 0:d.isWithDrawn,isResigned:null==d?void 0:d.isResigned,isTransfered:null==d?void 0:d.isTransfered,isTerminated:null==d?void 0:d.isTerminated,daywiseConsolidateData:this.getDayWiseConsolidateData(e,o),roasterData:u,r:e,c:o,shiftCodesSelectionList:this.listOfShiftCodes2};this.openManualAttendanceDialogWindow(S,U,g.O.create,"Manual_Attendance","Save",ke)})})}openManualAttendanceDialogWindow(e,o,n,s,r,c){if(!this.isLoading){this.isLoading=!0;let p=this.oprService.openAutoWidthDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.inputData=o,p.componentInstance.inputCellData=e,p.afterClosed().subscribe(u=>{this.isLoading=!1,(null==u?void 0:u.isUpdatedShift)?(o.altEmployeeNumber="",this.removeAndUpdateEmployeeRows(o)):1==(null==u?void 0:u.res)&&this.removeAndUpdateEmployeeRows(null==u?void 0:u.outputData)},u=>{this.isLoading=!1})}}removeAndUpdateEmployeeRows(e){this.alternativeAttedanceMapping={r1:-1,r2:-1,c:-1};let o=null==e?void 0:e.employeeNumber,n=null==e?void 0:e.altEmployeeNumber;""!=o&&(this.employeesGroup=this.employeesGroup.filter(s=>s.employeeNumber!=o),this.result.rows=this.result.rows.filter(s=>s.employeeNumber!=o),this.insertNewEmployee(o)),""!=n&&o!=n&&(this.employeesGroup=this.employeesGroup.filter(s=>s.employeeNumber!=n),this.result.rows=this.result.rows.filter(s=>s.employeeNumber!=n),this.insertNewEmployee(n))}insertNewEmployee(e){this.apiService.post("Reports/getAttendancePayrollReport",{projectCode:this.projectCode,siteCode:this.siteCode,payrollStartDate:this.fromDate,pageNumber:0,pageSize:1,employeeNumber:e}).subscribe(n=>{this.tempAltEmployeeNumber="",n.rows.length>0&&(this.result.rows=this.result.rows.concat(n.rows),this.generateReportAndCalculations())})}openUpdateAttendanceDialogWindow(e,o,n,s,r,c){if(!this.isLoading){this.isLoading=!0;let p=this.oprService.openAutoWidthDialog(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.inputData=o,p.componentInstance.inputCellData=e,p.afterClosed().subscribe(u=>{this.isLoading=!1,1==(null==u?void 0:u.res)&&((""!=this.tempAltEmployeeNumber&&""==u.outputData.altEmployeeNumber||""!=this.tempAltEmployeeNumber&&""==u.outputData.employeeNumber)&&(u.outputData.altEmployeeNumber=this.tempAltEmployeeNumber,this.tempAltEmployeeNumber=""),this.removeAndUpdateEmployeeRows(u.outputData))},u=>{this.isLoading=!1})}}minsToStrHrsMins(e){return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`}hrsToStrHrsMins(e){let o=Math.floor(e);return`${o}:${Math.ceil(60*(e-o)).toString().padStart(2,"0")}`}updateManualAttendance(e,o){var n,s,r=new f.uU("en-US");let c=this.getEmpRow(e),p=null===(n=this.result.columns[o])||void 0===n?void 0:n.attnDate,u=r.transform(null===(s=this.result.columns[o])||void 0===s?void 0:s.attnDate,"yyyy-MM-dd");if(new Date<=p)this.notifyService.showError(this.translate.instant("Can_not_Enter_Attendance_For_Future_Date"));else{let m={r:e,c:o,totRows:this.employeesGroup.length};this.apiService.getall(`EmployeesAttendance/getSingleEmployeeAttendance/${this.projectCode}/${this.siteCode}/${this.employeesGroup[c].employeeNumber}/${u}/${this.result.rows[e].shiftCode}`).subscribe(h=>{var C;this.tempAltEmployeeNumber=null!==(C=h.altEmployeeNumber)&&void 0!==C?C:"",h.daywiseConsolidateData=this.getDayWiseConsolidateData(e,o),this.openUpdateAttendanceDialogWindow(m,h,g.O.create,"Update_Manual_Attendance","Save",Re)})}}getDayWiseConsolidateData(e,o){var n,s,r,c,p,u,d,m,h,C,A;return{tch:null===(s=null===(n=this.result)||void 0===n?void 0:n.columns[o])||void 0===s?void 0:s.contractualShiftTime,tch_min:60*(null===(c=null===(r=this.result)||void 0===r?void 0:r.columns[o])||void 0===c?void 0:c.contractualShiftTime)%60,tcs:60*(null===(u=null===(p=this.result)||void 0===p?void 0:p.columns[o])||void 0===u?void 0:u.contractualShiftTime)/(null===(d=this.result)||void 0===d?void 0:d.siteWorkingTime),ot_count:0,mins:60*(null===(h=null===(m=this.result)||void 0===m?void 0:m.columns[o])||void 0===h?void 0:h.attendedTime)%60,hours:Math.floor(null===(A=null===(C=this.result)||void 0===C?void 0:C.columns[o])||void 0===A?void 0:A.attendedTime)}}isShiftFilterApplied(){return"shiftCode"==this.filterType&&""!=this.searchKey}applyFilter(){"employee"==this.filterType?(this.filter.employeeNumber=this.searchKey,this.filter.shiftCode=""):"shiftCode"==this.filterType&&(this.filter.shiftCode=this.searchKey,this.filter.employeeNumber="")}canShowRow(e){return""==this.searchKey||"shiftCode"==this.filterType&&(null==e?void 0:e.shiftCode)==this.searchKey||!("employee"!=this.filterType||!(null==e?void 0:e.employeeNumber.includes(this.searchKey))&&!(this.isArabic?null==e?void 0:e.employeeNameAr.includes(this.searchKey):null==e?void 0:e.employeeName.toLowerCase().includes(this.searchKey.toLowerCase())))}startTimer(){this.dataProcessedTime=new Date,this.interval=setInterval(()=>{let e=new Date,o=60*this.dataProcessedTime.getHours()*60+60*this.dataProcessedTime.getMinutes()+this.dataProcessedTime.getSeconds(),n=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds();this.time=n-o,this.time<this.waitingTime?this.isDataProcessed=!0:(this.isDataProcessed=!1,this.pauseTimer())},1e3)}pauseTimer(){clearInterval(this.interval)}reloadData(){this.getReports()}clearAttendance(){if(!this.isLoading){let e=this.oprService.openAutoWidthDialog(this.dialog,Fe);e.componentInstance.dbops=g.O.create,e.componentInstance.modalTitle="Clear_Attendance",e.componentInstance.modalBtnTitle="Save",e.componentInstance.projectCode=this.projectCode,e.componentInstance.siteCode=this.siteCode,e.componentInstance.maxDate=this.toDate,e.componentInstance.minDate=this.fromDate,e.afterClosed().subscribe(o=>{this.isLoading=!1,(1==o.res||o)&&this.getReports()})}}postAttendance(){if(!this.isLoading){let e=this.oprService.openAutoWidthDialog(this.dialog,Pe);e.componentInstance.dbops=g.O.create,e.componentInstance.modalTitle="Post_Attendance",e.componentInstance.modalBtnTitle="Save",e.componentInstance.maxPostDate=this.toDate,e.componentInstance.minPostDate=this.fromDate,e.componentInstance.projectCode=this.projectCode,e.componentInstance.siteCode=this.siteCode,e.afterClosed().subscribe(o=>{this.isLoading=!1,1==o&&this.getReports()})}}autoAttendance(e){const o=this.oprService.openApprovalDialog(this.dialog,ao);o.componentInstance.dbops=g.O.create,o.componentInstance.modalTitle="Auto_Attendance",o.componentInstance.confirmType="general",o.componentInstance.titleQuestion=this.translate.instant("Are_You_Sure?"),o.componentInstance.subTitleQuestion=this.translate.instant(-1==e?"Do_you_want_to_enter_default_attendance_for_whole_month?":"Do_you_want_to_enter_default_attendance_for_selected_day?"),o.afterClosed().subscribe(n=>{1==n&&(this.isLoading=!0,this.enterAutoAttendance(e))})}enterAutoAttendance(e){var o,n;let s=[],r=e,c=e;-1==e&&(r=0,c=this.result.columns.length-1);for(let p=r;p<=c;p++){let u=this.result.rows.findIndex(d=>d.attendanceMatrix[p].attndId>=0);if(!(this.result.columns[p].isHoliday&&r!=c||u))for(let d=0;d<this.result.rows.length;d++)!this.result.rows[d].attendanceMatrix[p].isResigned&&!this.result.rows[d].attendanceMatrix[p].isTransfered&&!this.result.rows[d].attendanceMatrix[p].isTerminated&&"-"==this.result.rows[d].attendanceMatrix[p].attnFlag&&"O"!=this.result.rows[d].shiftCode&&s.push({id:0,projectCode:this.projectCode,siteCode:this.siteCode,attnDate:this.result.columns[p].attnDate,shiftCode:this.result.rows[d].shiftCode,employeeNumber:this.result.rows[d].employeeNumber,isDefShiftOff:!1,isActive:!0,inTime:null===(o=this.listOfShiftCodes2.find(m=>m.shiftCode==this.result.rows[d].shiftCode))||void 0===o?void 0:o.inTime,outTime:null===(n=this.listOfShiftCodes2.find(m=>m.shiftCode==this.result.rows[d].shiftCode))||void 0===n?void 0:n.outTime,isDefaultEmployee:!0,isPrimarySite:!0,isPosted:!1,altEmployeeNumber:"",altShiftCode:"",attendance:"P",refIdForAlt:0,shiftNumber:1})}if(this.interval=setInterval(()=>{},1e3),0==s.length)return this.isLoading=!1,void this.notifyService.showWarning(this.translate.instant("No_Updations_Found"));this.apiService.post("EmployeesAttendance/enterAutoAttendance",s).subscribe(p=>{this.isLoading=!1,this.getReports()},p=>{var u;this.isLoading=!1,this.notifyService.showError(this.translate.instant(null===(u=null==p?void 0:p.error)||void 0===u?void 0:u.message))})}getAttendanceFlag(e,o){var n,s,r,c,p,u,d;let m=this.result.rows[e].attendanceMatrix[o].attnFlag;return(null===(n=this.result.rows[e].attendanceMatrix[o])||void 0===n?void 0:n.isTransfered)&&""!=this.result.rows[e].attendanceMatrix[o].attnFlag?m="TR":(null===(s=this.result.rows[e].attendanceMatrix[o])||void 0===s?void 0:s.isResigned)&&""!=this.result.rows[e].attendanceMatrix[o].attnFlag?m="R":(null===(r=this.result.rows[e].attendanceMatrix[o])||void 0===r?void 0:r.isTerminated)&&""!=this.result.rows[e].attendanceMatrix[o].attnFlag?m="X":"S"!=this.result.rows[e].attendanceMatrix[o].attnFlag||(null===(c=this.result.rows[e].attendanceMatrix[o])||void 0===c?void 0:c.isOnLeave)||"O"==this.result.rows[e].shiftCode?"O"==this.result.rows[e].shiftCode&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag?m="O":(null===(p=this.result.columns[o])||void 0===p?void 0:p.isHoliday)&&"-"==this.result.rows[e].attendanceMatrix[o].attnFlag&&(m="H"):m="A","TimeSheet"==this.reportType&&(null===(u=this.result.rows[e].attendanceMatrix[o])||void 0===u?void 0:u.attendedTime)>0&&(m=this.minsToStrHrsMins(null===(d=this.result.rows[e].attendanceMatrix[o])||void 0===d?void 0:d.attendedTime)),m}getDayBackground(e){var o;if(null===(o=this.result.columns[e])||void 0===o?void 0:o.isHoliday)return"bgColorDateHeaderHoliday"}getDayTooltip(e){return`${(null==e?void 0:e.isHoliday)?this.isArabic?e.holidayInf.calanderName_AR:e.holidayInf.calanderName_EN:""}`}getShiftBgColor(e){let o=this.listOfShiftCodes2.find(s=>s.shiftCode==e);return`bgColorShift_${null==o?0:o.shiftNumber}`}getShiftNumberName(e){let o=this.listOfShiftCodes2.find(n=>n.shiftCode==e);return null==o?"-":this.isArabic?o.shiftNumberNameAR:o.shiftNumberNameEN}getWeekDay(e){switch(new Date(e).getDay()){case 0:return"Su";case 1:return"M";case 2:return"T";case 3:return"W";case 4:return"Th";case 5:return"F";case 6:return"S";default:return""}}openPvRequestWindow(e,o){let n=this.datePipe.transform(this.result.columns[o].attnDate,"yyyy-MM-dd");this.apiService.post("PvAllRequests/getRecentApprovedPvRequestData",{projectCode:this.projectCode,siteCode:this.siteCode,employeeNumber:this.result.rows[e].employeeNumber,date:n}).subscribe(r=>0==(null==r?void 0:r.reqId)||null==r?(this.notifyService.showInfo("Employee Not Available"),!0):(1==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.O.create,"Request_For_Add_Resource","View",Jt):2==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.O.create,"Request_For_Remove_Resource","View",Rt):3==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.O.create,"Request_For_Transfer_Employee","View",Pt):4==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.O.create,"Request_For_Transfer_With_Replacement","View",Ft):5==(null==r?void 0:r.requestType)?this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.O.create,"Request_For_Swap_Employees","View",te):6==(null==r?void 0:r.requestType)&&this.openPvRequestDialogManage(null==r?void 0:r.reqId,g.O.create,"Request_For_Replace_Resource","View",Mt),!1))}openPvRequestDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{})}RefreshOffs(){var e,o,n,s,r;let p="01"==(null===(e=this.datePipe.transform(this.fromDate,"yyyy-MM-dd"))||void 0===e?void 0:e.substr(8,2)),u={siteCode:this.siteCode,month:null===(o=this.datePipe.transform(this.fromDate,"yyyy-MM-dd"))||void 0===o?void 0:o.substr(5,2),year:null===(n=this.datePipe.transform(this.fromDate,"yyyy-MM-dd"))||void 0===n?void 0:n.substr(0,4)};if(this.apiService.post("OpUtils/RefreshOffs",u),!p){let d={siteCode:this.siteCode,month:null===(s=this.datePipe.transform(this.toDate,"yyyy-MM-dd"))||void 0===s?void 0:s.substr(5,2),year:null===(r=this.datePipe.transform(this.toDate,"yyyy-MM-dd"))||void 0===r?void 0:r.substr(0,4)};this.apiService.post("OpUtils/RefreshOffs",d)}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(T.uw),t.Y36(W.f),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-attendance-payroll-report2"]],features:[t.qOj],decls:72,vars:76,consts:[["type","button",1,"btn","close",3,"click"],["id","header"],[1,"row"],[1,"col-md-9","col-lg-9"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0",2,"background","none"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-md-3","col-lg-3"],[1,"btn-list"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary",3,"click"],[1,"far","fa-calendar-alt"],["hidden","hidden",1,"btn-list",2,"background-color","royalblue","color","white"],["hidden","hidden",1,"form-control","datapickerinput",3,"max","ngModel","ngModelOptions","matDatepicker","placeholder","ngModelChange","click","dateChange"],["matSuffix","",3,"for","ngModel","dateChange","ngModelChange"],[3,"dateChange"],["picker",""],["style","text-align:center",4,"ngIf"],[2,"background-color","#f9fbfd",3,"isLoading"],["id","excel_table"],["id","ReportTable",1,"card"],[1,"table-responsive"],[1,"none-border",2,"width","100%"],[2,"background-color","white","text-align","center","border","none","padding","0px 0px 0px 0px"],["colspan","32",2,"background-color","white","text-align","center","border","none","padding","0px 0px 0px 0px"],[2,"font-size","large"],[2,"font-size","medium"],[2,"font-size","x-small"],[2,"font-size","small","font-style","italic"],["class","sambaAttendanceTable  table-bordered no-wrap",4,"ngIf"],["id","consolidateTables","class","row","style","padding:10px 10px 10px 10px; text-align:center",4,"ngIf"],[2,"text-align","center"],[1,"row",2,"text-align","center"],[1,"card","col-md-3","col-lg-3",2,"padding-right","5px"],[1,"card-body"],[1,"card-title"],[1,"radio"],["for","radio1"],["type","radio","name","reportType","value","Attendance",3,"ngModel","ngModelChange"],["type","radio","name","reportType",3,"value","ngModel","ngModelChange"],[1,"card","col-md-4","col-lg-4",2,"padding-right","5px"],["type","text","class","form-control btn","placeholder","Enter Key","style","width:48%;border:solid;border-color:lightgray;border-width:1px;text-align:start",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","form-control btn","style","width: 48%; border: solid; border-color: lightgray; border-width: 1px;",3,"ngModel","ngModelOptions","ngModelChange","change",4,"ngIf"],["type","radio","name","filterType",3,"value","ngModel","ngModelChange","click"],[1,"card","col-md-5","col-lg-5",2,"vertical-align","central"],[1,"card-body","btn-list",2,"text-align","center","padding","15px 15px 0px 0px"],[1,"btn","btn","waves-effect","waves-light","btn-outline-primary",2,"text-align","center","vertical-align","central",3,"matTooltip","click"],[1,"fas","fa-thumbs-up",2,"font-size","x-large"],[1,"fas","fa-fast-forward",2,"font-size","x-large"],[1,"fas","fa-eraser",2,"font-size","x-large"],[1,"fas","fa-history",2,"font-size","x-large"],[1,"fas","fa-arrow-alt-circle-down",2,"font-size","x-large"],[1,"col-md-12",2,"vertical-align","central"],[1,"btn-list",2,"align-content","center","vertical-align","central","padding","15px 20px 0px 0px"],["type","checkbox","name","highlightData",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter Key",1,"form-control","btn",2,"width","48%","border","solid","border-color","lightgray","border-width","1px","text-align","start",3,"ngModel","ngModelChange","change"],[1,"form-control","btn",2,"width","48%","border","solid","border-color","lightgray","border-width","1px",3,"ngModel","ngModelOptions","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"sambaAttendanceTable","table-bordered","no-wrap"],["colspan","4"],[4,"ngIf"],["rowspan","2",2,"font-size","0.775rem !important","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","text-align","center"],["rowspan","2","colspan","2",2,"font-size","0.775rem !important","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","text-align","center"],["style","font-size:0.775rem !important; font-family: 'Poppins', sans-serif;font-weight:600;padding: 2px;",3,"id","matTooltip",4,"ngFor","ngForOf"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","300","text-align","center"],[2,"font-size","0.775rem !important","font-family","'Poppins', sans-serif","font-weight","600","padding","2px",3,"id","matTooltip"],["style","color:white;font-size:x-small",4,"ngIf"],["class","clickaction clickicons","style","color:yellow;font-size:x-small",3,"matTooltip","click",4,"ngIf"],[2,"color","white","font-size","x-small"],[1,"clickaction","clickicons",2,"color","yellow","font-size","x-small",3,"matTooltip","click"],[1,"fas","fa-sync-alt",2,"font-size","small"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","lightgreen"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","red"],[2,"font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px","background-color","#c0d5fa"],[2,"text-align","center","font-size","x-large"],[4,"ngFor","ngForOf"],["style","padding: 3px; text-align: center;",3,"id",4,"ngIf"],["style","padding: 3px; text-align: center",3,"id",4,"ngIf"],["style","padding: 3px; text-align: left",3,"id",4,"ngIf"],[2,"padding","3px","text-align","center",3,"id"],["style","text-align: center;",3,"id","matTooltip","click","contextmenu",4,"ngFor","ngForOf"],[2,"padding","3px","text-align","left",3,"id"],["class","fas fa-user","style","color:blue;background-color:yellow",4,"ngIf"],[2,"font-style","italic"],[1,"fas","fa-user",2,"color","blue","background-color","yellow"],["class","fas fa-user","style","color: blue; background-color: yellow",4,"ngIf"],[2,"text-align","center",3,"id","matTooltip","click","contextmenu"],["style","text-align: center",3,"id","matTooltip",4,"ngIf"],["style","padding: 3px; text-align: center",3,"id","matTooltip",4,"ngIf"],[2,"text-align","center",3,"id","matTooltip"],[2,"padding","3px","text-align","center",3,"id","matTooltip"],["colspan","4",2,"text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],[2,"background-color","#e8eef3","color","black"],["colspan","4",2,"background-color","yellow","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","600","padding","2px"],["style","background-color:yellow",4,"ngFor","ngForOf"],[2,"background-color","yellow"],[2,"background-color","white"],["style","background-color:cornsilk",4,"ngFor","ngForOf"],[2,"background-color","cornsilk"],["colspan","4",2,"background-color","yellow","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: yellow",4,"ngFor","ngForOf"],["colspan","4",2,"background-color","sandybrown","text-align","right","font-size","0.675rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","padding","2px"],["style","background-color: sandybrown",4,"ngFor","ngForOf"],[2,"background-color","sandybrown"],["id","consolidateTables",1,"row",2,"padding","10px 10px 10px 10px","text-align","center"],["id","consolidateRoasterPlanTable",1,"card"],[1,"consolidateDataTable"],["colspan","2"],["colspan","3"],["class","none-border","style","background-color:white;color:red",4,"ngIf"],["id","consolidateTimeSheetTable",1,"card"],["id","consolidateShiftsPlanTable",1,"card"],[1,"none-border",2,"background-color","white","color","red"],["colspan","21","width","100%",1,"none-border",2,"background-color","white","color","red"],["colspan","2",3,"id"],["colspan","3",3,"id"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"button",0),t.NdJ("click",function(){return o.closeModel()}),t._uU(1,"x"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"nav",5),t.TgZ(7,"ol",6),t.TgZ(8,"li",7),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"li",7),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"li",7),t._uU(15),t.qZA(),t.TgZ(16,"li",7),t._uU(17),t.qZA(),t.TgZ(18,"li",8),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"div",10),t.TgZ(23,"button",11),t.NdJ("click",function(){t.CHM(n);const r=t.MAs(37);return o.openDatePicker(r)}),t._uU(24),t.ALo(25,"translate"),t.ALo(26,"translate"),t._UZ(27,"i",12),t.qZA(),t.TgZ(28,"div",13),t._uU(29),t.ALo(30,"translate"),t.ALo(31,"translate"),t.TgZ(32,"input",14),t.NdJ("ngModelChange",function(r){return o.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(37);return o.openDatePicker(r)})("dateChange",function(){return o.getReport()}),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"mat-datepicker-toggle",15),t.NdJ("dateChange",function(){return o.getReport()})("ngModelChange",function(r){return o.fromDate=r}),t.qZA(),t.TgZ(36,"mat-datepicker",16,17),t.NdJ("dateChange",function(){return o.getReport()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(38,zy,51,28,"ng-container",18),t._UZ(39,"auto-loader",19),t.TgZ(40,"div",20),t.TgZ(41,"div",21),t.TgZ(42,"div",22),t.TgZ(43,"table",23),t.TgZ(44,"tr",24),t.TgZ(45,"td",25),t.TgZ(46,"span",26),t._uU(47),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"tr",24),t.TgZ(49,"td",25),t.TgZ(50,"span",27),t._uU(51),t.qZA(),t.qZA(),t.qZA(),t.TgZ(52,"tr",24),t.TgZ(53,"td",25),t.TgZ(54,"span",28),t._uU(55),t.ALo(56,"translate"),t.ALo(57,"translate"),t.ALo(58,"date"),t.ALo(59,"translate"),t.ALo(60,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"tr",24),t.TgZ(62,"td",25),t.TgZ(63,"span",29),t._uU(64),t.ALo(65,"translate"),t.ALo(66,"translate"),t.ALo(67,"date"),t.ALo(68,"translate"),t.ALo(69,"date"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(70,i5,27,21,"table",30),t.qZA(),t.qZA(),t.YNc(71,r5,114,104,"div",31),t.qZA()}if(2&e){const n=t.MAs(37);t.xp6(9),t.hij(" ",t.lcZ(10,33,"Operations")," "),t.xp6(3),t.hij(" ",t.lcZ(13,35,"Projects")," "),t.xp6(3),t.hij(" ",o.siteCode," "),t.xp6(2),t.hij(" ",o.projectCode," "),t.xp6(2),t.hij(" ",t.lcZ(20,37,"Attendance")," "),t.xp6(5),t.AsE(" ",t.lcZ(25,39,"Select")," ",t.lcZ(26,41,"Payroll_Date")," "),t.xp6(5),t.AsE(" ",t.lcZ(30,43,"Select")," ",t.lcZ(31,45,"Payroll_Date")," "),t.xp6(3),t.hYB("placeholder","",t.lcZ(33,47,"Please_Enter")," ",t.lcZ(34,49,"Payroll_Start_Date"),""),t.Q6J("max",o.maxDate)("ngModel",o.fromDate)("ngModelOptions",t.DdM(75,uo))("matDatepicker",n),t.xp6(3),t.Q6J("for",n)("ngModel",o.fromDate),t.xp6(3),t.Q6J("ngIf",(null==o.result?null:o.result.isValidReq)&&0!=(null==o.result||null==o.result.rows?null:o.result.rows.length)&&!o.isLoading),t.xp6(1),t.Q6J("isLoading",o.isLoading),t.xp6(8),t.hij(" ",o.isArabic?null==o.projectData?null:o.projectData.projectNameArb:null==o.projectData?null:o.projectData.projectNameEng," "),t.xp6(4),t.hij(" ",o.isArabic?null==o.siteData?null:o.siteData.projectNameArb:null==o.siteData?null:o.siteData.projectNameEng," "),t.xp6(4),t.xDo(" ",t.lcZ(56,51,"Project_Duration")," \xa0:\xa0 ",t.lcZ(57,53,"From")," ",t.xi3(58,55,null==o.projectData?null:o.projectData.startDate,"dd/MM/yyyy"),"\xa0",t.lcZ(59,58,"To"),"\xa0",t.xi3(60,60,null==o.projectData?null:o.projectData.endDate,"dd/MM/yyyy")," "),t.xp6(9),t.xDo(" ",t.lcZ(65,63,"Attendance_Monthly_Report"),"\xa0 ",t.lcZ(66,65,"From")," ",t.xi3(67,67,o.fromDate,"dd/MM/yyyy"),"\xa0 ",t.lcZ(68,70,"To"),"\xa0 ",t.xi3(69,72,o.toDate,"dd/MM/yyyy")," "),t.xp6(6),t.Q6J("ngIf",0!=(null==o.result||null==o.result.columns?null:o.result.columns.length)),t.xp6(1),t.Q6J("ngIf",0!=(null==o.result?null:o.result.rows.length)&&!o.isLoading)}},directives:[l.Fj,M.hl,l.JJ,l.On,M.nW,gt.R9,M.Mq,f.O5,ht.z,l._,rt.gM,l.Wl,l.EJ,l.YN,l.Kr,f.sg],pipes:[Z.X$,f.uU,f.JJ],styles:["#attendTable[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    border-block-color: lightgray;\n    border-block: lightgray;\n    border-block-width: 1px;\n    border-inline-color: aqua\n  }\n\n\n  table.consolidateDataTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    color: black;\n    font-size: small;\n    padding: 5px 5px 5px 5px\n  }\n\n\n  table.sambaAttendanceTable[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    width: 100%\n  }\n\n\n    table.sambaAttendanceTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n      background-color: #fafafa;\n      border: solid;\n      border-color: lightgray;\n      border-width: 1px;\n      padding: 5px 15px 5px 15px\n    }\n\n    table.sambaAttendanceTable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%] {\n      background-color: #548087;\n      border: solid;\n      border-color: lightgray;\n      border-width: 1px;\n      color: white;\n      text-align: center;\n    }\n\n\n  #bgColorEven[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: white;\n  }\n\n  #bgColorOdd[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: white;\n    \n  }\n\n  #bgColorAltAttnd[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: maroon;\n    color: white;\n  }\n\n  #bgColorPrimaryAttnd[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: blue;\n    color: white;\n  }\n\n  #bgColorAbsent[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white\n  }\n\n  #bgColorSwap[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: yellow;\n    color: red\n  }\n\n  #bgColorNoShift[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: #f3f3f3;\n    color: none\n  }\n\n  #bgColorLeave[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorTransfer[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorResign[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorTerminated[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: red;\n    color: white;\n  }\n\n  #bgColorAttendancePending[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: yellowgreen; \n  }\n\n  #bgColorOT[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: yellow;\n    color: green;\n  }\n\n  #bgColorPosted[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: orange;\n    color: white;\n  }\n\n  #bgColorActiveColumn[_ngcontent-%COMP%] {\n    border: solid;\n    border-color: lightgray;\n    border-width: 1px;\n    background-color: aqua;\n    color: blue;\n  }\n\n  #bgColorDateHeaderHoliday[_ngcontent-%COMP%] {\n    background-color: lightgreen;\n    color: yellow;\n  }\n\n  #bgColorShift_0[_ngcontent-%COMP%] {\n    background-color: burlywood;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }\n\n  #bgColorShift_1[_ngcontent-%COMP%] {\n    background-color: lightcoral;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }\n\n  #bgColorShift_2[_ngcontent-%COMP%] {\n    background-color: mediumpurple;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }\n\n  #bgColorShift_3[_ngcontent-%COMP%] {\n    background-color: cadetblue;\n    border-color: lightgray;\n    border-width: 1px;\n    color: lightyellow;\n  }"]}),i})();function c5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function p5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function u5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function d5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function m5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name")," "))}function _5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng)}}function g5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function h5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function f5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function Z5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function C5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Start_Date")," "))}function A5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.startDate,"longDate"))}}function T5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"End_Date")," "))}function v5(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.endDate,"longDate"))}}function x5(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Addendum")," "))}function q5(i,a){1&i&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function b5(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function y5(i,a){if(1&i&&(t.TgZ(0,"td",35),t.YNc(1,q5,3,3,"span",36),t.YNc(2,b5,3,3,"ng-template",null,37,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isAdendum)("ngIfElse",o)}}function S5(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function w5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().shiftPlan(n)}),t._UZ(1,"i",47),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Shift_Plan"))}}function U5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().skillsetPlan(n)}),t._UZ(1,"i",48),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("SkillSet_Plan"))}}function L5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().resourceCosting(n)}),t._UZ(2,"i",49),t._uU(3,"\xa0"),t.qZA(),t.TgZ(4,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().logisticsCosting(n)}),t._UZ(5,"i",50),t._uU(6,"\xa0"),t.qZA(),t.TgZ(7,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().materialCosting(n)}),t._UZ(8,"i",51),t._uU(9,"\xa0"),t.qZA(),t.TgZ(10,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().financialExpenseCosting(n)}),t._UZ(11,"i",52),t._uU(12,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw(4).$implicit,o=t.oxw();t.xp6(1),t.Tol(o.getResourceColor(e)),t.Q6J("matTooltip",o.translateToolTip("Resource_Costing")),t.xp6(3),t.Tol(o.getLogisticsColor(e)),t.Q6J("matTooltip",o.translateToolTip("Logistics_Costing")),t.xp6(3),t.Tol(o.getMaterialColor(e)),t.Q6J("matTooltip",o.translateToolTip("Material_Costing")),t.xp6(3),t.Tol(o.getFinanceExpenceColor(e)),t.Q6J("matTooltip",o.translateToolTip("Financial_Expense_Costing"))}}function D5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4).$implicit;return t.oxw().enableEditCostingButton(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(5);t.Q6J("matTooltip",e.translateToolTip("Edit_Costing"))}}function N5(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,L5,13,16,"span",42),t.YNc(2,D5,3,1,"span",45),t.qZA()),2&i){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isEstimationForProjectApproved&&!e.isAdendum)}}function E5(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,N5,3,2,"span",42),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",!e.isConvertedToProposal&&e.authorities.canModifyEstimation)}}function O5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().calendarDays(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Generate_Monthly_Roaster"))}}function j5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().assignEmployyesToProjectSite(n)}),t._UZ(1,"i",55),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Assign_Employyes_To_ProjectSite"))}}function k5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().mappingEmpToResourceForProjectSite(n)}),t._UZ(1,"i",56),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Mapping_Employees_To_Resource_For_ProjectSite"))}}function M5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().openMonthlyRoaster(n)}),t._UZ(1,"i",57),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Lock_Shifts"))}}function R5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().employeePayrollAttendance(n)}),t._UZ(1,"i",58),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Employee_Attendance"))}}function P5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ViewCustomerVisitForms(n)}),t._UZ(1,"i",59),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Customer_Visit_Forms"))}}function F5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ViewCustomerComplaints(n)}),t._UZ(1,"i",60),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Customer_Complaints"))}}function I5(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,w5,3,1,"span",45),t.YNc(2,U5,3,1,"span",45),t.YNc(3,E5,2,1,"span",42),t.YNc(4,O5,3,1,"span",45),t.YNc(5,j5,3,1,"span",45),t.YNc(6,k5,3,1,"span",45),t.YNc(7,M5,3,1,"span",45),t.YNc(8,R5,3,1,"span",45),t.YNc(9,P5,3,1,"span",45),t.YNc(10,F5,3,1,"span",45),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.authorities.canModifyEstimation),t.xp6(1),t.Q6J("ngIf",e.isShiftsAssigned&&(e.authorities.canModifyEstimation||e.isAdmin)&&!e.isResourcesAssigned&&(!e.isEstimationForProjectApproved||!e.isEstimationCompleted&&e.isAdendum)),t.xp6(1),t.Q6J("ngIf",e.isShiftsAssigned&&e.isSkillSetsMapped),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract)}}function Y5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().ReopenProject(n)}),t._UZ(1,"i",67),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Reopen_Project_Site"),""))}function J5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().ExtendProject(n)}),t._UZ(1,"i",67),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Extend_Project_Site"),""))}function Q5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().RevokeSuspension(n)}),t._UZ(1,"i",67),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Revoke_Suspension"),""))}function B5(i,a){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Y5,4,3,"a",65),t.YNc(2,J5,4,3,"a",65),t.YNc(3,Q5,4,3,"a",65),t.qZA()),2&i){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",null==e?null:e.isClosed),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isClosed||null!=e&&e.isInProgress||null!=e&&e.isSuspended)),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isSuspended)}}function H5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ViewRequests(n)}),t._UZ(2,"i",67),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().CloseProject(n)}),t._UZ(6,"i",67),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().SuspendProject(n)}),t._UZ(10,"i",67),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ExtendProject(n)}),t._UZ(14,"i",67),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA()}2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,4,"View_Requests"),""),t.xp6(4),t.hij(" ",t.lcZ(8,6,"Close_Project_Site"),""),t.xp6(4),t.hij(" ",t.lcZ(12,8,"Suspend_Project_Site"),""),t.xp6(4),t.hij(" ",t.lcZ(16,10,"Extend_Project_Site"),""))}function V5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3).$implicit;return t.oxw().ExtendProject(n)}),t._UZ(1,"i",67),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Extend_Project_Site"),""))}function $5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().ReopenProject(n)}),t._UZ(2,"i",67),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,V5,4,3,"a",65),t.qZA()}if(2&i){const e=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",t.lcZ(4,2,"Reopen_Project_Site"),""),t.xp6(2),t.Q6J("ngIf",null==e?null:e.canExtendProject)}}function G5(i,a){if(1&i&&(t.TgZ(0,"span",61),t.TgZ(1,"a",62),t._UZ(2,"i",63),t.qZA(),t.TgZ(3,"span",64),t.YNc(4,B5,4,3,"span",42),t.YNc(5,H5,17,12,"span",42),t.YNc(6,$5,6,4,"span",42),t.qZA(),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("matTooltip",o.translateToolTip("Project_Site_Variance")),t.xp6(4),t.Q6J("ngIf",null==e?null:e.isInActive),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isInActive)&&(null==e?null:e.isInProgress)),t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isInProgress)&&!(null!=e&&e.isInActive)&&e.isConvrtedToContract)}}function W5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().enableEditCostingButton(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Edit_Costing"))}}function z5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().estimationReport(n)}),t._UZ(1,"i",70),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Estimation_Report"))}}function X5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().summaryReport(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Summary_Report"))}}function K5(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().approveEstimation(n)}),t._UZ(1,"i",72),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Approve_Estimation"))}}function tw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().printEstimation(n)}),t._UZ(1,"i",73),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Print_Estimation"))}}function ew(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",74),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().printProposal(n)}),t._UZ(1,"i",75),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Print_Proposal"))}}function ow(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().convertToContract(n)}),t._UZ(1,"i",76),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Merge_To_Contract"))}}function iw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().uploadFile(n)}),t._UZ(1,"i",77),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function nw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewContract(n)}),t._UZ(1,"i",78),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("View_Addendum"))}}function aw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit;return t.oxw().viewUploadedFile(n)}),t._UZ(1,"i",78),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(3);t.Q6J("matTooltip",e.translateToolTip("Download_File"))}}function sw(i,a){if(1&i&&(t.TgZ(0,"span",68),t.YNc(1,W5,3,1,"a",45),t.YNc(2,z5,3,1,"a",45),t.YNc(3,X5,3,1,"a",45),t.YNc(4,K5,3,1,"a",45),t.YNc(5,tw,3,1,"a",45),t.YNc(6,ew,3,1,"a",69),t.YNc(7,ow,3,1,"a",45),t.YNc(8,iw,3,1,"a",45),t.YNc(9,nw,3,1,"a",45),t.YNc(10,aw,3,1,"a",45),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!(null!=e&&e.isApproved)),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isApproved&&e.hasAuthority&&e.authorities.canApproveEstimation&&!e.approvedUser),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isApproved&&!e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isApproved&&!e.fileUrl&&(e.canApprove||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract&&!e.fileUrl),t.xp6(1),t.Q6J("ngIf",e.fileUrl)}}function rw(i,a){if(1&i&&(t.TgZ(0,"td",41),t.YNc(1,I5,11,10,"span",42),t.YNc(2,G5,7,4,"span",43),t.YNc(3,sw,11,10,"span",44),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isInActive)&&(null==e?null:e.isInProgress)),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isAdendum)}}function lw(i,a){1&i&&t._UZ(0,"tr",79)}function cw(i,a){1&i&&t._UZ(0,"tr",80)}let pw=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.oprService=m,this.pageService=h,this.translate=C,this.dialogRef=A,this.displayedColumns=["customerCode","projectCode","Project_Name","SiteCode","Branch_Code","startDate","endDate","isAdendum","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.form=this.fb.group({}),this.searchValue=this.project.projectCode,this.initialLoading()}refresh(){this.searchValue=this.project.projectCode,this.initialLoading()}initialLoading(){this.searchValue=this.project.projectCode,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.project.projectCode,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ProjectSites/getProjectSitesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.isArab=this.isArab,c.componentInstance.type="ForAddingSite",c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openDialogManage(e,o,n,s,r){let c=this.oprService.openAutoHeightWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.requestData=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openPaginationWindow(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openConfirmationDialog(e,o,n,s,r,c){let p=this.oprService.confirmationDialog(this.dialog,n);p.componentInstance.dbops=e,p.componentInstance.modalTitle=o,p.componentInstance.confirmType=s,p.afterClosed().subscribe(u=>{(u&&1==u||u.res)&&this.apiService.post("ProjectBudgetCosting/skippEstimation",this.project).subscribe(d=>{this.utilService.OkMessage(),this.ngOnInit()},d=>{console.error(d),this.utilService.ShowApiErrorMessage(d)})})}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}resourceCosting(e){this.openDialogManage(e,g.O.create,"Resource_Costing","Save",ne)}logisticsCosting(e){this.openDialogManage(e,g.O.create,"Logistics_Vehicle_Costing","Save",se)}materialCosting(e){this.openDialogManage(e,g.O.create,"Material_Costing","Save",re)}financialExpenseCosting(e){this.openDialogManage(e,g.O.create,"Financial_Epense_Costing","Save",le)}estimationReport(e){this.openDialogManage(e,g.O.create,"Estimation_Cnsolidate_Report","Save",ce)}summaryReport(e){this.openDialogManage(e,g.O.create,"Estimation_Summary_Report","Save",pe)}convertToContract(e){this.openFullWindow(e,g.O.create,"Creating_Contract","Save",Vt)}printEstimation(e){this.openDialogManage(e,g.O.create,"Estimation_Cnsolidate_Report","Print",ge)}assignEmployyesToProjectSite(e){this.openFullWindow(e,g.O.create,"Assigning_Employees_To_Site","Save",he)}mappingEmpToResourceForProjectSite(e){this.openDialogManage(e,g.O.create,"Mapping_Employees_To_Resources_For_Site","Save",fe)}printProposal(e){this.openDialogManage(e,g.O.create,"Project_Proposal","Print",_e)}shiftPlan(e){this.openDialogManage(e,g.O.create,"Shifts_Plan_For_Project","Save",ue)}skillsetPlan(e){this.openDialogManage(e,g.O.create,"Skillset_Plan_For_Project","Save",de)}calendarDays(e){this.openFullWindow(e,g.O.create,"Calander_Days","Save",me)}viewContract(e){this.openFullWindow(e,g.O.create,"Adendum_Contract","View",Vt)}employeeAttendance(e){this.openFullWindow(e,g.O.create,"Employee_Attendance","View",Ze)}submit(){}openMonthlyRoaster(e){this.openFullWindow(e,g.O.create,"Monthly_Roaster","Save",ae)}approveEstimation(e){this.openApprovalDialog(e.branchCode,e.projectCode+"/"+e.siteCode,g.O.create,"Estimation_Approval","Save","ADNDM",Wt)}enableEditCostingButton(e){e.isEstimationCompleted=!1}convertToProposal(e){this.apiService.post("ProjectBudgetCosting/convertProjectSiteToProposal",e).subscribe(o=>{this.utilService.OkMessage(),this.ngOnInit()},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}translateToolTip(e){return`${this.translate.instant(e)}`}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}closeModel(){this.dialogRef.close(!0)}skippEstimation(e){this.project=e,console.log(e),this.openConfirmationDialog(g.O.create,"Are_You_Sure?",xt,"general","Skipp_Estimation",0)}CloseProject(e){e.isExtendProjReq=!1,e.isReOpenReq=!1,e.isRevokeSuspReq=!1,e.isSuspendReq=!1,e.isCloseReq=!0,e.id=0,this.openDialogManage(e,g.O.create,"Close_Project_Site","Save",Et)}CancelProject(){}SuspendProject(e){e.isExtendProjReq=!1,e.isReOpenReq=!1,e.isRevokeSuspReq=!1,e.isSuspendReq=!0,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.O.create,"Suspend_Project_Site","Save",Et)}ExtendProject(e){e.isExtendProjReq=!0,e.isReOpenReq=!1,e.isRevokeSuspReq=!1,e.isSuspendReq=!1,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.O.create,"Extend_Project_Site","Save",Et)}ReopenProject(e){e.isExtendProjReq=!1,e.isReOpenReq=!0,e.isRevokeSuspReq=!1,e.isSuspendReq=!1,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.O.create,"Reopen_Project_Site","Save",Et)}RevokeSuspension(e){e.isExtendProjReq=!1,e.isReOpenReq=!1,e.isRevokeSuspReq=!0,e.isSuspendReq=!1,e.isCloseReq=!1,e.id=0,this.openDialogManage(e,g.O.create,"Revoke_Suspension","Save",Et)}ViewRequests(e){this.openPaginationWindow(e,g.O.create,"","",no)}ViewCustomerVisitForms(e){let o=this.oprService.openAutoHeightWidthDialog(this.dialog,lo);o.componentInstance.dbops=g.O.create,o.componentInstance.modalTitle="",o.componentInstance.modalBtnTitle="",o.componentInstance.project=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}ViewCustomerComplaints(e){let o=this.oprService.openAutoHeightWidthDialog(this.dialog,po);o.componentInstance.dbops=g.O.create,o.componentInstance.modalTitle="",o.componentInstance.modalBtnTitle="",o.componentInstance.project=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}employeePayrollAttendance(e){let o=this.oprService.openAutoHeightWidthDialog(this.dialog,l5);o.componentInstance.projectCode=e.projectCode,o.componentInstance.siteCode=e.siteCode,o.componentInstance.isFromProjectSiteActions=!0,o.componentInstance.inputData=e,o.afterClosed().subscribe(n=>{})}uploadFile(e){let o=this.oprService.openAutoWidthDialog(this.dialog,we);o.componentInstance.projectSite=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewUploadedFile(e){window.open(e.fileUrl)}getResourceColor(e){return e.isResourcesAssigned?"GreenText":"RedText"}getLogisticsColor(e){return e.isLogisticsAssigned?"GreenText":"RedText"}getMaterialColor(e){return e.isMaterialAssigned?"GreenText":"RedText"}getFinanceExpenceColor(e){return e.isExpenceOverheadsAssigned?"GreenText":"RedText"}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(W.f),t.Y36(V.N),t.Y36(Z.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-project-sites2"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:59,vars:16,consts:[[1,"modal-body"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","projectCode"],["matColumnDef","Project_Name"],["matColumnDef","SiteCode"],["matColumnDef","Branch_Code"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","isAdendum"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[4,"ngIf"],[3,"matTooltip",4,"ngIf"],["style","padding-left:5px",4,"ngIf"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"fas","fa-clock"],[1,"fas","fa-user-plus"],[1,"icon-people"],[1,"fas","fa-bus"],[1,"fas","fa-fax"],[1,"fas","fa-sort-amount-up"],[1,"far","fa-edit"],[1,"fas","fa-calendar-plus"],[1,"fas","fa-tasks"],[1,"fas","fa-users"],[1,"fas","fa-lock"],[1,"fas","fa-calendar-check"],[1,"fas","fa-motorcycle"],[1,"fas","fa-phone-square"],[3,"matTooltip"],["id","navbarDropdown","role","list","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"fas","fa-sun"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],["class","dropdown-item tableicons",3,"click",4,"ngIf"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],[2,"padding-left","5px"],[3,"click",4,"ngIf"],[1,"icon-eye"],[1,"fas","fa-list"],[1,"fas","fa-check-circle"],[1,"fas","fa-print"],[3,"click"],[1,"fas","fa-print",3,"matTooltip"],[1,"far","fa-handshake"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(2," \xd7"),t.qZA(),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"h3",5),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"nav",7),t.TgZ(11,"ol",8),t.TgZ(12,"li",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",10),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",11),t.TgZ(19,"div",3),t.TgZ(20,"div",12),t.TgZ(21,"div",13),t.TgZ(22,"div",14),t._UZ(23,"div",3),t._UZ(24,"div",15),t.TgZ(25,"div",16),t.ynx(26),t.TgZ(27,"table",17),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(28,18),t.YNc(29,c5,3,3,"th",19),t.YNc(30,p5,2,1,"td",20),t.BQk(),t.ynx(31,21),t.YNc(32,u5,3,3,"th",19),t.YNc(33,d5,2,1,"td",20),t.BQk(),t.ynx(34,22),t.YNc(35,m5,3,3,"th",19),t.YNc(36,_5,2,1,"td",20),t.BQk(),t.ynx(37,23),t.YNc(38,g5,3,3,"th",19),t.YNc(39,h5,2,1,"td",20),t.BQk(),t.ynx(40,24),t.YNc(41,f5,3,3,"th",19),t.YNc(42,Z5,2,1,"td",20),t.BQk(),t.ynx(43,25),t.YNc(44,C5,3,3,"th",19),t.YNc(45,A5,3,4,"td",20),t.BQk(),t.ynx(46,26),t.YNc(47,T5,3,3,"th",19),t.YNc(48,v5,3,4,"td",20),t.BQk(),t.ynx(49,27),t.YNc(50,x5,3,3,"th",19),t.YNc(51,y5,4,2,"td",20),t.BQk(),t.ynx(52,28),t.YNc(53,S5,3,3,"th",29),t.YNc(54,rw,4,3,"td",30),t.BQk(),t.YNc(55,lw,1,0,"tr",31),t.YNc(56,cw,1,0,"tr",32),t.qZA(),t.BQk(),t.qZA(),t.ynx(57),t.TgZ(58,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,10,o.modalTitle)," "),t.xp6(6),t.hij(" ",t.lcZ(14,12,o.project.projectCode)," "),t.xp6(3),t.Oqu(t.lcZ(17,14,"Sites")),t.xp6(11),t.Q6J("dataSource",o.data),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$,f.uU],styles:["span.RedText[_ngcontent-%COMP%] {\n    color: red;\n\n  }\n  span.GreenText[_ngcontent-%COMP%] {\n    color: lawngreen;\n     }\n  span.BlueText[_ngcontent-%COMP%] {\n    color: blue;\n     }"]}),i})();function uw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().generateReport()}),t._uU(1," Generate Report "),t.qZA()}}function dw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span"),t.TgZ(1,"button",54),t._uU(2," print "),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportexcel()}),t._uU(5,"ExportExcel"),t.qZA(),t.qZA()}2&i&&(t.xp6(1),t.Q6J("useExistingCss",!0))}function mw(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Customer_Code")," "))}function _w(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.customerCode)}}function gw(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Code")," "))}function hw(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.projectCode)}}function fw(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project_Name")," "))}function Zw(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng)}}function Cw(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Start_Date")," "))}function Aw(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.startDate,"longDate"))}}function Tw(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"End_Date")," "))}function vw(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.endDate,"longDate"))}}function xw(i,a){1&i&&(t.TgZ(0,"th",55),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch_Code")," "))}function qw(i,a){if(1&i&&(t.TgZ(0,"td",56),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function bw(i,a){1&i&&(t.TgZ(0,"th",57),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function yw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().estimationReport(n)}),t._UZ(1,"i",63),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Estimation_Report"))}}function Sw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().summaryReport(n)}),t._UZ(1,"i",64),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Summary_Report"))}}function ww(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveEstimation(n)}),t._UZ(1,"i",65),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Approve_Estimation"))}}function Uw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().printEstimation(n)}),t._UZ(1,"i",66),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Print_Estimation"))}}function Lw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().printProposal(n)}),t._UZ(1,"i",68),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Print_Proposal"))}}function Dw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().convertToContract(n)}),t._UZ(1,"i",69),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Convert_To_Contract"))}}function Nw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().uploadFile(n)}),t._UZ(1,"i",70),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Upload_File"))}}function Ew(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewContract(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("View_Contract"))}}function Ow(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().viewUploadedFile(n)}),t._UZ(1,"i",71),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translateToolTip("Download_File"))}}function jw(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",58),t.YNc(1,yw,3,1,"span",59),t.YNc(2,Sw,3,1,"span",59),t.YNc(3,ww,3,1,"span",59),t.YNc(4,Uw,3,1,"span",59),t.YNc(5,Lw,3,1,"span",60),t.YNc(6,Dw,3,1,"span",59),t.YNc(7,Nw,3,1,"a",59),t.YNc(8,Ew,3,1,"a",59),t.YNc(9,Ow,3,1,"a",59),t.TgZ(10,"span",61),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewProjectSites(s)}),t._UZ(11,"i",62),t._uU(12,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isApproved&&(e.hasAuthority&&e.authorities.canApproveEstimation||e.isAdmin)&&!e.approvedUser),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted),t.xp6(1),t.Q6J("ngIf",!e.isConvrtedToContract&&e.isEstimationCompleted&&e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&!e.isConvrtedToContract&&e.isApproved),t.xp6(1),t.Q6J("ngIf",e.isEstimationCompleted&&e.isConvertedToProposal&&e.isApproved&&!e.fileUrl&&(e.canApprove||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.isConvrtedToContract&&!e.fileUrl),t.xp6(1),t.Q6J("ngIf",e.fileUrl),t.xp6(1),t.Q6J("matTooltip",o.translateToolTip("View_Sites"))}}function kw(i,a){1&i&&t._UZ(0,"tr",72)}function Mw(i,a){1&i&&t._UZ(0,"tr",73)}function Rw(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",77),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.ALo(6,"date"),t.ALo(7,"translate"),t.ALo(8,"date"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.xDo(" ",t.lcZ(4,5,"Start_Date")," ",t.lcZ(5,7,"Between")," ",t.xi3(6,9,null==e.filter?null:e.filter.startDateFrom,"longDate")," ",t.lcZ(7,12,"And")," ",t.xi3(8,14,null==e.filter?null:e.filter.startDateTo,"longDate")," ")}}function Pw(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",77),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.ALo(6,"date"),t.ALo(7,"translate"),t.ALo(8,"date"),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(3),t.xDo(" ",t.lcZ(4,5,"End_Date")," ",t.lcZ(5,7,"Between")," ",t.xi3(6,9,null==e.filter?null:e.filter.endDateFrom,"longDate")," ",t.lcZ(7,12,"And")," ",t.xi3(8,14,null==e.filter?null:e.filter.endDateTo,"longDate")," ")}}function Fw(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.customerCode),t.xp6(2),t.Oqu(e.projectCode),t.xp6(2),t.Oqu(o.isArab?e.projectNameArb:e.projectNameEng),t.xp6(2),t.Oqu(t.xi3(9,6,e.startDate,"longDate")),t.xp6(3),t.Oqu(t.xi3(12,9,e.endDate,"longDate")),t.xp6(3),t.Oqu(e.branchCode)}}function Iw(i,a){if(1&i&&(t.TgZ(0,"div",74),t.TgZ(1,"div",75),t.TgZ(2,"table",76),t.TgZ(3,"tr"),t.TgZ(4,"td",77),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.TgZ(7,"tr"),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.qZA(),t.YNc(14,Rw,9,17,"tr",31),t.TgZ(15,"tr"),t.TgZ(16,"td",77),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.YNc(19,Pw,9,17,"tr",31),t.qZA(),t._UZ(20,"br"),t.qZA(),t.TgZ(21,"table",78),t.TgZ(22,"tr"),t.TgZ(23,"th"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"th"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"th"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"th"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.YNc(41,Fw,15,12,"tr",79),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,16,"Report_On_Projects")),t.xp6(4),t.AsE("",t.lcZ(10,18,"Customer_Code"),":",null==e.filter.customerCode||""==e.filter.customerCode?"All":e.filter.customerCode,""),t.xp6(3),t.AsE("",t.lcZ(13,20,"Branch_Code"),":",null==e.filter.branchCode||""==e.filter.branchCode?"All":e.filter.branchCode,""),t.xp6(2),t.Q6J("ngIf",e.filter.startDateFrom&&e.filter.startDateTo),t.xp6(3),t.AsE("",t.lcZ(18,22,"Search_Key"),":",e.searchValue,""),t.xp6(2),t.Q6J("ngIf",e.filter.endDateFrom&&e.filter.endDateTo),t.xp6(5),t.hij(" ",t.lcZ(25,24,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(28,26,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(31,28,"Project_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(34,30,"Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(37,32,"End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(40,34,"Branch_Code")," "),t.xp6(2),t.Q6J("ngForOf",e.reportData)}}const Yw=function(){return{standalone:!0}};let Jw=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.oprService=m,this.pageService=h,this.translate=C,this.displayedColumns=["customerCode","projectCode","Project_Name","branchCode","startDate","endDate","Actions"],this.reportData=[],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.customerSelectionList=[],this.citySelectionList=[],this.isArab=!1,this.filter={customerCode:"",branchCode:""},this.filterDates={startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null}}ngOnInit(){this.isArab=this.utilService.isArabic(),this.form=this.fb.group({}),this.initialLoading()}openDatePicker(e){e.open()}refresh(){this.reportData=[],this.resetFilter()}resetFilter(){this.filter={customerCode:"",branchCode:"",startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null},this.filterDates={startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null},this.applyFilter("")}clearReport(){this.reportData=[]}initialLoading(){this.searchValue="",this.loadCitiesList(),this.loadCustomersList(),this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}loadCitiesList(){this.apiService.getall("Branch/getBranchSelectListForUser").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArab?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}onSortOrder(e){this.reportData=[],"Project_Name"==e.active&&(e.active=this.isArab?"projectNameArb":"projectNameEng"),this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}generateReport(){this.reportData=[];for(let e=0;e<=Math.floor(this.totalItemsCount/100);e++){let o={pageIndex:e,pageSize:100,previousPageIndex:0==e?0:e-1,length:0};this.loadListReport(o.pageIndex,o.pageSize,this.searchValue,this.sortingOrder)}}setFilterDates(){if(null!=this.filterDates.startDateFrom){let e=new Date(this.filterDates.startDateFrom);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.startDateFrom=e}if(null!=this.filterDates.startDateTo){let e=new Date(this.filterDates.startDateTo);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.startDateTo=e}if(null!=this.filterDates.endDateFrom){let e=new Date(this.filterDates.endDateFrom);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.endDateFrom=e}if(null!=this.filterDates.endDateTo){let e=new Date(this.filterDates.endDateTo);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.filter.endDateTo=e}}loadList(e,o,n,s){this.isLoading=!0,this.setFilterDates(),this.oprService.getPaginationWithFilter("Project/getProjectsPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}loadListReport(e,o,n,s){this.isLoading=!0,this.setFilterDates(),this.oprService.getPaginationWithFilter("Project/getProjectsPagedListWithFilter",this.utilService.getQueryString(e,o,n,s),this.filter).subscribe(r=>{this.isLoading=!1,this.reportData=0==this.reportData.length?r.items:this.reportData.concat(r.items)},r=>this.utilService.ShowApiErrorMessage(r))}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.componentInstance.type="ForProject",c.componentInstance.isArab=this.isArab,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openDialogManage(e,o,n,s,r){let c=this.oprService.openAutoHeightWidthDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openDialogManage2(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.project=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}resourceCosting(e){this.openDialogManage(e,g.O.create,"Resource_Costing","Save",ne)}logisticsCosting(e){this.openDialogManage(e,g.O.create,"Logistics_Vehicle_Costing","Save",se)}materialCosting(e){this.openDialogManage(e,g.O.create,"Material_Costing","Save",re)}financialExpenseCosting(e){this.openDialogManage(e,g.O.create,"Financial_Epense_Costing","Save",le)}estimationReport(e){this.openDialogManage(e,g.O.create,"Estimation_Cnsolidate_Report","Save",ce)}summaryReport(e){this.openDialogManage(e,g.O.create,"Estimation_Summary_Report","Save",pe)}convertToContract(e){this.openFullWindow(e,g.O.create,"Creating_Contract","Save",Vt)}printEstimation(e){this.openDialogManage(e,g.O.create,"Estimation_Cnsolidate_Report","Print",ge)}assignEmployyesToProjectSite(e){this.openFullWindow(e,g.O.create,"Assigning_Employees_To_Site","Save",he)}mappingEmpToResourceForProjectSite(e){this.openDialogManage(e,g.O.create,"Mapping_Employees_To_Resources_For_Site","Save",fe)}printProposal(e){this.openDialogManage2(e,g.O.create,"Project_Proposal","Print",_e)}shiftPlan(e){this.openDialogManage(e,g.O.create,"Shifts_Plan_For_Project","Save",ue)}skillsetPlan(e){this.openDialogManage(e,g.O.create,"Skillset_Plan_For_Project","Save",de)}calendarDays(e){this.openFullWindow(e,g.O.create,"Calander_Days","Save",me)}viewContract(e){this.openFullWindow(e,g.O.create,"Creating_Contract","View",Vt)}employeeAttendance(e){this.openFullWindow(e,g.O.create,"Employee_Attendance","View",Ze)}submit(){}openMonthlyRoaster(e){this.openFullWindow(e,g.O.create,"Monthly_Roaster","Save",ae)}approveEstimation(e){this.openApprovalDialog(e.branchCode,e.projectCode,g.O.create,"Estimation_Approval","Save","EST",Wt)}convertToProposal(e){this.apiService.post("ProjectBudgetCosting/convertProjectToProposal",e).subscribe(o=>{this.utilService.OkMessage(),this.ngOnInit()},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})}translateToolTip(e){return`${this.translate.instant(e)}`}applyFilter(e){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder),this.reportData=[]}viewProjectSites(e){this.openDialogManage(e,g.O.create,"List_Of_Sites_In_Project","Pagination",pw)}uploadFile(e){let o=this.oprService.openAutoWidthDialog(this.dialog,we);o.componentInstance.project=e,o.afterClosed().subscribe(n=>{n&&!0===n&&this.initialLoading()})}viewUploadedFile(e){window.open(e.fileUrl)}exportexcel(){let e=document.getElementById("printcontainer");const o=ut.P6.table_to_sheet(e),n=ut.P6.book_new();ut.P6.book_append_sheet(n,o,"Sheet1"),ut.NC(n,"projectsReport.xlsx")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(W.f),t.Y36(V.N),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-project2"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:130,vars:66,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"outer"],[1,"col-md-4","col-lg-4"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-8","col-lg-8"],[1,"col-md-6","col-lg-6"],[1,"form-group",2,"text-align","center"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click","dateChange"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],["picker3",""],["picker4",""],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-6","col-lg-6",2,"align-content","flex-start"],["class","btn btn-primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary","icon-refresh",3,"click"],[1,"col-md-2","col-lg-2","text-center"],[3,"isLoading"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","customerCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","projectCode"],["matColumnDef","Project_Name"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","branchCode"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["id","printcontainer","hidden","",4,"ngIf"],[1,"btn","btn-primary",3,"click"],["printTitle","ProjectsReport","printSectionId","printcontainer","ngxPrint","",1,"btn","btn-primary",3,"useExistingCss"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction","clickicons"],[3,"matTooltip","click",4,"ngIf"],[3,"click",4,"ngIf"],[3,"matTooltip","click"],[1,"icon-eye"],[1,"fas","fa-sticky-note"],[1,"fas","fa-list"],[1,"fas","fa-check-circle"],[1,"fas","fa-print"],[3,"click"],[1,"fas","fa-print",3,"matTooltip"],[1,"far","fa-handshake"],[1,"fas","fa-upload"],[1,"fas","fa-download"],["mat-header-row",""],["mat-row",""],["id","printcontainer","hidden",""],["width","100%"],["id","attndTable"],["colspan","2"],["id","attndTable","width","100%"],[4,"ngFor","ngForOf"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",8),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",1),t.TgZ(17,"div",10),t.TgZ(18,"div",11),t.TgZ(19,"div",12),t.TgZ(20,"div",13),t.TgZ(21,"div",1),t.TgZ(22,"div",14),t.TgZ(23,"div",15),t.TgZ(24,"label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"ng-select",16),t.NdJ("ngModelChange",function(r){return o.filter.branchCode=r})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",17),t.TgZ(29,"div",15),t.TgZ(30,"label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"ng-select",16),t.NdJ("ngModelChange",function(r){return o.filter.customerCode=r})("change",function(){return o.applyFilter("")}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",18),t.TgZ(35,"div",1),t.TgZ(36,"div",10),t.TgZ(37,"div",19),t.TgZ(38,"label"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",18),t.TgZ(42,"div",15),t.TgZ(43,"div",15),t.TgZ(44,"div",20),t.TgZ(45,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.startDateFrom=r})("click",function(){t.CHM(n);const r=t.MAs(50);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"div",22),t._UZ(48,"mat-datepicker-toggle",23),t._UZ(49,"mat-datepicker",null,24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"div",18),t.TgZ(52,"div",15),t.TgZ(53,"div",15),t.TgZ(54,"div",20),t.TgZ(55,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.startDateTo=r})("click",function(){t.CHM(n);const r=t.MAs(60);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"div",22),t._UZ(58,"mat-datepicker-toggle",23),t._UZ(59,"mat-datepicker",null,25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"div",18),t.TgZ(62,"div",1),t.TgZ(63,"div",10),t.TgZ(64,"div",19),t.TgZ(65,"label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div",18),t.TgZ(69,"div",15),t.TgZ(70,"div",15),t.TgZ(71,"div",20),t.TgZ(72,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.endDateFrom=r})("click",function(){t.CHM(n);const r=t.MAs(77);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"div",22),t._UZ(75,"mat-datepicker-toggle",23),t._UZ(76,"mat-datepicker",null,26),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(78,"div",18),t.TgZ(79,"div",15),t.TgZ(80,"div",15),t.TgZ(81,"div",20),t.TgZ(82,"input",21),t.NdJ("ngModelChange",function(r){return o.filterDates.endDateTo=r})("click",function(){t.CHM(n);const r=t.MAs(87);return o.openDatePicker(r)})("dateChange",function(){return o.applyFilter("")}),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"div",22),t._UZ(85,"mat-datepicker-toggle",23),t._UZ(86,"mat-datepicker",null,27),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(88,"div",1),t.TgZ(89,"div",14),t.TgZ(90,"input",28),t.NdJ("ngModelChange",function(r){return o.searchValue=r})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(91,"translate"),t.qZA(),t.qZA(),t.TgZ(92,"div",29),t.YNc(93,uw,2,0,"button",30),t.YNc(94,dw,6,1,"span",31),t.TgZ(95,"span"),t._uU(96," \xa0 "),t.TgZ(97,"button",32),t.NdJ("click",function(){return o.refresh()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(98,"div",33),t._UZ(99,"spinner-loader",34),t.qZA(),t.qZA(),t._UZ(100,"div",35),t.TgZ(101,"div",36),t.ynx(102),t.TgZ(103,"table",37),t.NdJ("matSortChange",function(r){return o.onSortOrder(r)}),t.ynx(104,38),t.YNc(105,mw,3,3,"th",39),t.YNc(106,_w,2,1,"td",40),t.BQk(),t.ynx(107,41),t.YNc(108,gw,3,3,"th",39),t.YNc(109,hw,2,1,"td",40),t.BQk(),t.ynx(110,42),t.YNc(111,fw,3,3,"th",39),t.YNc(112,Zw,2,1,"td",40),t.BQk(),t.ynx(113,43),t.YNc(114,Cw,3,3,"th",39),t.YNc(115,Aw,3,4,"td",40),t.BQk(),t.ynx(116,44),t.YNc(117,Tw,3,3,"th",39),t.YNc(118,vw,3,4,"td",40),t.BQk(),t.ynx(119,45),t.YNc(120,xw,3,3,"th",39),t.YNc(121,qw,2,1,"td",40),t.BQk(),t.ynx(122,46),t.YNc(123,bw,3,3,"th",47),t.YNc(124,jw,13,10,"td",48),t.BQk(),t.YNc(125,kw,1,0,"tr",49),t.YNc(126,Mw,1,0,"tr",50),t.qZA(),t.BQk(),t.qZA(),t.ynx(127),t.TgZ(128,"mat-paginator",51),t.NdJ("page",function(r){return o.onPageSwitch(r)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(129,Iw,42,36,"div",52)}if(2&e){const n=t.MAs(50),s=t.MAs(60),r=t.MAs(77),c=t.MAs(87);t.xp6(4),t.hij(" ",t.lcZ(5,41,"Projects")," "),t.xp6(6),t.hij(" ",t.lcZ(11,43,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(14,45,"Projects")),t.xp6(12),t.Oqu(t.lcZ(26,47,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.filter.branchCode),t.xp6(4),t.Oqu(t.lcZ(32,49,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.filter.customerCode),t.xp6(6),t.Oqu(t.lcZ(40,51,"Start_Date")),t.xp6(6),t.s9C("placeholder",t.lcZ(46,53,"From_Date")),t.Q6J("ngModel",o.filterDates.startDateFrom)("matDatepicker",n),t.xp6(3),t.Q6J("for",n),t.xp6(7),t.MGl("placeholder"," ",t.lcZ(56,55,"To_Date"),""),t.Q6J("ngModel",o.filterDates.startDateTo)("matDatepicker",s),t.xp6(3),t.Q6J("for",s),t.xp6(8),t.Oqu(t.lcZ(67,57,"End_Date")),t.xp6(6),t.s9C("placeholder",t.lcZ(73,59,"From_Date")),t.Q6J("ngModel",o.filterDates.endDateFrom)("matDatepicker",r),t.xp6(3),t.Q6J("for",r),t.xp6(7),t.MGl("placeholder"," ",t.lcZ(83,61,"To_Date"),""),t.Q6J("ngModel",o.filterDates.endDateTo)("matDatepicker",c),t.xp6(3),t.Q6J("for",c),t.xp6(5),t.MGl("placeholder","",t.lcZ(91,63,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(65,Yw)),t.xp6(3),t.Q6J("ngIf",0==o.reportData.length),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0),t.xp6(5),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage),t.xp6(1),t.Q6J("ngIf",o.reportData.length>0)}},directives:[Dt.w9,l.JJ,l.On,l.Fj,M.hl,M.nW,gt.R9,M.Mq,f.O5,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,Xt.I,_.ge,v.nU,_.ev,rt.gM,_.XQ,_.Gk,f.sg],pipes:[Z.X$,f.uU],styles:["#attndTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\n    border: solid;\n    border-width: 1px;\n    padding: 5px 5px 5px 5px;\n    text-align: center;\n  }\n\n  #attndTable[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\n    width: 100%;\n  }\n\n  #printcontainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n    width: 100%;\n    padding: 10px 10px 10px 10px;\n  }"]}),i})(),Qw=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({reasonCode:["REASXXXXXX"],reasonCodeNameEng:["",l.kI.required],reasonCodeNameArb:["",l.kI.required],descriptionEng:["",l.kI.required],descriptionArb:["",l.kI.required],isActive:[!0],isForCustomerVisit:[!1],isForCustomerComplaint:[!1]})}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("ReasonCode",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0),this.reset())},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("ReasonCode/getReasonCodeById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}reset(){this.form.controls.reasonCode.setValue(""),this.form.controls.reasonCodeNameEng.setValue(""),this.form.controls.reasonCodeNameArb.setValue(""),this.form.controls.descriptionEng.setValue(""),this.form.controls.descriptionArb.setValue(""),this.form.controls.isActive.setValue(!0),this.form.controls.isForCustomerVisit.setValue(!1),this.form.controls.isForCustomerComplaint.setValue(!1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-reasoncode"]],features:[t.qOj],decls:80,vars:69,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","reasonCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","reasonCodeNameEng",1,"form-control",3,"placeholder"],["type","text","formControlName","reasonCodeNameArb",1,"form-control",3,"placeholder"],["type","text","formControlName","descriptionEng",1,"form-control",3,"placeholder"],["type","text","formControlName","descriptionArb",1,"form-control",3,"placeholder"],[1,"col-md-2","col-lg-2"],["color","primary","formControlName","isActive"],["color","primary","formControlName","isForCustomerVisit"],["color","primary","formControlName","isForCustomerComplaint"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"input",10),t.ALo(40,"translate"),t.ALo(41,"translate"),t._UZ(42,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(43,"div",4),t.TgZ(44,"div",5),t.TgZ(45,"label"),t._uU(46),t.ALo(47,"translate"),t.qZA(),t._UZ(48,"input",11),t.ALo(49,"translate"),t.ALo(50,"translate"),t._UZ(51,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(52,"div",12),t.TgZ(53,"div",5),t.TgZ(54,"label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"br"),t._UZ(58,"mat-slide-toggle",13),t.qZA(),t.qZA(),t.TgZ(59,"div",12),t.TgZ(60,"div",5),t.TgZ(61,"label"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t._UZ(64,"br"),t._UZ(65,"mat-slide-toggle",14),t.qZA(),t.qZA(),t.TgZ(66,"div",12),t.TgZ(67,"div",5),t.TgZ(68,"label"),t._uU(69),t.ALo(70,"translate"),t.qZA(),t._UZ(71,"br"),t._UZ(72,"mat-slide-toggle",15),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",16),t.TgZ(74,"div",17),t.TgZ(75,"input",18),t.NdJ("click",function(){return o.closeModel()}),t.ALo(76,"translate"),t.qZA(),t._uU(77," \xa0 "),t._UZ(78,"input",19),t.ALo(79,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,27,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,29,"ReasonCode")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,31,"Please_Enter")," ",t.lcZ(14,33,"ReasonCode"),""),t.xp6(3),t.Q6J("control",o.form.controls.reasonCode),t.xp6(4),t.Oqu(t.lcZ(20,35,"ReasonCode_Name_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,37,"Please_Enter")," ",t.lcZ(23,39,"ReasonCode_Name_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.reasonCodeNameEng),t.xp6(4),t.Oqu(t.lcZ(29,41,"ReasonCode_Name_Arab")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,43,"Please_Enter")," ",t.lcZ(32,45,"ReasonCode_Name_Arab"),""),t.xp6(3),t.Q6J("control",o.form.controls.reasonCodeNameArb),t.xp6(4),t.Oqu(t.lcZ(38,47,"Description_Eng")),t.xp6(2),t.hYB("placeholder","",t.lcZ(40,49,"Please_Enter")," ",t.lcZ(41,51,"Description_Eng"),""),t.xp6(3),t.Q6J("control",o.form.controls.descriptionEng),t.xp6(4),t.Oqu(t.lcZ(47,53,"Description_Arb")),t.xp6(2),t.hYB("placeholder","",t.lcZ(49,55,"Please_Enter")," ",t.lcZ(50,57,"Description_Arb"),""),t.xp6(3),t.Q6J("control",o.form.controls.descriptionArb),t.xp6(4),t.Oqu(t.lcZ(56,59,"Is_Active")),t.xp6(7),t.Oqu(t.lcZ(63,61,"IsForCustomerVisit")),t.xp6(7),t.Oqu(t.lcZ(70,63,"IsForCustomerComplaint")),t.xp6(6),t.s9C("value",t.lcZ(76,65,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(79,67,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,Ot.Rr],pipes:[Z.X$],encapsulation:2}),i})();function Bw(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ReasonCode_Code")," "))}function Hw(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCode)}}function Vw(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ReasonCode_Name_English")," "))}function $w(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCodeNameEng)}}function Gw(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ReasonCode_Name_Arab")," "))}function Ww(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.reasonCodeNameArb)}}function zw(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Description_Eng")," "))}function Xw(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.descriptionEng)}}function Kw(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Description_Arb")," "))}function tU(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.descriptionArb)}}function eU(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function oU(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function iU(i,a){1&i&&(t.TgZ(0,"span",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function nU(i,a){if(1&i&&(t.TgZ(0,"td",37),t.YNc(1,oU,3,3,"span",38),t.YNc(2,iU,3,3,"ng-template",null,39,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function aU(i,a){1&i&&(t.TgZ(0,"th",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function sU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",37),t.TgZ(1,"span",43),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",44),t._uU(3,"\xa0"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Edit"))}}function rU(i,a){1&i&&t._UZ(0,"tr",45)}function lU(i,a){1&i&&t._UZ(0,"tr",46)}const cU=function(){return{standalone:!0}};let pU=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.oprService=h,this.translate=C,this.displayedColumns=["reasonCode","reasonCodeNameEng","reasonCodeNameArb","descriptionEng","descriptionArb","isActive","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ReasonCode/getReasonCodesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,Qw);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_ReasonCode","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_ReasonCode","Update")}translateToolTip(e){return`${this.translate.instant(e)}`}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-reasoncodes"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:66,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addreasonCodes","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","reasonCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","reasonCodeNameEng"],["matColumnDef","reasonCodeNameArb"],["matColumnDef","descriptionEng"],["matColumnDef","descriptionArb"],["matColumnDef","isActive"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[3,"matTooltip","click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,Bw,3,3,"th",24),t.YNc(43,Hw,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,Vw,3,3,"th",24),t.YNc(46,$w,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,Gw,3,3,"th",24),t.YNc(49,Ww,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,zw,3,3,"th",24),t.YNc(52,Xw,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,Kw,3,3,"th",24),t.YNc(55,tU,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,eU,3,3,"th",24),t.YNc(58,nU,4,2,"td",25),t.BQk(),t.ynx(59,31),t.YNc(60,aU,3,3,"th",32),t.YNc(61,sU,4,1,"td",25),t.BQk(),t.YNc(62,rU,1,0,"tr",33),t.YNc(63,lU,1,0,"tr",34),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.ynx(64),t.TgZ(65,"mat-paginator",35),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"ReasonCodes")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"ReasonCodes")),t.xp6(10),t.hij("",t.lcZ(27,24,"ReasonCode_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,cU)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_ReasonCode")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function uU(i,a){1&i&&(t.TgZ(0,"button",21),t.ALo(1,"translate"),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i&&(t.MGl("printTitle"," ",t.lcZ(1,3,"Attedance_Status_Report"),""),t.Q6J("useExistingCss",!0),t.xp6(2),t.hij(" ",t.lcZ(3,5,"Print")," "))}function dU(i,a){if(1&i&&(t.ynx(0),t.TgZ(1,"th"),t._uU(2),t.qZA(),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.uIk("colspan",null==e.result?null:e.result.daysInMonth2),t.xp6(1),t.AsE("",null==e.result?null:e.result.month2Text,"-",null==e.result?null:e.result.year2Text,"")}}function mU(i,a){if(1&i&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.hij(" ",e.day," ")}}function _U(i,a){if(1&i&&(t.TgZ(0,"td",38),t.TgZ(1,"span",39),t._uU(2),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw().index,s=t.oxw(3);t.s9C("id",s.getBgColor(e)),t.xp6(1),t.Q6J("matTooltip",s.getToolTip(n,o)),t.xp6(1),t.hij(" ",s.getStatusFlag(e)," ")}}function gU(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.YNc(11,_U,3,3,"td",37),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",e.branchCode," "),t.xp6(2),t.hij(" ",e.customerCode," "),t.xp6(2),t.hij(" ",e.projectCode," "),t.xp6(2),t.hij(" ",e.siteCode," "),t.xp6(1),t.Q6J("ngForOf",e.attendanceStatusMatrix)}}function hU(i,a){if(1&i&&(t.TgZ(0,"div"),t.TgZ(1,"table",34),t.TgZ(2,"tr"),t._UZ(3,"th",35),t.ynx(4),t.TgZ(5,"th"),t._uU(6),t.qZA(),t.BQk(),t.YNc(7,dU,3,3,"ng-container",33),t.qZA(),t.TgZ(8,"tr"),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.YNc(24,mU,2,1,"th",36),t.qZA(),t.YNc(25,gU,12,6,"tr",36),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(5),t.uIk("colspan",null==e.result?null:e.result.daysInMonth1),t.xp6(1),t.AsE("",null==e.result?null:e.result.month1Text,"-",null==e.result?null:e.result.year1Text,""),t.xp6(1),t.Q6J("ngIf",!(null!=e.result&&e.result.isSingleMonth)),t.xp6(3),t.hij(" ",t.lcZ(11,11,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(14,13,"Branch_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(17,15,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(20,17,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(23,19,"Site_Code")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.columns),t.xp6(1),t.Q6J("ngForOf",null==e.result?null:e.result.rows)}}function fU(i,a){if(1&i&&(t.TgZ(0,"div",22),t.TgZ(1,"div",23),t.TgZ(2,"table",24),t.TgZ(3,"tr"),t.TgZ(4,"td",25),t.TgZ(5,"h5",26),t.TgZ(6,"strong"),t._uU(7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"td",27),t._UZ(9,"img",28),t.qZA(),t.TgZ(10,"td",25),t.TgZ(11,"h5",29),t.TgZ(12,"strong"),t._uU(13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td"),t.TgZ(16,"div",30),t._uU(17),t._UZ(18,"br"),t._uU(19),t._UZ(20,"br"),t._uU(21),t.ALo(22,"translate"),t._UZ(23,"br"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"tr",31),t.TgZ(25,"td",32),t._uU(26),t.ALo(27,"date"),t.ALo(28,"date"),t.ALo(29,"translate"),t.ALo(30,"translate"),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(32,hU,26,21,"div",33),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(7),t.hij(" ",e.company.companyName," "),t.xp6(2),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(4),t.hij(" ",e.company.companyNameAr," "),t.xp6(4),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(22,16,"Tel_Phone")," : ",e.company.phone," "),t.xp6(5),t.Ywz(" The Statement of Attedance_Status_Report for Date Range: ",t.xi3(27,18,e.fromDate,"dd/MM/yyyy")," to ",t.xi3(28,21,e.toDate,"dd/MM/yyyy")," \xa0 ",t.lcZ(29,24,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," \xa0",t.lcZ(30,26,"Branch_Code"),": ",null!=e.cityCode&&""!=e.cityCode?e.cityCode:"all"," \xa0",t.lcZ(31,28,"Status_Code"),": ",null!=e.statusCode&&""!=e.statusCode?e.statusCode:"all"," "),t.xp6(6),t.Q6J("ngIf",0!=(null==e.result||null==e.result.columns?null:e.result.columns.length))}}let ZU=(()=>{class i extends q{constructor(e,o,n,s,r,c,p){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.translate=c,this.datepipe=p,this.List=[],this.isLoading=!1,this.projectSitesList=[],this.customersList=[],this.options=[],this.customerSelectionList=[{text:"54500025",value:"54500025"}],this.customerCode="",this.statusSelectionList=[{text:"Attendance_Drafted",value:"Attendance_Drafted"},{text:"Attendance_Not_Drafted",value:"Attendance_Not_Drafted"},{text:"Attendance_Posted",value:"Attendance_Posted"},{text:"Attendance_Not_Posted",value:"Attendance_Not_Posted"}],this.statusCode="",this.serviceSelectionList=[],this.serviceCode="",this.citySelectionList=[],this.cityCode="",this.curDate=new Date,this.isArabic=!1,this.totalItemsCount=0,this.pageSize=10,this.pageNumber=0}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}setForm(){this.customerCode=this.serviceCode=this.cityCode=this.statusCode="",this.projectSitesList=[],this.customersList=[],this.date="",this.InputQuery={date:"",customerCode:"",statusCode:"",cityCode:"",serviceCode:""},this.result.columns=null}search(){if(this.projectSitesList=[],this.customersList=[],this.date){let e=new Date(this.date);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.InputQuery={payrollStartDate:e,customerCode:this.customerCode,attendanceStatus:this.statusCode,cityCode:this.cityCode,branchCode:this.cityCode,pageNumber:this.pageNumber,pageSize:this.pageSize},this.isLoading=!0,this.apiService.post("Reports/getAttendanceStatusPayrollReport",this.InputQuery).subscribe(o=>{null!=o?(this.result=o,this.company=o.company,this.totalItemsCount=o.totalItemsCount,this.loadCompleteReport(this.InputQuery)):this.isLoading=!1})}else this.notifyService.showError("Select Dates")}loadCompleteReport(e){this.InputQuery.pageNumber++,e.pageNumber>Math.floor(this.totalItemsCount/this.pageSize)?this.isLoading=!1:this.apiService.post("Reports/getAttendanceStatusPayrollReport",this.InputQuery).subscribe(o=>{this.result.rows=this.result.rows.concat(o.rows),this.loadCompleteReport(e)})}openPrint(){if(this.result.rows.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}getProjectsOfCustomer(e){return this.projectSitesList.filter(o=>o.customerCode==e)}getTotal(e){let o={inProgress:0,closed:0,completed:0,suspended:0,inActive:0,total:0};return this.projectSitesList.forEach(n=>{n.customerCode==e&&("Closed"==n.status?(o.inActive++,o.closed++):"InProgress"==n.status?o.inProgress++:"Suspended"==n.status?(o.inActive++,o.suspended++):"Completed"==n.status?(o.completed++,o.inActive++):"InActive"==n.status&&o.inActive++,o.total++)}),o}clearProjectsData(){this.customersList=[],this.projectSitesList=[],this.customersList=[],this.result=null,this.company=null}getBgColor(e){return e.isAttnPosted?"bgGreen":e.isAttnDrafted?"bgOrange":"bgRed"}getStatusFlag(e){return e.isAttnPosted?"P":e.isAttnDrafted?"D":"N"}getToolTip(e,o){return`${this.datepipe.transform(this.result.columns[o].attnDate,"dd-MM-yyyy")}`}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(l.qu),t.Y36(w.g),t.Y36(Z.sK),t.Y36(f.uU))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-attendance-status-report"]],features:[t.qOj],decls:53,vars:33,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],["class","btn btn-primary","printSectionId","printcontainer","ngxPrint","","data-toggle","modal",3,"useExistingCss","printTitle",4,"ngIf"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],["printSectionId","printcontainer","ngxPrint","","data-toggle","modal",1,"btn","btn-primary",3,"useExistingCss","printTitle"],[1,"table-responsive"],["id","printcontainer"],["cellpadding","10","cellspacing","5","width","100%",2,"padding-bottom","5px","background-color","white"],[2,"width","35%"],[2,"text-align","left"],[2,"text-align","center"],[1,"float-center",2,"width","200px","height","150px",3,"src"],[2,"text-align","right"],[1,"font-weight-medium"],["width","100%"],["colspan","3","width","100%",2,"text-align","center"],[4,"ngIf"],["id","attndTable"],["colspan","5"],[4,"ngFor","ngForOf"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],[3,"matTooltip"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.cityCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.customerCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",10),t.NdJ("ngModelChange",function(r){return o.statusCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",6),t.TgZ(28,"div",7),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"div",7),t.TgZ(33,"div",11),t.TgZ(34,"input",12),t.NdJ("ngModelChange",function(r){return o.date=r})("click",function(){t.CHM(n);const r=t.MAs(40);return o.openDatePicker(r)}),t.ALo(35,"translate"),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"div",13),t._UZ(38,"mat-datepicker-toggle",14),t._UZ(39,"mat-datepicker",null,15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",9),t.TgZ(42,"div",7),t._UZ(43,"br"),t.TgZ(44,"button",16),t.NdJ("click",function(){return o.search()}),t._uU(45,"Search"),t.qZA(),t._uU(46," \xa0 "),t.TgZ(47,"button",16),t.NdJ("click",function(){return o.setForm()}),t._UZ(48,"i",17),t.qZA(),t._uU(49," \xa0 "),t.YNc(50,uU,4,7,"button",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(51,"spinner-loader",19),t.YNc(52,fU,33,30,"div",20),t.qZA()}if(2&e){const n=t.MAs(40);t.xp6(4),t.hij(" ",t.lcZ(5,19,"Attedance_Status_Report")," "),t.xp6(8),t.Oqu(t.lcZ(13,21,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,23,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,25,"Status_Code")),t.xp6(2),t.Q6J("items",o.statusSelectionList)("ngModel",o.statusCode),t.xp6(4),t.Oqu(t.lcZ(31,27,"Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(35,29,"Please_Enter")," ",t.lcZ(36,31,"Date"),""),t.Q6J("ngModel",o.date)("matDatepicker",n),t.xp6(4),t.Q6J("for",n),t.xp6(12),t.Q6J("ngIf",null==o.result?null:o.result.columns),t.xp6(1),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",null==o.result?null:o.result.columns)}},directives:[Dt.w9,l.JJ,l.On,l.Fj,M.hl,M.nW,gt.R9,M.Mq,f.O5,_t.r,Xt.I,f.sg,rt.gM],pipes:[Z.X$,f.uU],styles:["#attndTable[_ngcontent-%COMP%]   table[_ngcontent-%COMP%] {\n   padding :10px 10px 10px 10px;\n  }\n  #attndTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\n\n    border: solid;\n    border-width: 1px;\n    border-color: black;\n    padding: 5px 5px 5px 5px;\n    text-align: center;\n    background-color: white;\n  }\n\n  #bgOrange[_ngcontent-%COMP%] {\n    color: #ffd800;\n  }\n\n  #bgGreen[_ngcontent-%COMP%] {\n    color: #4cff00;\n  }\n\n  #bgRed[_ngcontent-%COMP%] {\n    color: red;\n  }\n\n  @media print {\n    *[_ngcontent-%COMP%] {\n      color: black;\n      background: white;\n    }\n\n    \n  }"]}),i})();function CU(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1," Loading Data "),t.qZA())}function AU(i,a){1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",35),t._uU(3," No Data Found "),t.qZA(),t.qZA(),t.BQk())}function TU(i,a){1&i&&(t.TgZ(0,"tr",26),t.TgZ(1,"th",27),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",27),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",27),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,3,"Skillset_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(6,5,"Skillset_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(9,7,"Qty")," "))}function vU(i,a){if(1&i&&(t.TgZ(0,"tr",26),t.TgZ(1,"td",28),t._uU(2),t.qZA(),t.TgZ(3,"td",28),t._uU(4),t.qZA(),t.TgZ(5,"td",28),t._uU(6),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(5);t.xp6(2),t.hij(" ",null==e?null:e.skillSetCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.nameInArabic:null==e?null:e.nameInEnglish," "),t.xp6(2),t.hij(" ",null==e?null:e.quantity," ")}}function xU(i,a){if(1&i&&(t.TgZ(0,"table",25),t.YNc(1,AU,4,0,"ng-container",30),t.YNc(2,TU,10,9,"tr",32),t.YNc(3,vU,7,3,"tr",33),t.TgZ(4,"tr"),t.TgZ(5,"th",34),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"td",28),t._uU(9),t.qZA(),t.qZA(),t._UZ(10,"tbody"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.skillsetsList.length)),t.xp6(1),t.Q6J("ngIf",0!=(null==e?null:e.skillsetsList.length)),t.xp6(1),t.Q6J("ngForOf",null==e?null:e.skillsetsList),t.xp6(3),t.hij(" ",t.lcZ(7,5,"Total"),"\n"),t.xp6(3),t.hij(" ",null==e?null:e.totalSkillSetsQuantity," ")}}function qU(i,a){if(1&i&&(t.ynx(0,24),t.TgZ(1,"table",25),t.TgZ(2,"tr",26),t.TgZ(3,"th",27),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",27),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",27),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",27),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",27),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th",27),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th",27),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.qZA(),t.TgZ(24,"tr",26),t.TgZ(25,"td",28),t._uU(26),t.qZA(),t.TgZ(27,"td",28),t._uU(28),t.qZA(),t.TgZ(29,"td",28),t._uU(30),t.qZA(),t.TgZ(31,"td",28),t._uU(32),t.qZA(),t.TgZ(33,"td",28),t._uU(34),t.ALo(35,"date"),t.qZA(),t.TgZ(36,"td",28),t._uU(37),t.ALo(38,"date"),t.qZA(),t.TgZ(39,"td",28),t._uU(40),t.qZA(),t.qZA(),t.qZA(),t.ynx(41,24),t.YNc(42,CU,2,0,"span",30),t.YNc(43,xU,11,7,"table",31),t.BQk(),t.BQk()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(4),t.hij(" ",t.lcZ(5,16,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(8,18,"Project_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(11,20,"Site_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(14,22,"Site_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(17,24,"Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(20,26,"End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(23,28,"Status")," "),t.xp6(4),t.hij(" ",null==e?null:e.projectCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.projectNameArb:null==e?null:e.projectNameEng," "),t.xp6(2),t.hij(" ",null==e?null:e.siteCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.siteNameArb:null==e?null:e.siteNameEng," "),t.xp6(2),t.hij(" ",t.xi3(35,30,null==e?null:e.startDate,"dd/MM/YYYY")," "),t.xp6(3),t.hij(" ",t.xi3(38,33,null==e?null:e.endDate,"dd/MM/YYYY")," "),t.xp6(3),t.hij(" ",null==e?null:e.status," "),t.xp6(2),t.Q6J("ngIf",null==(null==e?null:e.skillsetsList)),t.xp6(1),t.Q6J("ngIf",null!=(null==e?null:e.skillsetsList))}}function bU(i,a){if(1&i&&(t.TgZ(0,"div",24),t.ynx(1,24),t.TgZ(2,"table",25),t.TgZ(3,"tr",26),t.TgZ(4,"th",27),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"td",28),t._uU(8),t.qZA(),t.TgZ(9,"th",27),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"td",28),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"th",27),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"td",29),t._uU(19),t.qZA(),t.qZA(),t._UZ(20,"tbody"),t.qZA(),t.BQk(),t.YNc(21,qU,44,36,"ng-container",23),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,7,"Customer_Code")," "),t.xp6(3),t.hij(" ",e.custCode," "),t.xp6(2),t.hij(" ",t.lcZ(11,9,"Customer_Name")," "),t.xp6(3),t.hij(" ",o.isArabic?e.custArbName:e.custName," "),t.xp6(3),t.hij(" ",t.lcZ(17,11,"Customer_Address")," "),t.xp6(3),t.hij(" ",e.custAddress1," "),t.xp6(2),t.Q6J("ngForOf",o.getProjectsOfCustomer(e.custCode))}}function yU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t._UZ(5,"br"),t.TgZ(6,"div",17),t.TgZ(7,"table",18),t.TgZ(8,"tr"),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"td",19),t._UZ(13,"img",20),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td"),t.TgZ(16,"div",21),t._UZ(17,"br"),t._uU(18),t._UZ(19,"br"),t._uU(20),t._UZ(21,"br"),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"td",19),t._uU(27),t.ALo(28,"translate"),t.ALo(29,"translate"),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",22),t.YNc(32,bU,22,13,"div",23),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,14,"Print")," "),t.xp6(8),t.hij(" ",e.company.companyName,""),t.xp6(3),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(5),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(23,16,"Tel_Phone")," : ",e.company.phone," "),t.xp6(5),t.gL8(" The Statement of Projects Sites ",t.lcZ(28,18,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," \xa0",t.lcZ(29,20,"Branch_Code"),": ",null!=e.cityCode&&""!=e.customerCode?e.cityCode:"all"," \xa0",t.lcZ(30,22,"Site_Code"),": ",null!=e.siteCode&&""!=e.siteCode?e.siteCode:"all"," "),t.xp6(5),t.Q6J("ngForOf",e.customersList)}}let SU=(()=>{class i extends q{constructor(e,o,n,s,r){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.List=[],this.isLoading=!1,this.projectSitesList=[],this.customersList=[],this.dateFrom="",this.dateTo="",this.options=[],this.customerSelectionList=[],this.siteSelectionList=[],this.customerCode="",this.citySelectionList=[],this.cityCode="",this.siteCode="",this.curDate=new Date,this.isArabic=!1}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList(),this.loadSiteSelectionList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadProjectSites(){this.apiService.getall("ProjectSites/getSelectProjectSitesList").subscribe(e=>{this.projectSitesList=e,this.projectSitesList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}onSelectCustomer(){this.clearProjectsData(),this.siteCode="",this.loadSiteSelectionList()}loadSiteSelectionList(){""!=this.customerCode&&null!=this.customerCode?this.apiService.getall("ProjectSites/getSelectProjectSitesListByCustomerCode/"+this.customerCode).subscribe(e=>{this.siteSelectionList=e,this.siteSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})}):this.apiService.getall("ProjectSites/getSelectProjectSitesList").subscribe(e=>{this.siteSelectionList=e,this.siteSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}setForm(){this.customerCode=this.cityCode,this.projectSitesList=[],this.customersList=[],this.InputQuery={customerCode:"",siteCode:"",cityCode:""}}search(){this.projectSitesList=[],this.customersList=[],this.InputQuery={customerCode:null==this.customerCode?"":this.customerCode,cityCode:null==this.cityCode?"":this.cityCode,siteCode:null==this.siteCode?"":this.siteCode},this.isLoading=!0,this.apiService.post("Reports/getSkillsetsOnProjectsReports",this.InputQuery).subscribe(e=>{var o;if(null!=e)if(this.projectSitesList=e.projectSites,this.customersList=e.customers,this.company=e.company,0==(null===(o=this.projectSitesList)||void 0===o?void 0:o.length))this.isLoading=!1;else for(let n=0;n<this.projectSitesList.length;n+=50){let s=[];for(let r=n;r<n+50&&r<this.projectSitesList.length;r++)s.push(this.projectSitesList[r]);this.apiService.post("Reports/getSkillsetsOnProjectsReportsByProjectSites",s).subscribe(r=>{let c=r;for(let p=0;p<c.length;p++)this.projectSitesList[n+p]=c[p],n+p>=this.projectSitesList.length-1&&(this.isLoading=!1)})}else this.isLoading=!1})}openPrint(){if(console.log(this.projectSitesList),this.projectSitesList.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}getProjectsOfCustomer(e){return this.projectSitesList.filter(o=>o.customerCode==e)}clearProjectsData(){this.customersList=[],this.projectSitesList=[],this.customersList=[],this.company=null,this.loadSiteSelectionList()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(l.qu),t.Y36(w.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-count-of-skillsets"]],features:[t.qOj],decls:37,vars:20,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-2","col-lg-2"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],[1,"col-md-4","col-lg-4"],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["id","printcontainer",1,"outer"],["cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[2,"text-align","center"],[2,"width","200px","height","150px",3,"src"],[1,"font-weight-medium"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","100%","padding-top","5px"],["style","padding-bottom: 5px; padding-top: 5px",4,"ngFor","ngForOf"],[2,"padding-bottom","5px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%","background","#efefef"],[2,"text-align","left"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["colspan","3",2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],[4,"ngIf"],["style","width: 100%; background: #efefef;","border","0","cellpadding","0","cellspacing","0","width","100%",4,"ngIf"],["style","text-align:left",4,"ngIf"],["style","text-align:left",4,"ngFor","ngForOf"],["colspan","2",2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"text-align","center","border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(s){return o.cityCode=s})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(s){return o.customerCode=s})("change",function(){return o.onSelectCustomer()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",10),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",8),t.NdJ("ngModelChange",function(s){return o.siteCode=s})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",9),t.TgZ(28,"div",7),t._UZ(29,"br"),t.TgZ(30,"button",11),t.NdJ("click",function(){return o.search()}),t._uU(31,"Search"),t.qZA(),t._uU(32," \xa0 "),t.TgZ(33,"button",11),t.NdJ("click",function(){return o.setForm()}),t._UZ(34,"i",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(35,"spinner-loader",13),t.YNc(36,yU,33,24,"div",14),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,12,"Skillsets_Count_On_Project")," "),t.xp6(8),t.Oqu(t.lcZ(13,14,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,16,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,18,"Site_Code")),t.xp6(2),t.Q6J("items",o.siteSelectionList)("ngModel",o.siteCode),t.xp6(9),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.company))},directives:[Dt.w9,l.JJ,l.On,_t.r,f.O5,f.sg],pipes:[Z.X$,f.uU],encapsulation:2}),i})();function wU(i,a){if(1&i&&(t.TgZ(0,"tr",30),t.TgZ(1,"td",34),t._uU(2),t.qZA(),t.TgZ(3,"td",34),t._uU(4),t.qZA(),t.TgZ(5,"td",34),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.qZA(),t.TgZ(9,"td",34),t._uU(10),t.qZA(),t.TgZ(11,"td",34),t._uU(12),t.qZA(),t.TgZ(13,"td",34),t._uU(14),t.qZA(),t.TgZ(15,"td",34),t._uU(16),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);let n,s,r,c,p,u;t.xp6(2),t.hij(" ",e.custCode," "),t.xp6(2),t.hij(" ",o.isArabic?e.custArbName:e.custName," "),t.xp6(2),t.hij(" ",null==(n=o.getTotal(e.custCode))?null:n.inActive," "),t.xp6(2),t.hij(" ",null==(s=o.getTotal(e.custCode))?null:s.closed," "),t.xp6(2),t.hij(" ",null==(r=o.getTotal(e.custCode))?null:r.inProgress," "),t.xp6(2),t.hij(" ",null==(c=o.getTotal(e.custCode))?null:c.suspended," "),t.xp6(2),t.hij(" ",null==(p=o.getTotal(e.custCode))?null:p.completed," "),t.xp6(2),t.hij(" ",null==(u=o.getTotal(e.custCode))?null:u.total," ")}}function UU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t._UZ(5,"br"),t.TgZ(6,"div",24),t.TgZ(7,"table",25),t.TgZ(8,"tr"),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"td",26),t._UZ(13,"img",27),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td"),t.TgZ(16,"div",28),t._UZ(17,"br"),t._uU(18),t._UZ(19,"br"),t._uU(20),t._UZ(21,"br"),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"td",26),t._uU(27),t.ALo(28,"date"),t.ALo(29,"date"),t.ALo(30,"translate"),t.ALo(31,"translate"),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",29),t.ynx(35,30),t.TgZ(36,"table",31),t.TgZ(37,"tr"),t.TgZ(38,"th",32),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"th",32),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"th",32),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th",32),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"th",32),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"th",32),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"th",32),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.TgZ(59,"th",32),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.qZA(),t.YNc(62,wU,17,8,"tr",33),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,26,"Print")," "),t.xp6(8),t.hij(" ",e.company.companyName,""),t.xp6(3),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(5),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(23,28,"Tel_Phone")," : ",e.company.phone," "),t.xp6(5),t.qoO([" The Statement of Projects Sites for Date Range: ",t.xi3(28,30,e.fromDate,"dd/MM/yyyy")," to ",t.xi3(29,33,e.toDate,"dd/MM/yyyy")," \xa0 ",t.lcZ(30,36,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," \xa0",t.lcZ(31,38,"Branch_Code"),": ",null!=e.cityCode&&""!=e.cityCode?e.cityCode:"all"," \xa0",t.lcZ(32,40,"Service_Code"),": ",null!=e.serviceCode&&""!=e.serviceCode?e.serviceCode:"all"," \xa0",t.lcZ(33,42,"Status_Code"),": ",null!=e.statusCode&&""!=e.statusCode?e.statusCode:"all"," "]),t.xp6(12),t.hij(" ",t.lcZ(40,44,"Customer_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(43,46,"Customer_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(46,48,"InActive")," "),t.xp6(3),t.hij(" ",t.lcZ(49,50,"Closed")," "),t.xp6(3),t.hij(" ",t.lcZ(52,52,"InProgress")," "),t.xp6(3),t.hij(" ",t.lcZ(55,54,"Suspended")," "),t.xp6(3),t.hij(" ",t.lcZ(58,56,"Completed")," "),t.xp6(3),t.hij(" ",t.lcZ(61,58,"Total")," "),t.xp6(2),t.Q6J("ngForOf",e.customersList)}}let LU=(()=>{class i extends q{constructor(e,o,n,s,r){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.List=[],this.isLoading=!1,this.projectSitesList=[],this.customersList=[],this.dateFrom="",this.dateTo="",this.options=[],this.customerSelectionList=[{text:"54500025",value:"54500025"}],this.customerCode="",this.statusSelectionList=[{text:"InProgress",value:"InProgress"},{text:"Closed",value:"Closed"},{text:"Suspended",value:"Suspended"},{text:"InActive",value:"InActive"},{text:"Completed",value:"Completed"}],this.statusCode="",this.serviceSelectionList=[],this.serviceCode="",this.citySelectionList=[],this.cityCode="",this.curDate=new Date,this.isArabic=!1}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList(),this.loadServiceCodesList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadServiceCodesList(){this.apiService.getall("Services/getSelectServiceList").subscribe(e=>{this.serviceSelectionList=e,this.serviceSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}setForm(){this.customerCode=this.serviceCode=this.cityCode=this.statusCode="",this.projectSitesList=[],this.customersList=[],this.InputQuery={fromDate:this.fromDate,todate:this.toDate,customerCode:"",statusCode:"",cityCode:"",serviceCode:""}}search(){this.projectSitesList=[],this.customersList=[];let e=new Date(this.fromDate);e.setMinutes(e.getMinutes()-e.getTimezoneOffset());let o=new Date(this.toDate);o.setMinutes(e.getMinutes()-o.getTimezoneOffset()),this.InputQuery={fromDate:e,todate:o,customerCode:null==this.customerCode?"":this.customerCode,statusCode:null==this.statusCode?"":this.statusCode,cityCode:null==this.cityCode?"":this.cityCode,serviceCode:null==this.serviceCode?"":this.serviceCode},this.fromDate&&this.toDate?(this.isLoading=!0,this.apiService.post("Reports/getProjectsCountMatrixReports",this.InputQuery).subscribe(n=>{if(null!=n)if(this.projectSitesList=n.projectSites,this.customersList=n.customers,this.company=n.company,this.projectSitesList.length>0)for(let s=0;s<this.projectSitesList.length;s+=50){let r=[];for(let c=s;c<s+50&&c<this.projectSitesList.length;c++)r.push(this.projectSitesList[c]);this.apiService.post("Reports/getProjectsCountReportByProjectSites",r).subscribe(c=>{let p=c;for(let u=0;u<p.length;u++)this.projectSitesList[s+u]=p[u],s+u>=this.projectSitesList.length-1&&(this.isLoading=!1)})}else this.isLoading=!1;else this.isLoading=!1})):this.notifyService.showError("Select Dates")}openPrint(){if(this.projectSitesList.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}getProjectsOfCustomer(e){return this.projectSitesList.filter(o=>o.customerCode==e)}getTotal(e){let o={inProgress:0,closed:0,completed:0,suspended:0,inActive:0,total:0};return this.projectSitesList.forEach(n=>{n.customerCode==e&&("Closed"==n.status?(o.inActive++,o.closed++):"InProgress"==n.status?o.inProgress++:"Suspended"==n.status?(o.inActive++,o.suspended++):"Completed"==n.status?(o.completed++,o.inActive++):"InActive"==n.status&&o.inActive++,o.total++)}),o}clearProjectsData(){this.customersList=[],this.projectSitesList=[],this.customersList=[],this.company=null}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(l.qu),t.Y36(w.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-projects-count-matrix"]],features:[t.qOj],decls:71,vars:49,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-2","col-lg-2"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-3","col-lg-3"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["id","printcontainer",1,"outer"],["cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[2,"text-align","center"],[2,"width","200px","height","150px",3,"src"],[1,"font-weight-medium"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","100%","padding-top","5px"],[2,"padding-bottom","5px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%","background","#efefef"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["style","padding-bottom: 5px; padding-top: 5px",4,"ngFor","ngForOf"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.cityCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.customerCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.serviceCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",6),t.TgZ(28,"div",7),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"ng-select",10),t.NdJ("ngModelChange",function(r){return o.statusCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",11),t.TgZ(34,"div",7),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"div",7),t.TgZ(39,"div",12),t.TgZ(40,"input",13),t.NdJ("ngModelChange",function(r){return o.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(46);return o.openDatePicker(r)}),t.ALo(41,"translate"),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"div",14),t._UZ(44,"mat-datepicker-toggle",15),t._UZ(45,"mat-datepicker",null,16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",11),t.TgZ(48,"div",7),t.TgZ(49,"label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"div",7),t.TgZ(53,"div",12),t.TgZ(54,"input",13),t.NdJ("ngModelChange",function(r){return o.toDate=r})("click",function(){t.CHM(n);const r=t.MAs(60);return o.openDatePicker(r)}),t.ALo(55,"translate"),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"div",14),t._UZ(58,"mat-datepicker-toggle",15),t._UZ(59,"mat-datepicker",null,17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"div",9),t.TgZ(62,"div",7),t._UZ(63,"br"),t.TgZ(64,"button",18),t.NdJ("click",function(){return o.search()}),t._uU(65,"Search"),t.qZA(),t._uU(66," \xa0 "),t.TgZ(67,"button",18),t.NdJ("click",function(){return o.setForm()}),t._UZ(68,"i",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(69,"spinner-loader",20),t.YNc(70,UU,63,60,"div",21),t.qZA()}if(2&e){const n=t.MAs(46),s=t.MAs(60);t.xp6(4),t.hij(" ",t.lcZ(5,27,"Project_Count_Matrix")," "),t.xp6(8),t.Oqu(t.lcZ(13,29,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,31,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,33,"Service_Code")),t.xp6(2),t.Q6J("items",o.serviceSelectionList)("ngModel",o.serviceCode),t.xp6(4),t.Oqu(t.lcZ(31,35,"Status_Code")),t.xp6(2),t.Q6J("items",o.statusSelectionList)("ngModel",o.statusCode),t.xp6(4),t.Oqu(t.lcZ(37,37,"From_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(41,39,"Please_Enter")," ",t.lcZ(42,41,"From_Date"),""),t.Q6J("ngModel",o.fromDate)("matDatepicker",n),t.xp6(4),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(51,43,"To_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(55,45,"Please_Enter")," ",t.lcZ(56,47,"To_Date"),""),t.Q6J("ngModel",o.toDate)("matDatepicker",s),t.xp6(4),t.Q6J("for",s),t.xp6(11),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.company)}},directives:[Dt.w9,l.JJ,l.On,l.Fj,M.hl,M.nW,gt.R9,M.Mq,_t.r,f.O5,f.sg],pipes:[Z.X$,f.uU],encapsulation:2}),i})();function DU(i,a){if(1&i&&(t.TgZ(0,"tr",33),t.TgZ(1,"td",35),t._uU(2),t.qZA(),t.TgZ(3,"td",35),t._uU(4),t.qZA(),t.TgZ(5,"td",35),t._uU(6),t.qZA(),t.TgZ(7,"td",35),t._uU(8),t.qZA(),t.TgZ(9,"td",35),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",35),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"td",35),t._uU(16),t.qZA(),t.TgZ(17,"td",41),t._uU(18),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(2),t.hij(" ",null==e?null:e.projectCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.projectNameArb:null==e?null:e.projectNameEng," "),t.xp6(2),t.hij(" ",null==e?null:e.siteCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.siteNameArb:null==e?null:e.siteNameEng," "),t.xp6(2),t.hij(" ",t.xi3(11,8,null==e?null:e.startDate,"dd/MM/YYYY")," "),t.xp6(3),t.hij(" ",t.xi3(14,11,null==e?null:e.endDate,"dd/MM/YYYY")," "),t.xp6(3),t.hij(" ",null==e?null:e.status," "),t.xp6(2),t.hij(" ",null==e?null:e.estimationCost," ")}}function NU(i,a){if(1&i&&(t.TgZ(0,"div",31),t.ynx(1,31),t.TgZ(2,"table",32),t.TgZ(3,"tr",33),t.TgZ(4,"th",34),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"td",35),t._uU(8),t.qZA(),t.TgZ(9,"th",34),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"td",35),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"th",34),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"td",36),t._uU(19),t.qZA(),t.qZA(),t._UZ(20,"tbody"),t.qZA(),t.BQk(),t.ynx(21,31),t.TgZ(22,"table",37),t.TgZ(23,"tr",33),t.TgZ(24,"th",34),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th",34),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th",34),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"th",34),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"th",34),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"th",34),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"th",34),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"th",34),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.qZA(),t.YNc(48,DU,19,14,"tr",38),t.TgZ(49,"tr",39),t.TgZ(50,"td",40),t._uU(51),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"td",34),t._uU(54),t.qZA(),t.qZA(),t._UZ(55,"tbody"),t.qZA(),t.BQk(),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);let n;t.xp6(5),t.hij(" ",t.lcZ(6,17,"Customer_Code")," "),t.xp6(3),t.hij(" ",e.custCode," "),t.xp6(2),t.hij(" ",t.lcZ(11,19,"Customer_Name")," "),t.xp6(3),t.hij(" ",o.isArabic?e.custArbName:e.custName," "),t.xp6(3),t.hij(" ",t.lcZ(17,21,"Customer_Address")," "),t.xp6(3),t.hij(" ",e.custAddress1," "),t.xp6(6),t.hij(" ",t.lcZ(26,23,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(29,25,"Project_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(32,27,"Site_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(35,29,"Site_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(38,31,"Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(41,33,"End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(44,35,"Status")," "),t.xp6(3),t.hij(" ",t.lcZ(47,37,"Estimation_Cost")," "),t.xp6(2),t.Q6J("ngForOf",o.getProjectsOfCustomer(e.custCode)),t.xp6(3),t.hij(" ",t.lcZ(52,39,"Total")," "),t.xp6(3),t.hij(" ",null==(n=o.getTotal(e.custCode))?null:n.estimationCost," ")}}function EU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t._UZ(5,"br"),t.TgZ(6,"div",24),t.TgZ(7,"table",25),t.TgZ(8,"tr"),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"td",26),t._UZ(13,"img",27),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td"),t.TgZ(16,"div",28),t._UZ(17,"br"),t._uU(18),t._UZ(19,"br"),t._uU(20),t._UZ(21,"br"),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"td",26),t._uU(27),t.ALo(28,"date"),t.ALo(29,"date"),t.ALo(30,"translate"),t.ALo(31,"translate"),t.ALo(32,"translate"),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",29),t.YNc(35,NU,56,41,"div",30),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,18,"Print")," "),t.xp6(8),t.hij(" ",e.company.companyName,""),t.xp6(3),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(5),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(23,20,"Tel_Phone")," : ",e.company.phone," "),t.xp6(5),t.qoO([" The Statement of Projects Sites for Date Range: ",t.xi3(28,22,e.fromDate,"dd/MM/yyyy")," to ",t.xi3(29,25,e.toDate,"dd/MM/yyyy")," \xa0 ",t.lcZ(30,28,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," \xa0",t.lcZ(31,30,"Branch_Code"),": ",null!=e.cityCode&&""!=e.customerCode?e.cityCode:"all"," \xa0",t.lcZ(32,32,"Service_Code"),": ",null!=e.serviceCode&&""!=e.serviceCode?e.serviceCode:"all"," \xa0",t.lcZ(33,34,"Status_Code"),": ",null!=e.statusCode&&""!=e.statusCode?e.statusCode:"all"," "]),t.xp6(8),t.Q6J("ngForOf",e.customersList)}}let OU=(()=>{class i extends q{constructor(e,o,n,s,r){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.List=[],this.isLoading=!1,this.projectSitesList=[],this.customersList=[],this.dateFrom="",this.dateTo="",this.options=[],this.customerSelectionList=[{text:"54500025",value:"54500025"}],this.customerCode="",this.statusSelectionList=[{text:"InProgress",value:"InProgress"},{text:"Closed",value:"Closed"},{text:"Suspended",value:"Suspended"},{text:"InActive",value:"InActive"},{text:"Completed",value:"Completed"}],this.statusCode="",this.serviceSelectionList=[],this.serviceCode="",this.citySelectionList=[],this.cityCode="",this.curDate=new Date,this.isArabic=!1}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList(),this.loadServiceCodesList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadServiceCodesList(){this.apiService.getall("Services/getSelectServiceList").subscribe(e=>{this.serviceSelectionList=e,this.serviceSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}setForm(){this.customerCode=this.serviceCode=this.cityCode=this.statusCode="",this.projectSitesList=[],this.customersList=[],this.InputQuery={fromDate:this.fromDate,todate:this.toDate,customerCode:"",statusCode:"",cityCode:"",serviceCode:""}}search(){this.projectSitesList=[],this.customersList=[];let e=new Date(this.fromDate);e.setMinutes(e.getMinutes()-e.getTimezoneOffset());let o=new Date(this.toDate);o.setMinutes(e.getMinutes()-o.getTimezoneOffset()),this.InputQuery={fromDate:e,todate:o,customerCode:null==this.customerCode?"":this.customerCode,statusCode:null==this.statusCode?"":this.statusCode,cityCode:null==this.cityCode?"":this.cityCode,serviceCode:null==this.serviceCode?"":this.serviceCode},this.fromDate&&this.toDate?(this.isLoading=!0,this.apiService.post("Reports/getProjectSitesReports",this.InputQuery).subscribe(n=>{if(null!=n)if(this.projectSitesList=n.projectSites,this.customersList=n.customers,this.company=n.company,this.projectSitesList.length>0){console.log(n);for(let s=0;s<this.projectSitesList.length;s+=50){let r=[];for(let c=s;c<s+50&&c<this.projectSitesList.length;c++)r.push(this.projectSitesList[c]);this.apiService.post("Reports/getReportByProjectSites",r).subscribe(c=>{let p=c;for(let u=0;u<p.length;u++)this.projectSitesList[s+u]=p[u],s+u==this.projectSitesList.length-1&&(this.isLoading=!1);this.isLoading=!1})}}else this.isLoading=!1;else this.isLoading=!1})):this.notifyService.showError("Select Dates")}openPrint(){if(this.projectSitesList.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}getProjectsOfCustomer(e){return this.projectSitesList.filter(o=>o.customerCode==e)}getTotal(e){let o={estimationCost:0};return this.projectSitesList.forEach(n=>{n.customerCode==e&&(o.estimationCost+=n.estimationCost)}),o}clearProjectsData(){this.customersList=[],this.projectSitesList=[],this.customersList=[],this.company=null}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(l.qu),t.Y36(w.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-projects-sites-reports"]],features:[t.qOj],decls:71,vars:49,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-2","col-lg-2"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-3","col-lg-3"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["id","printcontainer",1,"outer"],["cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[2,"text-align","center"],[2,"width","200px","height","150px",3,"src"],[1,"font-weight-medium"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","100%","padding-top","5px"],["style","padding-bottom: 5px; padding-top: 5px;",4,"ngFor","ngForOf"],[2,"padding-bottom","5px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%","background","#efefef"],[2,"text-align","left"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["colspan","3",2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%","background","#efefef"],["style","text-align:left",4,"ngFor","ngForOf"],[2,"text-align","right"],["colspan","7",2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"text-align","right","border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.cityCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.customerCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.serviceCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",6),t.TgZ(28,"div",7),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"ng-select",10),t.NdJ("ngModelChange",function(r){return o.statusCode=r})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",11),t.TgZ(34,"div",7),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"div",7),t.TgZ(39,"div",12),t.TgZ(40,"input",13),t.NdJ("ngModelChange",function(r){return o.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(46);return o.openDatePicker(r)}),t.ALo(41,"translate"),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"div",14),t._UZ(44,"mat-datepicker-toggle",15),t._UZ(45,"mat-datepicker",null,16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",11),t.TgZ(48,"div",7),t.TgZ(49,"label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"div",7),t.TgZ(53,"div",12),t.TgZ(54,"input",13),t.NdJ("ngModelChange",function(r){return o.toDate=r})("click",function(){t.CHM(n);const r=t.MAs(60);return o.openDatePicker(r)}),t.ALo(55,"translate"),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"div",14),t._UZ(58,"mat-datepicker-toggle",15),t._UZ(59,"mat-datepicker",null,17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(61,"div",9),t.TgZ(62,"div",7),t._UZ(63,"br"),t.TgZ(64,"button",18),t.NdJ("click",function(){return o.search()}),t._uU(65,"Search"),t.qZA(),t._uU(66," \xa0 "),t.TgZ(67,"button",18),t.NdJ("click",function(){return o.setForm()}),t._UZ(68,"i",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(69,"spinner-loader",20),t.YNc(70,EU,36,36,"div",21),t.qZA()}if(2&e){const n=t.MAs(46),s=t.MAs(60);t.xp6(4),t.hij(" ",t.lcZ(5,27,"Project_Sites_Reports")," "),t.xp6(8),t.Oqu(t.lcZ(13,29,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,31,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,33,"Service_Code")),t.xp6(2),t.Q6J("items",o.serviceSelectionList)("ngModel",o.serviceCode),t.xp6(4),t.Oqu(t.lcZ(31,35,"Status_Code")),t.xp6(2),t.Q6J("items",o.statusSelectionList)("ngModel",o.statusCode),t.xp6(4),t.Oqu(t.lcZ(37,37,"From_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(41,39,"Please_Enter")," ",t.lcZ(42,41,"From_Date"),""),t.Q6J("ngModel",o.fromDate)("matDatepicker",n),t.xp6(4),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(51,43,"To_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(55,45,"Please_Enter")," ",t.lcZ(56,47,"To_Date"),""),t.Q6J("ngModel",o.toDate)("matDatepicker",s),t.xp6(4),t.Q6J("for",s),t.xp6(11),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.company)}},directives:[Dt.w9,l.JJ,l.On,l.Fj,M.hl,M.nW,gt.R9,M.Mq,_t.r,f.O5,f.sg],pipes:[Z.X$,f.uU],encapsulation:2}),i})();function jU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Print")," "))}function kU(i,a){if(1&i&&(t.TgZ(0,"tr",43),t.TgZ(1,"td",44),t._uU(2),t.qZA(),t.TgZ(3,"td",45),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.TgZ(7,"td",45),t._uU(8),t.qZA(),t.TgZ(9,"td",45),t._uU(10),t._UZ(11,"br"),t._uU(12),t.qZA(),t.TgZ(13,"td",45),t._uU(14),t.qZA(),t.TgZ(15,"td",45),t._uU(16),t.qZA(),t.TgZ(17,"td",45),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td",45),t._uU(21),t.qZA(),t.TgZ(22,"td",45),t._uU(23),t.qZA(),t.TgZ(24,"td",45),t._uU(25),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",e.customerCode,""),t.xp6(2),t.hij(" ",n.isArabic?e.customerNameArb:e.customerNameEng," "),t.xp6(2),t.hij(" ",e.customerAddress," "),t.xp6(2),t.hij(" ",e.siteCode,""),t.xp6(2),t.hij(" ",n.isArabic?e.siteNameArb:e.siteNameEng," "),t.xp6(2),t.hij(" ",e.siteAddress," "),t.xp6(2),t.hij(" ",n.isArabic?e.easonCodeNameArb:e.reasonCodeNameEng," "),t.xp6(2),t.hij(" ",t.xi3(19,12,e.complaintDate,"dd/MM/YYY")," "),t.xp6(3),t.hij(" ",e.complaintBy," "),t.xp6(2),t.hij(" ",e.nameBookedBy," "),t.xp6(2),t.hij(" ",e.status," ")}}function MU(i,a){if(1&i&&(t.TgZ(0,"div",24),t._UZ(1,"br"),t._UZ(2,"br"),t.TgZ(3,"div",25),t.TgZ(4,"div",26),t.ynx(5,27),t.TgZ(6,"table",28),t.TgZ(7,"tr"),t.TgZ(8,"td",29),t._uU(9),t.qZA(),t.TgZ(10,"td",30),t._UZ(11,"img",31),t.qZA(),t.TgZ(12,"td",32),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td",33),t.TgZ(16,"div",34),t._UZ(17,"br"),t._uU(18),t._UZ(19,"br"),t._uU(20),t._UZ(21,"br"),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk(),t.TgZ(25,"table",35),t.TgZ(26,"tr"),t.TgZ(27,"th",36),t._uU(28),t.ALo(29,"date"),t.ALo(30,"date"),t.qZA(),t.qZA(),t.TgZ(31,"tr"),t.TgZ(32,"td",37),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"td",37),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"td",37),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"td",37),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"td",37),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",26),t.ynx(48,27),t.TgZ(49,"table",38),t.TgZ(50,"tr",39),t.TgZ(51,"th",40),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"th",41),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"th",41),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"th",40),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"th",40),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"th",40),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"th",40),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"th",40),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.qZA(),t.YNc(75,kU,26,15,"tr",42),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(9),t.hij(" ",e.company.companyName,""),t.xp6(2),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(2),t.hij(" ",e.company.companyNameAr,""),t.xp6(5),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(23,28,"Tel_Phone")," : ",e.company.phone," "),t.xp6(6),t.AsE(" The Statement of Customer Complaints for Date Range: ",t.xi3(29,30,e.fromDate,"dd/MM/yyyy")," to ",t.xi3(30,33,e.toDate,"dd/MM/yyyy")," "),t.xp6(5),t.AsE(" ",t.lcZ(34,36,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(37,38,"Branch_Code"),": ",null!=e.cityCode&&""!=e.cityCode?e.cityCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(40,40,"Reason_Code"),": ",null!=e.reasonCode&&""!=e.reasonCode?e.isArabic?e.result.nameArbReasonCode:e.result.nameEngReasonCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(43,42,"Status_Code"),": ",null!=e.statusCode&&""!=e.statusCode?e.statusCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(46,44,"Booked_By"),": ",null!=e.bookedBy&&""!=e.bookedBy?null==e.result?null:e.result.nameBookedBy:"all"," "),t.xp6(7),t.hij(" ",t.lcZ(53,46,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(56,48,"Customer")," "),t.xp6(3),t.hij(" ",t.lcZ(59,50,"Site")," "),t.xp6(3),t.hij(" ",t.lcZ(62,52,"Reason_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(65,54,"Complaint_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(68,56,"Complaint_By")," "),t.xp6(3),t.hij(" ",t.lcZ(71,58,"Booked_By")," "),t.xp6(3),t.hij(" ",t.lcZ(74,60,"Status")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.complaints)}}let RU=(()=>{class i extends q{constructor(e,o,n,s,r){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.List=[],this.isLoading=!1,this.dateFrom="",this.dateTo="",this.options=[],this.customerSelectionList=[],this.customerCode="",this.statusSelectionList=[{text:"Inprogress",value:"Inprogress"},{text:"Closed",value:"Closed"},{text:"Open",value:"Open"}],this.statusCode="",this.reasonCode="",this.projectCode="",this.reasonCodesSelectionList=[],this.usersSelectionList=[],this.citySelectionList=[],this.cityCode="",this.curDate=new Date,this.isArabic=!1,this.bookedBy=""}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList(),this.loadReasonCodesList(),this.loadUsersList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadReasonCodesList(){this.apiService.getall("ReasonCode/getSelectReasonCodeListForCustomerComplaint").subscribe(e=>{this.reasonCodesSelectionList=e,this.reasonCodesSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadUsersList(){this.apiService.getall("Users/GetUserSelectionList").subscribe(e=>{this.usersSelectionList=e,this.usersSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}setForm(){this.InputQuery={fromDate:this.fromDate,todate:this.toDate,customerCode:"",reasonCode:"",branchCode:"",projectCode:"",bookedBy:""}}search(){let e=new Date(this.fromDate);e.setMinutes(e.getMinutes()-e.getTimezoneOffset());let o=new Date(this.toDate);o.setMinutes(e.getMinutes()-o.getTimezoneOffset()),this.InputQuery={fromDate:e,todate:o,customerCode:null==this.customerCode?"":this.customerCode,statusCode:null==this.statusCode?"":this.statusCode,reasonCode:null==this.reasonCode?"":this.reasonCode,projectCode:null==this.projectCode?"":this.projectCode,branchCode:null==this.cityCode?"":this.cityCode,bookedBy:null==this.bookedBy?"":this.bookedBy},this.fromDate&&this.toDate?(this.isLoading=!0,this.apiService.post("Reports/getCustomerComplaintsReport",this.InputQuery).subscribe(n=>{this.result=n,this.company=n.company,this.isLoading=!1})):this.notifyService.showError("Select Dates")}openPrint(){if(this.result.complaints.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}clearResultData(){this.company=null}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(l.qu),t.Y36(w.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-report-customercomplaints"]],features:[t.qOj],decls:79,vars:55,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["data-date-format","YYYY-MM-DD",1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],["picker2",""],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","data-toggle","modal",3,"click",4,"ngIf"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],[1,"table-responsive"],["id","printcontainer",1,"outer"],[1,"container-fluid","invoice-container","print-container",2,"width","100%","padding-top","5px"],[2,"padding-bottom","5px","padding-top","5px"],["cellpadding","0","cellspacing","0","width","100%",2,"background-color","#ffffff","padding-bottom","5px"],["width","25%",2,"text-align","left","border","0 solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","50%",2,"border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","center"],[2,"width","200px","height","150px",3,"src"],["width","25%",2,"text-align","right","border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","left"],[1,"font-weight-medium"],[2,"background","#ffffff","border","0 solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400","width","100%"],["colspan","5",2,"border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","center"],[2,"border","0 solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"background","#ffffff"],[2,"text-align","center"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","2",2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["style","text-align: center; padding-bottom: 5px; padding-top: 5px",4,"ngFor","ngForOf"],[2,"text-align","center","padding-bottom","5px","padding-top","5px"],[2,"text-align","center","border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.cityCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.customerCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.reasonCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",6),t.TgZ(28,"div",7),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.bookedBy=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",6),t.TgZ(34,"div",7),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"ng-select",10),t.NdJ("ngModelChange",function(r){return o.statusCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"div",6),t.TgZ(40,"div",7),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"div",7),t.TgZ(45,"div",11),t.TgZ(46,"input",12),t.NdJ("ngModelChange",function(r){return o.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(52);return o.openDatePicker(r)}),t.ALo(47,"translate"),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div",13),t._UZ(50,"mat-datepicker-toggle",14),t._UZ(51,"mat-datepicker",null,15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(53,"div",6),t.TgZ(54,"div",7),t.TgZ(55,"label"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"div",7),t.TgZ(59,"div",11),t.TgZ(60,"input",16),t.NdJ("ngModelChange",function(r){return o.toDate=r})("click",function(){t.CHM(n);const r=t.MAs(66);return o.openDatePicker(r)}),t.ALo(61,"translate"),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"div",13),t._UZ(64,"mat-datepicker-toggle",14),t._UZ(65,"mat-datepicker",null,17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(67,"div",9),t.TgZ(68,"div",7),t._UZ(69,"br"),t.TgZ(70,"button",18),t.NdJ("click",function(){return o.search()}),t._uU(71,"Search"),t.qZA(),t._uU(72," \xa0 "),t.TgZ(73,"button",18),t.NdJ("click",function(){return o.setForm()}),t._UZ(74,"i",19),t.qZA(),t._uU(75," \xa0 "),t.YNc(76,jU,3,3,"button",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(77,"spinner-loader",21),t.YNc(78,MU,76,62,"div",22),t.qZA()}if(2&e){const n=t.MAs(52),s=t.MAs(66);t.xp6(4),t.hij(" ",t.lcZ(5,31,"Customer_Complaints")," "),t.xp6(8),t.Oqu(t.lcZ(13,33,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,35,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,37,"Reason_Code")),t.xp6(2),t.Q6J("items",o.reasonCodesSelectionList)("ngModel",o.reasonCode),t.xp6(4),t.Oqu(t.lcZ(31,39,"Booked_By")),t.xp6(2),t.Q6J("items",o.usersSelectionList)("ngModel",o.bookedBy),t.xp6(4),t.Oqu(t.lcZ(37,41,"Status_Code")),t.xp6(2),t.Q6J("items",o.statusSelectionList)("ngModel",o.statusCode),t.xp6(4),t.Oqu(t.lcZ(43,43,"From_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(47,45,"Please_Enter")," ",t.lcZ(48,47,"From_Date"),""),t.Q6J("ngModel",o.fromDate)("matDatepicker",n),t.xp6(4),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(57,49,"To_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(61,51,"Please_Enter")," ",t.lcZ(62,53,"To_Date"),""),t.Q6J("ngModel",o.toDate)("matDatepicker",s),t.xp6(4),t.Q6J("for",s),t.xp6(12),t.Q6J("ngIf",o.company),t.xp6(1),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.company)}},directives:[Dt.w9,l.JJ,l.On,l.Fj,M.hl,M.nW,gt.R9,M.Mq,f.O5,_t.r,f.sg],pipes:[Z.X$,f.uU],encapsulation:2}),i})();function PU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Print")," "))}function FU(i,a){if(1&i&&(t.TgZ(0,"tr",44),t.TgZ(1,"td",45),t._uU(2),t.qZA(),t.TgZ(3,"td",46),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.TgZ(7,"td",46),t._uU(8),t.qZA(),t.TgZ(9,"td",46),t._uU(10),t._UZ(11,"br"),t._uU(12),t.qZA(),t.TgZ(13,"td",46),t._uU(14),t.qZA(),t.TgZ(15,"td",46),t._uU(16),t.qZA(),t.TgZ(17,"td",46),t._uU(18),t.ALo(19,"date"),t.qZA(),t.TgZ(20,"td",46),t._uU(21),t.qZA(),t.TgZ(22,"td",46),t._uU(23),t.qZA(),t.TgZ(24,"td",46),t._uU(25),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index,n=t.oxw(2);t.xp6(2),t.hij(" ",o+1," "),t.xp6(2),t.hij(" ",e.customerCode,""),t.xp6(2),t.hij(" ",n.isArabic?e.customerNameArb:e.customerNameEng," "),t.xp6(2),t.hij(" ",e.customerAddress," "),t.xp6(2),t.hij(" ",e.siteCode,""),t.xp6(2),t.hij(" ",n.isArabic?e.siteNameArb:e.siteNameEng," "),t.xp6(2),t.hij(" ",e.siteAddress," "),t.xp6(2),t.hij(" ",n.isArabic?e.easonCodeNameArb:e.reasonCodeNameEng," "),t.xp6(2),t.hij(" ",t.xi3(19,12,e.scheduleDateTime,"dd/MM/YYY HH:mm")," "),t.xp6(3),t.hij(" ",e.nameSupervisorId," "),t.xp6(2),t.hij(" ",e.isClosed?e.nameVisitedBy:""," "),t.xp6(2),t.hij(" ",e.status," ")}}function IU(i,a){if(1&i&&(t.TgZ(0,"div",25),t._UZ(1,"br"),t._UZ(2,"br"),t.TgZ(3,"div",26),t.TgZ(4,"div",27),t.ynx(5,28),t.TgZ(6,"table",29),t.TgZ(7,"tr"),t.TgZ(8,"td",30),t._uU(9),t.qZA(),t.TgZ(10,"td",31),t._UZ(11,"img",32),t.qZA(),t.TgZ(12,"td",33),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td",34),t.TgZ(16,"div",35),t._UZ(17,"br"),t._uU(18),t._UZ(19,"br"),t._uU(20),t._UZ(21,"br"),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk(),t.TgZ(25,"table",36),t.TgZ(26,"tr"),t.TgZ(27,"th",37),t._uU(28),t.ALo(29,"date"),t.ALo(30,"date"),t.qZA(),t.qZA(),t.TgZ(31,"tr"),t.TgZ(32,"td",38),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"td",38),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"td",38),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"td",38),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"td",38),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"td",38),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",27),t.ynx(51,28),t.TgZ(52,"table",39),t.TgZ(53,"tr",40),t.TgZ(54,"th",41),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"th",42),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"th",42),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"th",41),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"th",41),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"th",41),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"th",41),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"th",41),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.qZA(),t.YNc(78,FU,26,15,"tr",43),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(9),t.hij(" ",e.company.companyName,""),t.xp6(2),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(2),t.hij(" ",e.company.companyNameAr,""),t.xp6(5),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(23,30,"Tel_Phone")," : ",e.company.phone," "),t.xp6(6),t.AsE(" The Statement of Customer Visits for Date Range: ",t.xi3(29,32,e.fromDate,"dd/MM/yyyy")," to ",t.xi3(30,35,e.toDate,"dd/MM/yyyy")," "),t.xp6(5),t.AsE(" ",t.lcZ(34,38,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(37,40,"Branch_Code"),": ",null!=e.cityCode&&""!=e.cityCode?e.cityCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(40,42,"Reason_Code"),": ",null!=e.reasonCode&&""!=e.reasonCode?e.isArabic?e.result.nameArbReasonCode:e.result.nameEngReasonCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(43,44,"Status_Code"),": ",null!=e.statusCode&&""!=e.statusCode?e.statusCode:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(46,46,"Supervisor"),": ",null!=e.supervisorId&&""!=e.supervisorId?null==e.result?null:e.result.nameSupervisor:"all"," "),t.xp6(3),t.AsE(" ",t.lcZ(49,48,"Visited_By"),": ",null!=e.visitedBy&&""!=e.visitedBy?null==e.result?null:e.result.nameVisitedBy:"all"," "),t.xp6(7),t.hij(" ",t.lcZ(56,50,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(59,52,"Customer")," "),t.xp6(3),t.hij(" ",t.lcZ(62,54,"Site")," "),t.xp6(3),t.hij(" ",t.lcZ(65,56,"Reason_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(68,58,"Schedule_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(71,60,"Supervisor")," "),t.xp6(3),t.hij(" ",t.lcZ(74,62,"Visited_By")," "),t.xp6(3),t.hij(" ",t.lcZ(77,64,"Status")," "),t.xp6(2),t.Q6J("ngForOf",null==e.result?null:e.result.visits)}}let YU=(()=>{class i extends q{constructor(e,o,n,s,r){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.List=[],this.isLoading=!1,this.dateFrom="",this.dateTo="",this.options=[],this.customerSelectionList=[],this.customerCode="",this.statusSelectionList=[{text:"Inprogress",value:"Inprogress"},{text:"Closed",value:"Closed"},{text:"Open",value:"Open"}],this.statusCode="",this.reasonCode="",this.projectCode="",this.reasonCodesSelectionList=[],this.usersSelectionList=[],this.citySelectionList=[],this.cityCode="",this.curDate=new Date,this.isArabic=!1,this.supervisorId="",this.visitedBy=""}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList(),this.loadReasonCodesList(),this.loadUsersList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadReasonCodesList(){this.apiService.getall("ReasonCode/getSelectReasonCodeListForCustomerComplaint").subscribe(e=>{this.reasonCodesSelectionList=e,this.reasonCodesSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadUsersList(){this.apiService.getall("Users/GetUserSelectionList").subscribe(e=>{this.usersSelectionList=e,this.usersSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}setForm(){this.InputQuery={fromDate:this.fromDate,todate:this.toDate,customerCode:"",reasonCode:"",branchCode:"",projectCode:"",supervisorId:"",visitedBy:""}}search(){let e=new Date(this.fromDate);e.setMinutes(e.getMinutes()-e.getTimezoneOffset());let o=new Date(this.toDate);o.setMinutes(e.getMinutes()-o.getTimezoneOffset()),this.InputQuery={fromDate:e,todate:o,customerCode:null==this.customerCode?"":this.customerCode,statusCode:null==this.statusCode?"":this.statusCode,reasonCode:null==this.reasonCode?"":this.reasonCode,projectCode:null==this.projectCode?"":this.projectCode,branchCode:null==this.cityCode?"":this.cityCode,visitedBy:null==this.visitedBy?"":this.visitedBy,supervisorId:null==this.supervisorId?"":this.supervisorId},this.fromDate&&this.toDate?(this.isLoading=!0,this.apiService.post("Reports/getCustomerVisitsReport",this.InputQuery).subscribe(n=>{this.result=n,this.company=n.company,this.isLoading=!1})):this.notifyService.showError("Select Dates")}openPrint(){if(this.result.visits.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}clearResultData(){this.company=null}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(l.qu),t.Y36(w.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-report-customervisits"]],features:[t.qOj],decls:85,vars:60,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-3","col-lg-3"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],[1,"col-md-4","col-lg-4"],["bindLabel","text","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["data-date-format","YYYY-MM-DD",1,"form-control","datapickerinput",3,"placeholder","ngModel","matDatepicker","ngModelChange","click"],["picker2",""],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],["type","button","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock","data-toggle","modal",3,"click",4,"ngIf"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],[1,"table-responsive"],["id","printcontainer",1,"outer"],[1,"container-fluid","invoice-container","print-container",2,"width","100%","padding-top","5px"],[2,"padding-bottom","5px","padding-top","5px"],["cellpadding","0","cellspacing","0","width","100%",2,"background-color","#ffffff","padding-bottom","5px"],["width","25%",2,"text-align","left","border","0 solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["width","50%",2,"border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","center"],[2,"width","200px","height","150px",3,"src"],["width","25%",2,"text-align","right","border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","left"],[1,"font-weight-medium"],[2,"background","#ffffff","border","0 solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400","width","100%"],["colspan","6",2,"border","0 solid #878787","padding","5px","font-size","0.975rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600","text-align","center"],[2,"border","0 solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"background","#ffffff"],[2,"text-align","center"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","2",2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["style","text-align: center; padding-bottom: 5px; padding-top: 5px",4,"ngFor","ngForOf"],[2,"text-align","center","padding-bottom","5px","padding-top","5px"],[2,"text-align","center","border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.cityCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.customerCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.reasonCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",10),t.TgZ(28,"div",7),t.TgZ(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.visitedBy=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",10),t.TgZ(34,"div",7),t.TgZ(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"ng-select",8),t.NdJ("ngModelChange",function(r){return o.supervisorId=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"div",10),t.TgZ(40,"div",7),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"ng-select",11),t.NdJ("ngModelChange",function(r){return o.statusCode=r})("change",function(){return o.clearResultData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",6),t.TgZ(46,"div",7),t.TgZ(47,"label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"div",7),t.TgZ(51,"div",12),t.TgZ(52,"input",13),t.NdJ("ngModelChange",function(r){return o.fromDate=r})("click",function(){t.CHM(n);const r=t.MAs(58);return o.openDatePicker(r)}),t.ALo(53,"translate"),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"div",14),t._UZ(56,"mat-datepicker-toggle",15),t._UZ(57,"mat-datepicker",null,16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",6),t.TgZ(60,"div",7),t.TgZ(61,"label"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"div",7),t.TgZ(65,"div",12),t.TgZ(66,"input",17),t.NdJ("ngModelChange",function(r){return o.toDate=r})("click",function(){t.CHM(n);const r=t.MAs(72);return o.openDatePicker(r)}),t.ALo(67,"translate"),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"div",14),t._UZ(70,"mat-datepicker-toggle",15),t._UZ(71,"mat-datepicker",null,18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",9),t.TgZ(74,"div",7),t._UZ(75,"br"),t.TgZ(76,"button",19),t.NdJ("click",function(){return o.search()}),t._uU(77,"Search"),t.qZA(),t._uU(78," \xa0 "),t.TgZ(79,"button",19),t.NdJ("click",function(){return o.setForm()}),t._UZ(80,"i",20),t.qZA(),t._uU(81," \xa0 "),t.YNc(82,PU,3,3,"button",21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(83,"spinner-loader",22),t.YNc(84,IU,79,66,"div",23),t.qZA()}if(2&e){const n=t.MAs(58),s=t.MAs(72);t.xp6(4),t.hij(" ",t.lcZ(5,34,"Customer_Complaints")," "),t.xp6(8),t.Oqu(t.lcZ(13,36,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,38,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,40,"Reason_Code")),t.xp6(2),t.Q6J("items",o.reasonCodesSelectionList)("ngModel",o.reasonCode),t.xp6(4),t.Oqu(t.lcZ(31,42,"Visited_By")),t.xp6(2),t.Q6J("items",o.usersSelectionList)("ngModel",o.visitedBy),t.xp6(4),t.Oqu(t.lcZ(37,44,"Supervisor")),t.xp6(2),t.Q6J("items",o.usersSelectionList)("ngModel",o.supervisorId),t.xp6(4),t.Oqu(t.lcZ(43,46,"Status_Code")),t.xp6(2),t.Q6J("items",o.statusSelectionList)("ngModel",o.statusCode),t.xp6(4),t.Oqu(t.lcZ(49,48,"From_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(53,50,"Please_Enter")," ",t.lcZ(54,52,"From_Date"),""),t.Q6J("ngModel",o.fromDate)("matDatepicker",n),t.xp6(4),t.Q6J("for",n),t.xp6(6),t.Oqu(t.lcZ(63,54,"To_Date")),t.xp6(4),t.hYB("placeholder"," ",t.lcZ(67,56,"Please_Enter")," ",t.lcZ(68,58,"To_Date"),""),t.Q6J("ngModel",o.toDate)("matDatepicker",s),t.xp6(4),t.Q6J("for",s),t.xp6(12),t.Q6J("ngIf",o.company),t.xp6(1),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.company)}},directives:[Dt.w9,l.JJ,l.On,l.Fj,M.hl,M.nW,gt.R9,M.Mq,f.O5,_t.r,f.sg],pipes:[Z.X$,f.uU],encapsulation:2}),i})();function JU(i,a){1&i&&(t.TgZ(0,"span"),t._uU(1," Loading Data "),t.qZA())}function QU(i,a){1&i&&(t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"td",34),t._uU(3," No Attendance Found "),t.qZA(),t.qZA(),t.BQk())}function BU(i,a){1&i&&(t.TgZ(0,"tr",26),t.TgZ(1,"th",27),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"th",27),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",27),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,3,"Employee_Number")," "),t.xp6(3),t.hij(" ",t.lcZ(6,5,"Employee_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(9,7,"Last_Attended_Date")," "))}function HU(i,a){if(1&i&&(t.TgZ(0,"tr",26),t.TgZ(1,"td",28),t._uU(2),t.qZA(),t.TgZ(3,"td",28),t._uU(4),t.qZA(),t.TgZ(5,"td",28),t._uU(6),t.ALo(7,"date"),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",null==e?null:e.employeeNumber," "),t.xp6(2),t.hij(" ",null==e?null:e.employeeName," "),t.xp6(2),t.hij(" ",t.xi3(7,3,null==e?null:e.lastAttendedDay,"dd/MM/YYYY")," ")}}function VU(i,a){if(1&i&&(t.TgZ(0,"table",25),t.YNc(1,QU,4,0,"ng-container",30),t.YNc(2,BU,10,9,"tr",32),t.YNc(3,HU,8,6,"tr",33),t._UZ(4,"tbody"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.resourcesList.length)),t.xp6(1),t.Q6J("ngIf",0!=(null==e?null:e.resourcesList.length)),t.xp6(1),t.Q6J("ngForOf",null==e?null:e.resourcesList)}}function $U(i,a){if(1&i&&(t.ynx(0,24),t.TgZ(1,"table",25),t.TgZ(2,"tr",26),t.TgZ(3,"th",27),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th",27),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th",27),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th",27),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th",27),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th",27),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th",27),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.qZA(),t.TgZ(24,"tr",26),t.TgZ(25,"td",28),t._uU(26),t.qZA(),t.TgZ(27,"td",28),t._uU(28),t.qZA(),t.TgZ(29,"td",28),t._uU(30),t.qZA(),t.TgZ(31,"td",28),t._uU(32),t.qZA(),t.TgZ(33,"td",28),t._uU(34),t.ALo(35,"date"),t.qZA(),t.TgZ(36,"td",28),t._uU(37),t.ALo(38,"date"),t.qZA(),t.TgZ(39,"td",28),t._uU(40),t.qZA(),t.qZA(),t.qZA(),t.ynx(41,24),t.YNc(42,JU,2,0,"span",30),t.YNc(43,VU,5,3,"table",31),t.BQk(),t.BQk()),2&i){const e=a.$implicit,o=t.oxw(3);t.xp6(4),t.hij(" ",t.lcZ(5,16,"Project_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(8,18,"Project_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(11,20,"Site_Code")," "),t.xp6(3),t.hij(" ",t.lcZ(14,22,"Site_Name")," "),t.xp6(3),t.hij(" ",t.lcZ(17,24,"Start_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(20,26,"End_Date")," "),t.xp6(3),t.hij(" ",t.lcZ(23,28,"Status")," "),t.xp6(4),t.hij(" ",null==e?null:e.projectCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.projectNameArb:null==e?null:e.projectNameEng," "),t.xp6(2),t.hij(" ",null==e?null:e.siteCode," "),t.xp6(2),t.hij(" ",o.isArabic?null==e?null:e.siteNameArb:null==e?null:e.siteNameEng," "),t.xp6(2),t.hij(" ",t.xi3(35,30,null==e?null:e.startDate,"dd/MM/YYYY")," "),t.xp6(3),t.hij(" ",t.xi3(38,33,null==e?null:e.endDate,"dd/MM/YYYY")," "),t.xp6(3),t.hij(" ",null==e?null:e.status," "),t.xp6(2),t.Q6J("ngIf",null==(null==e?null:e.resourcesList)),t.xp6(1),t.Q6J("ngIf",null!=(null==e?null:e.resourcesList))}}function GU(i,a){if(1&i&&(t.TgZ(0,"div",24),t.ynx(1,24),t.TgZ(2,"table",25),t.TgZ(3,"tr",26),t.TgZ(4,"th",27),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"td",28),t._uU(8),t.qZA(),t.TgZ(9,"th",27),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"td",28),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"th",27),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"td",29),t._uU(19),t.qZA(),t.qZA(),t._UZ(20,"tbody"),t.qZA(),t.BQk(),t.YNc(21,$U,44,36,"ng-container",23),t.qZA()),2&i){const e=a.$implicit,o=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,7,"Customer_Code")," "),t.xp6(3),t.hij(" ",e.custCode," "),t.xp6(2),t.hij(" ",t.lcZ(11,9,"Customer_Name")," "),t.xp6(3),t.hij(" ",o.isArabic?e.custArbName:e.custName," "),t.xp6(3),t.hij(" ",t.lcZ(17,11,"Customer_Address")," "),t.xp6(3),t.hij(" ",e.custAddress1," "),t.xp6(2),t.Q6J("ngForOf",o.getProjectsOfCustomer(e.custCode))}}function WU(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",15),t.TgZ(1,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPrint()}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"br"),t._UZ(5,"br"),t.TgZ(6,"div",17),t.TgZ(7,"table",18),t.TgZ(8,"tr"),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"tr"),t.TgZ(12,"td",19),t._UZ(13,"img",20),t.qZA(),t.qZA(),t.TgZ(14,"tr"),t.TgZ(15,"td"),t.TgZ(16,"div",21),t._UZ(17,"br"),t._uU(18),t._UZ(19,"br"),t._uU(20),t._UZ(21,"br"),t._uU(22),t.ALo(23,"translate"),t._UZ(24,"br"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"td",19),t._uU(27),t.ALo(28,"translate"),t.ALo(29,"translate"),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",22),t.YNc(32,GU,22,13,"div",23),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,14,"Print")," "),t.xp6(8),t.hij(" ",e.company.companyName,""),t.xp6(3),t.s9C("src",e.company.logoURL,t.LSH),t.xp6(5),t.hij(" ",e.company.branchName," "),t.xp6(2),t.hij(" ",e.company.companyAddress," "),t.xp6(2),t.AsE(" ",t.lcZ(23,16,"Tel_Phone")," : ",e.company.phone," "),t.xp6(5),t.gL8(" The Statement of Projects Sites for ",t.lcZ(28,18,"Customer_Code"),": ",null!=e.customerCode&&""!=e.customerCode?e.customerCode:"all"," \xa0",t.lcZ(29,20,"Branch_Code"),": ",null!=e.cityCode&&""!=e.cityCode?e.cityCode:"all"," \xa0",t.lcZ(30,22,"Site_Code"),": ",null!=e.siteCode&&""!=e.siteCode?e.siteCode:"all"," "),t.xp6(5),t.Q6J("ngForOf",e.customersList)}}let zU=(()=>{class i extends q{constructor(e,o,n,s,r){super(o),this.apiService=e,this.authService=o,this.utilService=n,this.fb=s,this.notifyService=r,this.List=[],this.isLoading=!1,this.projectSitesList=[],this.customersList=[],this.dateFrom="",this.dateTo="",this.options=[],this.customerSelectionList=[],this.siteSelectionList=[],this.customerCode="",this.citySelectionList=[],this.cityCode="",this.siteCode="",this.curDate=new Date,this.isArabic=!1}ngOnInit(){this.isArabic=this.utilService.isArabic(),this.loadInitialData(),this.setForm()}loadInitialData(){this.loadCustomersList(),this.loadCitiesList()}loadCustomersList(){this.apiService.getall("CustomerMaster/getSelectCustomerList").subscribe(e=>{this.customerSelectionList=e,this.customerSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}loadCitiesList(){this.apiService.getall("City/getCitiesSelectList").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}loadProjectSites(){this.apiService.getall("ProjectSites/getSelectProjectSitesList").subscribe(e=>{this.projectSitesList=e,this.projectSitesList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}onSelectCustomer(){this.clearProjectsData(),this.siteCode="",""!=this.customerCode&&this.apiService.getall("ProjectSites/getSelectProjectSitesListByCustomerCode/"+this.customerCode).subscribe(e=>{this.siteSelectionList=e,this.siteSelectionList.forEach(o=>{o.lable=this.isArabic?o.value+"-"+o.textTwo:o.value+"-"+o.text})})}setForm(){this.customerCode=this.cityCode,this.projectSitesList=[],this.customersList=[],this.InputQuery={customerCode:"",siteCode:"",cityCode:""}}search(){this.projectSitesList=[],this.customersList=[],this.InputQuery={customerCode:null==this.customerCode?"":this.customerCode,cityCode:null==this.cityCode?"":this.cityCode,siteCode:null==this.siteCode?"":this.siteCode},this.isLoading=!0,this.apiService.post("Reports/getResourcesOnProjectsReports",this.InputQuery).subscribe(e=>{if(null!=e)if(this.projectSitesList=e.projectSites,this.customersList=e.customers,this.company=e.company,this.projectSitesList.length>0)for(let o=0;o<this.projectSitesList.length;o+=50){let n=[];for(let s=o;s<o+50&&s<this.projectSitesList.length;s++)n.push(this.projectSitesList[s]);this.apiService.post("Reports/getResourcesOnProjectsReportsByProjectSites",n).subscribe(s=>{let r=s;for(let c=0;c<r.length;c++)this.projectSitesList[o+c]=r[c],o+c==this.projectSitesList.length-1&&(this.isLoading=!1)})}else this.isLoading=!1;else this.isLoading=!1})}openPrint(){if(console.log(this.projectSitesList),this.projectSitesList.length>0)if(this.isLoading)this.notifyService.showError("Loading Data,Please Wait...");else{const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}else this.notifyService.showError("No_Data_Found")}openDatePicker(e){e.open()}getProjectsOfCustomer(e){return this.projectSitesList.filter(o=>o.customerCode==e)}clearProjectsData(){this.customersList=[],this.projectSitesList=[],this.customersList=[],this.company=null}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(l.qu),t.Y36(w.g))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-resources-on-project"]],features:[t.qOj],decls:37,vars:20,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"modal-body"],[1,"outer"],[1,"col-md-2","col-lg-2"],[1,"form-group"],["bindLabel","lable","bindValue","value",3,"items","ngModel","ngModelChange","change"],[1,"col-md-6","col-lg-6"],[1,"col-md-4","col-lg-4"],["type","button",1,"btn","btn-primary",3,"click"],[1,"icon-refresh"],[3,"isLoading"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["type","button","data-toggle","modal",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"click"],["id","printcontainer",1,"outer"],["cellpadding","0","cellspacing","0","width","100%",1,"ur_tablestyle",2,"width","100%","padding-bottom","5px"],[2,"text-align","center"],[2,"width","200px","height","150px",3,"src"],[1,"font-weight-medium"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","100%","padding-top","5px"],["style","padding-bottom: 5px; padding-top: 5px",4,"ngFor","ngForOf"],[2,"padding-bottom","5px","padding-top","5px"],["border","0","cellpadding","0","cellspacing","0","width","100%",2,"width","100%","background","#efefef"],[2,"text-align","left"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["colspan","3",2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],[4,"ngIf"],["style","width: 100%; background: #efefef","border","0","cellpadding","0","cellspacing","0","width","100%",4,"ngIf"],["style","text-align:left",4,"ngIf"],["style","text-align:left",4,"ngFor","ngForOf"],["colspan","3",2,"text-align","center","border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"div",5),t.TgZ(8,"div",1),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"ng-select",8),t.NdJ("ngModelChange",function(s){return o.cityCode=s})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",9),t.TgZ(16,"div",7),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"ng-select",8),t.NdJ("ngModelChange",function(s){return o.customerCode=s})("change",function(){return o.onSelectCustomer()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",10),t.TgZ(22,"div",7),t.TgZ(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"ng-select",8),t.NdJ("ngModelChange",function(s){return o.siteCode=s})("change",function(){return o.clearProjectsData()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",9),t.TgZ(28,"div",7),t._UZ(29,"br"),t.TgZ(30,"button",11),t.NdJ("click",function(){return o.search()}),t._uU(31,"Search"),t.qZA(),t._uU(32," \xa0 "),t.TgZ(33,"button",11),t.NdJ("click",function(){return o.setForm()}),t._UZ(34,"i",12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(35,"spinner-loader",13),t.YNc(36,WU,33,24,"div",14),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,12,"Resources_On_Project")," "),t.xp6(8),t.Oqu(t.lcZ(13,14,"Branch_Code")),t.xp6(2),t.Q6J("items",o.citySelectionList)("ngModel",o.cityCode),t.xp6(4),t.Oqu(t.lcZ(19,16,"Customer_Code")),t.xp6(2),t.Q6J("items",o.customerSelectionList)("ngModel",o.customerCode),t.xp6(4),t.Oqu(t.lcZ(25,18,"Site_Code")),t.xp6(2),t.Q6J("items",o.siteSelectionList)("ngModel",o.siteCode),t.xp6(9),t.Q6J("isLoading",o.isLoading),t.xp6(1),t.Q6J("ngIf",o.company))},directives:[Dt.w9,l.JJ,l.On,_t.r,f.O5,f.sg],pipes:[Z.X$,f.uU],encapsulation:2}),i})();function XU(i,a){if(1&i&&(t.TgZ(0,"option",18),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.text,"-",e.textTwo,"")}}let mo=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.readonly="",this.id=0,this.surveyFormCode="",this.surveyFormCodeList=[],this.isDataLoading=!1}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.loadSurveyFormCodes(),this.form=this.fb.group({surveyFormCode:["",l.kI.required],serviceCode:["",l.kI.required],serviceNameEng:["",l.kI.required],serviceNameArb:["",l.kI.required],isActive:[!0]})}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("Services",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Services/getServiceById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}loadSurveyFormCodes(){this.apiService.getall("SurveyFormHeader/getSelectSurveyFormList").subscribe(e=>{this.surveyFormCodeList=e})}reset(){this.form.controls.serviceCode.setValue(""),this.form.controls.serviceNameEng.setValue(""),this.form.controls.serviceNameArb.setValue(""),this.form.controls.surveyFormCode.setValue(""),this.form.controls.isActive.setValue(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-service-code"]],features:[t.qOj],decls:60,vars:55,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","serviceCode",1,"form-control",3,"placeholder","readonly"],[3,"control"],["type","text","formControlName","serviceNameEng",1,"form-control",3,"placeholder"],["type","text","formControlName","serviceNameArb",1,"form-control",3,"placeholder"],["formControlName","surveyFormCode",1,"custom-select","mr-sm-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],["color","primary","formControlName","isActive"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"select",10),t.TgZ(40,"option",11),t._uU(41),t.ALo(42,"translate"),t.ALo(43,"translate"),t.qZA(),t.YNc(44,XU,2,3,"option",12),t.qZA(),t._UZ(45,"validation-message",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"div",4),t.TgZ(47,"div",5),t.TgZ(48,"label"),t._uU(49),t.ALo(50,"translate"),t.qZA(),t._UZ(51,"br"),t._UZ(52,"mat-slide-toggle",13),t.qZA(),t.qZA(),t.TgZ(53,"div",14),t.TgZ(54,"div",15),t.TgZ(55,"input",16),t.NdJ("click",function(){return o.closeModel()}),t.ALo(56,"translate"),t.qZA(),t._uU(57," \xa0 "),t._UZ(58,"input",17),t.ALo(59,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,23,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,25,"Service_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,27,"Please_Enter")," ",t.lcZ(14,29,"Service_Code"),""),t.s9C("readonly",o.readonly),t.xp6(3),t.Q6J("control",o.form.controls.serviceCode),t.xp6(4),t.Oqu(t.lcZ(20,31,"Service_Name_Eng")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,33,"Please_Enter")," ",t.lcZ(23,35,"Service_Name_Eng"),""),t.xp6(3),t.Q6J("control",o.form.controls.serviceNameEng),t.xp6(4),t.Oqu(t.lcZ(29,37,"Service_Name_Arb")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,39,"Please_Enter")," ",t.lcZ(32,41,"Service_Name_Arb"),""),t.xp6(3),t.Q6J("control",o.form.controls.serviceNameArb),t.xp6(4),t.Oqu(t.lcZ(38,43,"Form_Code")),t.xp6(4),t.AsE("",t.lcZ(42,45,"Select")," ",t.lcZ(43,47,"Form_Code"),""),t.xp6(3),t.Q6J("ngForOf",o.surveyFormCodeList),t.xp6(1),t.Q6J("control",o.form.controls.surveyFormCode),t.xp6(4),t.Oqu(t.lcZ(50,49,"Is_Active")),t.xp6(6),t.s9C("value",t.lcZ(56,51,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(59,53,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,l.EJ,l.YN,l.Kr,f.sg,Ot.Rr],pipes:[Z.X$],encapsulation:2}),i})();function KU(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Code")," "))}function t7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceCode)}}function e7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Name_Eng")," "))}function o7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceNameEng)}}function i7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Name_Arb")," "))}function n7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceNameArb)}}function a7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function s7(i,a){1&i&&(t.TgZ(0,"span",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function r7(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function l7(i,a){if(1&i&&(t.TgZ(0,"td",35),t.YNc(1,s7,3,3,"span",36),t.YNc(2,r7,3,3,"ng-template",null,37,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function c7(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function p7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",35),t.TgZ(1,"a",41),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",42),t.qZA(),t.qZA()}}function u7(i,a){1&i&&t._UZ(0,"tr",43)}function d7(i,a){1&i&&t._UZ(0,"tr",44)}const m7=function(){return{standalone:!0}};let _7=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.displayedColumns=["serviceCode","serviceNameEng","serviceNameArb","isActive","Actions"],this.sortingOrder="id desc",this.isLoading=!1,this.searchValue=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadServices(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadServices(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Services/getServicesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadServices(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,mo);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Service","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Service","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Services",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-service-code"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:60,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addServiceUnitMap","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","serviceCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","serviceNameEng"],["matColumnDef","serviceNameArb"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,KU,3,3,"th",24),t.YNc(43,t7,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,e7,3,3,"th",24),t.YNc(46,o7,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,i7,3,3,"th",24),t.YNc(49,n7,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,a7,3,3,"th",24),t.YNc(52,l7,4,2,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,c7,3,3,"th",30),t.YNc(55,p7,3,0,"td",25),t.BQk(),t.YNc(56,u7,1,0,"tr",31),t.YNc(57,d7,1,0,"tr",32),t.qZA(),t.ynx(58),t.TgZ(59,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Service_Code")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Service_Code")),t.xp6(10),t.hij("",t.lcZ(27,24,"Service_Code_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,m7)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Services")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();const Ie=function(){return{standalone:!0}};function g7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"div",5),t.TgZ(2,"div",22),t.TgZ(3,"input",23),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.startDate=n})("click",function(){t.CHM(e);const n=t.MAs(9);return t.oxw(3).openDatePicker(n)}),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",24),t._UZ(7,"mat-datepicker-toggle",25),t._UZ(8,"mat-datepicker",null,26),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(9),o=t.oxw().$implicit;t.xp6(3),t.hYB("placeholder","",t.lcZ(4,6,"Please_Enter")," ",t.lcZ(5,8,"Project_Start_Date"),""),t.Q6J("ngModel",o.startDate)("ngModelOptions",t.DdM(10,Ie))("matDatepicker",e),t.xp6(4),t.Q6J("for",e)}}function h7(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.startDate,"dd/MM/YYYY")," ")}}function f7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"div",5),t.TgZ(2,"div",22),t.TgZ(3,"input",23),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.endDate=n})("click",function(){t.CHM(e);const n=t.MAs(9);return t.oxw(3).openDatePicker(n)}),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",24),t._UZ(7,"mat-datepicker-toggle",25),t._UZ(8,"mat-datepicker",null,27),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.MAs(9),o=t.oxw().$implicit;t.xp6(3),t.hYB("placeholder","",t.lcZ(4,6,"Please_Enter")," ",t.lcZ(5,8,"Project_End_Date"),""),t.Q6J("ngModel",o.endDate)("ngModelOptions",t.DdM(10,Ie))("matDatepicker",e),t.xp6(4),t.Q6J("for",e)}}function Z7(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.endDate,"dd/MM/YYYY")," ")}}function C7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td"),t.TgZ(1,"div",5),t.TgZ(2,"div",22),t.TgZ(3,"input",28),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().$implicit.siteWorkingHours=n})("change",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).changeWorkingHours(n)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("ngModel",e.siteWorkingHours)("ngModelOptions",t.DdM(2,Ie))}}function A7(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.siteWorkingHours," ")}}function T7(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,g7,10,11,"td",21),t.YNc(4,h7,3,4,"td",21),t.YNc(5,f7,10,11,"td",21),t.YNc(6,Z7,3,4,"td",21),t.YNc(7,C7,4,3,"td",21),t.YNc(8,A7,2,1,"td",21),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.hij(" ",e.siteCode," "),t.xp6(1),t.Q6J("ngIf",0==e.id),t.xp6(1),t.Q6J("ngIf",0!=e.id),t.xp6(1),t.Q6J("ngIf",0==e.id),t.xp6(1),t.Q6J("ngIf",0!=e.id),t.xp6(1),t.Q6J("ngIf",0==e.id),t.xp6(1),t.Q6J("ngIf",0!=e.id)}}function v7(i,a){if(1&i&&(t.TgZ(0,"div",18),t.TgZ(1,"table",19),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(16,T7,9,7,"tr",20),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,5,"Site")),t.xp6(3),t.Oqu(t.lcZ(9,7,"Start_Date")),t.xp6(3),t.Oqu(t.lcZ(12,9,"End_Date")),t.xp6(3),t.Oqu(t.lcZ(15,11,"Working_Hours")),t.xp6(2),t.Q6J("ngForOf",e.projectSites)}}function x7(i,a){1&i&&(t._UZ(0,"input",29),t.ALo(1,"translate")),2&i&&t.s9C("value",t.lcZ(1,1,"Save"))}let _o=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.readonly="",this.enquiries=[],this.sitesForEnquiry=[],this.projectSites=[]}ngOnInit(){this.setForm()}closeModel(){this.dialogRef.close()}setForm(){console.log(this.enquiryHead),this.form=this.fb.group({projectCode:[this.enquiryHead.enquiryNumber],customerCode:[this.enquiryHead.customerCode],branchCode:[this.enquiryHead.branchCode],projectNameEng:[""],projectNameArb:[""],enquiryNumber:[this.enquiryHead.enquiryNumber],startDate:["",l.kI.required],endDate:["",l.kI.required]}),this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+this.enquiryHead.customerCode).subscribe(e=>{null!=e?(this.customerData=e,this.form.controls.projectNameEng.setValue(e.custName),this.form.controls.projectNameArb.setValue(e.custArbName)):console.log("Error in getCustomerByCustomerCode Method"),this.getEnquiriesForEnquiry(this.enquiryHead.enquiryNumber)})}submit(){this.projectSites.length>0?(this.projectSites.forEach(o=>{let n=new Date(o.startDate),s=new Date(o.endDate);n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),s.setMinutes(s.getMinutes()-s.getTimezoneOffset()),o.startDate=n,o.endDate=s,o.projectNameEng=this.form.controls.projectNameEng.value,o.projectNameArb=this.form.controls.projectNameArb.value}),this.apiService.post("ProjectSites/ConvertEnquiryToProjectSites",{projectSites:this.projectSites}).subscribe(o=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})):(this.notifyService.showError(this.translate.instant("no enquiries found")),this.dialogRef.close(!0))}openDatePicker(e){e.open()}getEnquiriesForEnquiry(e){this.projectSites=[],this.apiService.getall(`ServiceEnquiries/getSevriceEnquiriesByEnquiryNumber/${e}`).subscribe(o=>{this.enquiries=o;let n=[];for(let s=0;s<this.enquiries.length;s++)n.findIndex(r=>r.siteCode==this.enquiries[s].siteCode)<0&&this.apiService.getall(`ProjectSites/getProjectSiteByProjectAndSiteCode/${e}/${this.enquiries[s].siteCode}`).subscribe(r=>{this.projectSites.push(0==r.id?{id:0,projectCode:this.enquiryHead.enquiryNumber,customerCode:this.enquiryHead.customerCode,branchCode:this.enquiryHead.branchCode,projectNameEng:this.form.controls.projectNameEng.value,projectNameArb:this.form.controls.projectNameArb.value,enquiryNumber:[this.enquiryHead.enquiryNumber],startDate:"",endDate:"",siteCode:this.enquiries[s].siteCode}:r)},r=>{}),n.push(this.enquiries[s])})}canSave(){return!(this.projectSites.findIndex(e=>""==e.startDate||""==e.endDate||(null==e?void 0:e.siteWorkingHours)<=0||null==(null==e?void 0:e.siteWorkingHours))>=0)}changeWorkingHours(e){this.projectSites[e].siteWorkingHours<0?this.projectSites[e].siteWorkingHours=0:this.projectSites[e].siteWorkingHours>24&&(this.projectSites[e].siteWorkingHours=24)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-convert-to-project"]],features:[t.qOj],decls:56,vars:56,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-2","col-lg-2"],[1,"form-group"],["type","text","formControlName","customerCode","readonly","",1,"form-control",3,"placeholder"],["type","text","formControlName","branchCode","readonly","",1,"form-control",3,"placeholder"],["type","text","formControlName","projectCode","readonly","",1,"form-control",3,"placeholder"],[1,"col-md-4","col-lg-4"],["type","text","formControlName","projectNameEng",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","projectNameArb",1,"form-control",3,"placeholder"],["class","table-responsive",4,"ngIf"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit","class","btn waves-effect waves-light btn-rounded btn-primary btn-midblock",3,"value",4,"ngIf"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"input-group","mb-2"],[1,"form-control","datapickerinput",3,"ngModel","ngModelOptions","matDatepicker","placeholder","ngModelChange","click"],[1,"input-group-prepend","datapickericon"],["matSuffix","",3,"for"],["picker1",""],["picker2",""],["type","number",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",4),t.TgZ(16,"div",5),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",7),t.ALo(21,"translate"),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.TgZ(23,"div",4),t.TgZ(24,"div",5),t.TgZ(25,"label"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",8),t.ALo(29,"translate"),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",9),t.TgZ(32,"div",5),t.TgZ(33,"label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",10),t.ALo(37,"translate"),t.ALo(38,"translate"),t._UZ(39,"validation-message",11),t.qZA(),t.qZA(),t.TgZ(40,"div",9),t.TgZ(41,"div",5),t.TgZ(42,"label"),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"input",12),t.ALo(46,"translate"),t.ALo(47,"translate"),t._UZ(48,"validation-message",11),t.qZA(),t.qZA(),t.qZA(),t.YNc(49,v7,17,13,"div",13),t.TgZ(50,"div",14),t.TgZ(51,"div",15),t.TgZ(52,"input",16),t.NdJ("click",function(){return o.closeModel()}),t.ALo(53,"translate"),t.qZA(),t._uU(54," \xa0 "),t.YNc(55,x7,2,3,"input",17),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,22,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,24,"Customer_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,26,"Please_Enter")," ",t.lcZ(14,28,"Customer_Code"),""),t.xp6(6),t.Oqu(t.lcZ(19,30,"Branch_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(21,32,"Please_Enter")," ",t.lcZ(22,34,"Branch_Code"),""),t.xp6(6),t.Oqu(t.lcZ(27,36,"Project_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(29,38,"Please_Enter")," ",t.lcZ(30,40,"Project_Code"),""),t.xp6(6),t.Oqu(t.lcZ(35,42,"Project_Name_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(37,44,"Please_Enter")," ",t.lcZ(38,46,"Project_Name_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectNameEng),t.xp6(4),t.Oqu(t.lcZ(44,48,"Project_Name_Arab")),t.xp6(2),t.hYB("placeholder","",t.lcZ(46,50,"Please_Enter")," ",t.lcZ(47,52,"Project_Name_Arab"),""),t.xp6(3),t.Q6J("control",o.form.controls.projectNameArb),t.xp6(1),t.Q6J("ngIf",o.projectSites.length>0),t.xp6(3),t.s9C("value",t.lcZ(53,54,"Cancel")),t.xp6(3),t.Q6J("ngIf",o.canSave()))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,f.O5,f.sg,M.hl,l.On,M.nW,gt.R9,M.Mq,l.wV],pipes:[Z.X$,f.uU],encapsulation:2}),i})(),q7=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m}ngOnInit(){this.setForm()}setForm(){this.form=this.fb.group({})}closeModel(){this.dialogRef.close()}submit(){this.form.value.statusEnquiry="Approved",this.form.value.enquiryID=this.enquiry.enquiryID,this.apiService.post("ServiceEnquiries/changeEnquiryStatus",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.ngOnInit()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}),this.closeModel()}rejectEnquiry(){this.form.value.statusEnquiry="Cancelled",this.form.value.enquiryID=this.enquiry.enquiryID,this.apiService.post("ServiceEnquiries/changeEnquiryStatus",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.ngOnInit()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}),this.closeModel()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-approval-service-enquiry"]],features:[t.qOj],decls:12,vars:10,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._UZ(3,"input",3),t.ALo(4,"translate"),t._uU(5," \xa0 "),t.TgZ(6,"input",4),t.NdJ("click",function(){return o.rejectEnquiry()}),t.ALo(7,"translate"),t.qZA(),t._uU(8," \xa0 "),t.TgZ(9,"input",4),t.NdJ("click",function(){return o.closeModel()}),t.ALo(10,"translate"),t.qZA(),t._uU(11," \xa0 "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(3),t.s9C("value",t.lcZ(4,4,"Approve")),t.xp6(3),t.s9C("value",t.lcZ(7,6,"Reject")),t.xp6(3),t.s9C("value",t.lcZ(10,8,"Cancel")))},directives:[l._Y,l.JL,l.sg],pipes:[Z.X$],encapsulation:2}),i})();function b7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site")," "))}function y7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.siteNameAr:e.siteNameEn)}}function S7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service")," "))}function w7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.serviceNameAr:e.serviceNameEn)}}function U7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Code")," "))}function L7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitCode)}}function D7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Price_Per_Unit")," "))}function N7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.pricePerUnit)}}function E7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Quantity")," "))}function O7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceQuantity)}}function j7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Quantity")," "))}function k7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitQuantity)}}function M7(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Estimated_Price")," "))}function R7(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.estimatedPrice)}}function P7(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function F7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().addSuveyorToEnquiry(n.enquiryID)}),t._UZ(1,"i",40),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Assign_Surveyor"))}}function I7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().printSurveyForm(n.enquiryID)}),t._UZ(1,"i",41),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Print_Survey_Form"))}}function Y7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().editableSurveyForm(n.enquiryID)}),t._UZ(1,"i",42),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Edit_Survey"))}}function J7(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveSurvey(n)}),t._UZ(1,"i",43),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Approve_Survey"))}}function Q7(i,a){if(1&i&&(t.TgZ(0,"td",37),t.YNc(1,F7,3,1,"span",38),t.YNc(2,I7,3,1,"span",38),t.YNc(3,Y7,3,1,"span",38),t.YNc(4,J7,3,1,"span",38),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isAssignedSurveyor&&(e.authorities.canAddSurveyorToEnquiry||e.isAdmin)&&e.isEnqApproved),t.xp6(1),t.Q6J("ngIf",e.isSurveyCompleted),t.xp6(1),t.Q6J("ngIf",e.isAssignedSurveyor&&!e.isSurveyCompleted&&(e.canEditSurveyForm||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.isSurveyCompleted&&!e.isSurveyApproved&&(!e.approvedUser&&e.authorities.canApproveSurvey||e.isAdmin))}}function B7(i,a){1&i&&t._UZ(0,"tr",44)}function H7(i,a){1&i&&t._UZ(0,"tr",45)}let go=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A,S){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.route=h,this.oprService=C,this.translate=A,this.dialogRef=S,this.displayedColumns=["site","service","unitCode","pricePerUnit","serviceQuantity","unitQuantity","estimatedPrice","Actions"],this.searchValue="",this.sortingOrder="enquiryID desc",this.isLoading=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.initialLoading()}refresh(){this.setForm(),this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder),this.getEnquiryHead()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ServiceEnquiries/getSevriceEnquiriesByEnquiryNumberPagedList",this.utilService.getQueryString(e,o,this.enquiryNumber,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,console.log(this.data),setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.componentInstance.branchCode=this.branchCode,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openDialogManage2(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.inputData=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}addSuveyorToEnquiry(e){this.openDialogManage(e,g.O.create,"Adding_Surveyor_To_Enquiry","Save",xe)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ServiceEnquiries",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}setForm(){this.form=this.fb.group({enquiryID:[0],statusEnquiry:[""]})}cahngeEnquiryStatus(e,o){this.form.value.enquiryID=e,this.form.value.statusEnquiry=o,this.apiService.post("ServiceEnquiries/changeEnquiryStatus",this.form.value).subscribe(n=>{this.utilService.OkMessage(),this.ngOnInit()},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}ApprovalDialog(e,o){let n=this.oprService.openApprovalDialog(this.dialog,o);n.componentInstance.enquiry=e,n.afterClosed().subscribe(s=>{this.ngOnInit()})}approvalAuth(e){this.ApprovalDialog(e,q7)}approveSurvey(e){let n=e.enquiryID.toString();this.openApprovalDialog(this.branchCode,n,g.O.create,"Survey_Approval","Save","SUR",Wt)}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}getEnquiryHead(){this.apiService.getall(`ServiceEnquiryHeader/getEnquiryFormHeaderByEnquiryNumber/${this.enquiryNumber}`).subscribe(e=>{this.branchCode=e.branchCode})}printSurveyForm(e){this.openDialogManage2({enquiryID:e,enquiryNumber:this.enquiryNumber},g.O.create,"","Print",Oe)}editableSurveyForm(e){this.openDialogManage2({enquiryID:e,enquiryNumber:this.enquiryNumber},g.O.create,"","Print",Ne)}closeModel(){this.dialogRef.close(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(L.gz),t.Y36(W.f),t.Y36(Z.sK),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-enquiries-by-enquiry-number"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:67,vars:26,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","site"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","service"],["matColumnDef","unitCode"],["matColumnDef","pricePerUnit"],["matColumnDef","serviceQuantity"],["matColumnDef","unitQuantity"],["matColumnDef","estimatedPrice"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-cell","",1,"clickaction"],[3,"matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"icon-user"],[1,"icon-printer"],[1,"fas","fa-edit"],[1,"icon-like"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"h3",5),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",6),t.TgZ(12,"nav",7),t.TgZ(13,"ol",8),t.TgZ(14,"li",9),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"li",9),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"li",9),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"li",10),t._uU(24),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",11),t.TgZ(26,"div",3),t.TgZ(27,"div",12),t.TgZ(28,"div",13),t.TgZ(29,"div",14),t.TgZ(30,"div",3),t.TgZ(31,"div",12),t.TgZ(32,"h4",15),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(35,"div",16),t.TgZ(36,"div",17),t.ynx(37),t.TgZ(38,"table",18),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(39,19),t.YNc(40,b7,3,3,"th",20),t.YNc(41,y7,2,1,"td",21),t.BQk(),t.ynx(42,22),t.YNc(43,S7,3,3,"th",20),t.YNc(44,w7,2,1,"td",21),t.BQk(),t.ynx(45,23),t.YNc(46,U7,3,3,"th",20),t.YNc(47,L7,2,1,"td",21),t.BQk(),t.ynx(48,24),t.YNc(49,D7,3,3,"th",20),t.YNc(50,N7,2,1,"td",21),t.BQk(),t.ynx(51,25),t.YNc(52,E7,3,3,"th",20),t.YNc(53,O7,2,1,"td",21),t.BQk(),t.ynx(54,26),t.YNc(55,j7,3,3,"th",20),t.YNc(56,k7,2,1,"td",21),t.BQk(),t.ynx(57,27),t.YNc(58,M7,3,3,"th",20),t.YNc(59,R7,2,1,"td",21),t.BQk(),t.ynx(60,28),t.YNc(61,P7,3,3,"th",29),t.YNc(62,Q7,5,4,"td",30),t.BQk(),t.YNc(63,B7,1,0,"tr",31),t.YNc(64,H7,1,0,"tr",32),t.qZA(),t.BQk(),t.qZA(),t.ynx(65),t.TgZ(66,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,14,o.modalTitle)),t.xp6(8),t.hij(" ",t.lcZ(10,16,"Services_Enquiry")," "),t.xp6(6),t.hij(" ",t.lcZ(16,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(19,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(22,22,"Services_Enquiry")),t.xp6(3),t.Oqu(o.enquiryNumber),t.xp6(9),t.hij("",t.lcZ(34,24,"Services_Enquiry_List")," "),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function V7(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enquiry_Number")," "))}function $7(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.enquiryNumber)}}function G7(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enquiry_Date")," "))}function W7(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.dateOfEnquiry,"longDate"))}}function z7(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Est_Close_Date")," "))}function X7(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.estimateClosingDate,"longDate"))}}function K7(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Customer")," ",t.lcZ(3,4,"Name")," "))}function tL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.isArab?e.customerNameAr:e.customerNameEn)}}function eL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Branch")," ",t.lcZ(3,4,"Code")," "))}function oL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchCode)}}function iL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"Branch")," ",t.lcZ(3,4,"Name")," "))}function nL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branchNameEn)}}function aL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Total_Estimated_Price")," "))}function sL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.totalEstPrice)}}function rL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function lL(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function cL(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function pL(i,a){if(1&i&&(t.TgZ(0,"td",39),t.YNc(1,lL,3,3,"span",40),t.YNc(2,cL,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function uL(i,a){1&i&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function dL(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().convertToProject(n)}),t._UZ(1,"i",50),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Convert_To_Project"))}}function mL(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().skippSurvey(n)}),t._UZ(1,"i",51),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Skipp_Survey"))}}function _L(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().editEnquiry(n)}),t._UZ(1,"i",52),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Edit_Enquiry"))}}function gL(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().addEnquiry(n)}),t._UZ(1,"i",53),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Add_Enquiry_For_New_Site"))}}function hL(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"span",46),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approveEnquiry(n)}),t._UZ(1,"i",54),t._uU(2,"\xa0"),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("matTooltip",e.translate.instant("Approve_Enquiry"))}}function fL(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",45),t.TgZ(1,"span",46),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().viewEnquiries(s)}),t._UZ(2,"i",47),t._uU(3,"\xa0"),t.qZA(),t.TgZ(4,"span",46),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().printEnquiryForm(s.enquiryNumber)}),t._UZ(5,"i",48),t._uU(6,"\xa0"),t.qZA(),t.YNc(7,dL,3,1,"span",49),t.YNc(8,mL,3,1,"span",49),t.YNc(9,_L,3,1,"span",49),t.YNc(10,gL,3,1,"span",49),t.YNc(11,hL,3,1,"span",49),t.qZA()}if(2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("matTooltip",o.translate.instant("View_Enquiry")),t.xp6(3),t.Q6J("matTooltip",o.translate.instant("Print_Enquiry_Form")),t.xp6(3),t.Q6J("ngIf",!e.isConvertedToProject&&e.isApproved&&(e.authorities.canConvertEnqToProject||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!e.isConvertedToProject&&!e.isEnqApproved&&e.isApproved&&(e.authorities.canConvertEnqToProject||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!e.isConvertedToProject&&!e.isEnqApproved&&(e.authorities.canEditEnquiry||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",e.isConvertedToProject&&e.isProjectConvertedToContract&&(e.authorities.canEditEnquiry||e.isAdmin)),t.xp6(1),t.Q6J("ngIf",!e.isEnqApproved&&(!e.approvedUser&&e.authorities.canApproveEnquiry||e.isAdmin))}}function ZL(i,a){1&i&&t._UZ(0,"tr",55)}function CL(i,a){1&i&&t._UZ(0,"tr",56)}const AL=function(){return{standalone:!0}};let TL=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.oprService=h,this.translate=C,this.displayedColumns=["enquiryNumber","dateOfEnquiry","estimateClosingDate","customerName","branchCode","branchName","totalEstPrice","isActive","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1,this.isArab=!1}ngOnInit(){this.isArab=this.utilService.isArabic(),this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ServiceEnquiryHeader/getSevriceEnquiryHeaderPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}openFullWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openEditWindow(e,o,n,s,r,c){let p=this.oprService.fullWindow(this.dialog,c);p.componentInstance.dbops=n,p.componentInstance.modalTitle=s,p.componentInstance.modalBtnTitle=r,p.componentInstance.enquiryHead=o,p.componentInstance.isAdendum=e,p.afterClosed().subscribe(u=>{u&&!0===u&&this.ngOnInit()})}openEnquiriesWindow(e,o,n,s,r){let c=this.oprService.fullWindow(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.enquiryNumber=e.enquiryNumber,c.componentInstance.branchCode=e.branchCode,c.afterClosed().subscribe(p=>{p&&!0===p&&this.ngOnInit()})}openConvertDialog(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.enquiryHead=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}create(){this.openFullWindow(0,g.O.create,"Adding_New_Service_Enquiry_Form","Add",It)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ServiceEnquiryHeader",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}changeEnquiryFormStatus(e,o){this.apiService.post("serviceEnquiryForm/changeEnquiryFormStatus?enquiryNumber="+e+"&enquiryStatus="+o,null).subscribe(n=>{this.utilService.OkMessage(),this.ngOnInit()},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}viewEnquiries(e){this.openEnquiriesWindow(e,g.O.create,"","",go)}printEnquiryForm(e){this.openEnquiriesWindow(e,g.O.create,"","",ze)}convertToProject(e){this.openConvertDialog(e,g.O.create,"Converting_To_Project","Update",_o)}approveEnquiry(e){let n=e.enquiryNumber.toString()+(null==(null==e?void 0:e.version)?"":"/"+(null==e?void 0:e.version));this.openApprovalDialog(null==e?void 0:e.branchCode,n,g.O.create,"Enquiry_Approval","Save","ENQ",Wt)}openApprovalDialog(e,o,n,s,r,c,p){let u=this.oprService.openApprovalDialog(this.dialog,p);u.componentInstance.dbops=n,u.componentInstance.modalTitle=s,u.componentInstance.modalBtnTitle=r,u.componentInstance.serviceType=c,u.componentInstance.serviceCode=o,u.componentInstance.branchCode=e,u.afterClosed().subscribe(d=>{d&&!0===d&&this.initialLoading()})}translateToolTip(e){return`${this.translate.instant(e)}`}createExistingProject(){this.openFullWindow(0,g.O.create,"Adding_New_Service_Enquiry_Form_For_Existing_Project","Add",Ge)}editEnquiry(e){let o=this.oprService.fullWindow(this.dialog,It);o.componentInstance.dbops=g.O.update,o.componentInstance.modalTitle="Update_Service_Enquiry_Form",o.componentInstance.modalBtnTitle="Update",o.componentInstance.enquiryHead=e,o.componentInstance.isAdendum=!1,o.afterClosed().subscribe(n=>{n&&!0===n&&this.ngOnInit()})}addEnquiry(e){let o=this.oprService.fullWindow(this.dialog,It);o.componentInstance.dbops=g.O.update,o.componentInstance.modalTitle="Add_Enquiry_For_New_Site",o.componentInstance.modalBtnTitle="Update",o.componentInstance.enquiryHead=e,o.componentInstance.isAdendum=!0,o.componentInstance.isOldEnquiryForm=!0,o.afterClosed().subscribe(n=>{n&&!0===n&&this.ngOnInit()})}skippSurvey(e){this.openConvertDialog(e,g.O.create,"Converting_To_Project","Update",_o)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-service-enquiry-forms"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:71,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-4","col-lg-4"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-8","col-lg-8","text-right"],["data-toggle","modal","data-target","#addEnquiries","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","enquiryNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dateOfEnquiry"],["matColumnDef","estimateClosingDate"],["matColumnDef","customerName"],["matColumnDef","branchCode"],["matColumnDef","branchName"],["matColumnDef","totalEstPrice"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","clickaction",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],["mat-cell","",1,"clickaction"],[3,"matTooltip","click"],[1,"icon-eye"],[1,"icon-printer"],[3,"matTooltip","click",4,"ngIf"],[1,"fas","fa-sign-in-alt"],[1,"fas","fa-angle-double-right"],[1,"fas","fa-edit"],[1,"fas","fa-plus"],[1,"icon-like"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.ynx(38),t.TgZ(39,"table",21),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(40,22),t.YNc(41,V7,3,3,"th",23),t.YNc(42,$7,2,1,"td",24),t.BQk(),t.ynx(43,25),t.YNc(44,G7,3,3,"th",23),t.YNc(45,W7,3,4,"td",24),t.BQk(),t.ynx(46,26),t.YNc(47,z7,3,3,"th",23),t.YNc(48,X7,3,4,"td",24),t.BQk(),t.ynx(49,27),t.YNc(50,K7,4,6,"th",23),t.YNc(51,tL,2,1,"td",24),t.BQk(),t.ynx(52,28),t.YNc(53,eL,4,6,"th",23),t.YNc(54,oL,2,1,"td",24),t.BQk(),t.ynx(55,29),t.YNc(56,iL,4,6,"th",23),t.YNc(57,nL,2,1,"td",24),t.BQk(),t.ynx(58,30),t.YNc(59,aL,3,3,"th",23),t.YNc(60,sL,2,1,"td",24),t.BQk(),t.ynx(61,31),t.YNc(62,rL,3,3,"th",23),t.YNc(63,pL,4,2,"td",24),t.BQk(),t.ynx(64,32),t.YNc(65,uL,3,3,"th",33),t.YNc(66,fL,12,7,"td",34),t.BQk(),t.YNc(67,ZL,1,0,"tr",35),t.YNc(68,CL,1,0,"tr",36),t.qZA(),t.BQk(),t.qZA(),t.ynx(69),t.TgZ(70,"mat-paginator",37),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Services_Enquiry_Forms")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Services_Enquiry_Forms")),t.xp6(10),t.hij("",t.lcZ(27,24,"Services_Enquiry_Forms_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,AL)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Services_Enquiry")," "),t.xp6(5),t.Q6J("dataSource",o.data),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,rt.gM,_.XQ,_.Gk],pipes:[Z.X$,f.uU],encapsulation:2}),i})();function vL(i,a){if(1&i&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.text,"-",e.textTwo,"")}}function xL(i,a){if(1&i&&(t.TgZ(0,"option",17),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.text,"-",e.textTwo,"")}}let ho=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.readonly="",this.id=0,this.serviceCodeList=[],this.unitCodeList=[],this.isDataLoading=!1}ngOnInit(){this.setForm(),this.loadUnitCodes(),this.loadServiceCodes(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({serviceCode:["",l.kI.required],unitCode:["",l.kI.required],pricePerUnit:[,l.kI.required],isActive:[!0]})}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("ServiceUnitMap",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("ServiceUnitMap/getServiceUnitMapById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}loadServiceCodes(){this.apiService.getall("Services/getSelectServiceList").subscribe(e=>{this.serviceCodeList=e})}loadUnitCodes(){this.apiService.getall("Units/getSelectUnitList").subscribe(e=>{this.unitCodeList=e})}reset(){this.form.controls.serviceCode.setValue(""),this.form.controls.unitCode.setValue(""),this.form.controls.pricePerUnit.setValue(""),this.form.controls.isActive.setValue(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-serviceunitmapp"]],features:[t.qOj],decls:54,vars:45,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["formControlName","serviceCode",1,"custom-select","mr-sm-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","unitCode",1,"custom-select","mr-sm-2"],["type","number","step","1.00","formControlName","pricePerUnit",1,"form-control",3,"placeholder"],["color","primary","formControlName","isActive"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"select",6),t.TgZ(13,"option",7),t._uU(14),t.ALo(15,"translate"),t.ALo(16,"translate"),t.qZA(),t.YNc(17,vL,2,3,"option",8),t.qZA(),t._UZ(18,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(19,"div",4),t.TgZ(20,"div",5),t.TgZ(21,"label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"select",10),t.TgZ(25,"option",7),t._uU(26),t.ALo(27,"translate"),t.ALo(28,"translate"),t.qZA(),t.YNc(29,xL,2,3,"option",8),t.qZA(),t._UZ(30,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(31,"div",4),t.TgZ(32,"div",5),t.TgZ(33,"label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",11),t.ALo(37,"translate"),t.ALo(38,"translate"),t._UZ(39,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(40,"div",4),t.TgZ(41,"div",5),t.TgZ(42,"label"),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"br"),t._UZ(46,"mat-slide-toggle",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",13),t.TgZ(48,"div",14),t.TgZ(49,"input",15),t.NdJ("click",function(){return o.closeModel()}),t.ALo(50,"translate"),t.qZA(),t._uU(51," \xa0 "),t._UZ(52,"input",16),t.ALo(53,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,19,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,21,"Service_Code")),t.xp6(4),t.AsE("",t.lcZ(15,23,"Select")," ",t.lcZ(16,25,"Service_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.serviceCodeList),t.xp6(1),t.Q6J("control",o.form.controls.serviceCode),t.xp6(4),t.Oqu(t.lcZ(23,27,"Unit_Code")),t.xp6(4),t.AsE("",t.lcZ(27,29,"Select")," ",t.lcZ(28,31,"Unit_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.unitCodeList),t.xp6(1),t.Q6J("control",o.form.controls.unitCode),t.xp6(4),t.Oqu(t.lcZ(35,33,"Amount")),t.xp6(2),t.hYB("placeholder","",t.lcZ(37,35,"Please_Enter")," ",t.lcZ(38,37,"Amount"),""),t.xp6(3),t.Q6J("control",o.form.controls.pricePerUnit),t.xp6(4),t.Oqu(t.lcZ(44,39,"Is_Active")),t.xp6(6),t.s9C("value",t.lcZ(50,41,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(53,43,"Save")))},directives:[l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,l.YN,l.Kr,f.sg,G.s,l.wV,l.Fj,Ot.Rr],pipes:[Z.X$],encapsulation:2}),i})(),fo=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.readonly="",this.isDataLoading=!1}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({unitCode:["",l.kI.required],unitNameEng:["",l.kI.required],unitNameArb:["",l.kI.required],isActive:[!0]})}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("Units",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Units/getUnitById",this.id).subscribe(e=>{e&&this.form.patchValue(e)})}reset(){this.form.controls.unitCode.setValue(""),this.form.controls.unitNameEng.setValue(""),this.form.controls.unitNameArb.setValue(""),this.form.controls.isActive.setValue(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-unit-code-for-services"]],features:[t.qOj],decls:48,vars:44,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","unitCode",1,"form-control",3,"placeholder","readonly"],[3,"control"],["type","text","formControlName","unitNameEng",1,"form-control",3,"placeholder"],["type","text","formControlName","unitNameArb",1,"form-control",3,"placeholder"],["color","primary","formControlName","isActive"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"br"),t._UZ(40,"mat-slide-toggle",10),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",11),t.TgZ(42,"div",12),t.TgZ(43,"input",13),t.NdJ("click",function(){return o.closeModel()}),t.ALo(44,"translate"),t.qZA(),t._uU(45," \xa0 "),t._UZ(46,"input",14),t.ALo(47,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,18,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,20,"Unit_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,22,"Please_Enter")," ",t.lcZ(14,24,"Unit_Code"),""),t.s9C("readonly",o.readonly),t.xp6(3),t.Q6J("control",o.form.controls.unitCode),t.xp6(4),t.Oqu(t.lcZ(20,26,"Unit_Name_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,28,"Please_Enter")," ",t.lcZ(23,30,"Unit_Name_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.unitNameEng),t.xp6(4),t.Oqu(t.lcZ(29,32,"Unit_Name_Arab")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,34,"Please_Enter")," ",t.lcZ(32,36,"Unit_Name_Arab"),""),t.xp6(3),t.Q6J("control",o.form.controls.unitNameArb),t.xp6(4),t.Oqu(t.lcZ(38,38,"Is_Active")),t.xp6(6),t.s9C("value",t.lcZ(44,40,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(47,42,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,Ot.Rr],pipes:[Z.X$],encapsulation:2}),i})();function qL(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Code")," "))}function bL(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceCode)}}function yL(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Code")," "))}function SL(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitCode)}}function wL(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Amount")," "))}function UL(i,a){if(1&i&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.pricePerUnit)}}function LL(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function DL(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function NL(i,a){1&i&&(t.TgZ(0,"span",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function EL(i,a){if(1&i&&(t.TgZ(0,"td",37),t.YNc(1,DL,3,3,"span",38),t.YNc(2,NL,3,3,"ng-template",null,39,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function OL(i,a){1&i&&(t.TgZ(0,"th",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function jL(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",37),t.TgZ(1,"a",43),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",44),t.qZA(),t.qZA()}}function kL(i,a){1&i&&t._UZ(0,"tr",45)}function ML(i,a){1&i&&t._UZ(0,"tr",46)}const RL=function(){return{standalone:!0}};let PL=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.displayedColumns=["serviceCode","unitCode","pricePerUnit","isActive","Actions"],this.sortingOrder="id desc",this.isLoading=!1,this.searchValue=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadServiceUnitMappings(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadServiceUnitMappings(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadServiceUnitMappings(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadServiceUnitMappings(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ServiceUnitMap/getServiceUnitMapPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadServiceUnitMappings(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}createUnits(){this.openDialogManage(0,g.O.create,"Adding_New_Unit","Add",fo)}createService(){this.openDialogManage(0,g.O.create,"Adding_New_Service","Add",mo)}create(){this.openDialogManage(0,g.O.create,"Adding_New_Service_Unit_Mapping","Add",ho)}edit(e){this.openDialogManage(e,g.O.update,"Updating_Service_Unit_Mapping","Update",ho)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ServiceUnitMap",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-service-unit-mappings"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:70,vars:37,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-4","col-lg-4"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-8","col-lg-8","text-right"],["data-toggle","modal","data-target","#addServiceUnitMap","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],["data-toggle","modal","data-target","#AddNewUnit","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],["data-toggle","modal","data-target","#AddNewService","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","serviceCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","unitCode"],["matColumnDef","pricePerUnit"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._uU(36," \xa0\xa0 "),t.TgZ(37,"a",19),t.NdJ("click",function(){return o.createUnits()}),t._UZ(38,"i",18),t._uU(39),t.ALo(40,"translate"),t.qZA(),t._uU(41," \xa0\xa0 "),t.TgZ(42,"a",20),t.NdJ("click",function(){return o.createService()}),t._UZ(43,"i",18),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(46,"div",21),t.TgZ(47,"div",22),t.TgZ(48,"div",23),t.ynx(49),t.TgZ(50,"table",24),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(51,25),t.YNc(52,qL,3,3,"th",26),t.YNc(53,bL,2,1,"td",27),t.BQk(),t.ynx(54,28),t.YNc(55,yL,3,3,"th",26),t.YNc(56,SL,2,1,"td",27),t.BQk(),t.ynx(57,29),t.YNc(58,wL,3,3,"th",26),t.YNc(59,UL,2,1,"td",27),t.BQk(),t.ynx(60,30),t.YNc(61,LL,3,3,"th",26),t.YNc(62,EL,4,2,"td",27),t.BQk(),t.ynx(63,31),t.YNc(64,OL,3,3,"th",32),t.YNc(65,jL,3,0,"td",27),t.BQk(),t.YNc(66,kL,1,0,"tr",33),t.YNc(67,ML,1,0,"tr",34),t.qZA(),t.ynx(68),t.TgZ(69,"mat-paginator",35),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,18,"Service_Units_Mapping")," "),t.xp6(6),t.hij(" ",t.lcZ(11,20,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,22,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,24,"Service_Code")),t.xp6(10),t.hij("",t.lcZ(27,26,"Service_Unit_Mapping_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,28,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(36,RL)),t.xp6(5),t.hij("",t.lcZ(35,30,"Add_New_Service_Unit_Map")," "),t.xp6(5),t.hij("",t.lcZ(40,32,"Add_New_Unit")," "),t.xp6(5),t.hij("",t.lcZ(45,34,"Add_New_Service")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function FL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Enquiry_ID")," "))}function IL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.enquiryID)}}function YL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function JL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.siteCode)}}function QL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Code")," "))}function BL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceCode)}}function HL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Code")," "))}function VL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitCode)}}function $L(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Price_Per_Unit")," "))}function GL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.pricePerUnit)}}function WL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Service_Quantity")," "))}function zL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.serviceQuantity)}}function XL(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Estimated_Price")," "))}function KL(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.estimatedPrice)}}function tD(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Status")," "))}function eD(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.statusEnquiry)}}function oD(i,a){1&i&&(t.TgZ(0,"th",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function iD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().cahngeEnquiryStatus(n.enquiryID,"Approved")}),t._UZ(1,"i",48),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Approve_Survey")," "))}function nD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().addSuveyorToEnquiry(n.enquiryID)}),t._UZ(1,"i",49),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Assign_to_surveyor")," "))}function aD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().cahngeEnquiryStatus(n.enquiryID,"Open")}),t._UZ(1,"i",50),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"Reopen_Enquiry")," "))}function sD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit;return t.oxw().approvalAuth(n)}),t._UZ(1,"i",51),t.qZA()}}const Ye=function(i){return{enquiryID:i}};function rD(i,a){if(1&i&&(t.TgZ(0,"a",52),t._UZ(1,"i",53),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("queryParams",t.VKq(4,Ye,e.enquiryID)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"Fill_Survey_Form")," ")}}function lD(i,a){if(1&i&&(t.TgZ(0,"a",52),t._UZ(1,"i",53),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("queryParams",t.VKq(4,Ye,e.enquiryID)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"Edit_Survey_Form")," ")}}function cD(i,a){if(1&i&&(t.TgZ(0,"a",52),t._UZ(1,"i",54),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("queryParams",t.VKq(4,Ye,e.enquiryID)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"View_Survey_Form")," ")}}function pD(i,a){if(1&i&&(t.TgZ(0,"td",39),t.TgZ(1,"div",41),t.TgZ(2,"a",42),t._UZ(3,"i",43),t.qZA(),t.TgZ(4,"div",44),t.TgZ(5,"a",42),t._UZ(6,"i",43),t.qZA(),t.TgZ(7,"div",44),t.YNc(8,iD,4,3,"a",45),t.YNc(9,nD,4,3,"a",45),t.YNc(10,aD,4,3,"a",45),t.YNc(11,sD,2,0,"a",45),t.YNc(12,rD,4,6,"a",46),t.YNc(13,lD,4,6,"a",46),t.YNc(14,cD,4,6,"a",46),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(8),t.Q6J("ngIf","Survey_Completed"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Open"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Cancelled"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Survey_Completed"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Assigned_Surveyor"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Survey_In_Progress"==e.statusEnquiry),t.xp6(1),t.Q6J("ngIf","Survey_Completed"==e.statusEnquiry)}}function uD(i,a){1&i&&t._UZ(0,"tr",55)}function dD(i,a){1&i&&t._UZ(0,"tr",56)}const mD=function(){return{standalone:!0}};let _D=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.displayedColumns=["enquiryID","siteCode","serviceCode","unitCode","pricePerUnit","serviceQuantity","estimatedPrice","statusEnquiry","Actions"],this.searchValue="",this.sortingOrder="enquiryID desc",this.isLoading=!1}ngOnInit(){this.setForm(),this.initialLoading()}setForm(){this.form=this.fb.group({enquiryID:[0],statusEnquiry:[""]})}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ServiceEnquiries/getSevriceEnquiriesPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),console.log(this.data),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Enquiry","Add",It)}edit(e){this.openDialogManage(e,g.O.update,"Updating_Enquiry","Update",It)}addSuveyorToEnquiry(e){this.openDialogManage(e,g.O.create,"Adding_Surveyor_To_Enquiry","Save",xe)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ServiceEnquiries",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}cahngeEnquiryStatus(e,o){this.form.value.enquiryID=e,this.form.value.statusEnquiry=o,this.apiService.post("ServiceEnquiries/changeEnquiryStatus",this.form.value).subscribe(n=>{this.utilService.OkMessage(),this.ngOnInit()},n=>{console.error(n),this.utilService.ShowApiErrorMessage(n)})}ApprovalDialog(e,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.enquiryHead=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}approvalAuth(e){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-services-enquiry"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:72,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addEnquiries","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","enquiryID"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","siteCode"],["matColumnDef","serviceCode"],["matColumnDef","unitCode"],["matColumnDef","pricePerUnit"],["matColumnDef","serviceQuantity"],["matColumnDef","estimatedPrice"],["matColumnDef","statusEnquiry"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],["class","dropdown-item tableicons",3,"click",4,"ngIf"],["class","dropdown-item tableicons","routerLink","EditableSurveyForm",3,"queryParams",4,"ngIf"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-like"],[1,"icon-user"],[1,"icon-trash"],[1,"icon-arrow-up"],["routerLink","EditableSurveyForm",1,"dropdown-item","tableicons",3,"queryParams"],[1,"icon-pencil"],[1,"icon-eye"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,FL,3,3,"th",24),t.YNc(43,IL,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,YL,3,3,"th",24),t.YNc(46,JL,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,QL,3,3,"th",24),t.YNc(49,BL,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,HL,3,3,"th",24),t.YNc(52,VL,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,$L,3,3,"th",24),t.YNc(55,GL,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,WL,3,3,"th",24),t.YNc(58,zL,2,1,"td",25),t.BQk(),t.ynx(59,31),t.YNc(60,XL,3,3,"th",24),t.YNc(61,KL,2,1,"td",25),t.BQk(),t.ynx(62,32),t.YNc(63,tD,3,3,"th",24),t.YNc(64,eD,2,1,"td",25),t.BQk(),t.ynx(65,33),t.YNc(66,oD,3,3,"th",34),t.YNc(67,pD,15,7,"td",25),t.BQk(),t.YNc(68,uD,1,0,"tr",35),t.YNc(69,dD,1,0,"tr",36),t.qZA(),t.ynx(70),t.TgZ(71,"mat-paginator",37),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Services_Enquiry")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Services_Enquiry")),t.xp6(10),t.hij("",t.lcZ(27,24,"Services_Enquiry_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,mD)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Services_Enquiry")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(28),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,L.yS,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})(),gD=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.shiftId=0,this.isDataLoading=!1,this.readonly="",this.isOff=!1}ngOnInit(){this.setForm(),this.id>0&&(this.shiftId=this.id,this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({shiftId:[0],shiftCode:["",l.kI.required],shiftName_EN:["",l.kI.required],shiftName_AR:["",l.kI.required],inTime:["",l.kI.required],outTime:["",l.kI.required],breakTime:["",l.kI.required],inGrace:[""],outGrace:[""],workingTime:[""],netWorkingTime:[""],isOff:[!1]})}submit(){console.log(this.form.value),this.form.valid||this.form.controls.isOff.value&&""!=this.form.controls.shiftCode.value&&""!=this.form.controls.shiftName_EN.value&&""!=this.form.controls.shiftName_AR.value?(this.id>0&&(this.form.value.id=this.id),this.form.value.shiftId=this.id,this.apiService.post("ShiftMaster",this.form.value).subscribe(o=>{o&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("ShiftMaster/getShiftMasterById",this.shiftId).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({shiftId:0}),this.form.patchValue({id:0}))})}reset(){this.form.controls.shiftCode.setValue(""),this.form.controls.shiftName_EN.setValue(""),this.form.controls.shiftName_AR.setValue(""),this.form.controls.inTime.setValue(""),this.form.controls.outTime.setValue(""),this.form.controls.breakTime.setValue(""),this.form.controls.inGrace.setValue(""),this.form.controls.outGrace.setValue(""),this.form.controls.workingTime.setValue(""),this.form.controls.netWorkingTime.setValue(""),this.form.controls.isOff.setValue(!1)}setDisable(){this.form.controls.isOff.value?(this.form.controls.inTime.disable({onlySelf:!0}),this.form.controls.outTime.disable({onlySelf:!0}),this.form.controls.breakTime.disable({onlySelf:!0}),this.form.controls.inGrace.disable({onlySelf:!0}),this.form.controls.outGrace.disable({onlySelf:!0}),this.form.controls.workingTime.disable({onlySelf:!0}),this.form.controls.netWorkingTime.disable({onlySelf:!0}),this.form.value.inTime="00:00",this.form.value.outTime="00:00",this.form.value.breakTime=0,this.form.value.inGrace=0,this.form.value.outGrace=0,this.form.value.workingTime="",this.form.value.netWorkingTime=""):(this.form.controls.inTime.enable({onlySelf:!0}),this.form.controls.outTime.enable({onlySelf:!0}),this.form.controls.breakTime.enable({onlySelf:!0}),this.form.controls.inGrace.enable({onlySelf:!0}),this.form.controls.outGrace.enable({onlySelf:!0}),this.form.controls.workingTime.enable({onlySelf:!0}),this.form.controls.netWorkingTime.enable({onlySelf:!0}))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-shift"]],features:[t.qOj],decls:93,vars:94,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-2","col-lg-2"],[1,"form-group"],["type","text","formControlName","shiftCode",1,"form-control",3,"placeholder","readonly"],[3,"control"],[1,"col-md-4","col-lg-4"],["type","text","formControlName","shiftName_EN",1,"form-control",3,"placeholder"],["type","text","formControlName","shiftName_AR",1,"form-control",3,"placeholder"],["color","primary","formControlName","isOff",3,"change"],[1,"col-md-6","col-lg-6"],["type","time","formControlName","inTime",1,"form-control",3,"placeholder"],["type","time","formControlName","outTime",1,"form-control",3,"placeholder"],["type","number","min","15","max","60","step","15","formControlName","breakTime",1,"form-control",3,"placeholder"],["type","number","min","0","max","60","step","5","formControlName","inGrace",1,"form-control",3,"placeholder"],["type","number","min","0","max","60","step","5","formControlName","outGrace",1,"form-control",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",8),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",9),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",8),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",10),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"br"),t.TgZ(40,"mat-slide-toggle",11),t.NdJ("change",function(){return o.setDisable()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",12),t.TgZ(42,"div",5),t.TgZ(43,"label"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"input",13),t.ALo(47,"translate"),t.ALo(48,"translate"),t._UZ(49,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(50,"div",12),t.TgZ(51,"div",5),t.TgZ(52,"label"),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"input",14),t.ALo(56,"translate"),t.ALo(57,"translate"),t._UZ(58,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(59,"div",12),t.TgZ(60,"div",5),t.TgZ(61,"label"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t._UZ(64,"input",15),t.ALo(65,"translate"),t.ALo(66,"translate"),t._UZ(67,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(68,"div",12),t.TgZ(69,"div",5),t.TgZ(70,"label"),t._uU(71),t.ALo(72,"translate"),t.qZA(),t._UZ(73,"input",16),t.ALo(74,"translate"),t.ALo(75,"translate"),t._UZ(76,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(77,"div",12),t.TgZ(78,"div",5),t.TgZ(79,"label"),t._uU(80),t.ALo(81,"translate"),t.qZA(),t._UZ(82,"input",17),t.ALo(83,"translate"),t.ALo(84,"translate"),t._UZ(85,"validation-message",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(86,"div",18),t.TgZ(87,"div",19),t.TgZ(88,"input",20),t.NdJ("click",function(){return o.closeModel()}),t.ALo(89,"translate"),t.qZA(),t._uU(90," \xa0 "),t._UZ(91,"input",21),t.ALo(92,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,38,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,40,"Shift_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,42,"Enter")," ",t.lcZ(14,44,"Shift_Code"),""),t.s9C("readonly",o.readonly),t.xp6(3),t.Q6J("control",o.form.controls.shiftCode),t.xp6(4),t.Oqu(t.lcZ(20,46,"Shift_Name_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,48,"Please_Enter")," ",t.lcZ(23,50,"Shift_Name_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.shiftName_EN),t.xp6(4),t.Oqu(t.lcZ(29,52,"Shift_Name_Arab")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,54,"Please_Enter")," ",t.lcZ(32,56,"Shift_Name_Arab"),""),t.xp6(3),t.Q6J("control",o.form.controls.shiftName_AR),t.xp6(4),t.Oqu(t.lcZ(38,58,"Is_Off")),t.xp6(7),t.Oqu(t.lcZ(45,60,"In_Time")),t.xp6(2),t.hYB("placeholder","",t.lcZ(47,62,"Please_Enter")," ",t.lcZ(48,64,"In_Time"),""),t.xp6(3),t.Q6J("control",o.form.controls.inTime),t.xp6(4),t.Oqu(t.lcZ(54,66,"Out_Time")),t.xp6(2),t.hYB("placeholder","",t.lcZ(56,68,"Please_Enter")," ",t.lcZ(57,70,"Out_Time"),""),t.xp6(3),t.Q6J("control",o.form.controls.outTime),t.xp6(4),t.Oqu(t.lcZ(63,72,"Break_Time")),t.xp6(2),t.hYB("placeholder","",t.lcZ(65,74,"Please_Enter")," ",t.lcZ(66,76,"Break_Time"),""),t.xp6(3),t.Q6J("control",o.form.controls.breakTime),t.xp6(4),t.Oqu(t.lcZ(72,78,"In_Grace_Time")),t.xp6(2),t.hYB("placeholder","",t.lcZ(74,80,"Please_Enter")," ",t.lcZ(75,82,"In_Grace_Time"),""),t.xp6(3),t.Q6J("control",o.form.controls.inGrace),t.xp6(4),t.Oqu(t.lcZ(81,84,"Out_Grace_Time")),t.xp6(2),t.hYB("placeholder","",t.lcZ(83,86,"Please_Enter")," ",t.lcZ(84,88,"Out_Grace_Time"),""),t.xp6(3),t.Q6J("control",o.form.controls.outGrace),t.xp6(3),t.s9C("value",t.lcZ(89,90,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(92,92,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,Ot.Rr,l.qQ,l.Fd,l.wV],pipes:[Z.X$],encapsulation:2}),i})();function hD(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Shift_Code")," "))}function fD(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.shiftCode)}}function ZD(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Shift_Name_English")," "))}function CD(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.shiftName_EN)}}function AD(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Shift_Name_Arab")," "))}function TD(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.shiftName_AR)}}function vD(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"In_Time")," "))}function xD(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.inTime))}}function qD(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Out_Time")," "))}function bD(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.outTime))}}function yD(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Break_Time")," "))}function SD(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.breakTime))}}function wD(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"In_Grace_Time")," "))}function UD(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.inGrace))}}function LD(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Out_Grace_Time")," "))}function DD(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.outGrace))}}function ND(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Working_Time")," "))}function ED(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.workingTime))}}function OD(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Net_Working_Time")," "))}function jD(i,a){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Oqu(o.timeToHH_MM(e.netWorkingTime))}}function kD(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Off")," "))}function MD(i,a){1&i&&(t.TgZ(0,"span",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Yes"),""))}function RD(i,a){1&i&&(t.TgZ(0,"span",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"No"),""))}function PD(i,a){if(1&i&&(t.TgZ(0,"td",42),t.YNc(1,MD,3,3,"span",43),t.YNc(2,RD,3,3,"ng-template",null,44,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isOff)("ngIfElse",o)}}function FD(i,a){1&i&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function ID(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",42),t.TgZ(1,"div",48),t.TgZ(2,"a",49),t._UZ(3,"i",50),t.qZA(),t.TgZ(4,"div",51),t.TgZ(5,"a",52),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.shiftId)}),t._UZ(6,"i",53),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"a",52),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().delete(s.shiftId)}),t._UZ(10,"i",54),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.Oqu(t.lcZ(8,2,"Edit_Shift")),t.xp6(4),t.Oqu(t.lcZ(12,4,"Delete_Shift")))}function YD(i,a){1&i&&t._UZ(0,"tr",55)}function JD(i,a){1&i&&t._UZ(0,"tr",56)}const QD=function(){return{standalone:!0}};let BD=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.displayedColumns=["shiftCode","shiftName_EN","shiftName_AR","inTime","outTime","breakTime","inGrace","outGrace","workingTime","netWorkingTime","isOff","Actions"],this.searchValue="",this.sortingOrder="shiftId desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,"",this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,"",this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("ShiftMaster/getShiftMastersPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,gD);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Shift","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Shift","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("ShiftMaster",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}timeToHH_MM(e){return e.substring(0,5)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-shift-master"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:81,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addShift","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","shiftCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","shiftName_EN"],["matColumnDef","shiftName_AR"],["matColumnDef","inTime"],["matColumnDef","outTime"],["matColumnDef","breakTime"],["matColumnDef","inGrace"],["matColumnDef","outGrace"],["matColumnDef","workingTime"],["matColumnDef","netWorkingTime"],["matColumnDef","isOff"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],[1,"icon-trash"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,hD,3,3,"th",24),t.YNc(43,fD,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,ZD,3,3,"th",24),t.YNc(46,CD,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,AD,3,3,"th",24),t.YNc(49,TD,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,vD,3,3,"th",24),t.YNc(52,xD,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,qD,3,3,"th",24),t.YNc(55,bD,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,yD,3,3,"th",24),t.YNc(58,SD,2,1,"td",25),t.BQk(),t.ynx(59,31),t.YNc(60,wD,3,3,"th",24),t.YNc(61,UD,2,1,"td",25),t.BQk(),t.ynx(62,32),t.YNc(63,LD,3,3,"th",24),t.YNc(64,DD,2,1,"td",25),t.BQk(),t.ynx(65,33),t.YNc(66,ND,3,3,"th",24),t.YNc(67,ED,2,1,"td",25),t.BQk(),t.ynx(68,34),t.YNc(69,OD,3,3,"th",24),t.YNc(70,jD,2,1,"td",25),t.BQk(),t.ynx(71,35),t.YNc(72,kD,3,3,"th",24),t.YNc(73,PD,4,2,"td",25),t.BQk(),t.ynx(74,36),t.YNc(75,FD,3,3,"th",37),t.YNc(76,ID,13,6,"td",25),t.BQk(),t.YNc(77,YD,1,0,"tr",38),t.YNc(78,JD,1,0,"tr",39),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.ynx(79),t.TgZ(80,"mat-paginator",40),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Employee_Shifts")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Shifts")),t.xp6(10),t.hij("",t.lcZ(27,24,"Employee_Shift_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,QD)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Shift")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(37),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function HD(i,a){if(1&i&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.value," ")}}function VD(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function $D(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}function GD(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t.TgZ(8,"i",34),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().removeElement(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.shiftCode),t.xp6(2),t.Oqu(e.shiftName_EN),t.xp6(2),t.Oqu(e.shiftName_AR)}}const Je=function(){return{standalone:!0}};let WD=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.id=0,this.readonly="",this.isDataLoading=!1,this.listOfShifts=[],this.sequence=1,this.editsequence=0,this.remarks="",this.shiftCode="",this.shiftName_EN="",this.shiftName_AR="",this.custCodeControl=new l.NI("",l.kI.required),this.siteCodeList=[],this.customerCode="",this.listOfShiftCodes=[],this.filteredCustCodes=this.custCodeControl.valueChanges.pipe((0,tt.O)(this.customerCode),(0,et.b)(c.autoDelay()),(0,ot.x)(),(0,it.w)(m=>(""!==m.trim()&&(this.isDataLoading=!0),this.filterCustCodes(m||""))))}filterCustCodes(e){return this.apiService.getall(`CustomerMaster/getSelectCustomerList?search=${e}`).pipe((0,lt.U)(o=>{const n=o;return this.isDataLoading=!1,n}))}loadShiftCodes(){this.apiService.getall("ShiftMaster/getSelectShiftMasterList").subscribe(e=>{this.listOfShiftCodes=e})}ngOnInit(){this.setForm(),this.readonly="readonly"}setForm(){this.form=this.fb.group({shiftCode:[""],customerCode:["",l.kI.required],siteCode:[""]}),this.setToDefault()}submit(){this.form.valid&&this.listOfShifts.length>0?(this.id>0&&(this.form.value.id=this.id),this.form.value.shiftsList=this.listOfShifts,this.apiService.post("ShiftMaster/CreateUpdateShiftsToSiteMaps",this.form.value).subscribe(e=>{this.utilService.OkMessage()},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}),window.history.back()):this.utilService.FillUpFields()}addShift(){if(""!=this.shiftCode){let e={sequence:this.getSequence(),shiftCode:this.shiftCode,shiftName_AR:this.shiftName_AR,shiftName_EN:this.shiftName_EN};this.listOfShifts.find(o=>o.shiftCode==this.shiftCode)||this.listOfShifts.push(e)}this.setToDefault()}removeElement(e){this.listOfShifts.splice(e,1),this.downSequence()}setToDefault(){this.shiftCode="",this.shiftName_AR="",this.shiftName_EN=""}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.shiftName_AR.setValue(""),this.form.controls.shiftName_EN.setValue(""),this.form.controls.shiftCode.setValue("")}goBack(){window.history.back()}getShiftDetails(e){this.apiService.getall("ShiftMaster/getShiftMasterByShiftMasterCode/"+e.target.value).subscribe(n=>{this.shiftName_AR=n.shiftName_AR,this.shiftName_EN=n.shiftName_EN})}onSelectionCustomerCode(e,o){let n="";this.form.controls.siteCode.setValue(""),n="change"==o?e.target.value:e.option.value,this.apiService.getall("CustomerMaster/getCustomerByCustomerCode/"+n).subscribe(s=>{if(null!=s){this.form.patchValue({customerCode:s.custCode});let r=this.custCodeControl.value;this.form.value.customerCode=r,this.loadSiteCodes(r)}else this.form.controls.customerCode.setValue(""),this.custCodeControl.setValue(""),this.siteCodeList=[];this.listOfShiftCodes=[],this.listOfShifts=[]})}onSelectSiteCode(e){let o="";o=e.target.value,this.form.value.siteCode=o,this.apiService.getall(`ShiftMaster/getShiftsToSiteBySiteCode/${o}`).subscribe(n=>{this.listOfShifts=n,this.sequence=this.listOfShifts.length+1}),this.loadShiftCodes()}loadSiteCodes(e){this.apiService.getall(`CustomerSite/getSelectSiteListByCustCode/${e}`).subscribe(o=>{this.siteCodeList=o})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-shifts-to-site-map"]],features:[t.qOj],decls:92,vars:75,consts:[["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"mr-sm-2"],[1,"form-group"],[1,"input-group","mb-2"],[3,"isLoading"],["type","text","matInput","",1,"form-control",3,"placeholder","formControl","matAutocomplete","change"],[3,"optionSelected"],["auto3","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"control"],["formControlName","siteCode",1,"custom-select","mr-sm-2",3,"change"],["value",""],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["type","text","readonly","readonly",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"text-center"],[1,"fas","fa-plus-circle",3,"click"],["colspan","10"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],[1,"fas","fa-minus-circle",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t._UZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",4),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"div",9),t.TgZ(11,"label",10),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t._UZ(16,"auto-loader",13),t.TgZ(17,"input",14),t.NdJ("change",function(s){return o.onSelectionCustomerCode(s,"change")}),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-autocomplete",15,16),t.NdJ("optionSelected",function(s){return o.onSelectionCustomerCode(s,"select")}),t.YNc(22,HD,2,2,"mat-option",17),t.ALo(23,"async"),t.qZA(),t.qZA(),t._UZ(24,"validation-message",18),t.qZA(),t.qZA(),t.TgZ(25,"div",9),t.TgZ(26,"div",11),t.TgZ(27,"label",10),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"select",19),t.NdJ("change",function(s){return o.onSelectSiteCode(s)}),t.TgZ(31,"option",20),t._uU(32),t.ALo(33,"translate"),t.ALo(34,"translate"),t.qZA(),t.YNc(35,VD,2,2,"option",17),t.qZA(),t._UZ(36,"validation-message",18),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",21),t.TgZ(38,"table",22),t.TgZ(39,"thead"),t.TgZ(40,"tr"),t.TgZ(41,"th"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"th"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"th"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._UZ(50,"th"),t.qZA(),t.qZA(),t.TgZ(51,"tbody"),t.TgZ(52,"tr"),t.TgZ(53,"td"),t.TgZ(54,"select",23),t.NdJ("ngModelChange",function(s){return o.shiftCode=s})("change",function(s){return o.getShiftDetails(s)}),t.TgZ(55,"option",20),t._uU(56),t.ALo(57,"translate"),t.ALo(58,"translate"),t.qZA(),t.YNc(59,$D,2,2,"option",17),t.qZA(),t.qZA(),t.TgZ(60,"td"),t.TgZ(61,"input",24),t.NdJ("ngModelChange",function(s){return o.shiftName_EN=s}),t.ALo(62,"translate"),t.qZA(),t.qZA(),t.TgZ(63,"td"),t.TgZ(64,"input",24),t.NdJ("ngModelChange",function(s){return o.shiftName_AR=s}),t.ALo(65,"translate"),t.qZA(),t.qZA(),t.TgZ(66,"td",25),t.TgZ(67,"i",26),t.NdJ("click",function(){return o.addShift()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"tr"),t._UZ(69,"td",27),t.qZA(),t.TgZ(70,"thead"),t.TgZ(71,"tr"),t.TgZ(72,"th"),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"th"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"th"),t._uU(79),t.ALo(80,"translate"),t.qZA(),t._UZ(81,"th"),t.qZA(),t.qZA(),t.TgZ(82,"tbody"),t.YNc(83,GD,9,3,"tr",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(84,"div",29),t.TgZ(85,"div",6),t.TgZ(86,"div",30),t.TgZ(87,"input",31),t.NdJ("click",function(){return o.goBack()}),t.ALo(88,"translate"),t.qZA(),t._uU(89," \xa0 "),t._UZ(90,"input",32),t.ALo(91,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(21);t.Q6J("formGroup",o.form),t.xp6(12),t.Oqu(t.lcZ(13,34,"Customer_Code")),t.xp6(4),t.Q6J("isLoading",o.isDataLoading),t.xp6(1),t.hYB("placeholder","",t.lcZ(18,36,"Please_Enter")," ",t.lcZ(19,38,"Customer_Code"),""),t.Q6J("formControl",o.custCodeControl)("matAutocomplete",n),t.xp6(5),t.Q6J("ngForOf",t.lcZ(23,40,o.filteredCustCodes)),t.xp6(2),t.Q6J("control",o.custCodeControl),t.xp6(4),t.Oqu(t.lcZ(29,42,"Site_Code")),t.xp6(4),t.AsE("",t.lcZ(33,44,"Select")," ",t.lcZ(34,46,"Site_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.siteCodeList),t.xp6(1),t.Q6J("control",o.form.controls.siteCode),t.xp6(6),t.Oqu(t.lcZ(43,48,"Shift_Code")),t.xp6(3),t.Oqu(t.lcZ(46,50,"Shift_Name_English")),t.xp6(3),t.Oqu(t.lcZ(49,52,"Shift_Name_Arab")),t.xp6(6),t.Q6J("ngModel",o.shiftCode)("ngModelOptions",t.DdM(72,Je)),t.xp6(2),t.AsE("",t.lcZ(57,54,"Select")," ",t.lcZ(58,56,"Shift_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.listOfShiftCodes),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(62,58,"Shift_Name_English"),""),t.Q6J("ngModel",o.shiftName_EN)("ngModelOptions",t.DdM(73,Je)),t.xp6(3),t.MGl("placeholder","  ",t.lcZ(65,60,"Shift_Name_Arab"),""),t.Q6J("ngModel",o.shiftName_AR)("ngModelOptions",t.DdM(74,Je)),t.xp6(9),t.Oqu(t.lcZ(74,62,"Shift_Code")),t.xp6(3),t.Oqu(t.lcZ(77,64,"Shift_Name_English")),t.xp6(3),t.Oqu(t.lcZ(80,66,"Shift_Name_Arab")),t.xp6(4),t.Q6J("ngForOf",o.listOfShifts),t.xp6(4),t.s9C("value",t.lcZ(88,68,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(91,70,"Save"))}},directives:[l._Y,l.JL,l.sg,ht.z,l.Fj,at.ZL,l.JJ,l.oH,at.XC,f.sg,G.s,l.EJ,l.u,l.YN,l.Kr,l.On,St.ey],pipes:[Z.X$,f.Ov],encapsulation:2}),i})(),zD=(()=>{class i extends q{constructor(e,o,n,s,r,c,p){super(n),this.dialogRef=e,this.notifyService=o,this.authService=n,this.fb=s,this.apiService=r,this.utilService=c,this.opservice=p,this.id=0,this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}setForm(){this.form=this.fb.group({skillSetCode:["SSTXXXXXX"],skillType:["",l.kI.required],nameInEnglish:["",l.kI.required],nameInArabic:["",l.kI.required],detailsOfSkillSet:["",l.kI.required],skillSetType:["",l.kI.required],prioryImportanceScale:["",l.kI.required],minBufferResource:["",l.kI.required],monthlyCtc:["",l.kI.required],costToCompanyDay:["",l.kI.required],monthlyOverheadCost:["",l.kI.required],monthlyOtherOverHeads:["",l.kI.required],totalSkillsetCost:["",l.kI.required],totalSkillsetCostDay:["",l.kI.required],servicePriceToCompany:["",l.kI.required],minMarginRequired:["",l.kI.required],overrideMarginIfRequired:[!1],isActive:[!0],responsibilitiesRoles:["",l.kI.required],isExist:[!1]},{validators:[qe.isCodeExist("skillSetCode","isExist")]})}get f(){return this.form.controls}closeModel(){this.dialogRef.close()}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("Skillset",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0))},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Skillset/getSkillsetById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}reset(){this.form.controls.skillSetCode.setValue(""),this.form.controls.skillType.setValue(""),this.form.controls.nameInEnglish.setValue(""),this.form.controls.detailsOfSkillSet.setValue(""),this.form.controls.skillSetType.setValue(""),this.form.controls.prioryImportanceScale.setValue(""),this.form.controls.minBufferResource.setValue(""),this.form.controls.monthlyCtc.setValue(""),this.form.controls.costToCompanyDay.setValue(""),this.form.controls.monthlyOverheadCost.setValue(""),this.form.controls.monthlyOtherOverHeads.setValue(""),this.form.controls.totalSkillsetCost.setValue(""),this.form.controls.totalSkillsetCostDay.setValue(""),this.form.controls.servicePriceToCompany.setValue(""),this.form.controls.minMarginRequired.setValue(""),this.form.controls.overrideMarginIfRequired.setValue(""),this.form.controls.overrideMarginIfRequired.setValue(!1),this.form.controls.isActive.setValue(!0),this.form.controls.responsibilitiesRoles.setValue("")}verifyCode(e){let o=e.target.value.toUpperCase();""!=o&&this.opservice.verifyCode("Skillset/isExistCode/"+o).subscribe(n=>{this.form.controls.isExist.setValue(n),this.form.controls.skillSetCode.setValue(o)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.so),t.Y36(w.g),t.Y36(x._),t.Y36(l.qu),t.Y36(b.s),t.Y36(y.t),t.Y36(W.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-update-skillset"]],features:[t.qOj],decls:198,vars:185,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","skillSetCode","readonly","",1,"form-control",3,"placeholder"],["formControlName","skillType",1,"form-control"],["value",""],[3,"control"],["type","text","formControlName","nameInEnglish",1,"form-control",3,"placeholder"],["type","text","formControlName","nameInArabic",1,"form-control",3,"placeholder"],["type","text","formControlName","detailsOfSkillSet",1,"form-control",3,"placeholder"],["formControlName","skillSetType",1,"form-control"],["formControlName","prioryImportanceScale",1,"form-control"],["type","number","formControlName","minBufferResource",1,"form-control",3,"placeholder"],["type","number","formControlName","monthlyCtc",1,"form-control",3,"placeholder"],["type","number","formControlName","costToCompanyDay",1,"form-control",3,"placeholder"],["type","number","formControlName","monthlyOverheadCost",1,"form-control",3,"placeholder"],["type","number","formControlName","monthlyOtherOverHeads",1,"form-control",3,"placeholder"],["type","number","formControlName","totalSkillsetCost",1,"form-control",3,"placeholder"],["type","number","formControlName","totalSkillsetCostDay",1,"form-control",3,"placeholder"],["type","number","formControlName","servicePriceToCompany",1,"form-control",3,"placeholder"],["type","number","formControlName","minMarginRequired",1,"form-control",3,"placeholder"],["color","primary","formControlName","overrideMarginIfRequired"],["color","primary","formControlName","isActive"],["formControlName","responsibilitiesRoles",1,"form-control",3,"placeholder"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"div",4),t.TgZ(16,"div",5),t.TgZ(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"select",7),t.TgZ(21,"option",8),t._uU(22),t.ALo(23,"translate"),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"option"),t._uU(26,"In-house"),t.qZA(),t.TgZ(27,"option"),t._uU(28,"Contract"),t.qZA(),t.qZA(),t._UZ(29,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(30,"div",4),t.TgZ(31,"div",5),t.TgZ(32,"label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"input",10),t.ALo(36,"translate"),t.ALo(37,"translate"),t._UZ(38,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(39,"div",4),t.TgZ(40,"div",5),t.TgZ(41,"label"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t._UZ(44,"input",11),t.ALo(45,"translate"),t.ALo(46,"translate"),t._UZ(47,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(48,"div",4),t.TgZ(49,"div",5),t.TgZ(50,"label"),t._uU(51),t.ALo(52,"translate"),t.qZA(),t._UZ(53,"input",12),t.ALo(54,"translate"),t.ALo(55,"translate"),t._UZ(56,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(57,"div",4),t.TgZ(58,"div",5),t.TgZ(59,"label"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.TgZ(62,"select",13),t.TgZ(63,"option",8),t._uU(64),t.ALo(65,"translate"),t.ALo(66,"translate"),t.qZA(),t.TgZ(67,"option"),t._uU(68,"Technical"),t.qZA(),t.TgZ(69,"option"),t._uU(70,"Non-Technical"),t.qZA(),t.qZA(),t._UZ(71,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(72,"div",4),t.TgZ(73,"div",5),t.TgZ(74,"label"),t._uU(75),t.ALo(76,"translate"),t.qZA(),t.TgZ(77,"select",14),t.TgZ(78,"option",8),t._uU(79),t.ALo(80,"translate"),t.ALo(81,"translate"),t.qZA(),t.TgZ(82,"option"),t._uU(83,"1"),t.qZA(),t.TgZ(84,"option"),t._uU(85,"2"),t.qZA(),t.qZA(),t._UZ(86,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(87,"div",4),t.TgZ(88,"div",5),t.TgZ(89,"label"),t._uU(90),t.ALo(91,"translate"),t.qZA(),t._UZ(92,"input",15),t.ALo(93,"translate"),t.ALo(94,"translate"),t._UZ(95,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(96,"div",4),t.TgZ(97,"div",5),t.TgZ(98,"label"),t._uU(99),t.ALo(100,"translate"),t.qZA(),t._UZ(101,"input",16),t.ALo(102,"translate"),t.ALo(103,"translate"),t._UZ(104,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(105,"div",4),t.TgZ(106,"div",5),t.TgZ(107,"label"),t._uU(108),t.ALo(109,"translate"),t.qZA(),t._UZ(110,"input",17),t.ALo(111,"translate"),t.ALo(112,"translate"),t._UZ(113,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(114,"div",4),t.TgZ(115,"div",5),t.TgZ(116,"label"),t._uU(117),t.ALo(118,"translate"),t.qZA(),t._UZ(119,"input",18),t.ALo(120,"translate"),t.ALo(121,"translate"),t._UZ(122,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(123,"div",4),t.TgZ(124,"div",5),t.TgZ(125,"label"),t._uU(126),t.ALo(127,"translate"),t.qZA(),t._UZ(128,"input",19),t.ALo(129,"translate"),t.ALo(130,"translate"),t._UZ(131,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(132,"div",4),t.TgZ(133,"div",5),t.TgZ(134,"label"),t._uU(135),t.ALo(136,"translate"),t.qZA(),t._UZ(137,"input",20),t.ALo(138,"translate"),t.ALo(139,"translate"),t._UZ(140,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(141,"div",4),t.TgZ(142,"div",5),t.TgZ(143,"label"),t._uU(144),t.ALo(145,"translate"),t.qZA(),t._UZ(146,"input",21),t.ALo(147,"translate"),t.ALo(148,"translate"),t._UZ(149,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(150,"div",4),t.TgZ(151,"div",5),t.TgZ(152,"label"),t._uU(153),t.ALo(154,"translate"),t.qZA(),t._UZ(155,"input",22),t.ALo(156,"translate"),t.ALo(157,"translate"),t._UZ(158,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(159,"div",4),t.TgZ(160,"div",5),t.TgZ(161,"label"),t._uU(162),t.ALo(163,"translate"),t.qZA(),t._UZ(164,"input",23),t.ALo(165,"translate"),t.ALo(166,"translate"),t._UZ(167,"validation-message",9),t.qZA(),t.qZA(),t.TgZ(168,"div",4),t.TgZ(169,"div",5),t.TgZ(170,"label"),t._uU(171),t.ALo(172,"translate"),t.qZA(),t._UZ(173,"br"),t._UZ(174,"mat-slide-toggle",24),t.qZA(),t.qZA(),t.TgZ(175,"div",4),t.TgZ(176,"div",5),t.TgZ(177,"label"),t._uU(178),t.ALo(179,"translate"),t.qZA(),t._UZ(180,"br"),t._UZ(181,"mat-slide-toggle",25),t.qZA(),t.qZA(),t.TgZ(182,"div",4),t.TgZ(183,"div",5),t.TgZ(184,"label"),t._uU(185),t.ALo(186,"translate"),t.qZA(),t._UZ(187,"textarea",26),t.ALo(188,"translate"),t.ALo(189,"translate"),t._UZ(190,"validation-message",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(191,"div",27),t.TgZ(192,"div",28),t.TgZ(193,"input",29),t.NdJ("click",function(){return o.closeModel()}),t.ALo(194,"translate"),t.qZA(),t._uU(195," \xa0 "),t._UZ(196,"input",30),t.ALo(197,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,73,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,75,"Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,77,"Please_Enter")," ",t.lcZ(14,79,"Code"),""),t.xp6(6),t.Oqu(t.lcZ(19,81,"Skill_Type")),t.xp6(4),t.AsE("",t.lcZ(23,83,"Select")," ",t.lcZ(24,85,"Skill_Type")," "),t.xp6(7),t.Q6J("control",o.form.controls.skillType),t.xp6(4),t.Oqu(t.lcZ(34,87,"Name_In_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(36,89,"Please_Enter")," ",t.lcZ(37,91,"Name_In_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.nameInEnglish),t.xp6(4),t.Oqu(t.lcZ(43,93,"Name_In_Arabic")),t.xp6(2),t.hYB("placeholder","",t.lcZ(45,95,"Please_Enter")," ",t.lcZ(46,97,"Name_In_Arabic"),""),t.xp6(3),t.Q6J("control",o.form.controls.nameInArabic),t.xp6(4),t.Oqu(t.lcZ(52,99,"Details_of_Skill_Set")),t.xp6(2),t.hYB("placeholder","",t.lcZ(54,101,"Please_Enter")," ",t.lcZ(55,103,"Details_of_Skill_Set"),""),t.xp6(3),t.Q6J("control",o.form.controls.detailsOfSkillSet),t.xp6(4),t.Oqu(t.lcZ(61,105,"Skill_Set_Type")),t.xp6(4),t.AsE("",t.lcZ(65,107,"Select")," ",t.lcZ(66,109,"Skill_Set_Type")," "),t.xp6(7),t.Q6J("control",o.form.controls.skillSetType),t.xp6(4),t.Oqu(t.lcZ(76,111,"Priory_Importance_Scale")),t.xp6(4),t.AsE("",t.lcZ(80,113,"Select")," ",t.lcZ(81,115,"Priory_Importance_Scale")," "),t.xp6(7),t.Q6J("control",o.form.controls.prioryImportanceScale),t.xp6(4),t.Oqu(t.lcZ(91,117,"Min_Buffer_Resource")),t.xp6(2),t.hYB("placeholder","",t.lcZ(93,119,"Please_Enter")," ",t.lcZ(94,121,"Min_Buffer_Resource"),""),t.xp6(3),t.Q6J("control",o.form.controls.minBufferResource),t.xp6(4),t.Oqu(t.lcZ(100,123,"Monthly_CTC")),t.xp6(2),t.hYB("placeholder","",t.lcZ(102,125,"Please_Enter")," ",t.lcZ(103,127,"Monthly_CTC"),""),t.xp6(3),t.Q6J("control",o.form.controls.monthlyCtc),t.xp6(4),t.Oqu(t.lcZ(109,129,"Cost_To_Company_Day")),t.xp6(2),t.hYB("placeholder","",t.lcZ(111,131,"Please_Enter")," ",t.lcZ(112,133,"Cost_To_Company_Day"),""),t.xp6(3),t.Q6J("control",o.form.controls.costToCompanyDay),t.xp6(4),t.Oqu(t.lcZ(118,135,"Monthly_Overhead_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(120,137,"Please_Enter")," ",t.lcZ(121,139,"Monthly_Overhead_Cost"),""),t.xp6(3),t.Q6J("control",o.form.controls.monthlyOverheadCost),t.xp6(4),t.Oqu(t.lcZ(127,141,"Monthly_Other_Over_Heads")),t.xp6(2),t.hYB("placeholder","",t.lcZ(129,143,"Please_Enter")," ",t.lcZ(130,145,"Monthly_Other_Over_Heads"),""),t.xp6(3),t.Q6J("control",o.form.controls.monthlyOtherOverHeads),t.xp6(4),t.Oqu(t.lcZ(136,147,"Total_Skillset_Cost")),t.xp6(2),t.hYB("placeholder","",t.lcZ(138,149,"Please_Enter")," ",t.lcZ(139,151,"Total_Skillset_Cost"),""),t.xp6(3),t.Q6J("control",o.form.controls.totalSkillsetCost),t.xp6(4),t.Oqu(t.lcZ(145,153,"Total_Skillset_Cost_Day")),t.xp6(2),t.hYB("placeholder","",t.lcZ(147,155,"Please_Enter")," ",t.lcZ(148,157,"Total_Skillset_Cost_Day"),""),t.xp6(3),t.Q6J("control",o.form.controls.totalSkillsetCostDay),t.xp6(4),t.Oqu(t.lcZ(154,159,"Service_Price_To_Company")),t.xp6(2),t.hYB("placeholder","",t.lcZ(156,161,"Please_Enter")," ",t.lcZ(157,163,"Service_Price_To_Company"),""),t.xp6(3),t.Q6J("control",o.form.controls.servicePriceToCompany),t.xp6(4),t.Oqu(t.lcZ(163,165,"Min_Margin_Required")),t.xp6(2),t.hYB("placeholder","",t.lcZ(165,167,"Please_Enter")," ",t.lcZ(166,169,"Min_Margin_Required"),""),t.xp6(3),t.Q6J("control",o.form.controls.minMarginRequired),t.xp6(4),t.Oqu(t.lcZ(172,171,"Override_Margin_if_Required")),t.xp6(7),t.Oqu(t.lcZ(179,173,"Is_Active")),t.xp6(7),t.Oqu(t.lcZ(186,175,"Responsibilities_Roles")),t.xp6(2),t.hYB("placeholder","",t.lcZ(188,177,"Please_Enter")," ",t.lcZ(189,179,"Responsibilities_Roles"),""),t.xp6(3),t.Q6J("control",o.form.controls.responsibilitiesRoles),t.xp6(3),t.s9C("value",t.lcZ(194,181,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(197,183,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,G.s,l.wV,Ot.Rr],pipes:[Z.X$],encapsulation:2}),i})();function XD(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Skill_Set")," "))}function KD(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.skillSetCode)}}function tN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Name_In_English")," "))}function eN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.nameInEnglish)}}function oN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Name_In_Arabic")," "))}function iN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.nameInArabic)}}function nN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Skill_Set_Cost")," "))}function aN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.totalSkillsetCost)}}function sN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Margin")," "))}function rN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.minMarginRequired)}}function lN(i,a){1&i&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function cN(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"a",38),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",39),t.qZA(),t.qZA()}}function pN(i,a){1&i&&t._UZ(0,"tr",40)}function uN(i,a){1&i&&t._UZ(0,"tr",41)}const dN=function(){return{standalone:!0}};let mN=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.notifyService=p,this.validationService=u,this.pageService=d,this.dialog=m,this.displayedColumns=["skillSetCode","nameInEnglish","nameInArabic","totalSkillsetCost","minMarginRequired","Actions"],this.searchValue="",this.isLoading=!1,this.sortingOrder="id desc"}ngOnInit(){this.initialLoading()}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}setForm(){this.form=this.fb.group({})}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Skillset/getSkillsetsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,zD);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Skillset","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Skillset","Update")}refresh(){this.searchValue="",this.initialLoading()}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Skillset",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(w.g),t.Y36(N.R),t.Y36(V.N),t.Y36(T.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-skillset"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:63,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addskillset","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","skillSetCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nameInEnglish"],["matColumnDef","nameInArabic"],["matColumnDef","totalSkillsetCost"],["matColumnDef","minMarginRequired"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,XD,3,3,"th",24),t.YNc(43,KD,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,tN,3,3,"th",24),t.YNc(46,eN,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,oN,3,3,"th",24),t.YNc(49,iN,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,nN,3,3,"th",24),t.YNc(52,aN,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,sN,3,3,"th",24),t.YNc(55,rN,2,1,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,lN,3,3,"th",31),t.YNc(58,cN,3,0,"td",25),t.BQk(),t.YNc(59,pN,1,0,"tr",32),t.YNc(60,uN,1,0,"tr",33),t.qZA(),t.ynx(61),t.TgZ(62,"mat-paginator",34),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Skill_Set")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Skill_Set")),t.xp6(10),t.hij("",t.lcZ(27,24,"Skill_Set_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,dN)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_New_Skill_Set")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function _N(i,a){if(1&i&&(t.TgZ(0,"span",27),t._UZ(1,"validation-message",28),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.elementType)}}function gN(i,a){1&i&&(t.TgZ(0,"span",27),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function hN(i,a){if(1&i&&(t.TgZ(0,"span",27),t._UZ(1,"validation-message",28),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.elementEngName)}}function fN(i,a){1&i&&(t.TgZ(0,"span",27),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function ZN(i,a){if(1&i&&(t.TgZ(0,"span",27),t._UZ(1,"validation-message",28),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("control",e.form.controls.elementArbName)}}function CN(i,a){1&i&&(t.TgZ(0,"span",27),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Required")))}function AN(i,a){1&i&&(t.TgZ(0,"div",5),t.TgZ(1,"div",6),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",29),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,3,"List_Value_String")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,5,"Please_Enter")," ",t.lcZ(7,7,"List_Value_String"),""))}function TN(i,a){1&i&&(t.TgZ(0,"div",30),t.TgZ(1,"div",6),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",31),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,3,"Min_Value")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,5,"Please_Enter")," ",t.lcZ(7,7,"Min_Value"),""))}function vN(i,a){1&i&&(t.TgZ(0,"div",30),t.TgZ(1,"div",6),t.TgZ(2,"label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",32),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Oqu(t.lcZ(4,3,"Max_Value")),t.xp6(2),t.hYB("placeholder","",t.lcZ(6,5,"Please_Enter")," ",t.lcZ(7,7,"Max_Value"),""))}let xN=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.listVisible=!1,this.minmaxVisible=!1,this.readonly="",this.isDataLoading=!1}ngOnInit(){this.setForm(),this.id>0&&(this.setEditForm(),this.readonly="readonly"),console.log("Before"),console.log(this.form)}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({formElementCode:["SFEXXXX"],elementEngName:["",l.kI.required],elementArbName:["",l.kI.required],elementType:["",l.kI.required],listValueString:[""],minValue:[""],maxValue:[""],isActive:[!0]})}submit(){console.log("After"),console.log(this.form),this.form.valid?(this.id>0&&(this.form.value.id=this.id),""==this.form.value.minValue&&(this.form.value.minValue=0),""==this.form.value.maxValue&&(this.form.value.maxValue=0),this.apiService.post("surveyFormElement",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.reset(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("surveyFormElement/getSurveyFormElementById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),"List"==e.elementType?(this.listVisible=!0,this.minmaxVisible=!1):"Scale"==e.elementType?(this.minmaxVisible=!0,this.listVisible=!1):(this.listVisible=!1,this.minmaxVisible=!1))})}reset(){this.form.controls.formElementCode.setValue(""),this.form.controls.elementEngName.setValue(""),this.form.controls.elementArbName.setValue(""),this.form.controls.elementType.setValue(""),this.form.controls.listValueString.setValue(""),this.form.controls.minValue.setValue(0),this.form.controls.maxValue.setValue(0)}elementTypeChanged(e){const o=e.target.value;"List"==o?(this.listVisible=!0,this.minmaxVisible=!1):"Scale"==o?(this.minmaxVisible=!0,this.listVisible=!1):(this.listVisible=!1,this.minmaxVisible=!1)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-survey-form-elements"]],features:[t.qOj],decls:79,vars:70,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],[3,"formGroup","ngSubmit"],["myform","ngForm"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","formElementCode","readonly","",1,"form-control",3,"placeholder"],[1,"form-group","mb-4"],["for","eletype",1,"mr-sm-2"],["formControlName","elementType","value","option.value",1,"custom-select","mr-sm-2",3,"change"],["selected",""],["value","Absolute"],["value","Boolean"],["value","List"],["value","Scale"],["value","Percentage"],["style","color:red",4,"ngIf"],["type","text","formControlName","elementEngName",1,"form-control",3,"placeholder"],["type","text","formControlName","elementArbName",1,"form-control",3,"placeholder"],["class","col-md-6 col-lg-6",4,"ngIf"],["class","col-md-3 col-lg-3",4,"ngIf"],["color","primary","formControlName","isActive"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[2,"color","red"],[3,"control"],["type","text","formControlName","listValueString",1,"form-control",3,"placeholder"],[1,"col-md-3","col-lg-3"],["type","number","formControlName","minValue",1,"form-control",3,"placeholder"],["type","number","formControlName","maxValue",1,"form-control",3,"placeholder"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2,3),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.TgZ(10,"label"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",7),t.ALo(14,"translate"),t.ALo(15,"translate"),t.qZA(),t.qZA(),t.TgZ(16,"div",5),t.TgZ(17,"div",8),t.TgZ(18,"label",9),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"select",10),t.NdJ("change",function(s){return o.elementTypeChanged(s)}),t.TgZ(22,"option",11),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"option",12),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"option",13),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"option",14),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"option",15),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.TgZ(37,"option",16),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.qZA(),t.YNc(40,_N,2,1,"span",17),t.YNc(41,gN,3,3,"span",17),t.qZA(),t.qZA(),t.TgZ(42,"div",5),t.TgZ(43,"div",6),t.TgZ(44,"label"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"input",18),t.ALo(48,"translate"),t.ALo(49,"translate"),t.YNc(50,hN,2,1,"span",17),t.YNc(51,fN,3,3,"span",17),t.qZA(),t.qZA(),t.TgZ(52,"div",5),t.TgZ(53,"div",6),t.TgZ(54,"label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"input",19),t.ALo(58,"translate"),t.ALo(59,"translate"),t.YNc(60,ZN,2,1,"span",17),t.YNc(61,CN,3,3,"span",17),t.qZA(),t.qZA(),t.YNc(62,AN,8,9,"div",20),t.YNc(63,TN,8,9,"div",21),t.YNc(64,vN,8,9,"div",21),t.qZA(),t.TgZ(65,"div",5),t.TgZ(66,"div",6),t.TgZ(67,"label"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t._UZ(70,"br"),t._UZ(71,"mat-slide-toggle",22),t.qZA(),t.qZA(),t.TgZ(72,"div",23),t.TgZ(73,"div",24),t.TgZ(74,"input",25),t.NdJ("click",function(){return o.closeModel()}),t.ALo(75,"translate"),t.qZA(),t._uU(76," \xa0 "),t._UZ(77,"input",26),t.ALo(78,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=t.MAs(6);let s,r,c,p,u,d;t.xp6(1),t.Oqu(t.lcZ(2,30,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(6),t.Oqu(t.lcZ(12,32,"Element_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(14,34,"Please_Enter")," ",t.lcZ(15,36,"Element_Code"),""),t.xp6(6),t.Oqu(t.lcZ(20,38,"Element_Type")),t.xp6(4),t.Oqu(t.lcZ(24,40,"Choose_Element_Type")),t.xp6(3),t.Oqu(t.lcZ(27,42,"Absolute")),t.xp6(3),t.Oqu(t.lcZ(30,44,"Boolean")),t.xp6(3),t.Oqu(t.lcZ(33,46,"List")),t.xp6(3),t.Oqu(t.lcZ(36,48,"Scale")),t.xp6(3),t.Oqu(t.lcZ(39,50,"Percentage")),t.xp6(2),t.Q6J("ngIf",!(null!=(s=o.form.get("elementType"))&&s.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(r=o.form.get("elementType"))?null:r.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.Oqu(t.lcZ(46,52,"Element_English_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(48,54,"Please_Enter")," ",t.lcZ(49,56,"Element_English_Name"),""),t.xp6(3),t.Q6J("ngIf",!(null!=(c=o.form.get("elementEngName"))&&c.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(p=o.form.get("elementEngName"))?null:p.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(4),t.Oqu(t.lcZ(56,58,"Element_Arabic_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(58,60,"Please_Enter")," ",t.lcZ(59,62,"Element_Arabic_Name"),""),t.xp6(3),t.Q6J("ngIf",!(null!=(u=o.form.get("elementArbName"))&&u.hasError("required")&&null!=n&&n.submitted)),t.xp6(1),t.Q6J("ngIf",(null==(d=o.form.get("elementArbName"))?null:d.hasError("required"))&&(null==n?null:n.submitted)),t.xp6(1),t.Q6J("ngIf",o.listVisible),t.xp6(1),t.Q6J("ngIf",o.minmaxVisible),t.xp6(1),t.Q6J("ngIf",o.minmaxVisible),t.xp6(4),t.Oqu(t.lcZ(69,64,"Is_Active")),t.xp6(6),t.s9C("value",t.lcZ(75,66,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(78,68,"Save"))}},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.EJ,l.YN,l.Kr,f.O5,Ot.Rr,G.s,l.wV],pipes:[Z.X$],encapsulation:2}),i})();function qN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Element_Code")," "))}function bN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.formElementCode)}}function yN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Element_English_Name")," "))}function SN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.elementEngName)}}function wN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Element_Arab_Name")," "))}function UN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.elementArbName)}}function LN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Element_Type")," "))}function DN(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.elementType)}}function NN(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function EN(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function ON(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function jN(i,a){if(1&i&&(t.TgZ(0,"td",36),t.YNc(1,EN,3,3,"span",37),t.YNc(2,ON,3,3,"ng-template",null,38,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function kN(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function MN(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"a",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",43),t.qZA(),t.qZA()}}function RN(i,a){1&i&&t._UZ(0,"tr",44)}function PN(i,a){1&i&&t._UZ(0,"tr",45)}const FN=function(){return{standalone:!0}};let IN=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.displayedColumns=["formElementCode","elementEngName","elementArbName","elementType","isActive","Actions"],this.sortingOrder="id desc",this.isLoading=!1,this.searchValue=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadUnits(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUnits(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadUnits(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadUnits(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("surveyFormElement/getSurveyFormElementsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadUnits(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,xN);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Form_Element","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Form_Element","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("SurveyFormElement",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-survey-form-elements"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:63,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addsurveyelements","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","formElementCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","elementEngName"],["matColumnDef","elementArbName"],["matColumnDef","elementType"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,qN,3,3,"th",24),t.YNc(43,bN,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,yN,3,3,"th",24),t.YNc(46,SN,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,wN,3,3,"th",24),t.YNc(49,UN,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,LN,3,3,"th",24),t.YNc(52,DN,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,NN,3,3,"th",24),t.YNc(55,jN,4,2,"td",25),t.BQk(),t.ynx(56,30),t.YNc(57,kN,3,3,"th",31),t.YNc(58,MN,3,0,"td",25),t.BQk(),t.YNc(59,RN,1,0,"tr",32),t.YNc(60,PN,1,0,"tr",33),t.qZA(),t.ynx(61),t.TgZ(62,"mat-paginator",34),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Survey_Form_Elements")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operations_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Survey_Form_Elements")),t.xp6(10),t.hij("",t.lcZ(27,24,"Survey_Form_elements_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,FN)),t.xp6(5),t.hij("",t.lcZ(35,28,"Add_Survey_Form_Element")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function YN(i,a){if(1&i&&(t.TgZ(0,"option",15),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.Oqu(e.value)}}let JN=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.serviceCodeList=[],this.surveyFormCode=""}ngOnInit(){this.setForm(),this.getFormCode(),this.loadServices()}closeModel(){this.dialogRef.close()}submit(){this.form.valid?this.apiService.post("Services/AttachSurveyFormToService",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)}):this.utilService.FillUpFields()}setForm(){this.form=this.fb.group({serviceCode:[""],surveyFormCode:[""]})}loadServices(){this.apiService.getall("Services/getSelectServiceList").subscribe(e=>{this.serviceCodeList=e})}getFormCode(){this.apiService.getall("SurveyForm/getSurveyFormHeadById/"+this.id).subscribe(e=>{this.surveyFormCode=e.surveyFormCode,this.form.controls.surveyFormCode.setValue(e.surveyFormCode)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-attach-survey-form-to-service"]],features:[t.qOj],decls:34,vars:30,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","surveyFormCode","readonly","readonly",1,"form-control",3,"placeholder"],[3,"control"],["formControlName","serviceCode",1,"custom-select","mr-sm-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","customrow"],[1,"col-lg-12","col-md-12","text-center"],["type","button",1,"btn","btn-secondary",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-primary",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"select",8),t.TgZ(22,"option",9),t._uU(23),t.ALo(24,"translate"),t.ALo(25,"translate"),t.qZA(),t.YNc(26,YN,2,2,"option",10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",11),t.TgZ(28,"div",12),t.TgZ(29,"input",13),t.NdJ("click",function(){return o.closeModel()}),t.ALo(30,"translate"),t.qZA(),t._uU(31," \xa0\xa0 "),t._UZ(32,"input",14),t.ALo(33,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,12,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,14,"Form_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,16,"Please_Enter")," ",t.lcZ(14,18,"Form_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.surveyFormCode),t.xp6(4),t.Oqu(t.lcZ(20,20,"Service_Code")),t.xp6(4),t.AsE("",t.lcZ(24,22,"Select")," ",t.lcZ(25,24,"Service_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.serviceCodeList),t.xp6(3),t.s9C("value",t.lcZ(30,26,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(33,28,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,l.EJ,l.YN,l.Kr,f.sg],pipes:[Z.X$],encapsulation:2}),i})();function QN(i,a){if(1&i&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.text,"-",e.textTwo,"")}}function BN(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t.TgZ(10,"i",34),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().removeElement(s)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=a.$implicit;t.xp6(2),t.Oqu(e.formElementCode),t.xp6(2),t.Oqu(e.elementEngName),t.xp6(2),t.Oqu(e.elementArbName),t.xp6(2),t.Oqu(e.elementType)}}const Ue=function(){return{standalone:!0}};let Zo=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.readonly="",this.elementCodeList=[],this.isDataLoading=!1,this.listOfElements=[],this.sequence=1,this.editsequence=0,this.remarks="",this.formElementCode="",this.elementEngName="",this.elementArbName="",this.elementType=""}loadElementCodes(){this.apiService.getall("SurveyFormElement/getSelectSurveyFormElementList").subscribe(e=>{this.elementCodeList=e})}ngOnInit(){this.setForm(),this.loadElementCodes(),this.readonly="readonly"}setForm(){this.form=this.fb.group({surveyFormCode:[""],surveyFormNameArb:["",l.kI.required],surveyFormNameEng:["",l.kI.required],remarks:[""],formElementCode:[""]}),this.setToDefault()}submit(){this.form.valid&&this.listOfElements.length>0?(this.id>0&&(this.form.value.id=this.id),this.form.value.elementsList=this.listOfElements,this.apiService.post("SurveyForm",this.form.value).subscribe(e=>{this.utilService.OkMessage(),this.dialogRef.close(!0)},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}addElement(){""!=this.formElementCode&&this.listOfElements.push({sequence:this.getSequence(),formElementCode:this.formElementCode,elementArbName:this.elementArbName,elementEngName:this.elementEngName,elementType:this.elementType}),this.setToDefault()}removeElement(e){this.listOfElements.splice(e,1),this.downSequence()}setToDefault(){this.formElementCode="",this.elementArbName="",this.elementEngName="",this.elementType=""}getSequence(){return this.sequence+=this.sequence+1}downSequence(){return this.sequence+=this.sequence-1}reset(){this.form.controls.surveyFormCode.setValue(""),this.form.controls.surveyFormNameArb.setValue(""),this.form.controls.surveyFormNameEng.setValue(""),this.form.controls.remarks.setValue(""),this.form.controls.formElementCode.setValue("")}closeModel(){this.dialogRef.close()}getElementDetails(e){this.apiService.getall("SurveyFormElement/getSurveyFormElementBySurveyFormElementCode/"+e.target.value).subscribe(n=>{this.elementArbName=n.elementArbName,this.elementEngName=n.elementEngName,this.elementType=n.elementType})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-survey-form"]],features:[t.qOj],decls:114,vars:99,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"outer"],[1,"row","rowm0"],[1,"col-md-12","col-lg-12"],["hidden","",1,"row"],[1,"row","mt-3"],[1,"p-3",2,"border","1px solid #f4f4f4"],[1,"row","mt-2"],[1,"col-md-3","col-lg-3"],[1,"form-group"],[1,"mr-sm-2"],["type","text","formControlName","surveyFormCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","surveyFormNameArb",1,"form-control",3,"placeholder"],["type","text","formControlName","surveyFormNameEng",1,"form-control",3,"placeholder"],["formControlName","remarks",1,"form-control",3,"placeholder"],[1,"table-responsive"],["id","zero_config",1,"table","table-bordered","no-wrap"],[1,"custom-select","mr-sm-2",3,"ngModel","ngModelOptions","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","readonly","readonly",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange"],[1,"text-center"],[1,"fas","fa-plus-circle",3,"click"],["colspan","10"],[4,"ngFor","ngForOf"],[1,"modal-footer"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"],[1,"fas","fa-minus-circle",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"div",6),t.TgZ(13,"div",9),t.TgZ(14,"div",10),t.TgZ(15,"div",11),t.TgZ(16,"div",12),t.TgZ(17,"label",13),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",14),t.ALo(21,"translate"),t.ALo(22,"translate"),t._UZ(23,"validation-message",15),t.qZA(),t.qZA(),t.TgZ(24,"div",11),t.TgZ(25,"div",12),t.TgZ(26,"label",13),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"input",16),t.ALo(30,"translate"),t._UZ(31,"validation-message",15),t.qZA(),t.qZA(),t.TgZ(32,"div",11),t.TgZ(33,"div",12),t.TgZ(34,"label",13),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",17),t.ALo(38,"translate"),t.ALo(39,"translate"),t._UZ(40,"validation-message",15),t.qZA(),t.qZA(),t.TgZ(41,"div",6),t.TgZ(42,"div",12),t.TgZ(43,"label",13),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"textarea",18),t.ALo(47,"translate"),t.ALo(48,"translate"),t._uU(49,'                        <validation-message [control]="form.controls.remarks"></validation-message>\n'),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",19),t.TgZ(51,"table",20),t.TgZ(52,"thead"),t.TgZ(53,"tr"),t.TgZ(54,"th"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"th"),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"th"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"th"),t._uU(64),t.ALo(65,"translate"),t.qZA(),t._UZ(66,"th"),t.qZA(),t.qZA(),t.TgZ(67,"tbody"),t.TgZ(68,"tr"),t.TgZ(69,"td"),t.TgZ(70,"select",21),t.NdJ("ngModelChange",function(s){return o.formElementCode=s})("change",function(s){return o.getElementDetails(s)}),t.TgZ(71,"option",22),t._uU(72),t.ALo(73,"translate"),t.ALo(74,"translate"),t.qZA(),t.YNc(75,QN,2,3,"option",23),t.qZA(),t.qZA(),t.TgZ(76,"td"),t.TgZ(77,"input",24),t.NdJ("ngModelChange",function(s){return o.elementEngName=s}),t.ALo(78,"translate"),t.qZA(),t.qZA(),t.TgZ(79,"td"),t.TgZ(80,"input",24),t.NdJ("ngModelChange",function(s){return o.elementArbName=s}),t.ALo(81,"translate"),t.qZA(),t.qZA(),t.TgZ(82,"td"),t.TgZ(83,"input",24),t.NdJ("ngModelChange",function(s){return o.elementType=s}),t.ALo(84,"translate"),t.qZA(),t.qZA(),t.TgZ(85,"td",25),t.TgZ(86,"i",26),t.NdJ("click",function(){return o.addElement()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(87,"tr"),t._UZ(88,"td",27),t.qZA(),t.TgZ(89,"thead"),t.TgZ(90,"tr"),t.TgZ(91,"th"),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.TgZ(94,"th"),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"th"),t._uU(98),t.ALo(99,"translate"),t.qZA(),t.TgZ(100,"th"),t._uU(101),t.ALo(102,"translate"),t.qZA(),t._UZ(103,"th"),t.qZA(),t.qZA(),t.TgZ(104,"tbody"),t.YNc(105,BN,11,4,"tr",28),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(106,"div",29),t.TgZ(107,"div",8),t.TgZ(108,"div",30),t.TgZ(109,"input",31),t.NdJ("click",function(){return o.closeModel()}),t.ALo(110,"translate"),t.qZA(),t._uU(111," \xa0 "),t._UZ(112,"input",32),t.ALo(113,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,41,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(13),t.Oqu(t.lcZ(19,43,"Survey_Form_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(21,45,"Please_Enter")," ",t.lcZ(22,47,"Survey_Form_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.surveyFormCode),t.xp6(4),t.Oqu(t.lcZ(28,49,"Form_English_Name")),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(30,51,"Form_English_Name"),""),t.xp6(2),t.Q6J("control",o.form.controls.surveyFormNameArb),t.xp6(4),t.Oqu(t.lcZ(36,53,"Form_Arabic_Name")),t.xp6(2),t.hYB("placeholder","",t.lcZ(38,55,"Please_Enter")," ",t.lcZ(39,57,"Form_Arabic_Name"),""),t.xp6(3),t.Q6J("control",o.form.controls.surveyFormNameEng),t.xp6(4),t.Oqu(t.lcZ(45,59,"Remarks")),t.xp6(2),t.hYB("placeholder","",t.lcZ(47,61,"Please_Select")," ",t.lcZ(48,63,"Remarks"),""),t.xp6(9),t.Oqu(t.lcZ(56,65,"Element_Code")),t.xp6(3),t.Oqu(t.lcZ(59,67,"Element_English_Name")),t.xp6(3),t.Oqu(t.lcZ(62,69,"Element_Arab_Name")),t.xp6(3),t.Oqu(t.lcZ(65,71,"Element_Type")),t.xp6(6),t.Q6J("ngModel",o.formElementCode)("ngModelOptions",t.DdM(95,Ue)),t.xp6(2),t.AsE("",t.lcZ(73,73,"Select")," ",t.lcZ(74,75,"Element_Code")," "),t.xp6(3),t.Q6J("ngForOf",o.elementCodeList),t.xp6(2),t.MGl("placeholder","  ",t.lcZ(78,77,"Element_English_Name"),""),t.Q6J("ngModel",o.elementEngName)("ngModelOptions",t.DdM(96,Ue)),t.xp6(3),t.MGl("placeholder","  ",t.lcZ(81,79,"Element_Arab_Name"),""),t.Q6J("ngModel",o.elementArbName)("ngModelOptions",t.DdM(97,Ue)),t.xp6(3),t.MGl("placeholder","   ",t.lcZ(84,81,"Element_Type"),""),t.Q6J("ngModel",o.elementType)("ngModelOptions",t.DdM(98,Ue)),t.xp6(9),t.Oqu(t.lcZ(93,83,"Element_Code")),t.xp6(3),t.Oqu(t.lcZ(96,85,"Element_English_Name")),t.xp6(3),t.Oqu(t.lcZ(99,87,"Element_Arab_Name")),t.xp6(3),t.Oqu(t.lcZ(102,89,"Element_Type")),t.xp6(4),t.Q6J("ngForOf",o.listOfElements),t.xp6(4),t.s9C("value",t.lcZ(110,91,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(113,93,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,l.EJ,l.On,l.YN,l.Kr,f.sg],pipes:[Z.X$],encapsulation:2}),i})();function HN(i,a){1&i&&(t.TgZ(0,"td",19),t._uU(1,"______________"),t.qZA())}function VN(i,a){1&i&&(t.TgZ(0,"td",16),t.TgZ(1,"div",20),t._UZ(2,"input",21),t._uU(3,"\xa0\xa0 "),t.TgZ(4,"label",22),t._uU(5,"Yes"),t.qZA(),t.qZA(),t.TgZ(6,"div",20),t._UZ(7,"input",23),t._uU(8,"\xa0\xa0 "),t.TgZ(9,"label",24),t._uU(10,"No"),t.qZA(),t.qZA(),t.qZA())}function $N(i,a){if(1&i&&(t.TgZ(0,"div",20),t._UZ(1,"input",26),t._uU(2,"\xa0\xa0 "),t.TgZ(3,"label",27),t._uU(4),t.qZA(),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(1),t.MGl("id","listdata-",o,""),t.s9C("value",e),t.xp6(2),t.MGl("for","listdata-",o,""),t.xp6(1),t.Oqu(e)}}function GN(i,a){if(1&i&&(t.TgZ(0,"td",19),t.YNc(1,$N,5,4,"div",25),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.listValueString.split(","))}}function WN(i,a){1&i&&t._UZ(0,"td",19)}function zN(i,a){1&i&&t._UZ(0,"td",19)}function XN(i,a){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td",16),t._uU(2),t.qZA(),t.TgZ(3,"td",16),t._uU(4),t._UZ(5,"br"),t._uU(6),t.qZA(),t.YNc(7,HN,2,0,"td",17),t.YNc(8,VN,11,0,"td",18),t.YNc(9,GN,2,1,"td",17),t.YNc(10,WN,1,0,"td",17),t.YNc(11,zN,1,0,"td",17),t.qZA()),2&i){const e=a.$implicit,o=a.index;t.xp6(2),t.Oqu(o+1),t.xp6(2),t.Oqu(e.elementEngName),t.xp6(2),t.Oqu(e.elementArbName),t.xp6(1),t.Q6J("ngIf","Absolute"==e.elementType),t.xp6(1),t.Q6J("ngIf","Boolean"==e.elementType),t.xp6(1),t.Q6J("ngIf","List"==e.elementType),t.xp6(1),t.Q6J("ngIf","Scale"==e.elementType),t.xp6(1),t.Q6J("ngIf","Percentage"==e.elementType)}}let Co=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.route=h,this.oprService=C,this.dialogRef=A,this.isLoading=!1,this.surveyFormElements=[],this.elementOptions=[]}ngOnInit(){this.loadData()}loadData(){this.isLoading=!0,this.apiService.get("SurveyForm/getSurveyFormTemplateById",this.id).subscribe(e=>{this.surveyFormHeader=e.head,this.surveyFormElements=e.elementsList,this.isLoading=!1},e=>this.utilService.ShowApiErrorMessage(e)),localStorage.setItem("surveyFormTemplateId",this.id)}printComponent(e){let o=document.getElementById(e);const n=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{n.document.write(o.innerHTML),n.document.close(),n.focus(),n.print(),n.close()},50)}goBack(){window.history.back()}printSurveyForm(){this.openPrint()}openPrint(){const e=document.getElementById("printcontainer"),o=window.open("","","left=0,top=0,width=2000,height=1000,toolbar=0,scrollbars=0,status=0");setTimeout(()=>{o.document.write(e.innerHTML),o.document.close(),o.focus(),o.print(),o.close()},50)}closeModel(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(L.gz),t.Y36(W.f),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-view-survey-form-template"]],features:[t.qOj],decls:80,vars:45,consts:[[2,"position","fixed"],[3,"click"],["type","button","aria-hidden","true",1,"",3,"click"],["id","printcontainer",1,"container-fluid","invoice-container","print-container",2,"width","850px","padding-top","5px"],[2,"font-size","1rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],[2,"font-size","1.2rem !important","color","#0c2f54","font-family","'Poppins', sans-serif","font-weight","500","line-height","1.2","margin","0","padding-top","4px"],["border","0","cellpadding","0","cellspacing","0",2,"width","100%"],[2,"width","20%","border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","30%","border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["rowspan","2",2,"width","20%","border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],["colspan","3",2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","400"],[2,"padding-bottom","5px","padding-top","5px"],[2,"width","3%","border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","600"],[2,"width","70%","border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","600"],[2,"border","1px solid #878787","padding","5px","font-size","0.875rem !important","color","#000000","font-family","'Poppins' , sans-serif","font-weight","600"],[4,"ngFor","ngForOf"],[2,"border","1px solid #878787","padding","5px","font-size","0.775rem !important","color","#000000","font-family","'Poppins', sans-serif","font-weight","400"],["style","border:1px solid #878787;padding:5px;",4,"ngIf"],["style"," border:1px solid #878787;padding:5px;font-size:0.775rem !important;color: #000000; font-family: 'Poppins', sans-serif;font-weight: 400;",4,"ngIf"],[2,"border","1px solid #878787","padding","5px"],[1,"radio"],["id","rdoption-1","name","rdoption","type","radio","value","1"],["for","rdoption-1",1,"radio-label"],["id","rdoption-2","name","rdoption","type","radio","value","0"],["for","rdoption-2",1,"radio-label"],["class","radio",4,"ngFor","ngForOf"],["name","listdata","type","radio",3,"id","value"],[1,"radio-label",3,"for"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"button",1),t.NdJ("click",function(){return o.printSurveyForm()}),t._uU(2,"Print"),t.qZA(),t._uU(3," \xa0 "),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.closeModel()}),t._uU(5," Close"),t.qZA(),t.qZA(),t._UZ(6,"br"),t._UZ(7,"br"),t._UZ(8,"br"),t.TgZ(9,"div",3),t.TgZ(10,"h4",4),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"h4",5),t._uU(14),t.qZA(),t.TgZ(15,"table",6),t.TgZ(16,"tr"),t.TgZ(17,"th",7),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"td",8),t.TgZ(21,"th",7),t._uU(22),t.ALo(23,"translate"),t.qZA(),t._UZ(24,"td",8),t.qZA(),t.TgZ(25,"tr"),t.TgZ(26,"th",7),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"td",8),t.TgZ(30,"th",7),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"td",8),t.qZA(),t.TgZ(34,"tr"),t.TgZ(35,"th",9),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"td",8),t.TgZ(39,"th",7),t._uU(40),t.ALo(41,"translate"),t.qZA(),t._UZ(42,"td",8),t.qZA(),t.TgZ(43,"tr"),t._UZ(44,"td",8),t.TgZ(45,"th",7),t._uU(46),t.ALo(47,"translate"),t.qZA(),t._UZ(48,"td",8),t.qZA(),t.TgZ(49,"tr"),t.TgZ(50,"th",9),t._uU(51),t.ALo(52,"translate"),t.qZA(),t._UZ(53,"td",8),t.TgZ(54,"th",7),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"td",8),t.qZA(),t.TgZ(58,"tr"),t._UZ(59,"td",8),t.TgZ(60,"th",7),t._uU(61),t.ALo(62,"translate"),t.qZA(),t._UZ(63,"td",8),t.qZA(),t.TgZ(64,"tr"),t.TgZ(65,"th",7),t._uU(66),t.ALo(67,"translate"),t.qZA(),t._UZ(68,"td",10),t.qZA(),t.qZA(),t.TgZ(69,"div",11),t.TgZ(70,"table",6),t.TgZ(71,"tr"),t.TgZ(72,"th",12),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"th",13),t._uU(76),t.ALo(77,"translate"),t.qZA(),t._UZ(78,"th",14),t.qZA(),t.YNc(79,XN,12,8,"tr",15),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(11),t.hij(" ",t.lcZ(12,17,"Survey_Form"),": "),t.xp6(3),t.AsE(" ",null==o.surveyFormHeader?null:o.surveyFormHeader.surveyFormNameArb,"(",null==o.surveyFormHeader?null:o.surveyFormHeader.surveyFormNameEng,") "),t.xp6(4),t.Oqu(t.lcZ(19,19,"Enquiry_ID")),t.xp6(4),t.Oqu(t.lcZ(23,21,"Enquiry_Number")),t.xp6(5),t.Oqu(t.lcZ(28,23,"Service_Code")),t.xp6(4),t.Oqu(t.lcZ(32,25,"Customer")),t.xp6(5),t.Oqu(t.lcZ(37,27,"Service_Name")),t.xp6(4),t.Oqu(t.lcZ(41,29,"Name")),t.xp6(6),t.Oqu(t.lcZ(47,31,"Mobile")),t.xp6(5),t.Oqu(t.lcZ(52,33,"Site_Name")),t.xp6(4),t.Oqu(t.lcZ(56,35,"Address")),t.xp6(6),t.Oqu(t.lcZ(62,37,"City")),t.xp6(5),t.Oqu(t.lcZ(67,39,"Geo_Location")),t.xp6(7),t.hij(" ",t.lcZ(74,41,"S.No")," "),t.xp6(3),t.hij(" ",t.lcZ(77,43,"Form_Attribute")," "),t.xp6(3),t.Q6J("ngForOf",o.surveyFormElements))},directives:[f.sg,f.O5],pipes:[Z.X$],encapsulation:2}),i})();function KN(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Form_Code")," "))}function tE(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.surveyFormCode)}}function eE(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Form_English_Name")," "))}function oE(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.surveyFormNameEng)}}function iE(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Form_Arab_Name")," "))}function nE(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.surveyFormNameArb)}}function aE(i,a){1&i&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Remarks")," "))}function sE(i,a){if(1&i&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.remarks)}}function rE(i,a){1&i&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function lE(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",35),t.TgZ(1,"div",37),t.TgZ(2,"a",38),t._UZ(3,"i",39),t.qZA(),t.TgZ(4,"div",40),t.TgZ(5,"a",41),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().ViewSurveyFormTemplate(s.id)}),t._UZ(6,"i",42),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"View_Survey_Form_Template")," "))}function cE(i,a){1&i&&t._UZ(0,"tr",43)}function pE(i,a){1&i&&t._UZ(0,"tr",44)}const uE=function(){return{standalone:!0}};let dE=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.oprService=h,this.displayedColumns=["surveyFormCode","surveyFormNameArb","surveyFormNameEng","remarks","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("SurveyFormHeader/getSurveyFormHeaderPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s,r){let c=this.utilService.openCrudDialog(this.dialog,r);c.componentInstance.dbops=o,c.componentInstance.modalTitle=n,c.componentInstance.modalBtnTitle=s,c.componentInstance.id=e,c.afterClosed().subscribe(p=>{p&&!0===p&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Survey_Form_Template","Add",Zo)}AttachToService(e){this.openDialogManage(e,g.O.create,"Attach_Survey_Form_To_Service","Attach",JN)}edit(e){this.openDialogManage(e,g.O.update,"Updating_Survey_Form_Template","Update",Zo)}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("SurveyFormHeader",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}ViewSurveyFormTemplate(e){this.openDialogManage(e,g.O.create,"","",Co)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-survey-form"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:60,vars:31,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#addEnquiries","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","surveyFormCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","surveyFormNameEng"],["matColumnDef","surveyFormNameArb"],["matColumnDef","remarks"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-eye"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",21),t.ynx(39),t.TgZ(40,"table",22),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(41,23),t.YNc(42,KN,3,3,"th",24),t.YNc(43,tE,2,1,"td",25),t.BQk(),t.ynx(44,26),t.YNc(45,eE,3,3,"th",24),t.YNc(46,oE,2,1,"td",25),t.BQk(),t.ynx(47,27),t.YNc(48,iE,3,3,"th",24),t.YNc(49,nE,2,1,"td",25),t.BQk(),t.ynx(50,28),t.YNc(51,aE,3,3,"th",24),t.YNc(52,sE,2,1,"td",25),t.BQk(),t.ynx(53,29),t.YNc(54,rE,3,3,"th",30),t.YNc(55,lE,9,3,"td",25),t.BQk(),t.YNc(56,cE,1,0,"tr",31),t.YNc(57,pE,1,0,"tr",32),t.qZA(),t.ynx(58),t.TgZ(59,"mat-paginator",33),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,16,"Survey_Form_Templates")," "),t.xp6(6),t.hij(" ",t.lcZ(11,18,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,20,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,22,"Survey_Form_Templates")),t.xp6(10),t.hij("",t.lcZ(27,24,"Survey_Form_Templates")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,26,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(30,uE)),t.xp6(5),t.hij("",t.lcZ(35,28,"Create_New_Survey_Form_Template")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();function mE(i,a){if(1&i&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",e.text,"")}}function _E(i,a){if(1&i&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.s9C("value",e.value),t.xp6(1),t.AsE("",e.value,"-",e.text,"")}}let gE=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.utilService=c,this.translate=p,this.notifyService=u,this.validationService=d,this.dialogRef=m,this.id=0,this.branchCodeList=[],this.isDataLoading=!1,this.readonly=""}ngOnInit(){this.loadUsers(),this.setForm(),this.loadBranchCodes(),this.id>0&&(this.setEditForm(),this.readonly="readonly")}closeModel(){this.dialogRef.close()}setForm(){this.form=this.fb.group({surveyorCode:["SRYRXXXXXX"],surveyorNameEng:["",l.kI.required],surveyorNameArb:["",l.kI.required],branch:["",l.kI.required],userId:["",l.kI.required],isActive:[!0]})}submit(){this.form.valid?(this.id>0&&(this.form.value.id=this.id),this.apiService.post("Surveyors",this.form.value).subscribe(e=>{e&&(this.utilService.OkMessage(),this.dialogRef.close(!0),this.reset())},e=>{console.error(e),this.utilService.ShowApiErrorMessage(e)})):this.utilService.FillUpFields()}setEditForm(){this.apiService.get("Surveyors/getSurveyorById",this.id).subscribe(e=>{e&&(this.form.patchValue(e),this.form.patchValue({id:0}))})}loadBranchCodes(){this.apiService.getall("Branch/getSelectBranchCodeList").subscribe(e=>{this.branchCodeList=e})}loadUsers(){this.apiService.getall("Users/GetUserSelectionList").subscribe(e=>{this.userList=e})}reset(){this.form.controls.surveyorCode.setValue(""),this.form.controls.surveyorNameEng.setValue(""),this.form.controls.surveyorNameArb.setValue(""),this.form.controls.branch.setValue(""),this.form.controls.user.setValue(""),this.form.controls.isActive.setValue(!0)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(y.t),t.Y36(Z.sK),t.Y36(w.g),t.Y36(N.R),t.Y36(T.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-addupdate-surveyor"]],features:[t.qOj],decls:73,vars:62,consts:[[1,"modal-title"],["type","button","aria-hidden","true",1,"close",3,"click"],["novalidate","",1,"mt-4",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"form-group"],["type","text","formControlName","surveyorCode","readonly","",1,"form-control",3,"placeholder"],[3,"control"],["type","text","formControlName","surveyorNameEng",1,"form-control",3,"placeholder"],["type","text","formControlName","surveyorNameArb",1,"form-control",3,"placeholder"],["formControlName","branch",1,"custom-select","mr-sm-2"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","userId",1,"custom-select","mr-sm-2"],["color","primary","formControlName","isActive"],[1,"row","mt-3"],[1,"col-md-12","col-lg-12","text-center"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-secondary","btn-midblock",3,"value","click"],["type","submit",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary","btn-midblock",3,"value"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"h3",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",1),t.NdJ("click",function(){return o.closeModel()}),t._uU(4," \xd7"),t.qZA(),t.TgZ(5,"form",2),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(6,"div",3),t.TgZ(7,"div",4),t.TgZ(8,"div",5),t.TgZ(9,"label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._UZ(12,"input",6),t.ALo(13,"translate"),t.ALo(14,"translate"),t._UZ(15,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(16,"div",4),t.TgZ(17,"div",5),t.TgZ(18,"label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",8),t.ALo(22,"translate"),t.ALo(23,"translate"),t._UZ(24,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"div",5),t.TgZ(27,"label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.ALo(31,"translate"),t.ALo(32,"translate"),t._UZ(33,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(34,"div",4),t.TgZ(35,"div",5),t.TgZ(36,"label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"br"),t.TgZ(40,"select",10),t.TgZ(41,"option",11),t._uU(42),t.ALo(43,"translate"),t.ALo(44,"translate"),t.qZA(),t.YNc(45,mE,2,3,"option",12),t.qZA(),t._UZ(46,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(47,"div",4),t.TgZ(48,"div",5),t.TgZ(49,"label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t._UZ(52,"br"),t.TgZ(53,"select",13),t.TgZ(54,"option",11),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.YNc(57,_E,2,3,"option",12),t.qZA(),t._UZ(58,"validation-message",7),t.qZA(),t.qZA(),t.TgZ(59,"div",4),t.TgZ(60,"div",5),t.TgZ(61,"label"),t._uU(62),t.ALo(63,"translate"),t.qZA(),t._UZ(64,"br"),t._UZ(65,"mat-slide-toggle",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(66,"div",15),t.TgZ(67,"div",16),t.TgZ(68,"input",17),t.NdJ("click",function(){return o.closeModel()}),t.ALo(69,"translate"),t.qZA(),t._uU(70," \xa0 "),t._UZ(71,"input",18),t.ALo(72,"translate"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,26,o.modalTitle)),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(t.lcZ(11,28,"Surveyor_Code")),t.xp6(2),t.hYB("placeholder","",t.lcZ(13,30,"Please_Enter")," ",t.lcZ(14,32,"Surveyor_Code"),""),t.xp6(3),t.Q6J("control",o.form.controls.surveyorCode),t.xp6(4),t.Oqu(t.lcZ(20,34,"Surveyor_Name_English")),t.xp6(2),t.hYB("placeholder","",t.lcZ(22,36,"Please_Enter")," ",t.lcZ(23,38,"Surveyor_Name_English"),""),t.xp6(3),t.Q6J("control",o.form.controls.surveyorNameEng),t.xp6(4),t.Oqu(t.lcZ(29,40,"Surveyor_Name_Arab")),t.xp6(2),t.hYB("placeholder","",t.lcZ(31,42,"Please_Enter")," ",t.lcZ(32,44,"Surveyor_Name_Arab"),""),t.xp6(3),t.Q6J("control",o.form.controls.surveyorNameArb),t.xp6(4),t.Oqu(t.lcZ(38,46,"Branch")),t.xp6(5),t.AsE("",t.lcZ(43,48,"Select")," ",t.lcZ(44,50,"Branch")," "),t.xp6(3),t.Q6J("ngForOf",o.branchCodeList),t.xp6(1),t.Q6J("control",o.form.controls.branch),t.xp6(4),t.Oqu(t.lcZ(51,52,"User")),t.xp6(5),t.Oqu(t.lcZ(56,54,"Select_User")),t.xp6(2),t.Q6J("ngForOf",o.userList),t.xp6(1),t.Q6J("control",o.form.controls.userId),t.xp6(4),t.Oqu(t.lcZ(63,56,"Is_Active")),t.xp6(6),t.s9C("value",t.lcZ(69,58,"Cancel")),t.xp6(3),t.s9C("value",t.lcZ(72,60,"Save")))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,G.s,l.EJ,l.YN,l.Kr,f.sg,Ot.Rr],pipes:[Z.X$],encapsulation:2}),i})();function hE(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Surveyor_Code")," "))}function fE(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.surveyorCode)}}function ZE(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Surveyor_Name_English")," "))}function CE(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.surveyorNameEng)}}function AE(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Surveyor_Name_Arab")," "))}function TE(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.surveyorNameArb)}}function vE(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Active")," "))}function xE(i,a){1&i&&(t.TgZ(0,"span",42),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function qE(i,a){1&i&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function bE(i,a){if(1&i&&(t.TgZ(0,"td",39),t.YNc(1,xE,3,3,"span",40),t.YNc(2,qE,3,3,"ng-template",null,41,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function yE(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"User_Name")," "))}function SE(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.userName)}}function wE(i,a){1&i&&(t.TgZ(0,"th",38),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Branch")," "))}function UE(i,a){if(1&i&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.branch)}}function LE(i,a){1&i&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function DE(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",39),t.TgZ(1,"div",45),t.TgZ(2,"a",46),t._UZ(3,"i",47),t.qZA(),t.TgZ(4,"div",48),t.TgZ(5,"a",49),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(6,"i",50),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&i&&(t.xp6(7),t.Oqu(t.lcZ(8,1,"Edit_Surveyor")))}function NE(i,a){1&i&&t._UZ(0,"tr",51)}function EE(i,a){1&i&&t._UZ(0,"tr",52)}const OE=function(){return{standalone:!0}};let jE=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.oprService=h,this.displayedColumns=["surveyorCode","surveyorNameEng","surveyorNameArb","userName","branch","isActive","Actions"],this.searchValue="",this.sortingOrder="id desc",this.isLoading=!1}ngOnInit(){this.initialLoading()}refresh(){this.searchValue="",this.initialLoading()}initialLoading(){this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadList(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadList(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("Surveyors/getSurveyorsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadList(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,gE);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Surveyor","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Surveyor","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Surveyors",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}viewEnquiries(e){this.oprService.SurveyorCode=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N),t.Y36(W.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-surveyor"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:68,vars:32,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-1","col-lg-1","text-center"],[3,"isLoading"],[1,"col-md-6","col-lg-6","text-right"],["data-toggle","modal","data-target","#addsurveyors","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[1,"mat-elevation-z8"],["mat-table","","matSortDisableClear","","matSort","",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","surveyorCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","surveyorNameEng"],["matColumnDef","surveyorNameArb"],["matColumnDef","isActive"],["matColumnDef","branch"],["matColumnDef","userName"],["matColumnDef","Actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false"],[1,"icon-options-vertical"],["aria-labelledby","navbarDropdown","x-placement","bottom-start",1,"dropdown-menu"],[1,"dropdown-item","tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t._UZ(32,"spinner-loader",17),t.qZA(),t.TgZ(33,"div",18),t.TgZ(34,"a",19),t.NdJ("click",function(){return o.create()}),t._UZ(35,"i",20),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(38,"div",21),t.TgZ(39,"div",22),t.TgZ(40,"div",23),t.ynx(41),t.TgZ(42,"table",24),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(43,25),t.YNc(44,hE,3,3,"th",26),t.YNc(45,fE,2,1,"td",27),t.BQk(),t.ynx(46,28),t.YNc(47,ZE,3,3,"th",26),t.YNc(48,CE,2,1,"td",27),t.BQk(),t.ynx(49,29),t.YNc(50,AE,3,3,"th",26),t.YNc(51,TE,2,1,"td",27),t.BQk(),t.ynx(52,30),t.YNc(53,vE,3,3,"th",26),t.YNc(54,bE,4,2,"td",27),t.BQk(),t.ynx(55,31),t.YNc(56,yE,3,3,"th",26),t.YNc(57,SE,2,1,"td",27),t.BQk(),t.ynx(58,32),t.YNc(59,wE,3,3,"th",26),t.YNc(60,UE,2,1,"td",27),t.BQk(),t.ynx(61,33),t.YNc(62,LE,3,3,"th",34),t.YNc(63,DE,9,3,"td",27),t.BQk(),t.YNc(64,NE,1,0,"tr",35),t.YNc(65,EE,1,0,"tr",36),t.qZA(),t.ynx(66),t.TgZ(67,"mat-paginator",37),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,17,"Surveyors")," "),t.xp6(6),t.hij(" ",t.lcZ(11,19,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,21,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,23,"Surveyors")),t.xp6(10),t.hij("",t.lcZ(27,25,"Surveyor_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,27,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(31,OE)),t.xp6(3),t.Q6J("isLoading",o.isLoading),t.xp6(4),t.hij("",t.lcZ(37,29,"Add_New_Surveyor")," "),t.xp6(6),t.Q6J("dataSource",o.data),t.xp6(22),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})();const kE=["chart"],ME=["calendar"];function RE(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",68),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).updateFilterOptions(n)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.key)}}function PE(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index;return t.oxw(2).updateFilterOptions(n)}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.key)}}function FE(i,a){if(1&i&&(t.TgZ(0,"div",65),t.YNc(1,RE,2,1,"button",66),t.YNc(2,PE,2,1,"button",67),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isSelected),t.xp6(1),t.Q6J("ngIf",!e.isSelected)}}function IE(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project")," "))}function YE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.projectCode)}}function JE(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Project")," "))}function QE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.projectName)}}function BE(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site_Code")," "))}function HE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.siteCode)}}function VE(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Site")," "))}function $E(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.siteName)}}function GE(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Shift")," "))}function WE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.shiftCode)}}function zE(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Name")," "))}function XE(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.employeeName)}}function KE(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ID")," "))}function t8(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.employeeNumber)}}function e8(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Punch In")," "))}function o8(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.inTime.substring(0,5))}}function i8(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Punch Out")," "))}function n8(i,a){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(null==e?null:e.outTime.substring(0,5))}}function a8(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Arrive")," "))}function s8(i,a){1&i&&t._UZ(0,"img",73)}function r8(i,a){1&i&&t._UZ(0,"img",74)}function l8(i,a){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,s8,1,0,"img",71),t.YNc(2,r8,1,0,"ng-template",null,72,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isLate)&&(null==e?null:e.isReported))("ngIfElse",o)}}function c8(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Late")," "))}function p8(i,a){1&i&&t._UZ(0,"img",73)}function u8(i,a){1&i&&t._UZ(0,"img",74)}function d8(i,a){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,p8,1,0,"img",71),t.YNc(2,u8,1,0,"ng-template",null,72,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",(null==e?null:e.isLate)&&(null==e?null:e.isReported))("ngIfElse",o)}}function m8(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Current Geofense")," "))}function _8(i,a){1&i&&t._UZ(0,"img",73)}function g8(i,a){1&i&&t._UZ(0,"img",74)}function h8(i,a){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,_8,1,0,"img",71),t.YNc(2,g8,1,0,"ng-template",null,72,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!(null!=e&&e.isGeofenseOut)&&(null==e?null:e.isReported))("ngIfElse",o)}}function f8(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Out Of Geofense")," "))}function Z8(i,a){if(1&i&&(t.TgZ(0,"td"),t.TgZ(1,"span",75),t._uU(2),t.qZA(),t.qZA()),2&i){const e=a.$implicit;t.xp6(2),t.Oqu(null==e?null:e.geofenseOutCount)}}function C8(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Over time")," "))}function A8(i,a){1&i&&t._UZ(0,"img",73)}function T8(i,a){1&i&&t._UZ(0,"img",74)}function v8(i,a){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,A8,1,0,"img",71),t.YNc(2,T8,1,0,"ng-template",null,72,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf","OT"==(null==e?null:e.attendance))("ngIfElse",o)}}function x8(i,a){1&i&&(t.TgZ(0,"th",70),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Break")," "))}function q8(i,a){1&i&&t._UZ(0,"img",73)}function b8(i,a){1&i&&t._UZ(0,"img",74)}function y8(i,a){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,q8,1,0,"img",71),t.YNc(2,b8,1,0,"ng-template",null,72,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",null==e?null:e.isOnBreak)("ngIfElse",o)}}function S8(i,a){1&i&&(t.TgZ(0,"th"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function w8(i,a){if(1&i&&(t.TgZ(0,"td",76),t.TgZ(1,"span",77),t._UZ(2,"img",78),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("matTooltip",e.translateToolTip("Message"))}}function U8(i,a){1&i&&t._UZ(0,"tr",79)}function L8(i,a){1&i&&t._UZ(0,"tr",80)}function D8(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t._UZ(4,"img",5),t.TgZ(5,"div",6),t.TgZ(6,"div",7),t._uU(7,"Security Guards"),t.qZA(),t.TgZ(8,"b",8),t._uU(9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",9),t.TgZ(11,"div",10),t._uU(12,"Total in the company"),t.qZA(),t._UZ(13,"img",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",2),t.TgZ(15,"div",3),t.TgZ(16,"div",4),t._UZ(17,"img",12),t.TgZ(18,"div",6),t.TgZ(19,"div",7),t._uU(20,"Arrived On Duty"),t.qZA(),t.TgZ(21,"b",8),t._uU(22),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",9),t.TgZ(24,"div",10),t._uU(25,"See All"),t.qZA(),t._UZ(26,"img",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",2),t.TgZ(28,"div",3),t.TgZ(29,"div",4),t._UZ(30,"img",14),t.TgZ(31,"div",6),t.TgZ(32,"div",7),t._uU(33,"Late To Duty"),t.qZA(),t.TgZ(34,"b",8),t._uU(35),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"div",9),t.TgZ(37,"div",10),t._uU(38,"See All"),t.qZA(),t._UZ(39,"img",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",2),t.TgZ(41,"div",3),t.TgZ(42,"div",4),t._UZ(43,"img",15),t.TgZ(44,"div",6),t.TgZ(45,"div",7),t._uU(46,"Not In Duty"),t.qZA(),t.TgZ(47,"b",8),t._uU(48),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"div",9),t.TgZ(50,"div",10),t._uU(51,"See All"),t.qZA(),t._UZ(52,"img",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(53,"div",16),t.TgZ(54,"div",17),t.TgZ(55,"div",18),t.TgZ(56,"div",19),t._UZ(57,"img",20),t.TgZ(58,"div",21),t.TgZ(59,"ng-select",22),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().input.branchCode=n})("change",function(){return t.CHM(e),t.oxw().applyFilter()}),t.qZA(),t._uU(60," \xa0\xa0 "),t.TgZ(61,"ng-select",23),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().input.projectCode=n})("change",function(){return t.CHM(e),t.oxw().applyFilter()}),t.qZA(),t._uU(62," \xa0\xa0 "),t.TgZ(63,"ng-select",24),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().input.siteCode=n})("change",function(){return t.CHM(e),t.oxw().applyFilter()}),t.qZA(),t._uU(64," \xa0\xa0 "),t.TgZ(65,"ng-select",25),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().input.employeeNumber=n})("change",function(){return t.CHM(e),t.oxw().applyFilter()}),t.qZA(),t._uU(66," \xa0\xa0 "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(67,"div",26),t.TgZ(68,"div",27),t.TgZ(69,"div",21),t.TgZ(70,"select"),t.TgZ(71,"option",28),t._uU(72,"Daily Records"),t.qZA(),t.TgZ(73,"option",29),t._uU(74,"Jeddah"),t.qZA(),t.TgZ(75,"option",30),t._uU(76,"Riyadh"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(77,"div",31),t.TgZ(78,"div",32),t.TgZ(79,"div",33),t._UZ(80,"img",34),t.TgZ(81,"div",35),t._uU(82,"FILTER"),t.qZA(),t.qZA(),t.TgZ(83,"div",36),t.YNc(84,FE,3,2,"div",37),t.TgZ(85,"div",38),t.TgZ(86,"span",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().enterAutoAttendance()}),t._uU(87,"Auto_Attendance"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(88,"div",40),t.TgZ(89,"table",41),t.NdJ("matSortChange",function(n){return t.CHM(e),t.oxw().onSortOrder(n)}),t.ynx(90,42),t.YNc(91,IE,3,3,"th",43),t.YNc(92,YE,2,1,"td",44),t.BQk(),t.ynx(93,45),t.YNc(94,JE,3,3,"th",43),t.YNc(95,QE,2,1,"td",44),t.BQk(),t.ynx(96,46),t.YNc(97,BE,3,3,"th",43),t.YNc(98,HE,2,1,"td",44),t.BQk(),t.ynx(99,47),t.YNc(100,VE,3,3,"th",43),t.YNc(101,$E,2,1,"td",44),t.BQk(),t.ynx(102,48),t.YNc(103,GE,3,3,"th",43),t.YNc(104,WE,2,1,"td",44),t.BQk(),t.ynx(105,49),t.YNc(106,zE,3,3,"th",43),t.YNc(107,XE,2,1,"td",44),t.BQk(),t.ynx(108,50),t.YNc(109,KE,3,3,"th",43),t.YNc(110,t8,2,1,"td",44),t.BQk(),t.ynx(111,51),t.YNc(112,e8,3,3,"th",43),t.YNc(113,o8,2,1,"td",44),t.BQk(),t.ynx(114,52),t.YNc(115,i8,3,3,"th",43),t.YNc(116,n8,2,1,"td",44),t.BQk(),t.ynx(117,53),t.YNc(118,a8,3,3,"th",43),t.YNc(119,l8,4,2,"td",44),t.BQk(),t.ynx(120,54),t.YNc(121,c8,3,3,"th",43),t.YNc(122,d8,4,2,"td",44),t.BQk(),t.ynx(123,55),t.YNc(124,m8,3,3,"th",43),t.YNc(125,h8,4,2,"td",44),t.BQk(),t.ynx(126,56),t.YNc(127,f8,3,3,"th",43),t.YNc(128,Z8,3,1,"td",44),t.BQk(),t.ynx(129,57),t.YNc(130,C8,3,3,"th",43),t.YNc(131,v8,4,2,"td",44),t.BQk(),t.ynx(132,58),t.YNc(133,x8,3,3,"th",43),t.YNc(134,y8,4,2,"td",44),t.BQk(),t.ynx(135,59),t.YNc(136,S8,3,3,"th",60),t.YNc(137,w8,3,1,"td",61),t.BQk(),t.YNc(138,U8,1,0,"tr",62),t.YNc(139,L8,1,0,"tr",63),t.qZA(),t.TgZ(140,"mat-paginator",64),t.NdJ("page",function(n){return t.CHM(e),t.oxw().onPageSwitch(n)}),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(9),t.Oqu(null==e.oprDashboard?null:e.oprDashboard.totalEmpCount),t.xp6(13),t.hij(" ",(null==e.oprDashboard?null:e.oprDashboard.reportedEmpCount)-(null==e.oprDashboard?null:e.oprDashboard.lateArrivalsCount),""),t.xp6(13),t.Oqu(null==e.oprDashboard?null:e.oprDashboard.lateArrivalsCount),t.xp6(13),t.hij(" ",null==e.oprDashboard?null:e.oprDashboard.notReportedEmpCount,""),t.xp6(11),t.Q6J("items",e.citySelectionList)("ngModel",e.input.branchCode),t.xp6(2),t.Q6J("items",e.projectsSelectionList)("ngModel",e.input.projectCode),t.xp6(2),t.Q6J("items",e.sitesSelectionList)("ngModel",e.input.siteCode),t.xp6(2),t.Q6J("items",e.employeesSelectionList)("ngModel",e.input.employeeNumber),t.xp6(19),t.Q6J("ngForOf",e.filterOptions),t.xp6(5),t.Q6J("dataSource",e.attendanceData),t.xp6(49),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(1),t.Q6J("length",e.totalItemsCount)("pageSize",e.pageSize)("pageSizeOptions",e.pageService.selectItemsPerPage)}}let Ao=(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m,h,C,A){super(c),this.datePipe=e,this.fb=o,this.http=n,this.router=s,this.apiService=r,this.authService=c,this.notifyService=p,this.utilService=u,this.validationService=d,this.dialog=m,this.oprService=h,this.pageService=C,this.translate=A,this.isArab=!1,this.isLoadSchoolDashBoard=!1,this.isLoading=!1,this.sortingOrder="id desc",this.displayedColumns=["projectCode","projectName","siteCode","siteName","employeeNumber","employeeName","shiftCode","inTime","outTime","late","isGeofenseOut","geofenseOutCount","overtime","isOnBreak","Actions"],this.oprDashboard={notReportedEmpCount:1,totalEmpCount:1,reportedEmpCount:1},this.pageNumber=0,this.pageSize=10,this.isShowDonut=!1,this.date=new Date("2022-11-14"),this.filterOptions=[{key:"late",isSelected:!1}],this.input={pageNumber:0,pageSize:10,branchCode:"",siteCode:"",projectCode:"",employeeNumber:"",filterOptions:this.filterOptions.slice()},this.citySelectionList=[],this.projectsSelectionList=[],this.sitesSelectionList=[],this.employeesSelectionList=[]}ngOnInit(){this.isArab=this.utilService.isArabic(),this.loadFilterOptions(),this.loadCitiesList(),this.loadInitialData()}loadInitialData(){this.totalItemsCount=0,this.loadList(0)}resetFilter(){this.totalItemsCount=0,this.oprDashboard=null,this.input={pageNumber:0,pageSize:10},this.loadList(0)}loadList(e){this.isLoading=!0,this.pageService.change({pageIndex:e,pageSize:this.pageSize,previousPageIndex:e-1,length:this.totalItemsCount}),this.input.pageNumber=e,this.input.filterOptions=this.filterOptions,this.apiService.post("OperationsDashboard/getOpeartionsDashboardByFilter",this.input).subscribe(o=>{o&&(this.oprDashboard=o,this.oprDashboard.todayAttData=[],this.oprDashboard.todayAttData.push(o.totalEmpCount),this.oprDashboard.todayAttData.push(o.reportedEmpCount),this.oprDashboard.todayAttData.push(o.lateArrivalsCount),this.oprDashboard.todayAttData.push(o.notReportedEmpCount),this.oprDashboard.todayAttData.push(o.shiftsNotAssignedCount),this.oprDashboard.todayAttData.push(o.leavesCount),this.attendanceData=new _.by(o.employeeAttendance),this.totalItemsCount=o.totalItemsCount,this.projectsSelectionList=o.projectsSelectionList,this.sitesSelectionList=o.sitesSelectionList,this.employeesSelectionList=o.employeesSelectionList,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.chartOptions1={series:this.oprDashboard.todayAttData,chart:{type:"donut",height:150,width:280},labels:["Total Employees","Reported Employees","Late Arrivals Count","Not Reported Employees","Shifts Not Assigned","Employees On Leave"],responsive:[{breakpoint:480,options:{chart:{width:500},legend:{position:"bottom"}}}]},this.isShowDonut=!0)})}onSortOrder(e){this.totalItemsCount=0,this.pageService.change({pageSize:this.pageSize,pageIndex:0,previousPageIndex:-1,length:0}),this.sortingOrder=e.active+" "+e.direction,this.input.sortingOrder=this.sortingOrder,this.loadList(0)}onPageSwitch(e){this.pageService.change(e),this.pageSize=e.pageSize,this.input.pageSize=e.pageSize,this.loadList(e.pageIndex)}applyFilter(){this.input.filterOptions=this.filterOptions,this.loadList(0)}translateToolTip(e){return`${this.translate.instant(e)}`}loadCitiesList(){this.apiService.getall("Branch/getBranchSelectListForUser").subscribe(e=>{this.citySelectionList=e,this.citySelectionList.forEach(o=>{o.lable=o.value+"-"+o.text})})}updateFilterOptions(e){this.filterOptions[e].isSelected=!this.filterOptions[e].isSelected,this.pageService.change({pageSize:this.pageSize,pageIndex:0,previousPageIndex:-1,length:0}),this.loadList(0)}loadFilterOptions(){this.apiService.getall("OperationsDashboard/getFilterOptions").subscribe(e=>{this.filterOptions=e})}enterAutoAttendance(){this.isLoading=!0;let e=this.oprDashboard.employeeAttendance;e.filter(o=>0==o.isReported),e.length>0?this.apiService.post("EmployeesAttendance/EnterAutoAttendanceForAllProjectSites",e).subscribe(o=>{o&&(this.utilService.OkMessage(),this.loadInitialData())},o=>{console.error(o),this.utilService.ShowApiErrorMessage(o)}):this.notifyService.showWarning("No_Updates_Found")}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(f.uU),t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(W.f),t.Y36(V.N),t.Y36(Z.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-test-example"]],viewQuery:function(e,o){if(1&e&&(t.Gf(kE,5),t.Gf(ME,5),t.Gf(j.NW,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.chart=n.first),t.iGM(n=t.CRH())&&(o.calendar=n.first),t.iGM(n=t.CRH())&&(o.paginator=n.first)}},features:[t._Bn([f.uU]),t.qOj],decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-md-3"],[1,"frame-parent15"],[1,"group-parent5"],["alt","","src","../../assets/dashboard/dashboard_images/group-94.svg",1,"frame-child37"],[1,"security-guards-parent"],[1,"security-guards"],[1,"b11"],[1,"total-in-the-company-parent"],[1,"total-in-the"],["alt","","src","../../assets/dashboard/dashboard_images/vector5.svg",1,"vector-icon28"],["alt","","src","../../assets/dashboard/dashboard_images/group-95.svg",1,"frame-child37"],["alt","","src","../../assets/dashboard/dashboard_images/vector9.svg",1,"vector-icon28"],["alt","","src","../../assets/dashboard/dashboard_images/group-96.svg",1,"frame-child37"],["alt","","src","../../assets/dashboard/dashboard_images/group-97.svg",1,"frame-child37"],[1,"col-md-10"],[1,"dashboard-child"],[1,"frame-parent19"],[1,"svgexport-17-23-1-group"],["alt","","src","../../assets/dashboard/dashboard_images/svgexport17-23-11.svg",1,"svgexport-17-23-11"],[1,"city"],["placeholder","City","bindLabel","lable","bindValue","value",2,"width","150px",3,"items","ngModel","ngModelChange","change"],["placeholder","Project","bindLabel","textTwo","bindValue","value",2,"width","250px",3,"items","ngModel","ngModelChange","change"],["placeholder","Site","bindLabel","textTwo","bindValue","value",2,"width","250px",3,"items","ngModel","ngModelChange","change"],["placeholder","Employee","bindLabel","textTwo","bindValue","value",2,"width","250px",3,"items","ngModel","ngModelChange","change"],[1,"col-md-2"],[1,"daily-records"],["value",""],["value","Jeddah"],["value","Riyadh"],[1,"col-md-12",2,"padding","0px 0px 0px 0px"],[1,"filter-parent",2,"padding","0px 0px 0px 0px"],[1,"svgexport-17-24-1-group",2,"padding","0px 0px 0px 0px"],["alt","","src","../../assets/dashboard/dashboard_images/svgexport17-24-11.svg",1,"svgexport-17-24-11"],[1,"filter2",2,"padding","0px 0px 0px 0px"],[1,"row",2,"padding","0px 0px 0px 0px"],["class","card-body btn-list","style","padding: 0px 2px 0px 2px; text-align: left; font-size: smaller",4,"ngFor","ngForOf"],["hidden","",1,"card-body","btn-list"],[1,"btn","btn-success",3,"click"],["id","AttendanceData",1,"col-md-12",2,"padding","0px 0px 0px 0px"],["mat-table","","matSort","","border","1",1,"table-responsive",3,"dataSource","matSortChange"],["matColumnDef","projectCode"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","projectName"],["matColumnDef","siteCode"],["matColumnDef","siteName"],["matColumnDef","shiftCode"],["matColumnDef","employeeName"],["matColumnDef","employeeNumber"],["matColumnDef","inTime"],["matColumnDef","outTime"],["matColumnDef","arrive"],["matColumnDef","late"],["matColumnDef","isGeofenseOut"],["matColumnDef","geofenseOutCount"],["matColumnDef","overtime"],["matColumnDef","isOnBreak"],["matColumnDef","Actions","stickyEnd",""],[4,"matHeaderCellDef"],["class","clickaction clickicons",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[1,"card-body","btn-list",2,"padding","0px 2px 0px 2px","text-align","left","font-size","smaller"],["type","button","class","btn waves-effect waves-light btn-rounded btn-outline-success","style","padding:0px 5px 0px 5px",3,"click",4,"ngIf"],["type","button","class","btn waves-effect waves-light btn-rounded btn-outline-secondary","style","padding: 0px 5px 0px 5px",3,"click",4,"ngIf"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-success",2,"padding","0px 5px 0px 5px",3,"click"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-secondary",2,"padding","0px 5px 0px 5px",3,"click"],["mat-sort-header",""],["class","svgexport-17-33-41","alt","","src","../../assets/dashboard/dashboard_images/svgexport17-33-41.svg",4,"ngIf","ngIfElse"],["inActive",""],["alt","","src","../../assets/dashboard/dashboard_images/svgexport17-33-41.svg",1,"svgexport-17-33-41"],["alt","","src","../../assets/dashboard/dashboard_images/svgexport17-31-21.svg",1,"svgexport-17-31-21"],[1,"btn","btn-circle","bg-danger","font-bold",2,"height","fit-content","color","white"],[1,"clickaction","clickicons"],[3,"matTooltip"],["alt","","src","../../assets/dashboard/dashboard_images/svgexport17-30-11.svg",1,"svgexport-17-30-11"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&t.YNc(0,D8,141,20,"div",0),2&e&&t.Q6J("ngIf",o.isShowDonut)},directives:[f.O5,Dt.w9,l.JJ,l.On,l.YN,l.Kr,f.sg,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,v.nU,rt.gM,_.XQ,_.Gk],pipes:[Z.X$],styles:["table.table-responsive[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\n          font-size: smaller;\n          text-align: center;\n        }",".card.border-right[_ngcontent-%COMP%] {\n      width: 500px;\n      display: table;\n      padding: 3%;\n      margin: 2%;\n    }\n\n    .card-body[_ngcontent-%COMP%] {\n      flex: 1 1 auto;\n      padding: 10px;\n    }"]}),i})();function N8(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Code")," "))}function E8(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitCode)}}function O8(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Name_English")," "))}function j8(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitNameEng)}}function k8(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Unit_Name_Arab")," "))}function M8(i,a){if(1&i&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Oqu(e.unitNameArb)}}function R8(i,a){1&i&&(t.TgZ(0,"th",35),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Is_Customer_Active")," "))}function P8(i,a){1&i&&(t.TgZ(0,"span",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Active"),""))}function F8(i,a){1&i&&(t.TgZ(0,"span",40),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"InActive"),""))}function I8(i,a){if(1&i&&(t.TgZ(0,"td",36),t.YNc(1,P8,3,3,"span",37),t.YNc(2,F8,3,3,"ng-template",null,38,t.W1O),t.qZA()),2&i){const e=a.$implicit,o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.isActive)("ngIfElse",o)}}function Y8(i,a){1&i&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Actions")))}function J8(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",36),t.TgZ(1,"a",42),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().edit(s.id)}),t._UZ(2,"i",43),t.qZA(),t.qZA()}}function Q8(i,a){1&i&&t._UZ(0,"tr",44)}function B8(i,a){1&i&&t._UZ(0,"tr",45)}const H8=function(){return{standalone:!0}},V8=[{path:"opCustomer",component:vc},{path:"customerSites",component:Oa},{path:"customerSites/viewSites",component:We},{path:"serviceCode",component:_7},{path:"servicesEnquiry",component:_D},{path:"surveyForm",component:dE},{path:"surveyForm/ViewSurveyFormTemplate",component:Co},{path:"surveyFormElements",component:IN},{path:"surveyor",component:jE},{path:"unitCodeForServices",component:(()=>{class i extends q{constructor(e,o,n,s,r,c,p,u,d,m){super(r),this.fb=e,this.http=o,this.router=n,this.apiService=s,this.authService=r,this.notifyService=c,this.utilService=p,this.validationService=u,this.dialog=d,this.pageService=m,this.displayedColumns=["unitCode","unitNameEng","unitNameArb","isActive","Actions"],this.sortingOrder="id desc",this.isLoading=!1,this.searchValue=""}ngOnInit(){this.initialLoading()}initialLoading(){this.loadUnits(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onSortOrder(e){this.totalItemsCount=0,this.sortingOrder=e.active+" "+e.direction,this.loadUnits(0,this.pageService.pageCount,this.searchValue,this.sortingOrder)}onPageSwitch(e){this.pageService.change(e),this.loadUnits(e.pageIndex,e.pageSize,this.searchValue,this.sortingOrder)}loadUnits(e,o,n,s){this.isLoading=!0,this.apiService.getPagination("units/getUnitsPagedList",this.utilService.getQueryString(e,o,n,s)).subscribe(r=>{this.totalItemsCount=0,this.data=new _.by(r.items),this.totalItemsCount=r.totalCount,setTimeout(()=>{this.paginator.pageIndex=e,this.paginator.length=this.totalItemsCount}),this.data.sort=this.sort,this.isLoading=!1},r=>this.utilService.ShowApiErrorMessage(r))}applyFilter(e){e&&(this.searchValue=e,this.loadUnits(0,this.pageService.pageCount,this.searchValue,this.sortingOrder))}openDialogManage(e=0,o,n,s){let r=this.utilService.openCrudDialog(this.dialog,fo);r.componentInstance.dbops=o,r.componentInstance.modalTitle=n,r.componentInstance.modalBtnTitle=s,r.componentInstance.id=e,r.afterClosed().subscribe(c=>{c&&!0===c&&this.initialLoading()})}create(){this.openDialogManage(0,g.O.create,"Adding_New_Unit","Add")}edit(e){this.openDialogManage(e,g.O.update,"Updating_Unit","Update")}delete(e){this.utilService.openDeleteConfirmDialog(this.dialog,ct.a).afterClosed().subscribe(n=>{n&&e>0&&this.apiService.delete("Units",e).subscribe(s=>{this.utilService.OkMessage(),this.ngOnInit()})},n=>this.utilService.ShowApiErrorMessage(n))}submit(){}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(l.qu),t.Y36(E.eN),t.Y36(L.F0),t.Y36(b.s),t.Y36(x._),t.Y36(w.g),t.Y36(y.t),t.Y36(N.R),t.Y36(T.uw),t.Y36(V.N))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-unit-code-for-services"]],viewQuery:function(e,o){if(1&e&&(t.Gf(j.NW,7),t.Gf(v.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},features:[t.qOj],decls:62,vars:32,consts:[[1,"page-breadcrumb"],[1,"row"],[1,"col-12","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item","text-muted"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container-fluid"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title","pt6"],[1,"col-md-5","col-lg-5"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup","keydown"],[1,"col-md-7","col-lg-7","text-right"],["data-toggle","modal","data-target","#createnewbranch","href","#",1,"btn","waves-effect","waves-light","btn-rounded","btn-outline-primary",3,"click"],[1,"icon-plus"],[1,"cardtitle-divider"],[1,"table-responsive"],[3,"isLoading"],[1,"mat-elevation-z8"],["mat-table","","matSort","","matSortActive","id","matSortDisableClear","","matSortDirection","desc",1,"table","table-bordered","no-wrap",3,"dataSource","matSortChange"],["matColumnDef","unitCode"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","unitNameEng"],["matColumnDef","unitNameArb"],["matColumnDef","isActive"],["matColumnDef","Actions","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-pill badge-success",4,"ngIf","ngIfElse"],["inActive",""],[1,"badge","badge-pill","badge-success"],[1,"badge","badge-pill","badge-light"],["mat-header-cell",""],[1,"tableicons",3,"click"],[1,"icon-note"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"h3",3),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"nav",5),t.TgZ(8,"ol",6),t.TgZ(9,"li",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"li",7),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"li",8),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"div",9),t.TgZ(19,"div",1),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.TgZ(22,"div",12),t.TgZ(23,"div",1),t.TgZ(24,"div",10),t.TgZ(25,"h4",13),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.qZA(),t.TgZ(28,"div",14),t.TgZ(29,"input",15),t.NdJ("ngModelChange",function(s){return o.searchValue=s})("keyup",function(){return o.applyFilter(o.searchValue)})("keydown",function(){return o.applyFilter(o.searchValue)}),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.TgZ(31,"div",16),t.TgZ(32,"a",17),t.NdJ("click",function(){return o.create()}),t._UZ(33,"i",18),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",19),t.TgZ(37,"div",20),t.TgZ(38,"div",20),t._UZ(39,"spinner-loader",21),t.TgZ(40,"div",22),t.ynx(41),t.TgZ(42,"table",23),t.NdJ("matSortChange",function(s){return o.onSortOrder(s)}),t.ynx(43,24),t.YNc(44,N8,3,3,"th",25),t.YNc(45,E8,2,1,"td",26),t.BQk(),t.ynx(46,27),t.YNc(47,O8,3,3,"th",25),t.YNc(48,j8,2,1,"td",26),t.BQk(),t.ynx(49,28),t.YNc(50,k8,3,3,"th",25),t.YNc(51,M8,2,1,"td",26),t.BQk(),t.ynx(52,29),t.YNc(53,R8,3,3,"th",25),t.YNc(54,I8,4,2,"td",26),t.BQk(),t.ynx(55,30),t.YNc(56,Y8,3,3,"th",31),t.YNc(57,J8,3,0,"td",26),t.BQk(),t.YNc(58,Q8,1,0,"tr",32),t.YNc(59,B8,1,0,"tr",33),t.qZA(),t.ynx(60),t.TgZ(61,"mat-paginator",34),t.NdJ("page",function(s){return o.onPageSwitch(s)}),t.qZA(),t.BQk(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,17,"Unit_Code_For_Services")," "),t.xp6(6),t.hij(" ",t.lcZ(11,19,"Operational_Management")," "),t.xp6(3),t.hij(" ",t.lcZ(14,21,"Operations")," "),t.xp6(3),t.Oqu(t.lcZ(17,23,"Unit_Code_For_Services")),t.xp6(10),t.hij("",t.lcZ(27,25,"Unit_Code_For_Services_List")," "),t.xp6(3),t.MGl("placeholder","",t.lcZ(30,27,"Search"),"..."),t.Q6J("ngModel",o.searchValue)("ngModelOptions",t.DdM(31,H8)),t.xp6(5),t.hij("",t.lcZ(35,29,"Add_New_Unit")," "),t.xp6(5),t.Q6J("isLoading",o.isLoading),t.xp6(3),t.Q6J("dataSource",o.data),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("length",o.totalItemsCount)("pageSize",o.pageService.pageCount)("pageSizeOptions",o.pageService.selectItemsPerPage))},directives:[l.Fj,l.JJ,l.On,_t.r,_.BZ,v.YE,_.w1,_.fO,_.Dz,_.as,_.nj,j.NW,_.ge,v.nU,_.ev,f.O5,_.XQ,_.Gk],pipes:[Z.X$],encapsulation:2}),i})()},{path:"serviceUnitMappings",component:PL},{path:"serviceEnquiryForms",component:TL},{path:"serviceEnquiryForms/viewEnquiries",component:go},{path:"serviceEnquiryForms/viewEnquiries/PrintSurveyForm",component:Oe},{path:"serviceEnquiryForms/viewEnquiries/EditableSurveyForm",component:Ne},{path:"serviceEnquiryForms/printEnquiryForm",component:ze},{path:"surveyor/viewEnquiriesBySurveyorCode",component:cr},{path:"surveyor/viewEnquiriesBySurveyorCode/PrintSurveyForm",component:Oe},{path:"surveyor/viewEnquiriesBySurveyorCode/EditableSurveyForm",component:Ne},{path:"employee",component:ws},{path:"employeePrimarySiteLogs",component:Zs},{path:"projects",component:Vy},{path:"projects2",component:Jw},{path:"shiftMaster",component:BD},{path:"payrollGroup",component:Np},{path:"shiftToSiteMap",component:WD},{path:"monthlyRoaster",component:yl},{path:"attendance",component:So},{path:"skillset",component:mN},{path:"materialequipment",component:ul},{path:"operationexpensehead",component:Ic},{path:"logisticsandvehicle",component:$r},{path:"projectBudgetCosting",component:r3},{path:"authorities",component:Qi},{path:"test",component:Ao},{path:"oprDashBoard",component:Yc},{path:"existingProjects",component:Sr},{path:"addResourceRequests",component:hd},{path:"transferEmployeeRequests",component:zh},{path:"removeResourceRequests",component:V1},{path:"replaceEmployeeRequests",component:Ah},{path:"pvOpenCloseRequests",component:T1},{path:"reportsProjectSitesList",component:OU},{path:"reportsProjectsCountMatrix",component:LU},{path:"reportsResourcesOnProject",component:zU},{path:"reportsCountOfSkillsets",component:SU},{path:"reportsAttendanceStatus",component:ZU},{path:"reportCustomerComplaints",component:RU},{path:"reportCustomerVisits",component:YU},{path:"requests",component:Xg},{path:"contractFormTemplates",component:na},{path:"contractFormTemplateElements",component:sn},{path:"tranferWithReplacementReqs",component:Df},{path:"swapEmployeesReqs",component:te},{path:"reasonCodes",component:pU},{path:"test",component:Ao}];let $8=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[L.Bz.forChild(V8)],L.Bz]}),i})();var G8=X(1095),W8=X(7441),z8=X(6205);let X8=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[f.uU],imports:[[$8,Xt.K,vo.m,z8.X,G8.ot,W8.LD,rt.AV,M.FA,gt.lN],f.ez]}),i})()}}]);